(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Kd={exports:{}},ta={},Qd={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=Symbol.for("react.element"),xp=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),Cp=Symbol.for("react.strict_mode"),Ep=Symbol.for("react.profiler"),bp=Symbol.for("react.provider"),jp=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),Pp=Symbol.for("react.memo"),Np=Symbol.for("react.lazy"),qu=Symbol.iterator;function Lp(t){return t===null||typeof t!="object"?null:(t=qu&&t[qu]||t["@@iterator"],typeof t=="function"?t:null)}var Jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yd=Object.assign,Xd={};function _r(t,e,n){this.props=t,this.context=e,this.refs=Xd,this.updater=n||Jd}_r.prototype.isReactComponent={};_r.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zd(){}Zd.prototype=_r.prototype;function Ol(t,e,n){this.props=t,this.context=e,this.refs=Xd,this.updater=n||Jd}var Fl=Ol.prototype=new Zd;Fl.constructor=Ol;Yd(Fl,_r.prototype);Fl.isPureReactComponent=!0;var Wu=Array.isArray,eh=Object.prototype.hasOwnProperty,Dl={current:null},th={key:!0,ref:!0,__self:!0,__source:!0};function nh(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)eh.call(e,r)&&!th.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:bs,type:t,key:i,ref:a,props:s,_owner:Dl.current}}function $p(t,e){return{$$typeof:bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ml(t){return typeof t=="object"&&t!==null&&t.$$typeof===bs}function Ap(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gu=/\/+/g;function ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ap(""+t.key):e.toString(36)}function di(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bs:case xp:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+ba(a,0):r,Wu(s)?(n="",t!=null&&(n=t.replace(Gu,"$&/")+"/"),di(s,e,n,"",function(u){return u})):s!=null&&(Ml(s)&&(s=$p(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Gu,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Wu(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+ba(i,o);a+=di(i,e,n,l,s)}else if(l=Lp(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+ba(i,o++),a+=di(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ms(t,e,n){if(t==null)return t;var r=[],s=0;return di(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ip(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},hi={transition:null},Op={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:hi,ReactCurrentOwner:Dl};function rh(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Ms,forEach:function(t,e,n){Ms(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ms(t,function(){e++}),e},toArray:function(t){return Ms(t,function(e){return e})||[]},only:function(t){if(!Ml(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=_r;B.Fragment=kp;B.Profiler=Ep;B.PureComponent=Ol;B.StrictMode=Cp;B.Suspense=Tp;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Op;B.act=rh;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yd({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Dl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)eh.call(e,l)&&!th.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:bs,type:t.type,key:s,ref:i,props:r,_owner:a}};B.createContext=function(t){return t={$$typeof:jp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bp,_context:t},t.Consumer=t};B.createElement=nh;B.createFactory=function(t){var e=nh.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:Rp,render:t}};B.isValidElement=Ml;B.lazy=function(t){return{$$typeof:Np,_payload:{_status:-1,_result:t},_init:Ip}};B.memo=function(t,e){return{$$typeof:Pp,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=hi.transition;hi.transition={};try{t()}finally{hi.transition=e}};B.unstable_act=rh;B.useCallback=function(t,e){return je.current.useCallback(t,e)};B.useContext=function(t){return je.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return je.current.useDeferredValue(t)};B.useEffect=function(t,e){return je.current.useEffect(t,e)};B.useId=function(){return je.current.useId()};B.useImperativeHandle=function(t,e,n){return je.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return je.current.useMemo(t,e)};B.useReducer=function(t,e,n){return je.current.useReducer(t,e,n)};B.useRef=function(t){return je.current.useRef(t)};B.useState=function(t){return je.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return je.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return je.current.useTransition()};B.version="18.3.1";Qd.exports=B;var S=Qd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=S,Dp=Symbol.for("react.element"),Mp=Symbol.for("react.fragment"),Up=Object.prototype.hasOwnProperty,zp=Fp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vp={key:!0,ref:!0,__self:!0,__source:!0};function sh(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Up.call(e,r)&&!Vp.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Dp,type:t,key:i,ref:a,props:s,_owner:zp.current}}ta.Fragment=Mp;ta.jsx=sh;ta.jsxs=sh;Kd.exports=ta;var d=Kd.exports,wo={},ih={exports:{}},ze={},ah={exports:{}},oh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,N){var $=j.length;j.push(N);e:for(;0<$;){var F=$-1>>>1,G=j[F];if(0<s(G,N))j[F]=N,j[$]=G,$=F;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var N=j[0],$=j.pop();if($!==N){j[0]=$;e:for(var F=0,G=j.length,et=G>>>1;F<et;){var He=2*(F+1)-1,Mt=j[He],kt=He+1,Ds=j[kt];if(0>s(Mt,$))kt<G&&0>s(Ds,Mt)?(j[F]=Ds,j[kt]=$,F=kt):(j[F]=Mt,j[He]=$,F=He);else if(kt<G&&0>s(Ds,$))j[F]=Ds,j[kt]=$,F=kt;else break e}}return N}function s(j,N){var $=j.sortIndex-N.sortIndex;return $!==0?$:j.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,f=3,g=!1,p=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=j)r(u),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(u)}}function x(j){if(w=!1,y(j),!p)if(n(l)!==null)p=!0,he(k);else{var N=n(u);N!==null&&O(x,N.startTime-j)}}function k(j,N){p=!1,w&&(w=!1,v(b),b=-1),g=!0;var $=f;try{for(y(N),h=n(l);h!==null&&(!(h.expirationTime>N)||j&&!z());){var F=h.callback;if(typeof F=="function"){h.callback=null,f=h.priorityLevel;var G=F(h.expirationTime<=N);N=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),y(N)}else r(l);h=n(l)}if(h!==null)var et=!0;else{var He=n(u);He!==null&&O(x,He.startTime-N),et=!1}return et}finally{h=null,f=$,g=!1}}var C=!1,E=null,b=-1,P=5,T=-1;function z(){return!(t.unstable_now()-T<P)}function D(){if(E!==null){var j=t.unstable_now();T=j;var N=!0;try{N=E(!0,j)}finally{N?H():(C=!1,E=null)}}else C=!1}var H;if(typeof m=="function")H=function(){m(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,xt=oe.port2;oe.port1.onmessage=D,H=function(){xt.postMessage(null)}}else H=function(){_(D,0)};function he(j){E=j,C||(C=!0,H())}function O(j,N){b=_(function(){j(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,he(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var $=f;f=N;try{return j()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,N){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=f;f=j;try{return N()}finally{f=$}},t.unstable_scheduleCallback=function(j,N,$){var F=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?F+$:F):$=F,j){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=$+G,j={id:c++,callback:N,priorityLevel:j,startTime:$,expirationTime:G,sortIndex:-1},$>F?(j.sortIndex=$,e(u,j),n(l)===null&&j===n(u)&&(w?(v(b),b=-1):w=!0,O(x,$-F))):(j.sortIndex=G,e(l,j),p||g||(p=!0,he(k))),j},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(j){var N=f;return function(){var $=f;f=N;try{return j.apply(this,arguments)}finally{f=$}}}})(oh);ah.exports=oh;var Bp=ah.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=S,Me=Bp;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lh=new Set,is={};function An(t,e){fr(t,e),fr(t+"Capture",e)}function fr(t,e){for(is[t]=e,t=0;t<e.length;t++)lh.add(e[t])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=Object.prototype.hasOwnProperty,qp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ku={},Qu={};function Wp(t){return So.call(Qu,t)?!0:So.call(Ku,t)?!1:qp.test(t)?Qu[t]=!0:(Ku[t]=!0,!1)}function Gp(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kp(t,e,n,r){if(e===null||typeof e>"u"||Gp(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Re(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ve[t]=new Re(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ve[e]=new Re(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ve[t]=new Re(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ve[t]=new Re(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ve[t]=new Re(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ve[t]=new Re(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ve[t]=new Re(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ve[t]=new Re(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ve[t]=new Re(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ul=/[\-:]([a-z])/g;function zl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ul,zl);ve[e]=new Re(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ul,zl);ve[e]=new Re(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ul,zl);ve[e]=new Re(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ve[t]=new Re(t,1,!1,t.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ve[t]=new Re(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vl(t,e,n,r){var s=ve.hasOwnProperty(e)?ve[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kp(e,n,s,r)&&(n=null),r||s===null?Wp(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dt=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Us=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),Bl=Symbol.for("react.strict_mode"),_o=Symbol.for("react.profiler"),uh=Symbol.for("react.provider"),ch=Symbol.for("react.context"),Hl=Symbol.for("react.forward_ref"),xo=Symbol.for("react.suspense"),ko=Symbol.for("react.suspense_list"),ql=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),dh=Symbol.for("react.offscreen"),Ju=Symbol.iterator;function Rr(t){return t===null||typeof t!="object"?null:(t=Ju&&t[Ju]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,ja;function Ur(t){if(ja===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ja=e&&e[1]||""}return`
`+ja+t}var Ra=!1;function Ta(t,e){if(!t||Ra)return"";Ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ra=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ur(t):""}function Qp(t){switch(t.tag){case 5:return Ur(t.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return t=Ta(t.type,!1),t;case 11:return t=Ta(t.type.render,!1),t;case 1:return t=Ta(t.type,!0),t;default:return""}}function Co(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jn:return"Fragment";case Qn:return"Portal";case _o:return"Profiler";case Bl:return"StrictMode";case xo:return"Suspense";case ko:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ch:return(t.displayName||"Context")+".Consumer";case uh:return(t._context.displayName||"Context")+".Provider";case Hl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ql:return e=t.displayName||null,e!==null?e:Co(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return Co(t(e))}catch{}}return null}function Jp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Co(e);case 8:return e===Bl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Yp(t){var e=hh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zs(t){t._valueTracker||(t._valueTracker=Yp(t))}function fh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ei(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eo(t,e){var n=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gh(t,e){e=e.checked,e!=null&&Vl(t,"checked",e,!1)}function bo(t,e){gh(t,e);var n=ln(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jo(t,e.type,n):e.hasOwnProperty("defaultValue")&&jo(t,e.type,ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xu(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jo(t,e,n){(e!=="number"||Ei(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zr=Array.isArray;function or(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ro(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(zr(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ln(n)}}function ph(t,e){var n=ln(e.value),r=ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ec(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function To(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vs,vh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function as(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xp=["Webkit","ms","Moz","O"];Object.keys(qr).forEach(function(t){Xp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qr[e]=qr[t]})});function yh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qr.hasOwnProperty(t)&&qr[t]?(""+e).trim():e+"px"}function wh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Zp=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(t,e){if(e){if(Zp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function No(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=null;function Wl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $o=null,lr=null,ur=null;function tc(t){if(t=Ts(t)){if(typeof $o!="function")throw Error(R(280));var e=t.stateNode;e&&(e=aa(e),$o(t.stateNode,t.type,e))}}function Sh(t){lr?ur?ur.push(t):ur=[t]:lr=t}function _h(){if(lr){var t=lr,e=ur;if(ur=lr=null,tc(t),e)for(t=0;t<e.length;t++)tc(e[t])}}function xh(t,e){return t(e)}function kh(){}var Pa=!1;function Ch(t,e,n){if(Pa)return t(e,n);Pa=!0;try{return xh(t,e,n)}finally{Pa=!1,(lr!==null||ur!==null)&&(kh(),_h())}}function os(t,e){var n=t.stateNode;if(n===null)return null;var r=aa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Ao=!1;if($t)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{Ao=!1}function em(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Wr=!1,bi=null,ji=!1,Io=null,tm={onError:function(t){Wr=!0,bi=t}};function nm(t,e,n,r,s,i,a,o,l){Wr=!1,bi=null,em.apply(tm,arguments)}function rm(t,e,n,r,s,i,a,o,l){if(nm.apply(this,arguments),Wr){if(Wr){var u=bi;Wr=!1,bi=null}else throw Error(R(198));ji||(ji=!0,Io=u)}}function In(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Eh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nc(t){if(In(t)!==t)throw Error(R(188))}function sm(t){var e=t.alternate;if(!e){if(e=In(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return nc(s),t;if(i===r)return nc(s),e;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function bh(t){return t=sm(t),t!==null?jh(t):null}function jh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jh(t);if(e!==null)return e;t=t.sibling}return null}var Rh=Me.unstable_scheduleCallback,rc=Me.unstable_cancelCallback,im=Me.unstable_shouldYield,am=Me.unstable_requestPaint,ie=Me.unstable_now,om=Me.unstable_getCurrentPriorityLevel,Gl=Me.unstable_ImmediatePriority,Th=Me.unstable_UserBlockingPriority,Ri=Me.unstable_NormalPriority,lm=Me.unstable_LowPriority,Ph=Me.unstable_IdlePriority,na=null,vt=null;function um(t){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(na,t,void 0,(t.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:hm,cm=Math.log,dm=Math.LN2;function hm(t){return t>>>=0,t===0?32:31-(cm(t)/dm|0)|0}var Bs=64,Hs=4194304;function Vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ti(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Vr(o):(i&=a,i!==0&&(r=Vr(i)))}else a=n&~s,a!==0?r=Vr(a):i!==0&&(r=Vr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ot(e),s=1<<n,r|=t[n],e&=~s;return r}function fm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ot(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=fm(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Oo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nh(){var t=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),t}function Na(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function js(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ot(e),t[e]=n}function pm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ot(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Kl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ot(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var W=0;function Lh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $h,Ql,Ah,Ih,Oh,Fo=!1,qs=[],Zt=null,en=null,tn=null,ls=new Map,us=new Map,Wt=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(t,e){switch(t){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":ls.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":us.delete(e.pointerId)}}function Pr(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ts(e),e!==null&&Ql(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vm(t,e,n,r,s){switch(e){case"focusin":return Zt=Pr(Zt,t,e,n,r,s),!0;case"dragenter":return en=Pr(en,t,e,n,r,s),!0;case"mouseover":return tn=Pr(tn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ls.set(i,Pr(ls.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,us.set(i,Pr(us.get(i)||null,t,e,n,r,s)),!0}return!1}function Fh(t){var e=kn(t.target);if(e!==null){var n=In(e);if(n!==null){if(e=n.tag,e===13){if(e=Eh(n),e!==null){t.blockedOn=e,Oh(t.priority,function(){Ah(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Do(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lo=r,n.target.dispatchEvent(r),Lo=null}else return e=Ts(n),e!==null&&Ql(e),t.blockedOn=n,!1;e.shift()}return!0}function ic(t,e,n){fi(t)&&n.delete(e)}function ym(){Fo=!1,Zt!==null&&fi(Zt)&&(Zt=null),en!==null&&fi(en)&&(en=null),tn!==null&&fi(tn)&&(tn=null),ls.forEach(ic),us.forEach(ic)}function Nr(t,e){t.blockedOn===e&&(t.blockedOn=null,Fo||(Fo=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,ym)))}function cs(t){function e(s){return Nr(s,t)}if(0<qs.length){Nr(qs[0],t);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zt!==null&&Nr(Zt,t),en!==null&&Nr(en,t),tn!==null&&Nr(tn,t),ls.forEach(e),us.forEach(e),n=0;n<Wt.length;n++)r=Wt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wt.length&&(n=Wt[0],n.blockedOn===null);)Fh(n),n.blockedOn===null&&Wt.shift()}var cr=Dt.ReactCurrentBatchConfig,Pi=!0;function wm(t,e,n,r){var s=W,i=cr.transition;cr.transition=null;try{W=1,Jl(t,e,n,r)}finally{W=s,cr.transition=i}}function Sm(t,e,n,r){var s=W,i=cr.transition;cr.transition=null;try{W=4,Jl(t,e,n,r)}finally{W=s,cr.transition=i}}function Jl(t,e,n,r){if(Pi){var s=Do(t,e,n,r);if(s===null)za(t,e,r,Ni,n),sc(t,r);else if(vm(s,t,e,n,r))r.stopPropagation();else if(sc(t,r),e&4&&-1<mm.indexOf(t)){for(;s!==null;){var i=Ts(s);if(i!==null&&$h(i),i=Do(t,e,n,r),i===null&&za(t,e,r,Ni,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else za(t,e,r,null,n)}}var Ni=null;function Do(t,e,n,r){if(Ni=null,t=Wl(r),t=kn(t),t!==null)if(e=In(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Eh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ni=t,null}function Dh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(om()){case Gl:return 1;case Th:return 4;case Ri:case lm:return 16;case Ph:return 536870912;default:return 16}default:return 16}}var Qt=null,Yl=null,gi=null;function Mh(){if(gi)return gi;var t,e=Yl,n=e.length,r,s="value"in Qt?Qt.value:Qt.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return gi=s.slice(t,1<r?1-r:void 0)}function pi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ws(){return!0}function ac(){return!1}function Ve(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ws:ac,this.isPropagationStopped=ac,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xl=Ve(xr),Rs=re({},xr,{view:0,detail:0}),_m=Ve(Rs),La,$a,Lr,ra=re({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lr&&(Lr&&t.type==="mousemove"?(La=t.screenX-Lr.screenX,$a=t.screenY-Lr.screenY):$a=La=0,Lr=t),La)},movementY:function(t){return"movementY"in t?t.movementY:$a}}),oc=Ve(ra),xm=re({},ra,{dataTransfer:0}),km=Ve(xm),Cm=re({},Rs,{relatedTarget:0}),Aa=Ve(Cm),Em=re({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),bm=Ve(Em),jm=re({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rm=Ve(jm),Tm=re({},xr,{data:0}),lc=Ve(Tm),Pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $m(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lm[t])?!!e[t]:!1}function Zl(){return $m}var Am=re({},Rs,{key:function(t){if(t.key){var e=Pm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(t){return t.type==="keypress"?pi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Im=Ve(Am),Om=re({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uc=Ve(Om),Fm=re({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),Dm=Ve(Fm),Mm=re({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Um=Ve(Mm),zm=re({},ra,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vm=Ve(zm),Bm=[9,13,27,32],eu=$t&&"CompositionEvent"in window,Gr=null;$t&&"documentMode"in document&&(Gr=document.documentMode);var Hm=$t&&"TextEvent"in window&&!Gr,Uh=$t&&(!eu||Gr&&8<Gr&&11>=Gr),cc=" ",dc=!1;function zh(t,e){switch(t){case"keyup":return Bm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function qm(t,e){switch(t){case"compositionend":return Vh(e);case"keypress":return e.which!==32?null:(dc=!0,cc);case"textInput":return t=e.data,t===cc&&dc?null:t;default:return null}}function Wm(t,e){if(Yn)return t==="compositionend"||!eu&&zh(t,e)?(t=Mh(),gi=Yl=Qt=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uh&&e.locale!=="ko"?null:e.data;default:return null}}var Gm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gm[t.type]:e==="textarea"}function Bh(t,e,n,r){Sh(r),e=Li(e,"onChange"),0<e.length&&(n=new Xl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kr=null,ds=null;function Km(t){ef(t,0)}function sa(t){var e=er(t);if(fh(e))return t}function Qm(t,e){if(t==="change")return e}var Hh=!1;if($t){var Ia;if($t){var Oa="oninput"in document;if(!Oa){var fc=document.createElement("div");fc.setAttribute("oninput","return;"),Oa=typeof fc.oninput=="function"}Ia=Oa}else Ia=!1;Hh=Ia&&(!document.documentMode||9<document.documentMode)}function gc(){Kr&&(Kr.detachEvent("onpropertychange",qh),ds=Kr=null)}function qh(t){if(t.propertyName==="value"&&sa(ds)){var e=[];Bh(e,ds,t,Wl(t)),Ch(Km,e)}}function Jm(t,e,n){t==="focusin"?(gc(),Kr=e,ds=n,Kr.attachEvent("onpropertychange",qh)):t==="focusout"&&gc()}function Ym(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sa(ds)}function Xm(t,e){if(t==="click")return sa(e)}function Zm(t,e){if(t==="input"||t==="change")return sa(e)}function ev(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ct=typeof Object.is=="function"?Object.is:ev;function hs(t,e){if(ct(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!So.call(e,s)||!ct(t[s],e[s]))return!1}return!0}function pc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mc(t,e){var n=pc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pc(n)}}function Wh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gh(){for(var t=window,e=Ei();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ei(t.document)}return e}function tu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tv(t){var e=Gh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wh(n.ownerDocument.documentElement,n)){if(r!==null&&tu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=mc(n,i);var a=mc(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nv=$t&&"documentMode"in document&&11>=document.documentMode,Xn=null,Mo=null,Qr=null,Uo=!1;function vc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uo||Xn==null||Xn!==Ei(r)||(r=Xn,"selectionStart"in r&&tu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&hs(Qr,r)||(Qr=r,r=Li(Mo,"onSelect"),0<r.length&&(e=new Xl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xn)))}function Gs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zn={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},Fa={},Kh={};$t&&(Kh=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function ia(t){if(Fa[t])return Fa[t];if(!Zn[t])return t;var e=Zn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Kh)return Fa[t]=e[n];return t}var Qh=ia("animationend"),Jh=ia("animationiteration"),Yh=ia("animationstart"),Xh=ia("transitionend"),Zh=new Map,yc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){Zh.set(t,e),An(e,[t])}for(var Da=0;Da<yc.length;Da++){var Ma=yc[Da],rv=Ma.toLowerCase(),sv=Ma[0].toUpperCase()+Ma.slice(1);dn(rv,"on"+sv)}dn(Qh,"onAnimationEnd");dn(Jh,"onAnimationIteration");dn(Yh,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(Xh,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));An("onBeforeInput",["compositionend","keypress","textInput","paste"]);An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function wc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rm(r,e,void 0,t),t.currentTarget=null}function ef(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;wc(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;wc(s,o,u),i=l}}}if(ji)throw t=Io,ji=!1,Io=null,t}function J(t,e){var n=e[qo];n===void 0&&(n=e[qo]=new Set);var r=t+"__bubble";n.has(r)||(tf(e,t,2,!1),n.add(r))}function Ua(t,e,n){var r=0;e&&(r|=4),tf(n,t,r,e)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[Ks]){t[Ks]=!0,lh.forEach(function(n){n!=="selectionchange"&&(iv.has(n)||Ua(n,!1,t),Ua(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ks]||(e[Ks]=!0,Ua("selectionchange",!1,e))}}function tf(t,e,n,r){switch(Dh(e)){case 1:var s=wm;break;case 4:s=Sm;break;default:s=Jl}n=s.bind(null,e,n,t),s=void 0,!Ao||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function za(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=kn(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}Ch(function(){var u=i,c=Wl(n),h=[];e:{var f=Zh.get(t);if(f!==void 0){var g=Xl,p=t;switch(t){case"keypress":if(pi(n)===0)break e;case"keydown":case"keyup":g=Im;break;case"focusin":p="focus",g=Aa;break;case"focusout":p="blur",g=Aa;break;case"beforeblur":case"afterblur":g=Aa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Dm;break;case Qh:case Jh:case Yh:g=bm;break;case Xh:g=Um;break;case"scroll":g=_m;break;case"wheel":g=Vm;break;case"copy":case"cut":case"paste":g=Rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=uc}var w=(e&4)!==0,_=!w&&t==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var m=u,y;m!==null;){y=m;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,v!==null&&(x=os(m,v),x!=null&&w.push(gs(m,x,y)))),_)break;m=m.return}0<w.length&&(f=new g(f,p,null,n,c),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Lo&&(p=n.relatedTarget||n.fromElement)&&(kn(p)||p[At]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=u,p=p?kn(p):null,p!==null&&(_=In(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=u),g!==p)){if(w=oc,x="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=uc,x="onPointerLeave",v="onPointerEnter",m="pointer"),_=g==null?f:er(g),y=p==null?f:er(p),f=new w(x,m+"leave",g,n,c),f.target=_,f.relatedTarget=y,x=null,kn(c)===u&&(w=new w(v,m+"enter",p,n,c),w.target=y,w.relatedTarget=_,x=w),_=x,g&&p)t:{for(w=g,v=p,m=0,y=w;y;y=Fn(y))m++;for(y=0,x=v;x;x=Fn(x))y++;for(;0<m-y;)w=Fn(w),m--;for(;0<y-m;)v=Fn(v),y--;for(;m--;){if(w===v||v!==null&&w===v.alternate)break t;w=Fn(w),v=Fn(v)}w=null}else w=null;g!==null&&Sc(h,f,g,w,!1),p!==null&&_!==null&&Sc(h,_,p,w,!0)}}e:{if(f=u?er(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=Qm;else if(hc(f))if(Hh)k=Zm;else{k=Ym;var C=Jm}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Xm);if(k&&(k=k(t,u))){Bh(h,k,n,c);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&jo(f,"number",f.value)}switch(C=u?er(u):window,t){case"focusin":(hc(C)||C.contentEditable==="true")&&(Xn=C,Mo=u,Qr=null);break;case"focusout":Qr=Mo=Xn=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,vc(h,n,c);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":vc(h,n,c)}var E;if(eu)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Yn?zh(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Uh&&n.locale!=="ko"&&(Yn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Yn&&(E=Mh()):(Qt=c,Yl="value"in Qt?Qt.value:Qt.textContent,Yn=!0)),C=Li(u,b),0<C.length&&(b=new lc(b,t,null,n,c),h.push({event:b,listeners:C}),E?b.data=E:(E=Vh(n),E!==null&&(b.data=E)))),(E=Hm?qm(t,n):Wm(t,n))&&(u=Li(u,"onBeforeInput"),0<u.length&&(c=new lc("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=E))}ef(h,e)})}function gs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Li(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=os(t,n),i!=null&&r.unshift(gs(t,i,s)),i=os(t,e),i!=null&&r.push(gs(t,i,s))),t=t.return}return r}function Fn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sc(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=os(n,i),l!=null&&a.unshift(gs(n,l,o))):s||(l=os(n,i),l!=null&&a.push(gs(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var av=/\r\n?/g,ov=/\u0000|\uFFFD/g;function _c(t){return(typeof t=="string"?t:""+t).replace(av,`
`).replace(ov,"")}function Qs(t,e,n){if(e=_c(e),_c(t)!==e&&n)throw Error(R(425))}function $i(){}var zo=null,Vo=null;function Bo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ho=typeof setTimeout=="function"?setTimeout:void 0,lv=typeof clearTimeout=="function"?clearTimeout:void 0,xc=typeof Promise=="function"?Promise:void 0,uv=typeof queueMicrotask=="function"?queueMicrotask:typeof xc<"u"?function(t){return xc.resolve(null).then(t).catch(cv)}:Ho;function cv(t){setTimeout(function(){throw t})}function Va(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),cs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);cs(e)}function nn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kr=Math.random().toString(36).slice(2),pt="__reactFiber$"+kr,ps="__reactProps$"+kr,At="__reactContainer$"+kr,qo="__reactEvents$"+kr,dv="__reactListeners$"+kr,hv="__reactHandles$"+kr;function kn(t){var e=t[pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[At]||n[pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kc(t);t!==null;){if(n=t[pt])return n;t=kc(t)}return e}t=n,n=t.parentNode}return null}function Ts(t){return t=t[pt]||t[At],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function er(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function aa(t){return t[ps]||null}var Wo=[],tr=-1;function hn(t){return{current:t}}function Y(t){0>tr||(t.current=Wo[tr],Wo[tr]=null,tr--)}function Q(t,e){tr++,Wo[tr]=t.current,t.current=e}var un={},xe=hn(un),$e=hn(!1),Tn=un;function gr(t,e){var n=t.type.contextTypes;if(!n)return un;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ae(t){return t=t.childContextTypes,t!=null}function Ai(){Y($e),Y(xe)}function Cc(t,e,n){if(xe.current!==un)throw Error(R(168));Q(xe,e),Q($e,n)}function nf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(R(108,Jp(t)||"Unknown",s));return re({},n,r)}function Ii(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||un,Tn=xe.current,Q(xe,t),Q($e,$e.current),!0}function Ec(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=nf(t,e,Tn),r.__reactInternalMemoizedMergedChildContext=t,Y($e),Y(xe),Q(xe,t)):Y($e),Q($e,n)}var Rt=null,oa=!1,Ba=!1;function rf(t){Rt===null?Rt=[t]:Rt.push(t)}function fv(t){oa=!0,rf(t)}function fn(){if(!Ba&&Rt!==null){Ba=!0;var t=0,e=W;try{var n=Rt;for(W=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rt=null,oa=!1}catch(s){throw Rt!==null&&(Rt=Rt.slice(t+1)),Rh(Gl,fn),s}finally{W=e,Ba=!1}}return null}var nr=[],rr=0,Oi=null,Fi=0,Ge=[],Ke=0,Pn=null,Tt=1,Pt="";function wn(t,e){nr[rr++]=Fi,nr[rr++]=Oi,Oi=t,Fi=e}function sf(t,e,n){Ge[Ke++]=Tt,Ge[Ke++]=Pt,Ge[Ke++]=Pn,Pn=t;var r=Tt;t=Pt;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var i=32-ot(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Tt=1<<32-ot(e)+s|n<<s|r,Pt=i+t}else Tt=1<<i|n<<s|r,Pt=t}function nu(t){t.return!==null&&(wn(t,1),sf(t,1,0))}function ru(t){for(;t===Oi;)Oi=nr[--rr],nr[rr]=null,Fi=nr[--rr],nr[rr]=null;for(;t===Pn;)Pn=Ge[--Ke],Ge[Ke]=null,Pt=Ge[--Ke],Ge[Ke]=null,Tt=Ge[--Ke],Ge[Ke]=null}var De=null,Fe=null,Z=!1,at=null;function af(t,e){var n=Qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,De=t,Fe=nn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,De=t,Fe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pn!==null?{id:Tt,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,De=t,Fe=null,!0):!1;default:return!1}}function Go(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ko(t){if(Z){var e=Fe;if(e){var n=e;if(!bc(t,e)){if(Go(t))throw Error(R(418));e=nn(n.nextSibling);var r=De;e&&bc(t,e)?af(r,n):(t.flags=t.flags&-4097|2,Z=!1,De=t)}}else{if(Go(t))throw Error(R(418));t.flags=t.flags&-4097|2,Z=!1,De=t}}}function jc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;De=t}function Js(t){if(t!==De)return!1;if(!Z)return jc(t),Z=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bo(t.type,t.memoizedProps)),e&&(e=Fe)){if(Go(t))throw of(),Error(R(418));for(;e;)af(t,e),e=nn(e.nextSibling)}if(jc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fe=nn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fe=null}}else Fe=De?nn(t.stateNode.nextSibling):null;return!0}function of(){for(var t=Fe;t;)t=nn(t.nextSibling)}function pr(){Fe=De=null,Z=!1}function su(t){at===null?at=[t]:at.push(t)}var gv=Dt.ReactCurrentBatchConfig;function $r(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function Ys(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rc(t){var e=t._init;return e(t._payload)}function lf(t){function e(v,m){if(t){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=on(v,m),v.index=0,v.sibling=null,v}function i(v,m,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,m,y,x){return m===null||m.tag!==6?(m=Ja(y,v.mode,x),m.return=v,m):(m=s(m,y),m.return=v,m)}function l(v,m,y,x){var k=y.type;return k===Jn?c(v,m,y.props.children,x,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ht&&Rc(k)===m.type)?(x=s(m,y.props),x.ref=$r(v,m,y),x.return=v,x):(x=xi(y.type,y.key,y.props,null,v.mode,x),x.ref=$r(v,m,y),x.return=v,x)}function u(v,m,y,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Ya(y,v.mode,x),m.return=v,m):(m=s(m,y.children||[]),m.return=v,m)}function c(v,m,y,x,k){return m===null||m.tag!==7?(m=jn(y,v.mode,x,k),m.return=v,m):(m=s(m,y),m.return=v,m)}function h(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ja(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Us:return y=xi(m.type,m.key,m.props,null,v.mode,y),y.ref=$r(v,null,m),y.return=v,y;case Qn:return m=Ya(m,v.mode,y),m.return=v,m;case Ht:var x=m._init;return h(v,x(m._payload),y)}if(zr(m)||Rr(m))return m=jn(m,v.mode,y,null),m.return=v,m;Ys(v,m)}return null}function f(v,m,y,x){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:o(v,m,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Us:return y.key===k?l(v,m,y,x):null;case Qn:return y.key===k?u(v,m,y,x):null;case Ht:return k=y._init,f(v,m,k(y._payload),x)}if(zr(y)||Rr(y))return k!==null?null:c(v,m,y,x,null);Ys(v,y)}return null}function g(v,m,y,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(y)||null,o(m,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Us:return v=v.get(x.key===null?y:x.key)||null,l(m,v,x,k);case Qn:return v=v.get(x.key===null?y:x.key)||null,u(m,v,x,k);case Ht:var C=x._init;return g(v,m,y,C(x._payload),k)}if(zr(x)||Rr(x))return v=v.get(y)||null,c(m,v,x,k,null);Ys(m,x)}return null}function p(v,m,y,x){for(var k=null,C=null,E=m,b=m=0,P=null;E!==null&&b<y.length;b++){E.index>b?(P=E,E=null):P=E.sibling;var T=f(v,E,y[b],x);if(T===null){E===null&&(E=P);break}t&&E&&T.alternate===null&&e(v,E),m=i(T,m,b),C===null?k=T:C.sibling=T,C=T,E=P}if(b===y.length)return n(v,E),Z&&wn(v,b),k;if(E===null){for(;b<y.length;b++)E=h(v,y[b],x),E!==null&&(m=i(E,m,b),C===null?k=E:C.sibling=E,C=E);return Z&&wn(v,b),k}for(E=r(v,E);b<y.length;b++)P=g(E,v,b,y[b],x),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?b:P.key),m=i(P,m,b),C===null?k=P:C.sibling=P,C=P);return t&&E.forEach(function(z){return e(v,z)}),Z&&wn(v,b),k}function w(v,m,y,x){var k=Rr(y);if(typeof k!="function")throw Error(R(150));if(y=k.call(y),y==null)throw Error(R(151));for(var C=k=null,E=m,b=m=0,P=null,T=y.next();E!==null&&!T.done;b++,T=y.next()){E.index>b?(P=E,E=null):P=E.sibling;var z=f(v,E,T.value,x);if(z===null){E===null&&(E=P);break}t&&E&&z.alternate===null&&e(v,E),m=i(z,m,b),C===null?k=z:C.sibling=z,C=z,E=P}if(T.done)return n(v,E),Z&&wn(v,b),k;if(E===null){for(;!T.done;b++,T=y.next())T=h(v,T.value,x),T!==null&&(m=i(T,m,b),C===null?k=T:C.sibling=T,C=T);return Z&&wn(v,b),k}for(E=r(v,E);!T.done;b++,T=y.next())T=g(E,v,b,T.value,x),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?b:T.key),m=i(T,m,b),C===null?k=T:C.sibling=T,C=T);return t&&E.forEach(function(D){return e(v,D)}),Z&&wn(v,b),k}function _(v,m,y,x){if(typeof y=="object"&&y!==null&&y.type===Jn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Us:e:{for(var k=y.key,C=m;C!==null;){if(C.key===k){if(k=y.type,k===Jn){if(C.tag===7){n(v,C.sibling),m=s(C,y.props.children),m.return=v,v=m;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ht&&Rc(k)===C.type){n(v,C.sibling),m=s(C,y.props),m.ref=$r(v,C,y),m.return=v,v=m;break e}n(v,C);break}else e(v,C);C=C.sibling}y.type===Jn?(m=jn(y.props.children,v.mode,x,y.key),m.return=v,v=m):(x=xi(y.type,y.key,y.props,null,v.mode,x),x.ref=$r(v,m,y),x.return=v,v=x)}return a(v);case Qn:e:{for(C=y.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=s(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=Ya(y,v.mode,x),m.return=v,v=m}return a(v);case Ht:return C=y._init,_(v,m,C(y._payload),x)}if(zr(y))return p(v,m,y,x);if(Rr(y))return w(v,m,y,x);Ys(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=s(m,y),m.return=v,v=m):(n(v,m),m=Ja(y,v.mode,x),m.return=v,v=m),a(v)):n(v,m)}return _}var mr=lf(!0),uf=lf(!1),Di=hn(null),Mi=null,sr=null,iu=null;function au(){iu=sr=Mi=null}function ou(t){var e=Di.current;Y(Di),t._currentValue=e}function Qo(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function dr(t,e){Mi=t,iu=sr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Le=!0),t.firstContext=null)}function Xe(t){var e=t._currentValue;if(iu!==t)if(t={context:t,memoizedValue:e,next:null},sr===null){if(Mi===null)throw Error(R(308));sr=t,Mi.dependencies={lanes:0,firstContext:t}}else sr=sr.next=t;return e}var Cn=null;function lu(t){Cn===null?Cn=[t]:Cn.push(t)}function cf(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,lu(e)):(n.next=s.next,s.next=n),e.interleaved=n,It(t,r)}function It(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qt=!1;function uu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function df(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,It(t,n)}return s=r.interleaved,s===null?(e.next=e,lu(r)):(e.next=s.next,s.next=e),r.interleaved=e,It(t,n)}function mi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kl(t,n)}}function Tc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ui(t,e,n,r){var s=t.updateQueue;qt=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,c=u=l=null,o=i;do{var f=o.lane,g=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,w=o;switch(f=e,g=n,w.tag){case 1:if(p=w.payload,typeof p=="function"){h=p.call(g,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=w.payload,f=typeof p=="function"?p.call(g,h,f):p,f==null)break e;h=re({},h,f);break e;case 2:qt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else g={eventTime:g,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=g,l=h):c=c.next=g,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ln|=a,t.lanes=a,t.memoizedState=h}}function Pc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var Ps={},yt=hn(Ps),ms=hn(Ps),vs=hn(Ps);function En(t){if(t===Ps)throw Error(R(174));return t}function cu(t,e){switch(Q(vs,e),Q(ms,t),Q(yt,Ps),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:To(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=To(e,t)}Y(yt),Q(yt,e)}function vr(){Y(yt),Y(ms),Y(vs)}function hf(t){En(vs.current);var e=En(yt.current),n=To(e,t.type);e!==n&&(Q(ms,t),Q(yt,n))}function du(t){ms.current===t&&(Y(yt),Y(ms))}var ee=hn(0);function zi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ha=[];function hu(){for(var t=0;t<Ha.length;t++)Ha[t]._workInProgressVersionPrimary=null;Ha.length=0}var vi=Dt.ReactCurrentDispatcher,qa=Dt.ReactCurrentBatchConfig,Nn=0,te=null,ce=null,fe=null,Vi=!1,Jr=!1,ys=0,pv=0;function ye(){throw Error(R(321))}function fu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ct(t[n],e[n]))return!1;return!0}function gu(t,e,n,r,s,i){if(Nn=i,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vi.current=t===null||t.memoizedState===null?wv:Sv,t=n(r,s),Jr){i=0;do{if(Jr=!1,ys=0,25<=i)throw Error(R(301));i+=1,fe=ce=null,e.updateQueue=null,vi.current=_v,t=n(r,s)}while(Jr)}if(vi.current=Bi,e=ce!==null&&ce.next!==null,Nn=0,fe=ce=te=null,Vi=!1,e)throw Error(R(300));return t}function pu(){var t=ys!==0;return ys=0,t}function ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?te.memoizedState=fe=t:fe=fe.next=t,fe}function Ze(){if(ce===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=ce.next;var e=fe===null?te.memoizedState:fe.next;if(e!==null)fe=e,ce=t;else{if(t===null)throw Error(R(310));ce=t,t={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},fe===null?te.memoizedState=fe=t:fe=fe.next=t}return fe}function ws(t,e){return typeof e=="function"?e(t):e}function Wa(t){var e=Ze(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=ce,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var c=u.lane;if((Nn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,te.lanes|=c,Ln|=c}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,ct(r,e.memoizedState)||(Le=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,te.lanes|=i,Ln|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ga(t){var e=Ze(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);ct(i,e.memoizedState)||(Le=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ff(){}function gf(t,e){var n=te,r=Ze(),s=e(),i=!ct(r.memoizedState,s);if(i&&(r.memoizedState=s,Le=!0),r=r.queue,mu(vf.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,Ss(9,mf.bind(null,n,r,s,e),void 0,null),ge===null)throw Error(R(349));Nn&30||pf(n,e,s)}return s}function pf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mf(t,e,n,r){e.value=n,e.getSnapshot=r,yf(e)&&wf(t)}function vf(t,e,n){return n(function(){yf(e)&&wf(t)})}function yf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ct(t,n)}catch{return!0}}function wf(t){var e=It(t,1);e!==null&&lt(e,t,1,-1)}function Nc(t){var e=ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:t},e.queue=t,t=t.dispatch=yv.bind(null,te,t),[e.memoizedState,t]}function Ss(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sf(){return Ze().memoizedState}function yi(t,e,n,r){var s=ft();te.flags|=t,s.memoizedState=Ss(1|e,n,void 0,r===void 0?null:r)}function la(t,e,n,r){var s=Ze();r=r===void 0?null:r;var i=void 0;if(ce!==null){var a=ce.memoizedState;if(i=a.destroy,r!==null&&fu(r,a.deps)){s.memoizedState=Ss(e,n,i,r);return}}te.flags|=t,s.memoizedState=Ss(1|e,n,i,r)}function Lc(t,e){return yi(8390656,8,t,e)}function mu(t,e){return la(2048,8,t,e)}function _f(t,e){return la(4,2,t,e)}function xf(t,e){return la(4,4,t,e)}function kf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cf(t,e,n){return n=n!=null?n.concat([t]):null,la(4,4,kf.bind(null,e,t),n)}function vu(){}function Ef(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bf(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jf(t,e,n){return Nn&21?(ct(n,e)||(n=Nh(),te.lanes|=n,Ln|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Le=!0),t.memoizedState=n)}function mv(t,e){var n=W;W=n!==0&&4>n?n:4,t(!0);var r=qa.transition;qa.transition={};try{t(!1),e()}finally{W=n,qa.transition=r}}function Rf(){return Ze().memoizedState}function vv(t,e,n){var r=an(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tf(t))Pf(e,n);else if(n=cf(t,e,n,r),n!==null){var s=be();lt(n,t,r,s),Nf(n,e,r)}}function yv(t,e,n){var r=an(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tf(t))Pf(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,ct(o,a)){var l=e.interleaved;l===null?(s.next=s,lu(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=cf(t,e,s,r),n!==null&&(s=be(),lt(n,t,r,s),Nf(n,e,r))}}function Tf(t){var e=t.alternate;return t===te||e!==null&&e===te}function Pf(t,e){Jr=Vi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kl(t,n)}}var Bi={readContext:Xe,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},wv={readContext:Xe,useCallback:function(t,e){return ft().memoizedState=[t,e===void 0?null:e],t},useContext:Xe,useEffect:Lc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yi(4194308,4,kf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yi(4194308,4,t,e)},useInsertionEffect:function(t,e){return yi(4,2,t,e)},useMemo:function(t,e){var n=ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ft();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vv.bind(null,te,t),[r.memoizedState,t]},useRef:function(t){var e=ft();return t={current:t},e.memoizedState=t},useState:Nc,useDebugValue:vu,useDeferredValue:function(t){return ft().memoizedState=t},useTransition:function(){var t=Nc(!1),e=t[0];return t=mv.bind(null,t[1]),ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=te,s=ft();if(Z){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),ge===null)throw Error(R(349));Nn&30||pf(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Lc(vf.bind(null,r,i,t),[t]),r.flags|=2048,Ss(9,mf.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ft(),e=ge.identifierPrefix;if(Z){var n=Pt,r=Tt;n=(r&~(1<<32-ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sv={readContext:Xe,useCallback:Ef,useContext:Xe,useEffect:mu,useImperativeHandle:Cf,useInsertionEffect:_f,useLayoutEffect:xf,useMemo:bf,useReducer:Wa,useRef:Sf,useState:function(){return Wa(ws)},useDebugValue:vu,useDeferredValue:function(t){var e=Ze();return jf(e,ce.memoizedState,t)},useTransition:function(){var t=Wa(ws)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:ff,useSyncExternalStore:gf,useId:Rf,unstable_isNewReconciler:!1},_v={readContext:Xe,useCallback:Ef,useContext:Xe,useEffect:mu,useImperativeHandle:Cf,useInsertionEffect:_f,useLayoutEffect:xf,useMemo:bf,useReducer:Ga,useRef:Sf,useState:function(){return Ga(ws)},useDebugValue:vu,useDeferredValue:function(t){var e=Ze();return ce===null?e.memoizedState=t:jf(e,ce.memoizedState,t)},useTransition:function(){var t=Ga(ws)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:ff,useSyncExternalStore:gf,useId:Rf,unstable_isNewReconciler:!1};function rt(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jo(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ua={isMounted:function(t){return(t=t._reactInternals)?In(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=be(),s=an(t),i=Nt(r,s);i.payload=e,n!=null&&(i.callback=n),e=rn(t,i,s),e!==null&&(lt(e,t,s,r),mi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=be(),s=an(t),i=Nt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=rn(t,i,s),e!==null&&(lt(e,t,s,r),mi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=be(),r=an(t),s=Nt(n,r);s.tag=2,e!=null&&(s.callback=e),e=rn(t,s,r),e!==null&&(lt(e,t,r,n),mi(e,t,r))}};function $c(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!hs(n,r)||!hs(s,i):!0}function Lf(t,e,n){var r=!1,s=un,i=e.contextType;return typeof i=="object"&&i!==null?i=Xe(i):(s=Ae(e)?Tn:xe.current,r=e.contextTypes,i=(r=r!=null)?gr(t,s):un),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ua,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ac(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ua.enqueueReplaceState(e,e.state,null)}function Yo(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},uu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Xe(i):(i=Ae(e)?Tn:xe.current,s.context=gr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jo(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ua.enqueueReplaceState(s,s.state,null),Ui(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function yr(t,e){try{var n="",r=e;do n+=Qp(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ka(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function $f(t,e,n){n=Nt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qi||(qi=!0,ll=r),Xo(t,e)},n}function Af(t,e,n){n=Nt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xo(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xo(t,e),typeof r!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ic(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ov.bind(null,t,e,n),e.then(t,t))}function Oc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fc(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nt(-1,1),e.tag=2,rn(n,e,1))),n.lanes|=1),t)}var kv=Dt.ReactCurrentOwner,Le=!1;function Ee(t,e,n,r){e.child=t===null?uf(e,null,n,r):mr(e,t.child,n,r)}function Dc(t,e,n,r,s){n=n.render;var i=e.ref;return dr(e,s),r=gu(t,e,n,r,i,s),n=pu(),t!==null&&!Le?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ot(t,e,s)):(Z&&n&&nu(e),e.flags|=1,Ee(t,e,r,s),e.child)}function Mc(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Eu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,If(t,e,i,r,s)):(t=xi(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:hs,n(a,r)&&t.ref===e.ref)return Ot(t,e,s)}return e.flags|=1,t=on(i,r),t.ref=e.ref,t.return=e,e.child=t}function If(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(hs(i,r)&&t.ref===e.ref)if(Le=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Le=!0);else return e.lanes=t.lanes,Ot(t,e,s)}return Zo(t,e,n,r,s)}function Of(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(ar,Oe),Oe|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Q(ar,Oe),Oe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Q(ar,Oe),Oe|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Q(ar,Oe),Oe|=r;return Ee(t,e,s,n),e.child}function Ff(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zo(t,e,n,r,s){var i=Ae(n)?Tn:xe.current;return i=gr(e,i),dr(e,s),n=gu(t,e,n,r,i,s),r=pu(),t!==null&&!Le?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ot(t,e,s)):(Z&&r&&nu(e),e.flags|=1,Ee(t,e,n,s),e.child)}function Uc(t,e,n,r,s){if(Ae(n)){var i=!0;Ii(e)}else i=!1;if(dr(e,s),e.stateNode===null)wi(t,e),Lf(e,n,r),Yo(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Xe(u):(u=Ae(n)?Tn:xe.current,u=gr(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Ac(e,a,r,u),qt=!1;var f=e.memoizedState;a.state=f,Ui(e,r,a,s),l=e.memoizedState,o!==r||f!==l||$e.current||qt?(typeof c=="function"&&(Jo(e,n,c,r),l=e.memoizedState),(o=qt||$c(e,n,o,r,f,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,df(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:rt(e.type,o),a.props=u,h=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xe(l):(l=Ae(n)?Tn:xe.current,l=gr(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&Ac(e,a,r,l),qt=!1,f=e.memoizedState,a.state=f,Ui(e,r,a,s);var p=e.memoizedState;o!==h||f!==p||$e.current||qt?(typeof g=="function"&&(Jo(e,n,g,r),p=e.memoizedState),(u=qt||$c(e,n,u,r,f,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return el(t,e,n,r,i,s)}function el(t,e,n,r,s,i){Ff(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Ec(e,n,!1),Ot(t,e,i);r=e.stateNode,kv.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=mr(e,t.child,null,i),e.child=mr(e,null,o,i)):Ee(t,e,o,i),e.memoizedState=r.state,s&&Ec(e,n,!0),e.child}function Df(t){var e=t.stateNode;e.pendingContext?Cc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cc(t,e.context,!1),cu(t,e.containerInfo)}function zc(t,e,n,r,s){return pr(),su(s),e.flags|=256,Ee(t,e,n,r),e.child}var tl={dehydrated:null,treeContext:null,retryLane:0};function nl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mf(t,e,n){var r=e.pendingProps,s=ee.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Q(ee,s&1),t===null)return Ko(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ha(a,r,0,null),t=jn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nl(n),e.memoizedState=tl,t):yu(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Cv(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=on(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=on(o,i):(i=jn(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?nl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=tl,r}return i=t.child,t=i.sibling,r=on(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yu(t,e){return e=ha({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xs(t,e,n,r){return r!==null&&su(r),mr(e,t.child,null,n),t=yu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cv(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Ka(Error(R(422))),Xs(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ha({mode:"visible",children:r.children},s,0,null),i=jn(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&mr(e,t.child,null,a),e.child.memoizedState=nl(a),e.memoizedState=tl,i);if(!(e.mode&1))return Xs(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(R(419)),r=Ka(i,r,void 0),Xs(t,e,a,r)}if(o=(a&t.childLanes)!==0,Le||o){if(r=ge,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,It(t,s),lt(r,t,s,-1))}return Cu(),r=Ka(Error(R(421))),Xs(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Fv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fe=nn(s.nextSibling),De=e,Z=!0,at=null,t!==null&&(Ge[Ke++]=Tt,Ge[Ke++]=Pt,Ge[Ke++]=Pn,Tt=t.id,Pt=t.overflow,Pn=e),e=yu(e,r.children),e.flags|=4096,e)}function Vc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qo(t.return,e,n)}function Qa(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Uf(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ee(t,e,r.children,n),r=ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vc(t,n,e);else if(t.tag===19)Vc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Q(ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qa(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qa(e,!0,n,null,i);break;case"together":Qa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ln|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=on(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=on(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ev(t,e,n){switch(e.tag){case 3:Df(e),pr();break;case 5:hf(e);break;case 1:Ae(e.type)&&Ii(e);break;case 4:cu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Q(Di,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Q(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?Mf(t,e,n):(Q(ee,ee.current&1),t=Ot(t,e,n),t!==null?t.sibling:null);Q(ee,ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Uf(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(ee,ee.current),r)break;return null;case 22:case 23:return e.lanes=0,Of(t,e,n)}return Ot(t,e,n)}var zf,rl,Vf,Bf;zf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rl=function(){};Vf=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,En(yt.current);var i=null;switch(n){case"input":s=Eo(t,s),r=Eo(t,r),i=[];break;case"select":s=re({},s,{value:void 0}),r=re({},r,{value:void 0}),i=[];break;case"textarea":s=Ro(t,s),r=Ro(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$i)}Po(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(is.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(is.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&J("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Bf=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ar(t,e){if(!Z)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bv(t,e,n){var r=e.pendingProps;switch(ru(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return Ae(e.type)&&Ai(),we(e),null;case 3:return r=e.stateNode,vr(),Y($e),Y(xe),hu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Js(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,at!==null&&(dl(at),at=null))),rl(t,e),we(e),null;case 5:du(e);var s=En(vs.current);if(n=e.type,t!==null&&e.stateNode!=null)Vf(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return we(e),null}if(t=En(yt.current),Js(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pt]=e,r[ps]=i,t=(e.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(s=0;s<Br.length;s++)J(Br[s],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":Yu(r,i),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},J("invalid",r);break;case"textarea":Zu(r,i),J("invalid",r)}Po(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Qs(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Qs(r.textContent,o,t),s=["children",""+o]):is.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&J("scroll",r)}switch(n){case"input":zs(r),Xu(r,i,!0);break;case"textarea":zs(r),ec(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$i)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[pt]=e,t[ps]=r,zf(t,e,!1,!1),e.stateNode=t;e:{switch(a=No(n,r),n){case"dialog":J("cancel",t),J("close",t),s=r;break;case"iframe":case"object":case"embed":J("load",t),s=r;break;case"video":case"audio":for(s=0;s<Br.length;s++)J(Br[s],t);s=r;break;case"source":J("error",t),s=r;break;case"img":case"image":case"link":J("error",t),J("load",t),s=r;break;case"details":J("toggle",t),s=r;break;case"input":Yu(t,r),s=Eo(t,r),J("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=re({},r,{value:void 0}),J("invalid",t);break;case"textarea":Zu(t,r),s=Ro(t,r),J("invalid",t);break;default:s=r}Po(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?wh(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vh(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&as(t,l):typeof l=="number"&&as(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(is.hasOwnProperty(i)?l!=null&&i==="onScroll"&&J("scroll",t):l!=null&&Vl(t,i,l,a))}switch(n){case"input":zs(t),Xu(t,r,!1);break;case"textarea":zs(t),ec(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ln(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?or(t,!!r.multiple,i,!1):r.defaultValue!=null&&or(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)Bf(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=En(vs.current),En(yt.current),Js(e)){if(r=e.stateNode,n=e.memoizedProps,r[pt]=e,(i=r.nodeValue!==n)&&(t=De,t!==null))switch(t.tag){case 3:Qs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qs(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pt]=e,e.stateNode=r}return we(e),null;case 13:if(Y(ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Z&&Fe!==null&&e.mode&1&&!(e.flags&128))of(),pr(),e.flags|=98560,i=!1;else if(i=Js(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[pt]=e}else pr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),i=!1}else at!==null&&(dl(at),at=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?de===0&&(de=3):Cu())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return vr(),rl(t,e),t===null&&fs(e.stateNode.containerInfo),we(e),null;case 10:return ou(e.type._context),we(e),null;case 17:return Ae(e.type)&&Ai(),we(e),null;case 19:if(Y(ee),i=e.memoizedState,i===null)return we(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ar(i,!1);else{if(de!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zi(t),a!==null){for(e.flags|=128,Ar(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Q(ee,ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&ie()>wr&&(e.flags|=128,r=!0,Ar(i,!1),e.lanes=4194304)}else{if(!r)if(t=zi(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ar(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Z)return we(e),null}else 2*ie()-i.renderingStartTime>wr&&n!==1073741824&&(e.flags|=128,r=!0,Ar(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ie(),e.sibling=null,n=ee.current,Q(ee,r?n&1|2:n&1),e):(we(e),null);case 22:case 23:return ku(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oe&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function jv(t,e){switch(ru(e),e.tag){case 1:return Ae(e.type)&&Ai(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vr(),Y($e),Y(xe),hu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return du(e),null;case 13:if(Y(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));pr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(ee),null;case 4:return vr(),null;case 10:return ou(e.type._context),null;case 22:case 23:return ku(),null;case 24:return null;default:return null}}var Zs=!1,_e=!1,Rv=typeof WeakSet=="function"?WeakSet:Set,L=null;function ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(t,e,r)}else n.current=null}function sl(t,e,n){try{n()}catch(r){se(t,e,r)}}var Bc=!1;function Tv(t,e){if(zo=Pi,t=Gh(),tu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===s&&(o=a),f===i&&++c===r&&(l=a),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vo={focusedElem:t,selectionRange:n},Pi=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var w=p.memoizedProps,_=p.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:rt(e.type,w),_);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(x){se(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return p=Bc,Bc=!1,p}function Yr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&sl(e,n,i)}s=s.next}while(s!==r)}}function ca(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function il(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hf(t){var e=t.alternate;e!==null&&(t.alternate=null,Hf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pt],delete e[ps],delete e[qo],delete e[dv],delete e[hv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qf(t){return t.tag===5||t.tag===3||t.tag===4}function Hc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function al(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$i));else if(r!==4&&(t=t.child,t!==null))for(al(t,e,n),t=t.sibling;t!==null;)al(t,e,n),t=t.sibling}function ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ol(t,e,n),t=t.sibling;t!==null;)ol(t,e,n),t=t.sibling}var pe=null,st=!1;function Ut(t,e,n){for(n=n.child;n!==null;)Wf(t,e,n),n=n.sibling}function Wf(t,e,n){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(na,n)}catch{}switch(n.tag){case 5:_e||ir(n,e);case 6:var r=pe,s=st;pe=null,Ut(t,e,n),pe=r,st=s,pe!==null&&(st?(t=pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(st?(t=pe,n=n.stateNode,t.nodeType===8?Va(t.parentNode,n):t.nodeType===1&&Va(t,n),cs(t)):Va(pe,n.stateNode));break;case 4:r=pe,s=st,pe=n.stateNode.containerInfo,st=!0,Ut(t,e,n),pe=r,st=s;break;case 0:case 11:case 14:case 15:if(!_e&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&sl(n,e,a),s=s.next}while(s!==r)}Ut(t,e,n);break;case 1:if(!_e&&(ir(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){se(n,e,o)}Ut(t,e,n);break;case 21:Ut(t,e,n);break;case 22:n.mode&1?(_e=(r=_e)||n.memoizedState!==null,Ut(t,e,n),_e=r):Ut(t,e,n);break;default:Ut(t,e,n)}}function qc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Rv),e.forEach(function(r){var s=Dv.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:pe=o.stateNode,st=!1;break e;case 3:pe=o.stateNode.containerInfo,st=!0;break e;case 4:pe=o.stateNode.containerInfo,st=!0;break e}o=o.return}if(pe===null)throw Error(R(160));Wf(i,a,s),pe=null,st=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){se(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gf(e,t),e=e.sibling}function Gf(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tt(e,t),dt(t),r&4){try{Yr(3,t,t.return),ca(3,t)}catch(w){se(t,t.return,w)}try{Yr(5,t,t.return)}catch(w){se(t,t.return,w)}}break;case 1:tt(e,t),dt(t),r&512&&n!==null&&ir(n,n.return);break;case 5:if(tt(e,t),dt(t),r&512&&n!==null&&ir(n,n.return),t.flags&32){var s=t.stateNode;try{as(s,"")}catch(w){se(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&gh(s,i),No(o,a);var u=No(o,i);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?wh(s,h):c==="dangerouslySetInnerHTML"?vh(s,h):c==="children"?as(s,h):Vl(s,c,h,u)}switch(o){case"input":bo(s,i);break;case"textarea":ph(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?or(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?or(s,!!i.multiple,i.defaultValue,!0):or(s,!!i.multiple,i.multiple?[]:"",!1))}s[ps]=i}catch(w){se(t,t.return,w)}}break;case 6:if(tt(e,t),dt(t),r&4){if(t.stateNode===null)throw Error(R(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){se(t,t.return,w)}}break;case 3:if(tt(e,t),dt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cs(e.containerInfo)}catch(w){se(t,t.return,w)}break;case 4:tt(e,t),dt(t);break;case 13:tt(e,t),dt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_u=ie())),r&4&&qc(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(_e=(u=_e)||c,tt(e,t),_e=u):tt(e,t),dt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(L=t,c=t.child;c!==null;){for(h=L=c;L!==null;){switch(f=L,g=f.child,f.tag){case 0:case 11:case 14:case 15:Yr(4,f,f.return);break;case 1:ir(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(w){se(r,n,w)}}break;case 5:ir(f,f.return);break;case 22:if(f.memoizedState!==null){Gc(h);continue}}g!==null?(g.return=f,L=g):Gc(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=yh("display",a))}catch(w){se(t,t.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){se(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tt(e,t),dt(t),r&4&&qc(t);break;case 21:break;default:tt(e,t),dt(t)}}function dt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qf(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(as(s,""),r.flags&=-33);var i=Hc(t);ol(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Hc(t);al(t,o,a);break;default:throw Error(R(161))}}catch(l){se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pv(t,e,n){L=t,Kf(t)}function Kf(t,e,n){for(var r=(t.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Zs;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||_e;o=Zs;var u=_e;if(Zs=a,(_e=l)&&!u)for(L=s;L!==null;)a=L,l=a.child,a.tag===22&&a.memoizedState!==null?Kc(s):l!==null?(l.return=a,L=l):Kc(s);for(;i!==null;)L=i,Kf(i),i=i.sibling;L=s,Zs=o,_e=u}Wc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):Wc(t)}}function Wc(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_e||ca(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_e)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pc(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pc(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&cs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}_e||e.flags&512&&il(e)}catch(f){se(e,e.return,f)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function Gc(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function Kc(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ca(4,e)}catch(l){se(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){se(e,s,l)}}var i=e.return;try{il(e)}catch(l){se(e,i,l)}break;case 5:var a=e.return;try{il(e)}catch(l){se(e,a,l)}}}catch(l){se(e,e.return,l)}if(e===t){L=null;break}var o=e.sibling;if(o!==null){o.return=e.return,L=o;break}L=e.return}}var Nv=Math.ceil,Hi=Dt.ReactCurrentDispatcher,wu=Dt.ReactCurrentOwner,Je=Dt.ReactCurrentBatchConfig,q=0,ge=null,ae=null,me=0,Oe=0,ar=hn(0),de=0,_s=null,Ln=0,da=0,Su=0,Xr=null,Pe=null,_u=0,wr=1/0,Et=null,qi=!1,ll=null,sn=null,ei=!1,Jt=null,Wi=0,Zr=0,ul=null,Si=-1,_i=0;function be(){return q&6?ie():Si!==-1?Si:Si=ie()}function an(t){return t.mode&1?q&2&&me!==0?me&-me:gv.transition!==null?(_i===0&&(_i=Nh()),_i):(t=W,t!==0||(t=window.event,t=t===void 0?16:Dh(t.type)),t):1}function lt(t,e,n,r){if(50<Zr)throw Zr=0,ul=null,Error(R(185));js(t,n,r),(!(q&2)||t!==ge)&&(t===ge&&(!(q&2)&&(da|=n),de===4&&Gt(t,me)),Ie(t,r),n===1&&q===0&&!(e.mode&1)&&(wr=ie()+500,oa&&fn()))}function Ie(t,e){var n=t.callbackNode;gm(t,e);var r=Ti(t,t===ge?me:0);if(r===0)n!==null&&rc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rc(n),e===1)t.tag===0?fv(Qc.bind(null,t)):rf(Qc.bind(null,t)),uv(function(){!(q&6)&&fn()}),n=null;else{switch(Lh(r)){case 1:n=Gl;break;case 4:n=Th;break;case 16:n=Ri;break;case 536870912:n=Ph;break;default:n=Ri}n=ng(n,Qf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qf(t,e){if(Si=-1,_i=0,q&6)throw Error(R(327));var n=t.callbackNode;if(hr()&&t.callbackNode!==n)return null;var r=Ti(t,t===ge?me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gi(t,r);else{e=r;var s=q;q|=2;var i=Yf();(ge!==t||me!==e)&&(Et=null,wr=ie()+500,bn(t,e));do try{Av();break}catch(o){Jf(t,o)}while(!0);au(),Hi.current=i,q=s,ae!==null?e=0:(ge=null,me=0,e=de)}if(e!==0){if(e===2&&(s=Oo(t),s!==0&&(r=s,e=cl(t,s))),e===1)throw n=_s,bn(t,0),Gt(t,r),Ie(t,ie()),n;if(e===6)Gt(t,r);else{if(s=t.current.alternate,!(r&30)&&!Lv(s)&&(e=Gi(t,r),e===2&&(i=Oo(t),i!==0&&(r=i,e=cl(t,i))),e===1))throw n=_s,bn(t,0),Gt(t,r),Ie(t,ie()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:Sn(t,Pe,Et);break;case 3:if(Gt(t,r),(r&130023424)===r&&(e=_u+500-ie(),10<e)){if(Ti(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){be(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ho(Sn.bind(null,t,Pe,Et),e);break}Sn(t,Pe,Et);break;case 4:if(Gt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ot(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nv(r/1960))-r,10<r){t.timeoutHandle=Ho(Sn.bind(null,t,Pe,Et),r);break}Sn(t,Pe,Et);break;case 5:Sn(t,Pe,Et);break;default:throw Error(R(329))}}}return Ie(t,ie()),t.callbackNode===n?Qf.bind(null,t):null}function cl(t,e){var n=Xr;return t.current.memoizedState.isDehydrated&&(bn(t,e).flags|=256),t=Gi(t,e),t!==2&&(e=Pe,Pe=n,e!==null&&dl(e)),t}function dl(t){Pe===null?Pe=t:Pe.push.apply(Pe,t)}function Lv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ct(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gt(t,e){for(e&=~Su,e&=~da,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ot(e),r=1<<n;t[n]=-1,e&=~r}}function Qc(t){if(q&6)throw Error(R(327));hr();var e=Ti(t,0);if(!(e&1))return Ie(t,ie()),null;var n=Gi(t,e);if(t.tag!==0&&n===2){var r=Oo(t);r!==0&&(e=r,n=cl(t,r))}if(n===1)throw n=_s,bn(t,0),Gt(t,e),Ie(t,ie()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sn(t,Pe,Et),Ie(t,ie()),null}function xu(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(wr=ie()+500,oa&&fn())}}function $n(t){Jt!==null&&Jt.tag===0&&!(q&6)&&hr();var e=q;q|=1;var n=Je.transition,r=W;try{if(Je.transition=null,W=1,t)return t()}finally{W=r,Je.transition=n,q=e,!(q&6)&&fn()}}function ku(){Oe=ar.current,Y(ar)}function bn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lv(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(ru(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ai();break;case 3:vr(),Y($e),Y(xe),hu();break;case 5:du(r);break;case 4:vr();break;case 13:Y(ee);break;case 19:Y(ee);break;case 10:ou(r.type._context);break;case 22:case 23:ku()}n=n.return}if(ge=t,ae=t=on(t.current,null),me=Oe=e,de=0,_s=null,Su=da=Ln=0,Pe=Xr=null,Cn!==null){for(e=0;e<Cn.length;e++)if(n=Cn[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Cn=null}return t}function Jf(t,e){do{var n=ae;try{if(au(),vi.current=Bi,Vi){for(var r=te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vi=!1}if(Nn=0,fe=ce=te=null,Jr=!1,ys=0,wu.current=null,n===null||n.return===null){de=1,_s=e,ae=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=me,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Oc(a);if(g!==null){g.flags&=-257,Fc(g,a,o,i,e),g.mode&1&&Ic(i,u,e),e=g,l=u;var p=e.updateQueue;if(p===null){var w=new Set;w.add(l),e.updateQueue=w}else p.add(l);break e}else{if(!(e&1)){Ic(i,u,e),Cu();break e}l=Error(R(426))}}else if(Z&&o.mode&1){var _=Oc(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Fc(_,a,o,i,e),su(yr(l,o));break e}}i=l=yr(l,o),de!==4&&(de=2),Xr===null?Xr=[i]:Xr.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=$f(i,l,e);Tc(i,v);break e;case 1:o=l;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(sn===null||!sn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Af(i,o,e);Tc(i,x);break e}}i=i.return}while(i!==null)}Zf(n)}catch(k){e=k,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function Yf(){var t=Hi.current;return Hi.current=Bi,t===null?Bi:t}function Cu(){(de===0||de===3||de===2)&&(de=4),ge===null||!(Ln&268435455)&&!(da&268435455)||Gt(ge,me)}function Gi(t,e){var n=q;q|=2;var r=Yf();(ge!==t||me!==e)&&(Et=null,bn(t,e));do try{$v();break}catch(s){Jf(t,s)}while(!0);if(au(),q=n,Hi.current=r,ae!==null)throw Error(R(261));return ge=null,me=0,de}function $v(){for(;ae!==null;)Xf(ae)}function Av(){for(;ae!==null&&!im();)Xf(ae)}function Xf(t){var e=tg(t.alternate,t,Oe);t.memoizedProps=t.pendingProps,e===null?Zf(t):ae=e,wu.current=null}function Zf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jv(n,e),n!==null){n.flags&=32767,ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{de=6,ae=null;return}}else if(n=bv(n,e,Oe),n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);de===0&&(de=5)}function Sn(t,e,n){var r=W,s=Je.transition;try{Je.transition=null,W=1,Iv(t,e,n,r)}finally{Je.transition=s,W=r}return null}function Iv(t,e,n,r){do hr();while(Jt!==null);if(q&6)throw Error(R(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pm(t,i),t===ge&&(ae=ge=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ei||(ei=!0,ng(Ri,function(){return hr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Je.transition,Je.transition=null;var a=W;W=1;var o=q;q|=4,wu.current=null,Tv(t,n),Gf(n,t),tv(Vo),Pi=!!zo,Vo=zo=null,t.current=n,Pv(n),am(),q=o,W=a,Je.transition=i}else t.current=n;if(ei&&(ei=!1,Jt=t,Wi=s),i=t.pendingLanes,i===0&&(sn=null),um(n.stateNode),Ie(t,ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qi)throw qi=!1,t=ll,ll=null,t;return Wi&1&&t.tag!==0&&hr(),i=t.pendingLanes,i&1?t===ul?Zr++:(Zr=0,ul=t):Zr=0,fn(),null}function hr(){if(Jt!==null){var t=Lh(Wi),e=Je.transition,n=W;try{if(Je.transition=null,W=16>t?16:t,Jt===null)var r=!1;else{if(t=Jt,Jt=null,Wi=0,q&6)throw Error(R(331));var s=q;for(q|=4,L=t.current;L!==null;){var i=L,a=i.child;if(L.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(L=u;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:Yr(8,c,i)}var h=c.child;if(h!==null)h.return=c,L=h;else for(;L!==null;){c=L;var f=c.sibling,g=c.return;if(Hf(c),c===u){L=null;break}if(f!==null){f.return=g,L=f;break}L=g}}}var p=i.alternate;if(p!==null){var w=p.child;if(w!==null){p.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}L=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,L=a;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yr(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,L=v;break e}L=i.return}}var m=t.current;for(L=m;L!==null;){a=L;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,L=y;else e:for(a=m;L!==null;){if(o=L,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ca(9,o)}}catch(k){se(o,o.return,k)}if(o===a){L=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,L=x;break e}L=o.return}}if(q=s,fn(),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(na,t)}catch{}r=!0}return r}finally{W=n,Je.transition=e}}return!1}function Jc(t,e,n){e=yr(n,e),e=$f(t,e,1),t=rn(t,e,1),e=be(),t!==null&&(js(t,1,e),Ie(t,e))}function se(t,e,n){if(t.tag===3)Jc(t,t,n);else for(;e!==null;){if(e.tag===3){Jc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sn===null||!sn.has(r))){t=yr(n,t),t=Af(e,t,1),e=rn(e,t,1),t=be(),e!==null&&(js(e,1,t),Ie(e,t));break}}e=e.return}}function Ov(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=be(),t.pingedLanes|=t.suspendedLanes&n,ge===t&&(me&n)===n&&(de===4||de===3&&(me&130023424)===me&&500>ie()-_u?bn(t,0):Su|=n),Ie(t,e)}function eg(t,e){e===0&&(t.mode&1?(e=Hs,Hs<<=1,!(Hs&130023424)&&(Hs=4194304)):e=1);var n=be();t=It(t,e),t!==null&&(js(t,e,n),Ie(t,n))}function Fv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eg(t,n)}function Dv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),eg(t,n)}var tg;tg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)Le=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Le=!1,Ev(t,e,n);Le=!!(t.flags&131072)}else Le=!1,Z&&e.flags&1048576&&sf(e,Fi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wi(t,e),t=e.pendingProps;var s=gr(e,xe.current);dr(e,n),s=gu(null,e,r,t,s,n);var i=pu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ae(r)?(i=!0,Ii(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uu(e),s.updater=ua,e.stateNode=s,s._reactInternals=e,Yo(e,r,t,n),e=el(null,e,r,!0,i,n)):(e.tag=0,Z&&i&&nu(e),Ee(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wi(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Uv(r),t=rt(r,t),s){case 0:e=Zo(null,e,r,t,n);break e;case 1:e=Uc(null,e,r,t,n);break e;case 11:e=Dc(null,e,r,t,n);break e;case 14:e=Mc(null,e,r,rt(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rt(r,s),Zo(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rt(r,s),Uc(t,e,r,s,n);case 3:e:{if(Df(e),t===null)throw Error(R(387));r=e.pendingProps,i=e.memoizedState,s=i.element,df(t,e),Ui(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=yr(Error(R(423)),e),e=zc(t,e,r,n,s);break e}else if(r!==s){s=yr(Error(R(424)),e),e=zc(t,e,r,n,s);break e}else for(Fe=nn(e.stateNode.containerInfo.firstChild),De=e,Z=!0,at=null,n=uf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pr(),r===s){e=Ot(t,e,n);break e}Ee(t,e,r,n)}e=e.child}return e;case 5:return hf(e),t===null&&Ko(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Bo(r,s)?a=null:i!==null&&Bo(r,i)&&(e.flags|=32),Ff(t,e),Ee(t,e,a,n),e.child;case 6:return t===null&&Ko(e),null;case 13:return Mf(t,e,n);case 4:return cu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mr(e,null,r,n):Ee(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rt(r,s),Dc(t,e,r,s,n);case 7:return Ee(t,e,e.pendingProps,n),e.child;case 8:return Ee(t,e,e.pendingProps.children,n),e.child;case 12:return Ee(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Q(Di,r._currentValue),r._currentValue=a,i!==null)if(ct(i.value,a)){if(i.children===s.children&&!$e.current){e=Ot(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Nt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Qo(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(R(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Qo(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ee(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,dr(e,n),s=Xe(s),r=r(s),e.flags|=1,Ee(t,e,r,n),e.child;case 14:return r=e.type,s=rt(r,e.pendingProps),s=rt(r.type,s),Mc(t,e,r,s,n);case 15:return If(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rt(r,s),wi(t,e),e.tag=1,Ae(r)?(t=!0,Ii(e)):t=!1,dr(e,n),Lf(e,r,s),Yo(e,r,s,n),el(null,e,r,!0,t,n);case 19:return Uf(t,e,n);case 22:return Of(t,e,n)}throw Error(R(156,e.tag))};function ng(t,e){return Rh(t,e)}function Mv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(t,e,n,r){return new Mv(t,e,n,r)}function Eu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uv(t){if(typeof t=="function")return Eu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hl)return 11;if(t===ql)return 14}return 2}function on(t,e){var n=t.alternate;return n===null?(n=Qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xi(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Eu(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Jn:return jn(n.children,s,i,e);case Bl:a=8,s|=8;break;case _o:return t=Qe(12,n,e,s|2),t.elementType=_o,t.lanes=i,t;case xo:return t=Qe(13,n,e,s),t.elementType=xo,t.lanes=i,t;case ko:return t=Qe(19,n,e,s),t.elementType=ko,t.lanes=i,t;case dh:return ha(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uh:a=10;break e;case ch:a=9;break e;case Hl:a=11;break e;case ql:a=14;break e;case Ht:a=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=Qe(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function jn(t,e,n,r){return t=Qe(7,t,r,e),t.lanes=n,t}function ha(t,e,n,r){return t=Qe(22,t,r,e),t.elementType=dh,t.lanes=n,t.stateNode={isHidden:!1},t}function Ja(t,e,n){return t=Qe(6,t,null,e),t.lanes=n,t}function Ya(t,e,n){return e=Qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zv(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Na(0),this.expirationTimes=Na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bu(t,e,n,r,s,i,a,o,l){return t=new zv(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qe(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uu(i),t}function Vv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rg(t){if(!t)return un;t=t._reactInternals;e:{if(In(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ae(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Ae(n))return nf(t,n,e)}return e}function sg(t,e,n,r,s,i,a,o,l){return t=bu(n,r,!0,t,s,i,a,o,l),t.context=rg(null),n=t.current,r=be(),s=an(n),i=Nt(r,s),i.callback=e??null,rn(n,i,s),t.current.lanes=s,js(t,s,r),Ie(t,r),t}function fa(t,e,n,r){var s=e.current,i=be(),a=an(s);return n=rg(n),e.context===null?e.context=n:e.pendingContext=n,e=Nt(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rn(s,e,a),t!==null&&(lt(t,s,a,i),mi(t,s,a)),a}function Ki(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ju(t,e){Yc(t,e),(t=t.alternate)&&Yc(t,e)}function Bv(){return null}var ig=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ru(t){this._internalRoot=t}ga.prototype.render=Ru.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));fa(t,e,null,null)};ga.prototype.unmount=Ru.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$n(function(){fa(null,t,null,null)}),e[At]=null}};function ga(t){this._internalRoot=t}ga.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ih();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wt.length&&e!==0&&e<Wt[n].priority;n++);Wt.splice(n,0,t),n===0&&Fh(t)}};function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xc(){}function Hv(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ki(a);i.call(u)}}var a=sg(e,r,t,0,null,!1,!1,"",Xc);return t._reactRootContainer=a,t[At]=a.current,fs(t.nodeType===8?t.parentNode:t),$n(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=Ki(l);o.call(u)}}var l=bu(t,0,!1,null,null,!1,!1,"",Xc);return t._reactRootContainer=l,t[At]=l.current,fs(t.nodeType===8?t.parentNode:t),$n(function(){fa(e,l,n,r)}),l}function ma(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Ki(a);o.call(l)}}fa(e,a,t,s)}else a=Hv(n,e,t,s,r);return Ki(a)}$h=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vr(e.pendingLanes);n!==0&&(Kl(e,n|1),Ie(e,ie()),!(q&6)&&(wr=ie()+500,fn()))}break;case 13:$n(function(){var r=It(t,1);if(r!==null){var s=be();lt(r,t,1,s)}}),ju(t,1)}};Ql=function(t){if(t.tag===13){var e=It(t,134217728);if(e!==null){var n=be();lt(e,t,134217728,n)}ju(t,134217728)}};Ah=function(t){if(t.tag===13){var e=an(t),n=It(t,e);if(n!==null){var r=be();lt(n,t,e,r)}ju(t,e)}};Ih=function(){return W};Oh=function(t,e){var n=W;try{return W=t,e()}finally{W=n}};$o=function(t,e,n){switch(e){case"input":if(bo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=aa(r);if(!s)throw Error(R(90));fh(r),bo(r,s)}}}break;case"textarea":ph(t,n);break;case"select":e=n.value,e!=null&&or(t,!!n.multiple,e,!1)}};xh=xu;kh=$n;var qv={usingClientEntryPoint:!1,Events:[Ts,er,aa,Sh,_h,xu]},Ir={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wv={bundleType:Ir.bundleType,version:Ir.version,rendererPackageName:Ir.rendererPackageName,rendererConfig:Ir.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bh(t),t===null?null:t.stateNode},findFiberByHostInstance:Ir.findFiberByHostInstance||Bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ti=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ti.isDisabled&&ti.supportsFiber)try{na=ti.inject(Wv),vt=ti}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qv;ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(e))throw Error(R(200));return Vv(t,e,null,n)};ze.createRoot=function(t,e){if(!Tu(t))throw Error(R(299));var n=!1,r="",s=ig;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bu(t,1,!1,null,null,n,!1,r,s),t[At]=e.current,fs(t.nodeType===8?t.parentNode:t),new Ru(e)};ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=bh(e),t=t===null?null:t.stateNode,t};ze.flushSync=function(t){return $n(t)};ze.hydrate=function(t,e,n){if(!pa(e))throw Error(R(200));return ma(null,t,e,!0,n)};ze.hydrateRoot=function(t,e,n){if(!Tu(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=ig;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=sg(e,null,t,1,n??null,s,!1,i,a),t[At]=e.current,fs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ga(e)};ze.render=function(t,e,n){if(!pa(e))throw Error(R(200));return ma(null,t,e,!1,n)};ze.unmountComponentAtNode=function(t){if(!pa(t))throw Error(R(40));return t._reactRootContainer?($n(function(){ma(null,null,t,!1,function(){t._reactRootContainer=null,t[At]=null})}),!0):!1};ze.unstable_batchedUpdates=xu;ze.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pa(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return ma(t,e,n,!1,r)};ze.version="18.3.1-next-f1338f8080-20240426";function ag(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ag)}catch(t){console.error(t)}}ag(),ih.exports=ze;var Gv=ih.exports,Zc=Gv;wo.createRoot=Zc.createRoot,wo.hydrateRoot=Zc.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ed="popstate";function Kv(t={}){function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return hl("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xs(s)}return Jv(e,n,null,t)}function ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qv(){return Math.random().toString(36).substring(2,10)}function td(t,e){return{usr:t.state,key:t.key,idx:e}}function hl(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Cr(e):e,state:n,key:e&&e.key||r||Qv()}}function xs({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Cr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Jv(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",l=null,u=c();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function c(){return(a.state||{idx:null}).idx}function h(){o="POP";let _=c(),v=_==null?null:_-u;u=_,l&&l({action:o,location:w.location,delta:v})}function f(_,v){o="PUSH";let m=hl(w.location,_,v);u=c()+1;let y=td(m,u),x=w.createHref(m);try{a.pushState(y,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}i&&l&&l({action:o,location:w.location,delta:1})}function g(_,v){o="REPLACE";let m=hl(w.location,_,v);u=c();let y=td(m,u),x=w.createHref(m);a.replaceState(y,"",x),i&&l&&l({action:o,location:w.location,delta:0})}function p(_){return Yv(_)}let w={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ed,h),l=_,()=>{s.removeEventListener(ed,h),l=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let v=p(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(_){return a.go(_)}};return w}function Yv(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ne(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:xs(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function og(t,e,n="/"){return Xv(t,e,n,!1)}function Xv(t,e,n,r){let s=typeof e=="string"?Cr(e):e,i=Ft(s.pathname||"/",n);if(i==null)return null;let a=lg(t);Zv(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=cy(i);o=ly(a[l],u,r)}return o}function lg(t,e=[],n=[],r="",s=!1){let i=(a,o,l=s,u)=>{let c={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;ne(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let h=Lt([r,c.relativePath]),f=n.concat(c);a.children&&a.children.length>0&&(ne(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),lg(a.children,e,f,h,l)),!(a.path==null&&!a.index)&&e.push({path:h,score:ay(h,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of ug(a.path))i(a,o,!0,u)}),e}function ug(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=ug(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Zv(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oy(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ey=/^:[\w-]+$/,ty=3,ny=2,ry=1,sy=10,iy=-2,nd=t=>t==="*";function ay(t,e){let n=t.split("/"),r=n.length;return n.some(nd)&&(r+=iy),e&&(r+=ny),n.filter(s=>!nd(s)).reduce((s,i)=>s+(ey.test(i)?ty:i===""?ry:sy),r)}function oy(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ly(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=Qi({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=Qi({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Lt([i,h.pathname]),pathnameBase:gy(Lt([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Lt([i,h.pathnameBase]))}return a}function Qi(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uy(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},f)=>{if(c==="*"){let p=o[f]||"";a=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=o[f];return h&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function uy(t,e=!1,n=!0){wt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function cy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ft(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dy(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Cr(t):t;return{pathname:n?n.startsWith("/")?n:hy(n,e):e,search:py(r),hash:my(s)}}function hy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xa(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cg(t){let e=fy(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function dg(t,e,n,r=!1){let s;typeof t=="string"?s=Cr(t):(s={...t},ne(!s.pathname||!s.pathname.includes("?"),Xa("?","pathname","search",s)),ne(!s.pathname||!s.pathname.includes("#"),Xa("#","pathname","hash",s)),ne(!s.search||!s.search.includes("#"),Xa("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=dy(s,o),u=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Lt=t=>t.join("/").replace(/\/\/+/g,"/"),gy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),py=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,my=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var hg=["POST","PUT","PATCH","DELETE"];new Set(hg);var yy=["GET",...hg];new Set(yy);var Er=S.createContext(null);Er.displayName="DataRouter";var va=S.createContext(null);va.displayName="DataRouterState";S.createContext(!1);var fg=S.createContext({isTransitioning:!1});fg.displayName="ViewTransition";var wy=S.createContext(new Map);wy.displayName="Fetchers";var Sy=S.createContext(null);Sy.displayName="Await";var St=S.createContext(null);St.displayName="Navigation";var Ns=S.createContext(null);Ns.displayName="Location";var _t=S.createContext({outlet:null,matches:[],isDataRoute:!1});_t.displayName="Route";var Pu=S.createContext(null);Pu.displayName="RouteError";function _y(t,{relative:e}={}){ne(Ls(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(St),{hash:s,pathname:i,search:a}=$s(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:Lt([n,i])),r.createHref({pathname:o,search:a,hash:s})}function Ls(){return S.useContext(Ns)!=null}function gn(){return ne(Ls(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Ns).location}var gg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pg(t){S.useContext(St).static||S.useLayoutEffect(t)}function Nu(){let{isDataRoute:t}=S.useContext(_t);return t?Ay():xy()}function xy(){ne(Ls(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Er),{basename:e,navigator:n}=S.useContext(St),{matches:r}=S.useContext(_t),{pathname:s}=gn(),i=JSON.stringify(cg(r)),a=S.useRef(!1);return pg(()=>{a.current=!0}),S.useCallback((l,u={})=>{if(wt(a.current,gg),!a.current)return;if(typeof l=="number"){n.go(l);return}let c=dg(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Lt([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,i,s,t])}S.createContext(null);function mg(){let{matches:t}=S.useContext(_t),e=t[t.length-1];return e?e.params:{}}function $s(t,{relative:e}={}){let{matches:n}=S.useContext(_t),{pathname:r}=gn(),s=JSON.stringify(cg(n));return S.useMemo(()=>dg(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function ky(t,e){return vg(t,e)}function vg(t,e,n,r,s){var m;ne(Ls(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(St),{matches:a}=S.useContext(_t),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let y=h&&h.path||"";yg(u,!h||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=gn(),g;if(e){let y=typeof e=="string"?Cr(e):e;ne(c==="/"||((m=y.pathname)==null?void 0:m.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${y.pathname}" was given in the \`location\` prop.`),g=y}else g=f;let p=g.pathname||"/",w=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");w="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let _=og(t,{pathname:w});wt(h||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),wt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=Ry(_&&_.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Lt([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Lt([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r,s);return e&&v?S.createElement(Ns.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function Cy(){let t=$y(),e=vy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,a)}var Ey=S.createElement(Cy,null),by=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(_t.Provider,{value:this.props.routeContext},S.createElement(Pu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jy({routeContext:t,match:e,children:n}){let r=S.useContext(Er);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(_t.Provider,{value:t},n)}function Ry(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let u=i.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);ne(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=n,g=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,c,h)=>{let f,g=!1,p=null,w=null;n&&(f=a&&c.route.id?a[c.route.id]:void 0,p=c.route.errorElement||Ey,o&&(l<0&&h===0?(yg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):l===h&&(g=!0,w=c.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,h+1)),v=()=>{let m;return f?m=p:g?m=w:c.route.Component?m=S.createElement(c.route.Component,null):c.route.element?m=c.route.element:m=u,S.createElement(jy,{match:c,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:m})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?S.createElement(by,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:r}):v()},null)}function Lu(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ty(t){let e=S.useContext(Er);return ne(e,Lu(t)),e}function Py(t){let e=S.useContext(va);return ne(e,Lu(t)),e}function Ny(t){let e=S.useContext(_t);return ne(e,Lu(t)),e}function $u(t){let e=Ny(t),n=e.matches[e.matches.length-1];return ne(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Ly(){return $u("useRouteId")}function $y(){var r;let t=S.useContext(Pu),e=Py("useRouteError"),n=$u("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Ay(){let{router:t}=Ty("useNavigate"),e=$u("useNavigate"),n=S.useRef(!1);return pg(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{wt(n.current,gg),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var rd={};function yg(t,e,n){!e&&!rd[t]&&(rd[t]=!0,wt(!1,n))}S.memo(Iy);function Iy({routes:t,future:e,state:n,unstable_onError:r}){return vg(t,void 0,n,r,e)}function qe(t){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Oy({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){ne(!Ls(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=S.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=Cr(n));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:f="default"}=n,g=S.useMemo(()=>{let p=Ft(l,a);return p==null?null:{location:{pathname:p,search:u,hash:c,state:h,key:f},navigationType:r}},[a,l,u,c,h,f,r]);return wt(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:S.createElement(St.Provider,{value:o},S.createElement(Ns.Provider,{children:e,value:g}))}function Fy({children:t,location:e}){return ky(fl(t),e)}function fl(t,e=[]){let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,fl(r.props.children,i));return}ne(r.type===qe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=fl(r.props.children,i)),n.push(a)}),n}var ki="get",Ci="application/x-www-form-urlencoded";function ya(t){return t!=null&&typeof t.tagName=="string"}function Dy(t){return ya(t)&&t.tagName.toLowerCase()==="button"}function My(t){return ya(t)&&t.tagName.toLowerCase()==="form"}function Uy(t){return ya(t)&&t.tagName.toLowerCase()==="input"}function zy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vy(t,e){return t.button===0&&(!e||e==="_self")&&!zy(t)}var ni=null;function By(){if(ni===null)try{new FormData(document.createElement("form"),0),ni=!1}catch{ni=!0}return ni}var Hy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Za(t){return t!=null&&!Hy.has(t)?(wt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ci}"`),null):t}function qy(t,e){let n,r,s,i,a;if(My(t)){let o=t.getAttribute("action");r=o?Ft(o,e):null,n=t.getAttribute("method")||ki,s=Za(t.getAttribute("enctype"))||Ci,i=new FormData(t)}else if(Dy(t)||Uy(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?Ft(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||ki,s=Za(t.getAttribute("formenctype"))||Za(o.getAttribute("enctype"))||Ci,i=new FormData(o,t),!By()){let{name:u,type:c,value:h}=t;if(c==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if(ya(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ki,r=null,s=Ci,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Au(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wy(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ft(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Gy(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ky(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Qy(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await Gy(i,n);return a.links?a.links():[]}return[]}));return Zy(r.flat(1).filter(Ky).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function sd(t,e,n,r,s,i){let a=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):i==="data"?e.filter((l,u)=>{var h;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Jy(t,e,{includeHydrateFallback:n}={}){return Yy(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Yy(t){return[...new Set(t)]}function Xy(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Zy(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(Xy(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function wg(){let t=S.useContext(Er);return Au(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ew(){let t=S.useContext(va);return Au(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Iu=S.createContext(void 0);Iu.displayName="FrameworkContext";function Sg(){let t=S.useContext(Iu);return Au(t,"You must render this element inside a <HydratedRouter> element"),t}function tw(t,e){let n=S.useContext(Iu),[r,s]=S.useState(!1),[i,a]=S.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,f=S.useRef(null);S.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let w=v=>{v.forEach(m=>{a(m.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return f.current&&_.observe(f.current),()=>{_.disconnect()}}},[t]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{s(!0)},p=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Or(o,g),onBlur:Or(l,p),onMouseEnter:Or(u,g),onMouseLeave:Or(c,p),onTouchStart:Or(h,g)}]:[!1,f,{}]}function Or(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function nw({page:t,...e}){let{router:n}=wg(),r=S.useMemo(()=>og(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?S.createElement(sw,{page:t,matches:r,...e}):null}function rw(t){let{manifest:e,routeModules:n}=Sg(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return Qy(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function sw({page:t,matches:e,...n}){let r=gn(),{manifest:s,routeModules:i}=Sg(),{basename:a}=wg(),{loaderData:o,matches:l}=ew(),u=S.useMemo(()=>sd(t,e,l,s,r,"data"),[t,e,l,s,r]),c=S.useMemo(()=>sd(t,e,l,s,r,"assets"),[t,e,l,s,r]),h=S.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,w=!1;if(e.forEach(v=>{var y;let m=s.routes[v.route.id];!m||!m.hasLoader||(!u.some(x=>x.route.id===v.route.id)&&v.route.id in o&&((y=i[v.route.id])!=null&&y.shouldRevalidate)||m.hasClientLoader?w=!0:p.add(v.route.id))}),p.size===0)return[];let _=Wy(t,a,"data");return w&&p.size>0&&_.searchParams.set("_routes",e.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[_.pathname+_.search]},[a,o,r,s,u,e,t,i]),f=S.useMemo(()=>Jy(c,s),[c,s]),g=rw(c);return S.createElement(S.Fragment,null,h.map(p=>S.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>S.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),g.map(({key:p,link:w})=>S.createElement("link",{key:p,nonce:n.nonce,...w})))}function iw(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var _g=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_g&&(window.__reactRouterVersion="7.8.2")}catch{}function aw({basename:t,children:e,window:n}){let r=S.useRef();r.current==null&&(r.current=Kv({window:n,v5Compat:!0}));let s=r.current,[i,a]=S.useState({action:s.action,location:s.location}),o=S.useCallback(l=>{S.startTransition(()=>a(l))},[a]);return S.useLayoutEffect(()=>s.listen(o),[s,o]),S.createElement(Oy,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var xg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=S.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h,...f},g){let{basename:p}=S.useContext(St),w=typeof u=="string"&&xg.test(u),_,v=!1;if(typeof u=="string"&&w&&(_=u,_g))try{let P=new URL(window.location.href),T=u.startsWith("//")?new URL(P.protocol+u):new URL(u),z=Ft(T.pathname,p);T.origin===P.origin&&z!=null?u=z+T.search+T.hash:v=!0}catch{wt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=_y(u,{relative:s}),[y,x,k]=tw(r,f),C=cw(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:s,viewTransition:h});function E(P){e&&e(P),P.defaultPrevented||C(P)}let b=S.createElement("a",{...f,...k,href:_||m,onClick:v||i?e:E,ref:iw(g,x),target:l,"data-discover":!w&&n==="render"?"true":void 0});return y&&!w?S.createElement(S.Fragment,null,b,S.createElement(nw,{page:m})):b});We.displayName="Link";var ow=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:o,children:l,...u},c){let h=$s(a,{relative:u.relative}),f=gn(),g=S.useContext(va),{navigator:p,basename:w}=S.useContext(St),_=g!=null&&pw(h)&&o===!0,v=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,m=f.pathname,y=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(m=m.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&w&&(y=Ft(y,w)||y);const x=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let k=m===v||!s&&m.startsWith(v)&&m.charAt(x)==="/",C=y!=null&&(y===v||!s&&y.startsWith(v)&&y.charAt(v.length)==="/"),E={isActive:k,isPending:C,isTransitioning:_},b=k?e:void 0,P;typeof r=="function"?P=r(E):P=[r,k?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(E):i;return S.createElement(We,{...u,"aria-current":b,className:P,ref:c,style:T,to:a,viewTransition:o},typeof l=="function"?l(E):l)});ow.displayName="NavLink";var lw=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=ki,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...f},g)=>{let p=fw(),w=gw(o,{relative:u}),_=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&xg.test(o),m=y=>{if(l&&l(y),y.defaultPrevented)return;y.preventDefault();let x=y.nativeEvent.submitter,k=(x==null?void 0:x.getAttribute("formmethod"))||a;p(x||y.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:h})};return S.createElement("form",{ref:g,method:_,action:w,onSubmit:r?l:m,...f,"data-discover":!v&&t==="render"?"true":void 0})});lw.displayName="Form";function uw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kg(t){let e=S.useContext(Er);return ne(e,uw(t)),e}function cw(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=Nu(),l=gn(),u=$s(t,{relative:i});return S.useCallback(c=>{if(Vy(c,e)){c.preventDefault();let h=n!==void 0?n:xs(l)===xs(u);o(t,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[l,o,u,n,r,e,t,s,i,a])}var dw=0,hw=()=>`__${String(++dw)}__`;function fw(){let{router:t}=kg("useSubmit"),{basename:e}=S.useContext(St),n=Ly();return S.useCallback(async(r,s={})=>{let{action:i,method:a,encType:o,formData:l,body:u}=qy(r,e);if(s.navigate===!1){let c=s.fetcherKey||hw();await t.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function gw(t,{relative:e}={}){let{basename:n}=S.useContext(St),r=S.useContext(_t);ne(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...$s(t||".",{relative:e})},a=gn();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let c=o.toString();i.search=c?`?${c}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Lt([n,i.pathname])),xs(i)}function pw(t,{relative:e}={}){let n=S.useContext(fg);ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=kg("useViewTransitionState"),s=$s(t,{relative:e});if(!n.isTransitioning)return!1;let i=Ft(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ft(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qi(s.pathname,a)!=null||Qi(s.pathname,i)!=null}const mw="modulepreload",vw=function(t){return"/"+t},id={},As=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=vw(l),l in id)return;id[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":mw,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},yw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>As(async()=>{const{default:r}=await Promise.resolve().then(()=>br);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Ou extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ww extends Ou{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ad extends Ou{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class od extends Ou{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(gl||(gl={}));var Sw=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class _w{constructor(e,{headers:n={},customFetch:r,region:s=gl.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=yw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Sw(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let o={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:c}).catch(w=>{throw new ww(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new ad(h);if(!h.ok)throw new od(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield h.json():g==="application/octet-stream"?p=yield h.blob():g==="text/event-stream"?p=h:g==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof od||s instanceof ad?s.context:void 0}}})}}var Ne={},Fu={},wa={},Is={},Sa={},_a={},xw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sr=xw();const kw=Sr.fetch,Cg=Sr.fetch.bind(Sr),Eg=Sr.Headers,Cw=Sr.Request,Ew=Sr.Response,br=Object.freeze(Object.defineProperty({__proto__:null,Headers:Eg,Request:Cw,Response:Ew,default:Cg,fetch:kw},Symbol.toStringTag,{value:"Module"})),bw=_p(br);var xa={};Object.defineProperty(xa,"__esModule",{value:!0});let jw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xa.default=jw;var bg=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_a,"__esModule",{value:!0});const Rw=bg(bw),Tw=bg(xa);let Pw=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l,u;let c=null,h=null,f=null,g=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await i.text();try{c=JSON.parse(_),Array.isArray(c)&&i.status===404&&(h=[],c=null,g=200,p="OK")}catch{i.status===404&&_===""?(g=204,p="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,g=200,p="OK"),c&&this.shouldThrowOnError)throw new Tw.default(c)}return{error:c,data:h,count:f,status:g,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};_a.default=Pw;var Nw=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sa,"__esModule",{value:!0});const Lw=Nw(_a);let $w=class extends Lw.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Sa.default=$w;var Aw=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Is,"__esModule",{value:!0});const Iw=Aw(Sa);let Ow=class extends Iw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Is.default=Ow;var Fw=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wa,"__esModule",{value:!0});const Fr=Fw(Is);let Dw=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Fr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Fr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Fr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Fr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};wa.default=Dw;var jg=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fu,"__esModule",{value:!0});const Mw=jg(wa),Uw=jg(Is);let zw=class Rg{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new Mw.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Rg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(o="POST",u=n);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new Uw.default({method:o,url:l,headers:c,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Fu.default=zw;var jr=Ye&&Ye.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const Tg=jr(Fu);Ne.PostgrestClient=Tg.default;const Pg=jr(wa);Ne.PostgrestQueryBuilder=Pg.default;const Ng=jr(Is);Ne.PostgrestFilterBuilder=Ng.default;const Lg=jr(Sa);Ne.PostgrestTransformBuilder=Lg.default;const $g=jr(_a);Ne.PostgrestBuilder=$g.default;const Ag=jr(xa);Ne.PostgrestError=Ag.default;var Vw=Ne.default={PostgrestClient:Tg.default,PostgrestQueryBuilder:Pg.default,PostgrestFilterBuilder:Ng.default,PostgrestTransformBuilder:Lg.default,PostgrestBuilder:$g.default,PostgrestError:Ag.default};const{PostgrestClient:Bw,PostgrestQueryBuilder:gC,PostgrestFilterBuilder:pC,PostgrestTransformBuilder:mC,PostgrestBuilder:vC,PostgrestError:yC}=Vw;class Hw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const qw="2.15.1",Ww=`realtime-js/${qw}`,Gw="1.0.0",pl=1e4,Kw=1e3,Qw=100;var es;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(es||(es={}));var le;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(le||(le={}));var it;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(it||(it={}));var ml;(function(t){t.websocket="websocket"})(ml||(ml={}));var xn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xn||(xn={}));class Jw{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Ig{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var K;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(K||(K={}));const ld=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=Yw(a,t,e,s),i),{})},Yw=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?Og(i,a):vl(a)},Og=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return t0(e,n)}switch(t){case K.bool:return Xw(e);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return Zw(e);case K.json:case K.jsonb:return e0(e);case K.timestamp:return n0(e);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:return vl(e);default:return vl(e)}},vl=t=>t,Xw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},e0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},t0=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Og(e,o))}return t},n0=t=>typeof t=="string"?t.replace(" ","T"):t,Fg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class eo{constructor(e,n,r={},s=pl){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ud;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ud||(ud={}));class ts{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ts.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=ts.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ts.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=i[u];if(h){const f=c.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),p=c.filter(_=>g.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);p.length>0&&(o[u]=p),w.length>0&&(l[u]=w)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const h=e[o].map(g=>g.presence_ref),f=c.filter(g=>h.indexOf(g.presence_ref)<0);e[o].unshift(...f)}r(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(cd||(cd={}));var ns;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ns||(ns={}));var bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bt||(bt={}));class Du{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new eo(this,it.join,this.params,this.timeout),this.rejoinTimer=new Ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ts(this),this.broadcastEndpointURL=Fg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==le.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[ns.PRESENCE]&&this.bindings[ns.PRESENCE].length>0,c={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(bt.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(bt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e==null||e(bt.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,w=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,_=[];for(let v=0;v<w;v++){const m=p[v],{filter:{event:y,schema:x,table:k,filter:C}}=m,E=f&&f[v];if(E&&E.event===y&&E.schema===x&&E.table===k&&E.filter===C)_.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=le.errored,e==null||e(bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(bt.SUBSCRIBED);return}}).receive("error",f=>{this.state=le.errored,e==null||e(bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===le.joined&&e===ns.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new eo(this,it.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=le.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new eo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Qw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=it;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,w,_;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((_=(w=g.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(g=>g.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,w,_,v,m,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const x=g.id,k=(p=g.filter)===null||p===void 0?void 0:p.event;return x&&((w=n.ids)===null||w===void 0?void 0:w.includes(x))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(m=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return x==="*"||x===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:w,table:_,commit_timestamp:v,type:m,errors:y}=p;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:v,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(p))}g.callback(f,r)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Du.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(it.close,{},e)}_onError(e){this._on(it.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ld(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ld(e.columns,e.old_record)),n}}const dd=()=>{},ri={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},r0=[1e3,2e3,5e3,1e4],s0=1e4,i0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a0{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pl,this.transport=null,this.heartbeatIntervalMs=ri.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dd,this.ref=0,this.reconnectTimer=null,this.logger=dd,this.conn=null,this.sendBuffer=[],this.serializer=new Jw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>As(async()=>{const{default:o}=await Promise.resolve().then(()=>br);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ml.websocket}`,this.httpEndpoint=Fg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Gw}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return xn.Connecting;case es.open:return xn.Open;case es.closing:return xn.Closing;default:return xn.Closed}}isConnected(){return this.connectionState()===xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Du(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Kw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ri.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(it.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([i0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Ww};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(it.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ig(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ri.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,o,l,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:pl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ri.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:c=>r0[c-1]||s0,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(c,h)=>h(JSON.stringify(c)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Mu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class o0 extends Mu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yl extends Mu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var l0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Dg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>As(async()=>{const{default:r}=await Promise.resolve().then(()=>br);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},u0=()=>l0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield As(()=>Promise.resolve().then(()=>br),void 0)).Response:Response}),wl=t=>{if(Array.isArray(t))return t.map(n=>wl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=wl(r)}),e},c0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var On=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const to=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),d0=(t,e,n)=>On(void 0,void 0,void 0,function*(){const r=yield u0();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new o0(to(s),i,a))}).catch(s=>{e(new yl(to(s),s))}):e(new yl(to(t),t))}),h0=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(c0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Os(t,e,n,r,s,i){return On(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,h0(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>d0(l,o,r))})})}function Ji(t,e,n,r){return On(this,void 0,void 0,function*(){return Os(t,"GET",e,n,r)})}function gt(t,e,n,r,s){return On(this,void 0,void 0,function*(){return Os(t,"POST",e,r,s,n)})}function Sl(t,e,n,r,s){return On(this,void 0,void 0,function*(){return Os(t,"PUT",e,r,s,n)})}function f0(t,e,n,r){return On(this,void 0,void 0,function*(){return Os(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Mg(t,e,n,r,s){return On(this,void 0,void 0,function*(){return Os(t,"DELETE",e,r,s,n)})}var Ce=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const g0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class p0{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Dg(s)}uploadOrUpdate(e,n,r,s){return Ce(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},hd),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),h=yield(e=="PUT"?Sl:gt)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Ce(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:hd.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield Sl(this.fetch,o.toString(),l,{headers:c});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(ue(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ce(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield gt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Mu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ce(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Ce(this,void 0,void 0,function*(){try{return{data:{path:(yield gt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield gt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Ce(this,void 0,void 0,function*(){try{const s=yield gt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}download(e,n){return Ce(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Ji(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ue(o))return{data:null,error:o};throw o}})}info(e){return Ce(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ji(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wl(r),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}exists(e){return Ce(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield f0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ue(r)&&r instanceof yl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Ce(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ce(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},g0),n),{prefix:e||""});return{data:yield gt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}listV2(e,n){return Ce(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield gt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const m0="2.11.0",v0={"X-Client-Info":`storage-js/${m0}`};var Dn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class y0{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},v0),n),this.fetch=Dg(r)}listBuckets(){return Dn(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Dn(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Dn(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield gt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Dn(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}}class w0 extends y0{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new p0(this.url,this.headers,e,this.fetch)}}const S0="2.56.0";let Hr="";typeof Deno<"u"?Hr="deno":typeof document<"u"?Hr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hr="react-native":Hr="node";const _0={"X-Client-Info":`supabase-js-${Hr}/${S0}`},x0={headers:_0},k0={schema:"public"},C0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},E0={};var b0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const j0=t=>{let e;return t?e=t:typeof fetch>"u"?e=Cg:e=fetch,(...n)=>e(...n)},R0=()=>typeof Headers>"u"?Eg:Headers,T0=(t,e,n)=>{const r=j0(n),s=R0();return(i,a)=>b0(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var P0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};function N0(t){return t.endsWith("/")?t:t+"/"}function L0(t,e){var n,r;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:u,realtime:c,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>P0(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Ug="2.71.1",Wn=30*1e3,_l=3,no=_l*Wn,$0="http://localhost:9999",A0="supabase.auth.token",I0={"X-Client-Info":`gotrue-js/${Ug}`},xl="X-Supabase-Api-Version",zg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},O0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F0=10*60*1e3;class Uu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class D0 extends Uu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function M0(t){return U(t)&&t.name==="AuthApiError"}class Vg extends Uu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pn extends Uu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Vt extends pn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function U0(t){return U(t)&&t.name==="AuthSessionMissingError"}class si extends pn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ii extends pn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ai extends pn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z0(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class fd extends pn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kl extends pn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ro(t){return U(t)&&t.name==="AuthRetryableFetchError"}class gd extends pn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Cl extends pn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pd=` 	
\r=`.split(""),V0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<pd.length;e+=1)t[pd[e].charCodeAt(0)]=-2;for(let e=0;e<Yi.length;e+=1)t[Yi[e].charCodeAt(0)]=e;return t})();function md(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Yi[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Yi[r]),e.queuedBits-=6}}function Bg(t,e,n){const r=V0[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function vd(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{q0(a,r,n)};for(let a=0;a<t.length;a+=1)Bg(t.charCodeAt(a),s,i);return e.join("")}function B0(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function H0(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}B0(r,e)}}function q0(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function W0(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Bg(t.charCodeAt(s),n,r);return new Uint8Array(e)}function G0(t){const e=[];return H0(t,n=>e.push(n)),new Uint8Array(e)}function K0(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>md(s,n,r)),md(null,n,r),e.join("")}function Q0(t){return Math.round(Date.now()/1e3)+t}function J0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nt=()=>typeof window<"u"&&typeof document<"u",mn={tested:!1,writable:!1},Hg=()=>{if(!nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mn.tested)return mn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mn.tested=!0,mn.writable=!0}catch{mn.tested=!0,mn.writable=!1}return mn.writable};function Y0(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const qg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>As(async()=>{const{default:r}=await Promise.resolve().then(()=>br);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},X0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Gn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},vn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zt=async(t,e)=>{await t.removeItem(e)};class ka{constructor(){this.promise=new ka.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ka.promiseConstructor=Promise;function so(t){const e=t.split(".");if(e.length!==3)throw new Cl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!O0.test(e[r]))throw new Cl("JWT not in base64url format");return{header:JSON.parse(vd(e[0])),payload:JSON.parse(vd(e[1])),signature:W0(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function eS(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function tS(t){return("0"+t.toString(16)).substr(-2)}function nS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,tS).join("")}async function rS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function sS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await rS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mn(t,e,n=!1){const r=nS();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Gn(t,`${e}-code-verifier`,s);const i=await sS(r);return[i,r===i?"plain":"s256"]}const iS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aS(t){const e=t.headers.get(xl);if(!e||!e.match(iS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function oS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Un(t){if(!uS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function io(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yd(t){return JSON.parse(JSON.stringify(t))}var cS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const _n=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dS=[502,503,504];async function wd(t){var e;if(!X0(t))throw new kl(_n(t),0);if(dS.includes(t.status))throw new kl(_n(t),t.status);let n;try{n=await t.json()}catch(i){throw new Vg(_n(i),i)}let r;const s=aS(t);if(s&&s.getTime()>=zg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new gd(_n(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Vt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new gd(_n(n),t.status,n.weak_password.reasons);throw new D0(_n(n),t.status||500,r)}const hS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function V(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[xl]||(i[xl]=zg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await fS(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function fS(t,e,n,r,s,i){const a=hS(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new kl(_n(l),0)}if(o.ok||await wd(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await wd(l)}}function Ct(t){var e;let n=null;vS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Q0(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Sd(t){const e=Ct(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gS(t){return{data:t,error:null}}function pS(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=cS(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function mS(t){return t}function vS(t){return t.access_token&&t.refresh_token&&t.expires_in}const ao=["global","local","others"];var yS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class wS{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=qg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ao[0]){if(ao.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ao.join(", ")}`);try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=yS(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:pS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:mS});if(c.error)throw c.error;const h=await c.json(),f=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(p=>{const w=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(U(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Un(e);try{return await V(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kt})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Un(e);try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Kt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Un(e);try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kt})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Un(e.userId);try{const{data:n,error:r}=await V(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Un(e.userId),Un(e.id);try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}function _d(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function SS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zn={debug:!!(globalThis&&Hg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _S extends Wg{}async function xS(t,e,n){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw zn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new _S(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}SS();const kS={url:$0,storageKey:A0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:I0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xd(t,e,n){return await n()}const Vn={};class ks{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ks.nextInstanceID,ks.nextInstanceID+=1,this.instanceID>0&&nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},kS),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new wS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=qg(s.fetch),this.lock=s.lock||xd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=xS:this.lock=xd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Hg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_d(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=_d(this.memoryStorage)),nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Vn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Vn[this.storageKey]=Object.assign(Object.assign({},Vn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Vn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vn[this.storageKey]=Object.assign(Object.assign({},Vn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ug}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Y0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),nt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),z0(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new Vg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ct}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:c,password:h,options:f}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Mn(this.storage,this.storageKey)),i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:p},xform:Ct})}else if("phone"in e){const{phone:c,password:h,options:f}=e;i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ct})}else throw new ii("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sd})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Sd})}else throw new ii("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new si}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,a,o,l,u,c,h,f,g;let p,w;if("message"in e)p=e.message,w=e.signature;else{const{chain:_,wallet:v,statement:m,options:y}=e;let x;if(nt())if(typeof v=="object")x=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const k=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:_,error:v}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:K0(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ct});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new si}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(U(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await vn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ct});if(await zt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new si}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(U(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ct}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new si}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Mn(this.storage,this.storageKey));const{error:h}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new ii("You must provide either an email or phone number.")}catch(o){if(U(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ct});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Mn(this.storage,this.storageKey)),await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:gS})}catch(i){if(U(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Vt;const{error:s}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await V(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await V(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new ii("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<no:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await vn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=io()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kt}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kt})})}catch(n){if(U(n))return U0(n)&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Vt;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Mn(this.storage,this.storageKey));const{data:u,error:c}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Kt});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=so(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Vt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!nt())throw new ai("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ai(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new fd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ai("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fd("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new ai("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let f=c+h;l&&(f=parseInt(l));const g=f-c;g*1e3<=Wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const p=f-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(U(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await vn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(M0(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=J0(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Mn(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(U(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,c;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return nt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(U(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await eS(async s=>(s>0&&await Z0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ct})),(s,i)=>{const a=200*Math.pow(2,s);return i&&ro(i)&&Date.now()+a-r<Wn})}catch(r){if(this._debug(n,"error",r),U(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),nt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await vn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Gn(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:io()}else if(s&&!s.user&&!s.user){const a=await vn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await zt(this.storage,this.storageKey+"-user"),await Gn(this.storage,this.storageKey,s)):s.user=io()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<no;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${no}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ro(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ka;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Vt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),U(i)){const a={session:null,error:i};return ro(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Gn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=yd(s);await Gn(this.storage,this.storageKey,i)}else{const s=yd(n);await Gn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await zt(this.storage,this.storageKey),await zt(this.storage,this.storageKey+"-code-verifier"),await zt(this.storage,this.storageKey+"-user"),this.userStorage&&await zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Wn}ms, refresh threshold is ${_l} ticks`),s<=_l&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Mn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await V(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await V(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:o}=await V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await V(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=so(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+F0>s)return r;const{data:i,error:a}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:p}=await this.getSession();if(p||!g.session)return{data:null,error:p};r=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=so(r);n!=null&&n.allowExpired||oS(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const c=lS(s.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,a,G0(`${o}.${l}`)))throw new Cl("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}}ks.nextInstanceID=0;const CS=ks;class ES extends CS{constructor(e){super(e)}}var bS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class jS{constructor(e,n,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=N0(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:k0,realtime:E0,auth:Object.assign(Object.assign({},C0),{storageKey:u}),global:x0},h=L0(r??{},c);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=T0(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Bw(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new w0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new _w(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return bS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ES({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new a0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const RS=(t,e,n)=>new jS(t,e,n);function TS(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}TS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const PS={BASE_URL:"/",DEV:!1,MODE:"production",NODE_ENV:"production",PROD:!0,SSR:!1,SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZGhlZ2N6d3djZm5yYW5reWRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNTY2NDIsImV4cCI6MjA2OTYzMjY0Mn0.7BisAmVNNmsr-zdqrrJoILPnW0sQ6DfSfH0IEsjLoOI",SUPABASE_URL:"https://sqdhegczwwcfnrankyde.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"},Gg=t=>PS[t],NS=()=>Gg("SUPABASE_URL"),LS=()=>Gg("SUPABASE_ANON_KEY");class $S{constructor(e){this.supabase=e}async callSupabaseFunction(e,n){const{method:r="GET",body:s,headers:i={},requiresAuth:a=!0}=n||{};try{let o={};if(a){const{data:g,error:p}=await this.supabase.auth.getSession();if(p)throw p;const w=g.session;if(!(w!=null&&w.access_token))throw new Error("No valid authentication session found");o={Authorization:`Bearer ${w.access_token}`}}const l={"Content-Type":"application/json",...o,...i},u=s&&r!=="GET"?JSON.stringify(s):void 0;console.log("SupabaseService debug:",{functionName:e,method:r,body:s,requestBody:u,bodyType:typeof s,bodyKeys:s?Object.keys(s):null});const c={method:r,headers:l};u!==void 0&&(c.body=u);const{data:h,error:f}=await this.supabase.functions.invoke(e,c);if(f)throw f;return h}catch(o){if(o instanceof Error){if(o.message.includes("401")||o.message.includes("Unauthorized"))throw new Error("Authentication failed. Please log in again.");if(o.message.includes("403")||o.message.includes("Forbidden"))throw new Error("Access denied. Insufficient permissions.");if(o.message.includes("404")||o.message.includes("Not Found"))throw new Error("API endpoint not found.");if(o.message.includes("500")||o.message.includes("Internal Server Error"))throw new Error("Server error. Please try again later.")}throw o}}getSupabaseClient(){return this.supabase}handleSingleQuery(e){if(e.error)throw e.error.code==="PGRST116"?new Error("Record not found"):e.error;return e.data}async performCrudOperation(e,n,r,s){let i=this.supabase.from(n);switch(e){case"insert":const a=await i.insert(s).select().single();return this.handleSingleQuery(a);case"update":const o=await i.update(s).eq("id",r).select().single();return this.handleSingleQuery(o);case"delete":const l=await i.delete().eq("id",r);this.handleSingleQuery(l);return}}async executeQuery(e){const n=await e();return this.handleSingleQuery(n)}applyGlobalFilter(e,n,r=[]){if(n&&r.length>0){const s=r.map(i=>`${i}.ilike.%${n}%`).join(",");return e.or(s)}return e}applySorting(e,n){if(n&&n.length>0){const r=n[0];if(r)return e.order(r.id,{ascending:!r.desc})}return e}applyPagination(e,n){if(n){const r=n.pageIndex*n.pageSize,s=r+n.pageSize-1;return e.range(r,s)}return e}applyUserFilter(e,n,r,s="assigned_to"){return n&&r?e.eq(s,r):e}async getCurrentUser(){const{data:e,error:n}=await this.supabase.auth.getUser();if(n)throw n;return e}async queryFromTable(e,n){const{filterByUser:r=!1,userId:s=null,userColumn:i="assigned_to",additionalFilters:a={},globalFilter:o="",globalFilterColumns:l=[],sorting:u=[],pagination:c,select:h="*"}=n;let f=this.supabase.from(e).select(h,{count:"exact"});f=this.applyUserFilter(f,r,s,i),f=this.applyGlobalFilter(f,o,l),f=this.applySorting(f,u),f=this.applyPagination(f,c),a&&Object.entries(a).forEach(([_,v])=>{v!=null&&(f=f.eq(_,v))});const{data:g,error:p,count:w}=await f;if(p)throw p;return{data:g||[],count:w||0}}async getRecordById(e,n,r){try{return await this.executeQuery(()=>this.supabase.from(e).select(r||"*").eq("id",n).single())}catch(s){throw s instanceof Error&&s.message==="Record not found"?new Error(`${e} record not found`):s}}async updateRecord(e,n,r){await this.performCrudOperation("update",e,n,r)}async createRecord(e,n){return this.performCrudOperation("insert",e,void 0,n)}async deleteRecord(e,n){await this.performCrudOperation("delete",e,n)}async queryRecordsWithFilter(e,n,r){let s=this.supabase.from(e).select((r==null?void 0:r.select)||"*");Object.entries(n).forEach(([a,o])=>{o!=null&&(typeof o=="object"&&o!==null?"lt"in o?s=s.lt(a,o.lt):"gte"in o?s=s.gte(a,o.gte):"not"in o&&"in"in o.not?s=s.not(a,"in",o.not.in):s=s.eq(a,o):s=s.eq(a,o))}),s=this.applySorting(s,r==null?void 0:r.sorting),s=this.applyPagination(s,r==null?void 0:r.pagination);const i=await s;if(i.error)throw i.error;return i.data||[]}}const AS=NS(),IS=LS(),Bt=RS(AS,IS);typeof window<"u"&&(window.supabase=Bt);const Kg=S.createContext(void 0),Te=()=>{const t=S.useContext(Kg);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},OS=({children:t})=>{console.log("AuthProvider rendering...");const[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,a]=S.useState(null),[o,l]=S.useState("unassigned"),u=o==="admin",c=o==="cleaner",h=S.useMemo(()=>new $S(Bt),[]),f=async()=>{try{const{data:{session:m}}=await Bt.auth.getSession();return(m==null?void 0:m.access_token)||null}catch(m){return console.error("Error getting access token:",m),null}},g=async m=>{try{console.log("checkUserRoles: Starting role check for userId:",m),s(!0);const y=await f();if(console.log("checkUserRoles: Got access token:",!!y),!y){console.log("checkUserRoles: No access token, setting role to unassigned"),l("unassigned");return}console.log("checkUserRoles: Querying roles table");const{data:x,error:k}=await Bt.from("roles").select("role").eq("user_id",m);if(console.log("checkUserRoles: Query result:",{data:x,error:k}),k){console.error("Role check error:",k),l("unassigned");return}const C=(x==null?void 0:x.map(b=>b.role))||[];let E="unassigned";C.includes("admin")?E="admin":C.includes("cleaner")&&(E="cleaner"),console.log("checkUserRoles: Setting role to:",E),l(E)}catch(y){console.error("Error checking user roles:",y),l("unassigned")}finally{console.log("checkUserRoles: Finished, setting loading to false"),s(!1)}},p=async(m,y)=>{var x;y?console.log("Auth state changed:",y,(x=m==null?void 0:m.user)==null?void 0:x.email):console.log("Initial session:",m),a(m),n((m==null?void 0:m.user)??null),s(!1),m!=null&&m.user?(console.log("Starting role check for user:",m.user.id),g(m.user.id).catch(k=>{console.error("Role check failed:",k),l("unassigned")})):l("unassigned")};S.useEffect(()=>{console.log("AuthProvider useEffect running..."),(async()=>{try{console.log("Getting initial session...");const{data:{session:x}}=await Bt.auth.getSession();await p(x)}catch(x){console.error("Error getting initial session:",x),s(!1)}})();const{data:{subscription:y}}=Bt.auth.onAuthStateChange(async(x,k)=>{await p(k,x)});return()=>y.unsubscribe()},[]),console.log("AuthProvider state:",{user:e,loading:r,session:i});const v={user:e,session:i,loading:r,role:o,setRole:l,isAdmin:u,isCleaner:c,signInWithGoogle:async()=>{try{const m=`${window.location.origin}/auth/callback`;console.log("Starting Google OAuth sign in...",m);const{error:y}=await Bt.auth.signInWithOAuth({provider:"google",options:{redirectTo:m}});if(y)throw y}catch(m){throw console.error("Error signing in with Google:",m),m}},signOut:async()=>{try{const{error:m}=await Bt.auth.signOut();if(m)throw m}catch(m){throw console.error("Error signing out:",m),m}},getAccessToken:f,checkUserRoles:g,supabaseService:h};return d.jsx(Kg.Provider,{value:v,children:t})},FS=(t,e,n,r)=>{var i,a,o,l;const s=[n,{code:e,...r||{}}];if((a=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&a.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Rn(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(l=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&l.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},kd={},El=(t,e,n,r)=>{Rn(n)&&kd[n]||(Rn(n)&&(kd[n]=new Date),FS(t,e,n,r))},Qg=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},bl=(t,e,n)=>{t.loadNamespaces(e,Qg(t,n))},Cd=(t,e,n,r)=>{if(Rn(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return bl(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,Qg(t,r))},DS=(t,e,n={})=>!e.languages||!e.languages.length?(El(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),Rn=t=>typeof t=="string",MS=t=>typeof t=="object"&&t!==null,US=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,zS={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},VS=t=>zS[t],BS=t=>t.replace(US,VS);let jl={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:BS};const HS=(t={})=>{jl={...jl,...t}},qS=()=>jl;let Jg;const WS=t=>{Jg=t},GS=()=>Jg,KS={type:"3rdParty",init(t){HS(t.options.react),WS(t)}},QS=S.createContext();class JS{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const YS=(t,e)=>{const n=S.useRef();return S.useEffect(()=>{n.current=t},[t,e]),n.current},Yg=(t,e,n,r)=>t.getFixedT(e,n,r),XS=(t,e,n,r)=>S.useCallback(Yg(t,e,n,r),[t,e,n,r]),X=(t,e={})=>{var x,k,C,E;const{i18n:n}=e,{i18n:r,defaultNS:s}=S.useContext(QS)||{},i=n||r||GS();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new JS),!i){El(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const b=(T,z)=>Rn(z)?z:MS(z)&&Rn(z.defaultValue)?z.defaultValue:Array.isArray(T)?T[T.length-1]:T,P=[b,{},!1];return P.t=b,P.i18n={},P.ready=!1,P}(x=i.options.react)!=null&&x.wait&&El(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...qS(),...i.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=s||((k=i.options)==null?void 0:k.defaultNS);u=Rn(u)?[u]:u||["translation"],(E=(C=i.reportNamespaces).addUsedNamespaces)==null||E.call(C,u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(b=>DS(b,i,a)),h=XS(i,e.lng||null,a.nsMode==="fallback"?u:u[0],l),f=()=>h,g=()=>Yg(i,e.lng||null,a.nsMode==="fallback"?u:u[0],l),[p,w]=S.useState(f);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const v=YS(_),m=S.useRef(!0);S.useEffect(()=>{const{bindI18n:b,bindI18nStore:P}=a;m.current=!0,!c&&!o&&(e.lng?Cd(i,e.lng,u,()=>{m.current&&w(g)}):bl(i,u,()=>{m.current&&w(g)})),c&&v&&v!==_&&m.current&&w(g);const T=()=>{m.current&&w(g)};return b&&(i==null||i.on(b,T)),P&&(i==null||i.store.on(P,T)),()=>{m.current=!1,i&&b&&(b==null||b.split(" ").forEach(z=>i.off(z,T))),P&&i&&P.split(" ").forEach(z=>i.store.off(z,T))}},[i,_]),S.useEffect(()=>{m.current&&c&&w(f)},[i,l,c]);const y=[p,i,c];if(y.t=p,y.i18n=i,y.ready=c,c||!c&&!o)return y;throw new Promise(b=>{e.lng?Cd(i,e.lng,u,()=>b()):bl(i,u,()=>b())})},Xg=S.createContext(void 0),ZS=({children:t})=>{const{i18n:e}=X(),[n,r]=S.useState("en");S.useEffect(()=>{const a=localStorage.getItem("preferred-language")||"en";r(a),e.changeLanguage(a)},[e]);const i={currentLanguage:n,changeLanguage:a=>{r(a),e.changeLanguage(a),localStorage.setItem("preferred-language",a)}};return d.jsx(Xg.Provider,{value:i,children:t})},e_=()=>{const t=S.useContext(Xg);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},t_=()=>{const{signInWithGoogle:t,loading:e}=Te(),{t:n}=X(),r=async()=>{try{await t()}catch(s){console.error("Sign in error:",s)}};return d.jsx("div",{className:"auth-container",children:d.jsxs("div",{className:"auth-card",children:[d.jsx("h1",{className:"auth-title",children:n("auth.welcome")}),d.jsx("p",{className:"auth-description",children:n("auth.signInDescription")}),d.jsx("button",{onClick:r,disabled:e,className:"google-signin-btn",children:e?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"loading-spinner",style:{width:"20px",height:"20px",margin:0}}),n("auth.signingIn")]}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n("auth.signInWithGoogle")]})})]})})},oo=({children:t})=>{console.log("ProtectedRoute rendering...");const{user:e,loading:n}=Te(),{t:r}=X();return console.log("ProtectedRoute state:",{user:e,loading:n}),n?(console.log("ProtectedRoute: showing loading state"),d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"loading",children:[d.jsx("div",{className:"loading-spinner"}),r("common.loading")]})})})):e?(console.log("ProtectedRoute: showing protected content"),t):(console.log("ProtectedRoute: showing login component"),d.jsx(t_,{}))},yn=({children:t})=>{const{user:e,loading:n,isAdmin:r}=Te(),{t:s}=X();return n?d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"loading",children:[d.jsx("div",{className:"loading-spinner"}),s("admin.checkingAccess")]})})}):e?r?t:d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"access-denied",children:[d.jsx("div",{className:"access-denied-icon",children:""}),d.jsx("h2",{className:"access-denied-title",children:s("admin.adminAccessRequired")}),d.jsx("p",{className:"access-denied-description",children:s("admin.noAdminPrivileges")})]})})}):d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"access-denied",children:[d.jsx("div",{className:"access-denied-icon",children:""}),d.jsx("h2",{className:"access-denied-title",children:s("admin.authenticationRequired")}),d.jsx("p",{className:"access-denied-description",children:s("admin.signInToAccess")})]})})})},Ed=["listing","task"],lo=["unassigned","assigned","accepted","in_progress","completed","admin_accepted","cancelled"],n_={unassigned:["assigned"],assigned:["accepted","in_progress","unassigned"],accepted:["assigned","in_progress"],in_progress:["completed","assigned"],completed:["admin_accepted"],admin_accepted:[],cancelled:["assigned"]},bd=["listing","task"];class r_{constructor(e,n){this.supabaseService=e,this.role=n}async fetchTodos(e={}){const n=this.role==="cleaner"?"id, title, description, products, done, completed_at, completed_by, created_at, updated_at, attached_to_type, attached_to_id":"*",r={};return e.attachedToType!==void 0&&(r.attached_to_type=e.attachedToType),e.attachedToId!==void 0&&(r.attached_to_id=e.attachedToId),e.isDone!==void 0&&(r.done=e.isDone),(await this.supabaseService.queryFromTable("todos",{select:n,additionalFilters:r,globalFilter:e.titlePattern||"",globalFilterColumns:["title"]})).data}async fetchTodosWithUserInfo(e={}){const n=await this.fetchTodos(e);return n.length>0&&this.role==="admin"?this.enrichTodosWithUserInfo(n):n}async updateTodoStatus(e,n,r){if(!await this.supabaseService.getRecordById("todos",e))throw new Error(`Todo with ID ${e} not found`);const i={done:n,updated_at:new Date().toISOString(),completed_at:n?new Date().toISOString():null,completed_by:n&&r||null};await this.supabaseService.updateRecord("todos",e,i)}async createTodo(e){return this.validateTodoData(e),this.supabaseService.createRecord("todos",e)}async updateTodo(e,n){return this.validateTodoUpdate(n),await this.supabaseService.updateRecord("todos",e,n),this.supabaseService.getRecordById("todos",e)}async deleteTodo(e){await this.supabaseService.deleteRecord("todos",e)}validateTodoData(e){const n=[];if((!e.title||typeof e.title!="string"||e.title.trim().length===0)&&n.push("Title is required and cannot be empty"),e.title&&e.title.length>255&&n.push("Title cannot exceed 255 characters"),e.description!==void 0&&e.description!==null&&(typeof e.description!="string"?n.push("Description must be a string"):e.description.length>1e3&&n.push("Description cannot exceed 1000 characters")),e.attached_to_type!==void 0&&e.attached_to_type!==null&&(Ed.includes(e.attached_to_type)||n.push(`Invalid attachment type: ${e.attached_to_type}`)),e.attached_to_type&&!e.attached_to_id&&n.push("Attachment ID is required when attachment type is specified"),!e.attached_to_type&&e.attached_to_id&&n.push("Attachment type is required when attachment ID is specified"),e.products!==void 0&&e.products!==null&&(Array.isArray(e.products)?e.products.forEach((r,s)=>{(!r.product_name||typeof r.product_name!="string")&&n.push(`Product ${s+1}: product_name is required and must be a string`),(typeof r.quantity!="number"||r.quantity<=0)&&n.push(`Product ${s+1}: quantity must be a positive number`)}):n.push("Products must be an array")),n.length>0)throw new Error(`Todo validation failed: ${n.join(", ")}`)}validateTodoUpdate(e){const n=[];if(e.title!==void 0&&((typeof e.title!="string"||e.title.trim().length===0)&&n.push("Title cannot be empty"),e.title.length>255&&n.push("Title cannot exceed 255 characters")),e.description!==void 0&&e.description!==null&&(typeof e.description!="string"?n.push("Description must be a string"):e.description.length>1e3&&n.push("Description cannot exceed 1000 characters")),e.attached_to_type!==void 0&&e.attached_to_type!==null&&(Ed.includes(e.attached_to_type)||n.push(`Invalid attachment type: ${e.attached_to_type}`)),e.attached_to_type&&!e.attached_to_id&&n.push("Attachment ID is required when attachment type is specified"),!e.attached_to_type&&e.attached_to_id&&n.push("Attachment type is required when attachment ID is specified"),e.products!==void 0&&e.products!==null&&(Array.isArray(e.products)?e.products.forEach((r,s)=>{(!r.product_name||typeof r.product_name!="string")&&n.push(`Product ${s+1}: product_name is required and must be a string`),(typeof r.quantity!="number"||r.quantity<=0)&&n.push(`Product ${s+1}: quantity must be a positive number`)}):n.push("Products must be an array")),e.completed_at!==void 0&&e.completed_at!==null&&(typeof e.completed_at!="string"&&n.push("Completed at must be a string"),isNaN(Date.parse(e.completed_at))&&n.push("Completed at must be a valid ISO date string")),n.length>0)throw new Error(`Todo update validation failed: ${n.join(", ")}`)}async enrichTodosWithUserInfo(e){const n=[...new Set(e.map(i=>[i.created_by,i.completed_by]).flat().filter(Boolean))];if(n.length===0)return e;const r=await this.supabaseService.queryFromTable("user_profiles",{select:"id, email, name",additionalFilters:{id:n}}),s=new Map(r.data.map(i=>[i.id,i]));return e.map(i=>{const a=i,o=s.get(i.created_by);return o&&(o.email!==null&&(a.user_email=o.email),o.name!==null&&(a.user_name=o.name)),a})}async getTodosByAttachment(e,n){return this.fetchTodos({attachedToType:e,attachedToId:n})}async getCompletedTodos(e={}){return this.fetchTodos({...e,isDone:!0})}async getPendingTodos(e={}){return this.fetchTodos({...e,isDone:!1})}async searchTodosByTitle(e,n={}){return this.fetchTodos({...n,titlePattern:e})}}class s_{constructor(e,n){this.supabaseService=e,this.auditService=n}validateTaskUpdate(e){const n=[],r=e.status;r!==void 0&&(typeof r!="string"||!lo.includes(r))&&n.push(`Invalid status: ${String(r)}`),["started_at","finished_at","accepted_at","completed_at","assigned_at","admin_accepted_at","scheduled_datetime"].forEach(o=>{const l=e[o];if(l!=null)if(typeof l=="string"||typeof l=="number"||l instanceof Date){const u=new Date(l);isNaN(u.getTime())&&n.push(`Invalid date format for ${o}: ${String(l)}`)}else n.push(`Invalid date type for ${o}: ${typeof l}`)});const i=["assigned_to","assigned_by"],a=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(i.forEach(o=>{const l=e[o];l!=null&&(typeof l=="string"?a.test(l)||n.push(`Invalid UUID format for ${o}: ${l}`):n.push(`Invalid ID type for ${o}: ${typeof l}`))}),n.length>0)throw new Error(`Validation errors: ${n.join(", ")}`)}validateStatusTransition(e,n){var r;if(!((r=n_[e])!=null&&r.includes(n)))throw new Error(`Invalid status transition from ${e} to ${n}`)}async getTask(e){try{return await this.supabaseService.getRecordById("tasks",e)}catch(n){throw console.error("Error fetching task:",n),n}}async updateTaskField(e,n,r,s={}){const i={[n]:r};try{this.validateTaskUpdate(i)}catch(a){throw new Error(`Invalid update: ${a instanceof Error?a.message:String(a)}`)}try{return await this.supabaseService.updateRecord("tasks",e,i),{success:!0}}catch(a){throw console.error(`Error updating task ${n}:`,a),a}}async updateTaskFields(e,n){try{this.validateTaskUpdate(n)}catch(r){throw new Error(`Invalid updates: ${r instanceof Error?r.message:String(r)}`)}try{return await this.supabaseService.updateRecord("tasks",e,n),{success:!0}}catch(r){throw console.error("Error updating task fields:",r),r}}async updateTaskStatus(e,n,r={}){const s={status:n,...r};switch(n){case"accepted":s.accepted_at=new Date().toISOString();break;case"completed":s.completed_at=new Date().toISOString();break;case"admin_accepted":s.admin_accepted_at=new Date().toISOString();break;case"assigned":r.clearAccepted&&(s.accepted_at=null);break}return this.updateTaskFields(e,s)}async updateTaskTimes(e,{started_at:n,finished_at:r}){const s={};if(n!==void 0&&(s.started_at=n),r!==void 0&&(s.finished_at=r),n&&r&&new Date(r)<=new Date(n))throw new Error("Finish time must be after start time");return this.updateTaskFields(e,s)}async updateTaskAssignment(e,n,r=null){const s={assigned_to:n,assigned_at:n?new Date().toISOString():null};return r&&(s.assigned_by=r),this.updateTaskFields(e,s)}async queryTasks(e={}){const{pagination:n={pageIndex:0,pageSize:10},sorting:r=[{id:"scheduled_datetime",desc:!1}],globalFilter:s="",additionalFilters:i={}}=e;try{const a=await this.supabaseService.queryFromTable("tasks",{userId:e.userId||null,userColumn:"assigned_to",additionalFilters:i,globalFilter:s,globalFilterColumns:["title","description","task_type","status"],sorting:r,pagination:n});return{tasks:a.data,totalCount:a.count}}catch(a){throw console.error("Error querying tasks:",a),a}}async createTask(e){try{this.validateTaskUpdate(e)}catch(n){throw new Error(`Invalid task data: ${n instanceof Error?n.message:String(n)}`)}try{return await this.supabaseService.createRecord("tasks",e)}catch(n){throw console.error("Error creating task:",n),n}}async deleteTask(e){try{return await this.supabaseService.deleteRecord("tasks",e),{success:!0}}catch(n){throw console.error("Error deleting task:",n),n}}async getTasksCountByStatus(e){try{let n=this.supabaseService.getSupabaseClient().from("tasks").select("status");e&&(n=n.eq("assigned_to",e));const{data:r,error:s}=await n;if(s)throw s;const i={};return lo.forEach(a=>{i[a]=0}),r==null||r.forEach(a=>{const o=a.status;i.hasOwnProperty(o)&&lo.includes(o)&&(i[o]=(i[o]||0)+1)}),i}catch(n){throw console.error("Error getting task counts:",n),n}}async getOverdueTasks(e){try{let n=this.supabaseService.getSupabaseClient().from("tasks").select("*");n=n.lt("scheduled_datetime",new Date().toISOString()),n=n.neq("status","completed").neq("status","admin_accepted").neq("status","cancelled"),e&&(n=n.eq("assigned_to",e));const{data:r,error:s}=await n;if(s)throw s;return r||[]}catch(n){throw console.error("Error getting overdue tasks:",n),n}}async getUpcomingTasks(e){try{const n=new Date,r=new Date(n.getTime()+24*60*60*1e3);let s=this.supabaseService.getSupabaseClient().from("tasks").select("*");s=s.gte("scheduled_datetime",n.toISOString()),s=s.lt("scheduled_datetime",r.toISOString()),s=s.neq("status","completed").neq("status","admin_accepted").neq("status","cancelled"),e&&(s=s.eq("assigned_to",e));const{data:i,error:a}=await s;if(a)throw a;return i||[]}catch(n){throw console.error("Error getting upcoming tasks:",n),n}}async getTaskAuditTrail(e){try{return await this.auditService.getAuditLog("tasks",e)}catch(n){throw console.error("Error fetching task audit trail:",n),n}}}class i_{constructor(e,n){this.supabaseService=e,this.role=n}async fetchNotes(e){if(e.attachedToType&&!bd.includes(e.attachedToType))throw new Error(`Invalid attachment type: ${e.attachedToType}`);if(e.attachedToType&&!e.attachedToId)throw new Error("attachedToId is required when attachedToType is specified");const r={select:this.role==="cleaner"?"id, content, created_at, attached_to_type, attached_to_id":"id, content, created_by, created_at, attached_to_type, attached_to_id",sorting:[{id:"created_at",desc:!1}]};e.attachedToType&&e.attachedToId&&(r.additionalFilters={attached_to_type:e.attachedToType,attached_to_id:e.attachedToId});const i=(await this.supabaseService.queryFromTable("notes",r)).data;return i.length>0&&this.role==="admin"?this.enrichNotesWithUserInfo(i):i}async createNote(e){return this.validateNoteData(e),await this.supabaseService.createRecord("notes",e)}async deleteNote(e){if(!e)throw new Error("Note ID is required for deletion");await this.supabaseService.deleteRecord("notes",e)}async getNotesByAttachment(e,n){return this.fetchNotes({attachedToType:e,attachedToId:n})}validateNoteData(e){const n=[];if((!e.content||e.content.trim().length===0)&&n.push("Note content is required"),e.content&&e.content.trim().length>1e4&&n.push("Note content cannot exceed 10,000 characters"),e.attached_to_type&&!bd.includes(e.attached_to_type)&&n.push(`Invalid attachment type: ${e.attached_to_type}`),e.attached_to_type&&!e.attached_to_id&&n.push("attached_to_id is required when attached_to_type is specified"),e.attached_to_id&&!e.attached_to_type&&n.push("attached_to_type is required when attached_to_id is specified"),n.length>0)throw new Error(`Note validation failed: ${n.join(", ")}`)}async enrichNotesWithUserInfo(e){const n=[...new Set(e.map(a=>a.created_by).filter(Boolean))];if(n.length===0)return e;const{data:r,error:s}=await this.supabaseService.getSupabaseClient().from("user_profiles").select("id, email, name").in("id",n);if(s)throw s;const i=new Map(r.map(a=>[a.id,a]));return e.map(a=>{const o=a,l=i.get(a.created_by);return l&&(l.email!==null&&(o.user_email=l.email),l.name!==null&&(o.user_name=l.name)),o})}}class a_{constructor(e){this.supabaseService=e}async getReservations(e={}){const{filters:n={},sorting:r=[{id:"check_in",desc:!0}],pagination:s={pageIndex:0,pageSize:10}}=e;let i=this.supabaseService.getSupabaseClient().from("reservations").select("*",{count:"exact"});if(n.status&&(i=i.eq("status",n.status)),n.listingId&&(i=i.eq("listing_id",n.listingId)),n.dateRange&&(n.dateRange.checkInFrom&&(i=i.gte("check_in",n.dateRange.checkInFrom)),n.dateRange.checkInTo&&(i=i.lte("check_in",n.dateRange.checkInTo)),n.dateRange.checkOutFrom&&(i=i.gte("check_out",n.dateRange.checkOutFrom)),n.dateRange.checkOutTo&&(i=i.lte("check_out",n.dateRange.checkOutTo))),n.globalFilter&&(i=i.or(`guest_name.ilike.%${n.globalFilter}%,listing_id.ilike.%${n.globalFilter}%,status.ilike.%${n.globalFilter}%`)),r&&r.length>0){const h=r[0];h&&(i=i.order(h.id,{ascending:!h.desc}))}const a=s.pageIndex*s.pageSize,o=a+s.pageSize-1;i=i.range(a,o);const{data:l,error:u,count:c}=await i;if(u)throw u;return{data:l||[],count:c||0}}async getReservationById(e){if(!e)throw new Error("Reservation ID is required");return this.supabaseService.getRecordById("reservations",e)}async createReservation(e){return this.validateReservationData(e),await this.supabaseService.createRecord("reservations",e)}async updateReservation(e,n){if(!e)throw new Error("Reservation ID is required for updates");this.validateReservationUpdate(n),await this.supabaseService.updateRecord("reservations",e,n)}async deleteReservation(e){if(!e)throw new Error("Reservation ID is required for deletion");await this.supabaseService.deleteRecord("reservations",e)}async getReservationsByListing(e){return(await this.supabaseService.queryFromTable("reservations",{additionalFilters:{listing_id:e},sorting:[{id:"check_in",desc:!0}]})).data}async getReservationsByStatus(e){return(await this.supabaseService.queryFromTable("reservations",{additionalFilters:{status:e},sorting:[{id:"check_in",desc:!0}]})).data}async getUpcomingReservations(){const e=new Date().toISOString().split("T")[0];return this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("reservations").select("*").gte("check_in",e).order("check_in",{ascending:!0}))}validateReservationData(e){const n=[];if((!e.id||e.id.trim().length===0)&&n.push("Reservation ID is required"),(!e.guest_name||e.guest_name.trim().length===0)&&n.push("Guest name is required"),e.guest_name&&e.guest_name.trim().length>255&&n.push("Guest name cannot exceed 255 characters"),e.check_in&&e.check_out){const s=new Date(e.check_in);new Date(e.check_out)<=s&&n.push("Check-out date must be after check-in date")}e.nights!==void 0&&e.nights!==null&&e.nights<0&&n.push("Number of nights cannot be negative"),e.party_size!==void 0&&e.party_size!==null&&e.party_size<0&&n.push("Party size cannot be negative");const r=["pricing_nightly_rate","pricing_subtotal","pricing_cleaning_fee","pricing_guest_service_fee","pricing_guest_total","pricing_host_service_fee","pricing_host_payout"];for(const s of r){const i=e[s];i!=null&&i<0&&n.push(`${s} cannot be negative`)}if(n.length>0)throw new Error(`Reservation validation failed: ${n.join(", ")}`)}validateReservationUpdate(e){const n=[];if(e.guest_name!==void 0&&e.guest_name.trim().length===0&&n.push("Guest name cannot be empty"),e.guest_name&&e.guest_name.trim().length>255&&n.push("Guest name cannot exceed 255 characters"),e.check_in&&e.check_out){const s=new Date(e.check_in);new Date(e.check_out)<=s&&n.push("Check-out date must be after check-in date")}e.nights!==void 0&&e.nights!==null&&e.nights<0&&n.push("Number of nights cannot be negative"),e.party_size!==void 0&&e.party_size!==null&&e.party_size<0&&n.push("Party size cannot be negative");const r=["pricing_nightly_rate","pricing_subtotal","pricing_cleaning_fee","pricing_guest_service_fee","pricing_guest_total","pricing_host_service_fee","pricing_host_payout"];for(const s of r){const i=e[s];i!=null&&i<0&&n.push(`${s} cannot be negative`)}if(n.length>0)throw new Error(`Reservation update validation failed: ${n.join(", ")}`)}}class o_{constructor(e,n){this.supabaseService=e,this.role=n}async getCleaners(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.from("roles").select("user_id").eq("role","cleaner").order("created_at");if(r)throw r;if(!n||n.length===0)return[];const{data:s,error:i}=await e.from("user_profiles").select("id, name, email").in("id",n.map(o=>o.user_id)).overrideTypes();if(i)throw i;return(s==null?void 0:s.map(o=>({id:o.id,name:o.name||o.email||`User ${o.id.substring(0,8)}...`,email:o.email||""})))||[]}async getCurrentSession(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.auth.getSession();if(r)throw r;return n.session}async getCurrentUser(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.auth.getUser();if(r)throw r;return n.user}async getUserProfile(e){if(!e)throw new Error("User ID is required");try{return await this.supabaseService.getRecordById("user_profiles",e)}catch(n){if(n instanceof Error&&n.message.includes("not found"))return null;throw n}}async getUsersByRole(e){if(e==="cleaner")return this.getCleaners();const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("roles").select("user_id").eq("role",e).order("created_at");if(s)throw s;if(!r||r.length===0)return[];const{data:i,error:a}=await n.from("user_profiles").select("id, name, email").in("id",r.map(l=>l.user_id)).overrideTypes();if(a)throw a;return(i==null?void 0:i.map(l=>({id:l.id,name:l.name||l.email||`User ${l.id.substring(0,8)}...`,email:l.email||""})))||[]}async getAllUsers(e={}){if(this.role!=="admin")throw new Error("Only admins can fetch all users");const{sorting:n=[{id:"created_at",desc:!0}],pagination:r={pageIndex:0,pageSize:10}}=e,s={sorting:n,pagination:r};if(e.role){const i=await this.supabaseService.queryFromTable("user_profiles",s);if(e.role!=="unassigned"){const a=await this.getUsersByRole(e.role),o=new Set(a.map(u=>u.id)),l=i.data.filter(u=>o.has(u.id));return{data:l,count:l.length}}return i}return this.supabaseService.queryFromTable("user_profiles",s)}async hasRole(e,n){if(!e)throw new Error("User ID is required");const r=this.supabaseService.getSupabaseClient();if(n==="unassigned"){const{data:a,error:o}=await r.from("roles").select("role").eq("user_id",e);if(o)throw o;return!a||a.length===0}const{data:s,error:i}=await r.from("roles").select("role").eq("user_id",e).eq("role",n).single();if(i){if(i.code==="PGRST116")return!1;throw i}return!!s}async getUserRoles(e){if(!e)throw new Error("User ID is required");const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("roles").select("role").eq("user_id",e);if(s)throw s;return(r==null?void 0:r.map(i=>i.role))||[]}async validateUserPermission(e,n,r){if(!e)throw new Error("User ID is required for permission validation");return await this.hasRole(e,n)?!0:(console.warn(`User ${e} lacks ${n} role for operation: ${r}`),!1)}async deleteUserProfile(e){if(!e)throw new Error("User ID is required for profile deletion");await this.supabaseService.deleteRecord("user_profiles",e)}}class l_{constructor(e){this.supabaseService=e}async fetchListings(){return(await this.supabaseService.queryFromTable("listings",{select:"id, airbnb_id, airbnb_payload, created_at, updated_at",sorting:[{id:"id",desc:!1}]})).data}async fetchListing(e){return this.supabaseService.getRecordById("listings",e)}async getListingsForSelection(){return(await this.supabaseService.queryFromTable("listings",{sorting:[{id:"id",desc:!1}]})).data}async searchListings(e={}){const n={};return e.id&&(n.id=e.id),e.airbnbId&&(n.airbnb_id=e.airbnbId),(await this.supabaseService.queryFromTable("listings",{additionalFilters:n,globalFilter:e.searchPattern||"",globalFilterColumns:["id","airbnb_id"],sorting:[{id:"id",desc:!1}]})).data}}class u_{constructor(e){this.supabaseService=e}async getAuditLog(e,n){const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("table_name",e).eq("record_id",n).order("changed_at",{ascending:!1}));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getAuditLogWithFilters(e={}){const{tableName:n,recordId:r,actionType:s,changedBy:i,dateFrom:a,dateTo:o,limit:l=100}=e;let u=this.supabaseService.getSupabaseClient().from("audit_log").select("*").order("changed_at",{ascending:!1}).limit(l);n&&(u=u.eq("table_name",n)),r&&(u=u.eq("record_id",r)),s&&(u=u.eq("action_type",s)),i&&(u=u.eq("changed_by",i)),a&&(u=u.gte("changed_at",a)),o&&(u=u.lte("changed_at",o));const c=await this.supabaseService.executeQuery(()=>u);return!c||c.length===0?[]:this.enrichWithUserProfiles(c)}async getTableAuditLog(e,n){if(!n||n.length===0)return[];const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("table_name",e).in("record_id",n).order("changed_at",{ascending:!1}));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getUserAuditLog(e,n=50){const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("changed_by",e).order("changed_at",{ascending:!1}).limit(n));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getRecentAuditActivity(e=20){const n=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").order("changed_at",{ascending:!1}).limit(e));return!n||n.length===0?[]:this.enrichWithUserProfiles(n)}async enrichWithUserProfiles(e){if(!e||e.length===0)return e;const n=[...new Set(e.map(i=>i.changed_by).filter(i=>i!==null))];if(n.length===0)return e;const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("user_profiles").select("id, email, name").in("id",n)),s=new Map((r==null?void 0:r.map(i=>[i.id,i]))||[]);return e.map(i=>{const a={...i};if(i.changed_by&&s.has(i.changed_by)){const o=s.get(i.changed_by);a.changed_by_name=o.name||void 0,a.changed_by_email=o.email||void 0}return a})}formatAuditEntry(e){const n=this.getActionDescription(e.action_type||"UPDATE"),r=this.getChangeDescription(e),s=new Date(e.changed_at).toLocaleString(),i=this.getUserDisplayName(e);return{action:n,description:r,timestamp:s,user:i}}getActionDescription(e){switch(e){case"INSERT":return"Created";case"UPDATE":return"Updated";case"DELETE":return"Deleted";default:return"Modified"}}getChangeDescription(e){if(e.action_type==="INSERT")return`New ${e.table_name} record created`;if(e.action_type==="DELETE")return`${e.table_name} record deleted`;if(e.changed_fields&&e.changed_fields.length>0){const n=e.changed_fields.length,r=e.changed_fields.join(", ");return`Updated ${n} field(s): ${r}`}return`${e.table_name} record updated`}getUserDisplayName(e){return e.changed_by?e.changed_by_name?e.changed_by_name:e.changed_by_email?e.changed_by_email.split("@")[0]:"Unknown User":"System"}}class c_{constructor(e){this.supabaseService=e}async getHealthCheck(){return this.supabaseService.callSupabaseFunction("health")}}const Be=()=>{const{role:t,supabaseService:e}=Te(),n=S.useMemo(()=>new r_(e,t),[e,t]),r=S.useMemo(()=>new i_(e,t),[e,t]),s=S.useMemo(()=>new a_(e),[e]),i=S.useMemo(()=>new o_(e,t),[e,t]),a=S.useMemo(()=>new l_(e),[e]),o=S.useMemo(()=>new u_(e),[e]),l=S.useMemo(()=>new s_(e,o),[e,o]),u=S.useMemo(()=>new c_(e),[e]);return{supabaseService:e,todoService:n,taskService:l,noteService:r,reservationService:s,userService:i,listingService:a,auditService:o,healthCheckService:u}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Yt(t,e){return typeof t=="function"?t(e):t}function Ue(t,e){return n=>{e.setState(r=>({...r,[t]:Yt(n,r[t])}))}}function Ca(t){return t instanceof Function}function d_(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function h_(t,e){const n=[],r=s=>{s.forEach(i=>{n.push(i);const a=e(i);a!=null&&a.length&&r(a)})};return r(t),n}function A(t,e,n){let r=[],s;return i=>{let a;n.key&&n.debug&&(a=Date.now());const o=t(i);if(!(o.length!==r.length||o.some((c,h)=>r[h]!==c)))return s;r=o;let u;if(n.key&&n.debug&&(u=Date.now()),s=e(...o),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-a)*100)/100,h=Math.round((Date.now()-u)*100)/100,f=h/16,g=(p,w)=>{for(p=String(p);p.length<w;)p=" "+p;return p};console.info(`%c ${g(h,5)} /${g(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function I(t,e,n,r){return{debug:()=>{var s;return(s=t==null?void 0:t.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function f_(t,e,n,r){const s=()=>{var a;return(a=i.getValue())!=null?a:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:A(()=>[t,n,e,i],(a,o,l,u)=>({table:a,column:o,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),I(t.options,"debugCells"))};return t._features.forEach(a=>{a.createCell==null||a.createCell(i,n,e,t)},{}),i}function g_(t,e,n,r){var s,i;const o={...t._getDefaultColumnDef(),...e},l=o.accessorKey;let u=(s=(i=o.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof o.header=="string"?o.header:void 0,c;if(o.accessorFn?c=o.accessorFn:l&&(l.includes(".")?c=f=>{let g=f;for(const w of l.split(".")){var p;g=(p=g)==null?void 0:p[w]}return g}:c=f=>f[o.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:o,columns:[],getFlatColumns:A(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(g=>g.getFlatColumns())]},I(t.options,"debugColumns")),getLeafColumns:A(()=>[t._getOrderColumnsFn()],f=>{var g;if((g=h.columns)!=null&&g.length){let p=h.columns.flatMap(w=>w.getLeafColumns());return f(p)}return[h]},I(t.options,"debugColumns"))};for(const f of t._features)f.createColumn==null||f.createColumn(h,t);return h}const Se="debugHeaders";function jd(t,e,n){var r;let i={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],o=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(o),a.push(l)};return o(i),a},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(i,t)}),i}const p_={createTable:t=>{t.getHeaderGroups=A(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var i,a;const o=(i=r==null?void 0:r.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?i:[],l=(a=s==null?void 0:s.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?a:[],u=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(s!=null&&s.includes(h.id)));return oi(e,[...o,...u,...l],t)},I(t.options,Se)),t.getCenterHeaderGroups=A(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),oi(e,n,t,"center")),I(t.options,Se)),t.getLeftHeaderGroups=A(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(a=>n.find(o=>o.id===a)).filter(Boolean))!=null?s:[];return oi(e,i,t,"left")},I(t.options,Se)),t.getRightHeaderGroups=A(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(a=>n.find(o=>o.id===a)).filter(Boolean))!=null?s:[];return oi(e,i,t,"right")},I(t.options,Se)),t.getFooterGroups=A(()=>[t.getHeaderGroups()],e=>[...e].reverse(),I(t.options,Se)),t.getLeftFooterGroups=A(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),I(t.options,Se)),t.getCenterFooterGroups=A(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),I(t.options,Se)),t.getRightFooterGroups=A(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),I(t.options,Se)),t.getFlatHeaders=A(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),I(t.options,Se)),t.getLeftFlatHeaders=A(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),I(t.options,Se)),t.getCenterFlatHeaders=A(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),I(t.options,Se)),t.getRightFlatHeaders=A(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),I(t.options,Se)),t.getCenterLeafHeaders=A(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),I(t.options,Se)),t.getLeftLeafHeaders=A(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),I(t.options,Se)),t.getRightLeafHeaders=A(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),I(t.options,Se)),t.getLeafHeaders=A(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,i,a,o,l,u;return[...(s=(i=e[0])==null?void 0:i.headers)!=null?s:[],...(a=(o=n[0])==null?void 0:o.headers)!=null?a:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},I(t.options,Se))}};function oi(t,e,n,r){var s,i;let a=0;const o=function(f,g){g===void 0&&(g=1),a=Math.max(a,g),f.filter(p=>p.getIsVisible()).forEach(p=>{var w;(w=p.columns)!=null&&w.length&&o(p.columns,g+1)},0)};o(t);let l=[];const u=(f,g)=>{const p={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},w=[];f.forEach(_=>{const v=[...w].reverse()[0],m=_.column.depth===p.depth;let y,x=!1;if(m&&_.column.parent?y=_.column.parent:(y=_.column,x=!0),v&&(v==null?void 0:v.column)===y)v.subHeaders.push(_);else{const k=jd(n,y,{id:[r,g,y.id,_==null?void 0:_.id].filter(Boolean).join("_"),isPlaceholder:x,placeholderId:x?`${w.filter(C=>C.column===y).length}`:void 0,depth:g,index:w.length});k.subHeaders.push(_),w.push(k)}p.headers.push(_),_.headerGroup=p}),l.push(p),g>0&&u(w,g-1)},c=e.map((f,g)=>jd(n,f,{depth:a,index:g}));u(c,a-1),l.reverse();const h=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let w=0,_=0,v=[0];p.subHeaders&&p.subHeaders.length?(v=[],h(p.subHeaders).forEach(y=>{let{colSpan:x,rowSpan:k}=y;w+=x,v.push(k)})):w=1;const m=Math.min(...v);return _=_+m,p.colSpan=w,p.rowSpan=_,{colSpan:w,rowSpan:_}});return h((s=(i=l[0])==null?void 0:i.headers)!=null?s:[]),l}const zu=(t,e,n,r,s,i,a)=>{let o={id:e,index:r,original:n,depth:s,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(o._valuesCache.hasOwnProperty(l))return o._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return o._valuesCache[l]=u.accessorFn(o.original,r),o._valuesCache[l]},getUniqueValues:l=>{if(o._uniqueValuesCache.hasOwnProperty(l))return o._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(o._uniqueValuesCache[l]=u.columnDef.getUniqueValues(o.original,r),o._uniqueValuesCache[l]):(o._uniqueValuesCache[l]=[o.getValue(l)],o._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=o.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>h_(o.subRows,l=>l.subRows),getParentRow:()=>o.parentId?t.getRow(o.parentId,!0):void 0,getParentRows:()=>{let l=[],u=o;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:A(()=>[t.getAllLeafColumns()],l=>l.map(u=>f_(t,o,u,u.id)),I(t.options,"debugRows")),_getAllCellsByColumnId:A(()=>[o.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),I(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(o,t)}return o},m_={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Zg=(t,e,n)=>{var r,s;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};Zg.autoRemove=t=>ut(t);const ep=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};ep.autoRemove=t=>ut(t);const tp=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};tp.autoRemove=t=>ut(t);const np=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};np.autoRemove=t=>ut(t);const rp=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});rp.autoRemove=t=>ut(t)||!(t!=null&&t.length);const sp=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});sp.autoRemove=t=>ut(t)||!(t!=null&&t.length);const ip=(t,e,n)=>t.getValue(e)===n;ip.autoRemove=t=>ut(t);const ap=(t,e,n)=>t.getValue(e)==n;ap.autoRemove=t=>ut(t);const Vu=(t,e,n)=>{let[r,s]=n;const i=t.getValue(e);return i>=r&&i<=s};Vu.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(r)?-1/0:r,a=n===null||Number.isNaN(s)?1/0:s;if(i>a){const o=i;i=a,a=o}return[i,a]};Vu.autoRemove=t=>ut(t)||ut(t[0])&&ut(t[1]);const jt={includesString:Zg,includesStringSensitive:ep,equalsString:tp,arrIncludes:np,arrIncludesAll:rp,arrIncludesSome:sp,equals:ip,weakEquals:ap,inNumberRange:Vu};function ut(t){return t==null||t===""}const v_={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Ue("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?jt.includesString:typeof r=="number"?jt.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?jt.equals:Array.isArray(r)?jt.arrIncludes:jt.weakEquals},t.getFilterFn=()=>{var n,r;return Ca(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:jt[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),i=r==null?void 0:r.find(c=>c.id===t.id),a=Yt(n,i?i.value:void 0);if(Rd(s,a,t)){var o;return(o=r==null?void 0:r.filter(c=>c.id!==t.id))!=null?o:[]}const l={id:t.id,value:a};if(i){var u;return(u=r==null?void 0:r.map(c=>c.id===t.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var i;return(i=Yt(e,s))==null?void 0:i.filter(a=>{const o=n.find(l=>l.id===a.id);if(o){const l=o.getFilterFn();if(Rd(l,a.value,o))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Rd(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const y_=(t,e,n)=>n.reduce((r,s)=>{const i=s.getValue(t);return r+(typeof i=="number"?i:0)},0),w_=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},S_=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},__=(t,e,n)=>{let r,s;return n.forEach(i=>{const a=i.getValue(t);a!=null&&(r===void 0?a>=a&&(r=s=a):(r>a&&(r=a),s<a&&(s=a)))}),[r,s]},x_=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let i=s.getValue(t);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},k_=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!d_(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((i,a)=>i-a);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},C_=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),E_=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,b_=(t,e)=>e.length,uo={sum:y_,min:w_,max:S_,extent:__,mean:x_,median:k_,unique:C_,uniqueCount:E_,count:b_},j_={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Ue("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return uo.sum;if(Object.prototype.toString.call(r)==="[object Date]")return uo.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Ca(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:uo[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function R_(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(i=>!e.includes(i.id));return n==="remove"?r:[...e.map(i=>t.find(a=>a.id===i)).filter(Boolean),...r]}const T_={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Ue("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=A(n=>[rs(e,n)],n=>n.findIndex(r=>r.id===t.id),I(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=rs(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=rs(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=A(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let i=[];if(!(e!=null&&e.length))i=s;else{const a=[...e],o=[...s];for(;o.length&&a.length;){const l=a.shift(),u=o.findIndex(c=>c.id===l);u>-1&&i.push(o.splice(u,1)[0])}i=[...i,...o]}return R_(i,n,r)},I(t.options,"debugTable"))}},co=()=>({left:[],right:[]}),P_={getInitialState:t=>({columnPinning:co(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Ue("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var i,a;if(n==="right"){var o,l;return{left:((o=s==null?void 0:s.left)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var u,c;return{left:[...((u=s==null?void 0:s.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((c=s==null?void 0:s.right)!=null?c:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((i=s==null?void 0:s.left)!=null?i:[]).filter(h=>!(r!=null&&r.includes(h))),right:((a=s==null?void 0:s.right)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,i,a;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(a=e.options.enableColumnPinning)!=null?a:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(o=>o.id),{left:r,right:s}=e.getState().columnPinning,i=n.some(o=>r==null?void 0:r.includes(o)),a=n.some(o=>s==null?void 0:s.includes(o));return i?"left":a?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=A(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const i=[...r??[],...s??[]];return n.filter(a=>!i.includes(a.column.id))},I(e.options,"debugRows")),t.getLeftVisibleCells=A(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),I(e.options,"debugRows")),t.getRightVisibleCells=A(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),I(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?co():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:co())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=A(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),I(t.options,"debugColumns")),t.getRightLeafColumns=A(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),I(t.options,"debugColumns")),t.getCenterLeafColumns=A(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(i=>!s.includes(i.id))},I(t.options,"debugColumns"))}};function N_(t){return t||(typeof document<"u"?document:null)}const li={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},ho=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),L_={getDefaultColumnDef:()=>li,getInitialState:t=>({columnSizing:{},columnSizingInfo:ho(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ue("columnSizing",t),onColumnSizingInfoChange:Ue("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:li.minSize,(r=i??t.columnDef.size)!=null?r:li.size),(s=t.columnDef.maxSize)!=null?s:li.maxSize)},t.getStart=A(n=>[n,rs(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,i)=>s+i.getSize(),0),I(e.options,"debugColumns")),t.getAfter=A(n=>[n,rs(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,i)=>s+i.getSize(),0),I(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;n+=(i=s.column.getSize())!=null?i:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r==null?void 0:r.getCanResize();return i=>{if(!r||!s||(i.persist==null||i.persist(),fo(i)&&i.touches&&i.touches.length>1))return;const a=t.getSize(),o=t?t.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[r.id,r.getSize()]],l=fo(i)?Math.round(i.touches[0].clientX):i.clientX,u={},c=(v,m)=>{typeof m=="number"&&(e.setColumnSizingInfo(y=>{var x,k;const C=e.options.columnResizeDirection==="rtl"?-1:1,E=(m-((x=y==null?void 0:y.startOffset)!=null?x:0))*C,b=Math.max(E/((k=y==null?void 0:y.startSize)!=null?k:0),-.999999);return y.columnSizingStart.forEach(P=>{let[T,z]=P;u[T]=Math.round(Math.max(z+z*b,0)*100)/100}),{...y,deltaOffset:E,deltaPercentage:b}}),(e.options.columnResizeMode==="onChange"||v==="end")&&e.setColumnSizing(y=>({...y,...u})))},h=v=>c("move",v),f=v=>{c("end",v),e.setColumnSizingInfo(m=>({...m,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=N_(n),p={moveHandler:v=>h(v.clientX),upHandler:v=>{g==null||g.removeEventListener("mousemove",p.moveHandler),g==null||g.removeEventListener("mouseup",p.upHandler),f(v.clientX)}},w={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),h(v.touches[0].clientX),!1),upHandler:v=>{var m;g==null||g.removeEventListener("touchmove",w.moveHandler),g==null||g.removeEventListener("touchend",w.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),f((m=v.touches[0])==null?void 0:m.clientX)}},_=$_()?{passive:!1}:!1;fo(i)?(g==null||g.addEventListener("touchmove",w.moveHandler,_),g==null||g.addEventListener("touchend",w.upHandler,_)):(g==null||g.addEventListener("mousemove",p.moveHandler,_),g==null||g.addEventListener("mouseup",p.upHandler,_)),e.setColumnSizingInfo(v=>({...v,startOffset:l,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?ho():(n=t.initialState.columnSizingInfo)!=null?n:ho())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let ui=null;function $_(){if(typeof ui=="boolean")return ui;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return ui=t,ui}function fo(t){return t.type==="touchstart"}const A_={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Ue("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(i=>i.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=A(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),I(e.options,"debugRows")),t.getVisibleCells=A(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],I(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>A(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),I(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function rs(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const I_={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},O_={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Ue("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>jt.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Ca(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:jt[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},F_={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Ue("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,i;t.setExpanded(r?{}:(s=(i=t.initialState)==null?void 0:i.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const a=i.split(".");r=Math.max(r,a.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[t.id]);let a={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(o=>{a[o]=!0}):a=r,n=(s=n)!=null?s:!i,!i&&n)return{...a,[t.id]:!0};if(i&&!n){const{[t.id]:o,...l}=a;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Rl=0,Tl=10,go=()=>({pageIndex:Rl,pageSize:Tl}),D_={getInitialState:t=>({...t,pagination:{...go(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:Ue("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=i=>Yt(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?go():(s=t.initialState.pagination)!=null?s:go())},t.setPageIndex=r=>{t.setPagination(s=>{let i=Yt(r,s.pageIndex);const a=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,a)),{...s,pageIndex:i}})},t.resetPageIndex=r=>{var s,i;t.setPageIndex(r?Rl:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Rl)},t.resetPageSize=r=>{var s,i;t.setPageSize(r?Tl:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:Tl)},t.setPageSize=r=>{t.setPagination(s=>{const i=Math.max(1,Yt(r,s.pageSize)),a=s.pageSize*s.pageIndex,o=Math.floor(a/i);return{...s,pageIndex:o,pageSize:i}})},t.setPageCount=r=>t.setPagination(s=>{var i;let a=Yt(r,(i=t.options.pageCount)!=null?i:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...s,pageCount:a}}),t.getPageOptions=A(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,a)=>a)),s},I(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},po=()=>({top:[],bottom:[]}),M_={getInitialState:t=>({rowPinning:po(),...t}),getDefaultOptions:t=>({onRowPinningChange:Ue("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const i=r?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],a=s?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],o=new Set([...a,t.id,...i]);e.setRowPinning(l=>{var u,c;if(n==="bottom"){var h,f;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(w=>!(o!=null&&o.has(w))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(w=>!(o!=null&&o.has(w))),...Array.from(o)]}}if(n==="top"){var g,p;return{top:[...((g=l==null?void 0:l.top)!=null?g:[]).filter(w=>!(o!=null&&o.has(w))),...Array.from(o)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(w=>!(o!=null&&o.has(w)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(w=>!(o!=null&&o.has(w))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(w=>!(o!=null&&o.has(w)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,i=n.some(o=>r==null?void 0:r.includes(o)),a=n.some(o=>s==null?void 0:s.includes(o));return i?"top":a?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const i=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(a=>{let{id:o}=a;return o});return(r=i==null?void 0:i.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?po():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:po())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(a=>{const o=t.getRow(a,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(a=>e.find(o=>o.id===a))).filter(Boolean).map(a=>({...a,position:r}))},t.getTopRows=A(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),I(t.options,"debugRows")),t.getBottomRows=A(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),I(t.options,"debugRows")),t.getCenterRows=A(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(i=>!s.has(i.id))},I(t.options,"debugRows"))}},U_={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Ue("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(i=>{Pl(s,i.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=A(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?mo(t,n):{rows:[],flatRows:[],rowsById:{}},I(t.options,"debugTable")),t.getFilteredSelectedRowModel=A(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?mo(t,n):{rows:[],flatRows:[],rowsById:{}},I(t.options,"debugTable")),t.getGroupedSelectedRowModel=A(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?mo(t,n):{rows:[],flatRows:[],rowsById:{}},I(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(i=>{var a;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return i;const o={...i};return Pl(o,t.id,n,(a=r==null?void 0:r.selectChildren)!=null?a:!0,e),o})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return Bu(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return Nl(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return Nl(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Pl=(t,e,n,r,s)=>{var i;const a=s.getRow(e,!0);n?(a.getCanMultiSelect()||Object.keys(t).forEach(o=>delete t[o]),a.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(i=a.subRows)!=null&&i.length&&a.getCanSelectSubRows()&&a.subRows.forEach(o=>Pl(t,o.id,n,r,s))};function mo(t,e){const n=t.getState().rowSelection,r=[],s={},i=function(a,o){return a.map(l=>{var u;const c=Bu(l,n);if(c&&(r.push(l),s[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:i(l.subRows)}),c)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:s}}function Bu(t,e){var n;return(n=e[t.id])!=null?n:!1}function Nl(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return t.subRows.forEach(a=>{if(!(i&&!s)&&(a.getCanSelect()&&(Bu(a,e)?i=!0:s=!1),a.subRows&&a.subRows.length)){const o=Nl(a,e);o==="all"?i=!0:(o==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const Ll=/([0-9]+)/gm,z_=(t,e,n)=>op(cn(t.getValue(n)).toLowerCase(),cn(e.getValue(n)).toLowerCase()),V_=(t,e,n)=>op(cn(t.getValue(n)),cn(e.getValue(n))),B_=(t,e,n)=>Hu(cn(t.getValue(n)).toLowerCase(),cn(e.getValue(n)).toLowerCase()),H_=(t,e,n)=>Hu(cn(t.getValue(n)),cn(e.getValue(n))),q_=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},W_=(t,e,n)=>Hu(t.getValue(n),e.getValue(n));function Hu(t,e){return t===e?0:t>e?1:-1}function cn(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function op(t,e){const n=t.split(Ll).filter(Boolean),r=e.split(Ll).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),i=r.shift(),a=parseInt(s,10),o=parseInt(i,10),l=[a,o].sort();if(isNaN(l[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(l[1]))return isNaN(a)?-1:1;if(a>o)return 1;if(o>a)return-1}return n.length-r.length}const Dr={alphanumeric:z_,alphanumericCaseSensitive:V_,text:B_,textCaseSensitive:H_,datetime:q_,basic:W_},G_={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Ue("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const i=s==null?void 0:s.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return Dr.datetime;if(typeof i=="string"&&(r=!0,i.split(Ll).length>1))return Dr.alphanumeric}return r?Dr.text:Dr.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Ca(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Dr[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(a=>{const o=a==null?void 0:a.find(g=>g.id===t.id),l=a==null?void 0:a.findIndex(g=>g.id===t.id);let u=[],c,h=i?n:s==="desc";if(a!=null&&a.length&&t.getCanMultiSort()&&r?o?c="toggle":c="add":a!=null&&a.length&&l!==a.length-1?c="replace":o?c="toggle":c="replace",c==="toggle"&&(i||s||(c="remove")),c==="add"){var f;u=[...a,{id:t.id,desc:h}],u.splice(0,u.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=a.map(g=>g.id===t.id?{...g,desc:h}:g):c==="remove"?u=a.filter(g=>g.id!==t.id):u=[{id:t.id,desc:h}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const i=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:a==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},K_=[p_,A_,T_,P_,m_,v_,I_,O_,G_,j_,F_,D_,M_,U_,L_];function Q_(t){var e,n;const r=[...K_,...(e=t._features)!=null?e:[]];let s={_features:r};const i=s._features.reduce((f,g)=>Object.assign(f,g.getDefaultOptions==null?void 0:g.getDefaultOptions(s)),{}),a=f=>s.options.mergeOptions?s.options.mergeOptions(i,f):{...i,...f};let l={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(f=>{var g;l=(g=f.getInitialState==null?void 0:f.getInitialState(l))!=null?g:l});const u=[];let c=!1;const h={_features:r,options:{...i,...t},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{s.setState(s.initialState)},setOptions:f=>{const g=Yt(f,s.options);s.options=a(g)},getState:()=>s.options.state,setState:f=>{s.options.onStateChange==null||s.options.onStateChange(f)},_getRowId:(f,g,p)=>{var w;return(w=s.options.getRowId==null?void 0:s.options.getRowId(f,g,p))!=null?w:`${p?[p.id,g].join("."):g}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(f,g)=>{let p=(g?s.getPrePaginationRowModel():s.getRowModel()).rowsById[f];if(!p&&(p=s.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:A(()=>[s.options.defaultColumn],f=>{var g;return f=(g=f)!=null?g:{},{header:p=>{const w=p.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:p=>{var w,_;return(w=(_=p.renderValue())==null||_.toString==null?void 0:_.toString())!=null?w:null},...s._features.reduce((p,w)=>Object.assign(p,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...f}},I(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:A(()=>[s._getColumnDefs()],f=>{const g=function(p,w,_){return _===void 0&&(_=0),p.map(v=>{const m=g_(s,v,_,w),y=v;return m.columns=y.columns?g(y.columns,m,_+1):[],m})};return g(f)},I(t,"debugColumns")),getAllFlatColumns:A(()=>[s.getAllColumns()],f=>f.flatMap(g=>g.getFlatColumns()),I(t,"debugColumns")),_getAllFlatColumnsById:A(()=>[s.getAllFlatColumns()],f=>f.reduce((g,p)=>(g[p.id]=p,g),{}),I(t,"debugColumns")),getAllLeafColumns:A(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(f,g)=>{let p=f.flatMap(w=>w.getLeafColumns());return g(p)},I(t,"debugColumns")),getColumn:f=>s._getAllFlatColumnsById()[f]};Object.assign(s,h);for(let f=0;f<s._features.length;f++){const g=s._features[f];g==null||g.createTable==null||g.createTable(s)}return s}function J_(){return t=>A(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,i,a){i===void 0&&(i=0);const o=[];for(let u=0;u<s.length;u++){const c=zu(t,t._getRowId(s[u],u,a),s[u],u,i,void 0,a==null?void 0:a.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,o.push(c),t.options.getSubRows){var l;c.originalSubRows=t.options.getSubRows(s[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,i+1,c))}}return o};return n.rows=r(e),n},I(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function Y_(t){const e=[],n=r=>{var s;e.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function X_(t,e,n){return n.options.filterFromLeafRows?Z_(t,e,n):ex(t,e,n)}function Z_(t,e,n){var r;const s=[],i={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,o=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){var h;let g=l[f];const p=zu(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(p.columnFilters=g.columnFilters,(h=g.subRows)!=null&&h.length&&u<a){if(p.subRows=o(g.subRows,u+1),g=p,e(g)&&!p.subRows.length){c.push(g),i[g.id]=g,s.push(g);continue}if(e(g)||p.subRows.length){c.push(g),i[g.id]=g,s.push(g);continue}}else g=p,e(g)&&(c.push(g),i[g.id]=g,s.push(g))}return c};return{rows:o(t),flatRows:s,rowsById:i}}function ex(t,e,n){var r;const s=[],i={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,o=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){let g=l[f];if(e(g)){var h;if((h=g.subRows)!=null&&h.length&&u<a){const w=zu(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);w.subRows=o(g.subRows,u+1),g=w}c.push(g),s.push(g),i[g.id]=g}}return c};return{rows:o(t),flatRows:s,rowsById:i}}function tx(){return t=>A(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,r)=>{if(!e.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<e.flatRows.length;f++)e.flatRows[f].columnFilters={},e.flatRows[f].columnFiltersMeta={};return e}const s=[],i=[];(n??[]).forEach(f=>{var g;const p=t.getColumn(f.id);if(!p)return;const w=p.getFilterFn();w&&s.push({id:f.id,filterFn:w,resolvedValue:(g=w.resolveFilterValue==null?void 0:w.resolveFilterValue(f.value))!=null?g:f.value})});const a=(n??[]).map(f=>f.id),o=t.getGlobalFilterFn(),l=t.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&o&&l.length&&(a.push("__global__"),l.forEach(f=>{var g;i.push({id:f.id,filterFn:o,resolvedValue:(g=o.resolveFilterValue==null?void 0:o.resolveFilterValue(r))!=null?g:r})}));let u,c;for(let f=0;f<e.flatRows.length;f++){const g=e.flatRows[f];if(g.columnFilters={},s.length)for(let p=0;p<s.length;p++){u=s[p];const w=u.id;g.columnFilters[w]=u.filterFn(g,w,u.resolvedValue,_=>{g.columnFiltersMeta[w]=_})}if(i.length){for(let p=0;p<i.length;p++){c=i[p];const w=c.id;if(c.filterFn(g,w,c.resolvedValue,_=>{g.columnFiltersMeta[w]=_})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const h=f=>{for(let g=0;g<a.length;g++)if(f.columnFilters[a[g]]===!1)return!1;return!0};return X_(e.rows,h,t)},I(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function nx(t){return e=>A(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:i}=n;let{rows:a,flatRows:o,rowsById:l}=r;const u=s*i,c=u+s;a=a.slice(u,c);let h;e.options.paginateExpandedRows?h={rows:a,flatRows:o,rowsById:l}:h=Y_({rows:a,flatRows:o,rowsById:l}),h.flatRows=[];const f=g=>{h.flatRows.push(g),g.subRows.length&&g.subRows.forEach(f)};return h.rows.forEach(f),h},I(e.options,"debugTable"))}function rx(){return t=>A(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],i=r.filter(l=>{var u;return(u=t.getColumn(l.id))==null?void 0:u.getCanSort()}),a={};i.forEach(l=>{const u=t.getColumn(l.id);u&&(a[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const o=l=>{const u=l.map(c=>({...c}));return u.sort((c,h)=>{for(let g=0;g<i.length;g+=1){var f;const p=i[g],w=a[p.id],_=w.sortUndefined,v=(f=p==null?void 0:p.desc)!=null?f:!1;let m=0;if(_){const y=c.getValue(p.id),x=h.getValue(p.id),k=y===void 0,C=x===void 0;if(k||C){if(_==="first")return k?-1:1;if(_==="last")return k?1:-1;m=k&&C?0:k?_:-_}}if(m===0&&(m=w.sortingFn(c,h,p.id)),m!==0)return v&&(m*=-1),w.invertSorting&&(m*=-1),m}return c.index-h.index}),u.forEach(c=>{var h;s.push(c),(h=c.subRows)!=null&&h.length&&(c.subRows=o(c.subRows))}),u};return{rows:o(n.rows),flatRows:s,rowsById:n.rowsById}},I(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Td(t,e){return t?sx(t)?S.createElement(t,e):t:null}function sx(t){return ix(t)||typeof t=="function"||ax(t)}function ix(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function ax(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function ox(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=S.useState(()=>({current:Q_(e)})),[r,s]=S.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:a=>{s(a),t.onStateChange==null||t.onStateChange(a)}})),n.current}const Fs=({data:t=[],columns:e=[],loading:n=!1,error:r=null,enablePagination:s=!0,serverSide:i=!1,onServerSideChange:a,totalCount:o=0,pageSize:l=10,pageIndex:u=0,sorting:c=[],globalFilter:h="",className:f=""})=>{const{t:g}=X(),[p,w]=S.useState(c),[_,v]=S.useState(h),[m,y]=S.useState({pageIndex:u,pageSize:l}),x=C=>{i&&a&&a(C)},k=ox({data:t,columns:e,getCoreRowModel:J_(),getSortedRowModel:rx(),getPaginationRowModel:nx(),getFilteredRowModel:tx(),state:{sorting:p,globalFilter:_,pagination:m},onSortingChange:C=>{const E=typeof C=="function"?C(p):C;w(E),i&&x({sorting:E,pagination:m,globalFilter:_})},onGlobalFilterChange:C=>{if(v(C),i){const E={...m,pageIndex:0};y(E),x({sorting:p,pagination:E,globalFilter:C})}},onPaginationChange:C=>{const E=typeof C=="function"?C(m):C;y(E),i&&x({sorting:p,pagination:E,globalFilter:_})},manualSorting:i,manualFiltering:i,manualPagination:i,...i&&{rowCount:o}});return n?d.jsxs("div",{className:"data-table-loading",children:[d.jsx("div",{className:"loading-spinner"}),g("dataTable.loadingData")]}):r?d.jsxs("div",{className:"error",children:[d.jsx("h3",{className:"error-title",children:g("dataTable.failedToLoad")}),d.jsx("p",{className:"error-message",children:r})]}):d.jsxs("div",{className:`data-table ${f}`,children:[d.jsxs("div",{className:"data-table-controls",children:[d.jsx("div",{className:"search-container",children:d.jsx("input",{type:"text",placeholder:g("dataTable.searchPlaceholder"),value:_??"",onChange:C=>k.setGlobalFilter(C.target.value),className:"search-input"})}),d.jsx("div",{className:"table-info",children:i?d.jsx("span",{className:"table-stats",children:g("dataTable.showingEntries",{start:Math.min(m.pageIndex*m.pageSize+1,o),end:Math.min((m.pageIndex+1)*m.pageSize,o),total:o})}):d.jsx("span",{className:"table-stats",children:g("dataTable.showingCount",{count:k.getRowModel().rows.length,total:t.length})})})]}),d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"data-table-element",children:[d.jsx("thead",{children:k.getHeaderGroups().map(C=>d.jsx("tr",{children:C.headers.map(E=>d.jsx("th",{className:"data-table-header",children:E.isPlaceholder?null:d.jsxs("div",{className:`header-content ${E.column.getCanSort()?"sortable":""}`,onClick:E.column.getToggleSortingHandler(),children:[Td(E.column.columnDef.header,E.getContext()),E.column.getCanSort()&&d.jsx("span",{className:"sort-indicator",children:{asc:" ",desc:" "}[E.column.getIsSorted()]??" "})]})},E.id))},C.id))}),d.jsx("tbody",{children:k.getRowModel().rows.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:e.length,className:"empty-row",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-state-icon",children:""}),d.jsx("h3",{className:"empty-state-title",children:g("dataTable.noData")}),d.jsx("p",{className:"empty-state-description",children:g(_?"dataTable.noResults":"dataTable.noDataAvailable")})]})})}):k.getRowModel().rows.map(C=>d.jsx("tr",{className:"data-table-row",children:C.getVisibleCells().map(E=>d.jsx("td",{className:"data-table-cell",children:Td(E.column.columnDef.cell,E.getContext())},E.id))},C.id))})]})}),s&&d.jsxs("div",{className:"pagination-controls",children:[d.jsx("div",{className:"pagination-info",children:d.jsx("span",{children:g("dataTable.pageInfo",{current:k.getState().pagination.pageIndex+1,total:k.getPageCount()})})}),d.jsxs("div",{className:"pagination-buttons",children:[d.jsx("button",{onClick:()=>k.setPageIndex(0),disabled:!k.getCanPreviousPage(),className:"pagination-btn",children:""}),d.jsx("button",{onClick:()=>k.previousPage(),disabled:!k.getCanPreviousPage(),className:"pagination-btn",children:""}),d.jsx("button",{onClick:()=>k.nextPage(),disabled:!k.getCanNextPage(),className:"pagination-btn",children:""}),d.jsx("button",{onClick:()=>k.setPageIndex(k.getPageCount()-1),disabled:!k.getCanNextPage(),className:"pagination-btn",children:""})]}),d.jsx("div",{className:"page-size-selector",children:d.jsx("select",{value:k.getState().pagination.pageSize,onChange:C=>{k.setPageSize(Number(C.target.value))},className:"page-size-select",children:[10,25,50,100].map(C=>d.jsx("option",{value:C,children:g("dataTable.showSize",{size:C})},C))})})]})]})};function lx(){const{reservationService:t}=Be(),{t:e}=X(),[n,r]=S.useState([]),[s,i]=S.useState(!0),[a,o]=S.useState(null),[l,u]=S.useState(0),[c,h]=S.useState({pageIndex:0,pageSize:10}),[f,g]=S.useState([{id:"check_in",desc:!0}]),[p,w]=S.useState("");S.useEffect(()=>{_()},[c,f,p]);const _=async()=>{try{i(!0),o(null);const k=await t.getReservations({filters:{globalFilter:p},sorting:f,pagination:c});r(k.data),u(k.count)}catch(k){o(k instanceof Error?k.message:String(k)),console.error("Error fetching reservations:",k)}finally{i(!1)}},v=k=>{k.pagination&&h(k.pagination),k.sorting!==void 0&&g(k.sorting),k.globalFilter!==void 0&&w(k.globalFilter)},m=k=>k?new Date(k).toLocaleDateString():e("columns.na"),y=k=>k?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k):e("columns.na"),x=S.useMemo(()=>[{accessorKey:"id",header:e("columns.id"),cell:({getValue:k})=>{const C=k();return d.jsxs("span",{className:"reservation-id",title:C,children:[C.substring(0,8),"..."]})},enableSorting:!1},{accessorKey:"guest_name",header:e("reservations.guest"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"listing_id",header:e("reservations.property"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"check_in",header:e("reservations.checkIn"),cell:({getValue:k})=>m(k())},{accessorKey:"check_out",header:e("reservations.checkOut"),cell:({getValue:k})=>m(k())},{accessorKey:"nights",header:e("reservations.nights"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"party_size",header:e("reservations.guests"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"status",header:e("columns.status"),cell:({getValue:k})=>{const C=k();return d.jsx("span",{className:`status-badge status-${C}`,children:C})}},{accessorKey:"pricing_guest_total",header:e("reservations.total"),cell:({getValue:k})=>d.jsx("span",{className:"currency",children:y(k())})},{accessorKey:"pricing_host_payout",header:e("reservations.hostPayout"),cell:({getValue:k})=>d.jsx("span",{className:"currency",children:y(k())})}],[m,y,e]);return d.jsx("div",{className:"admin-reservations",children:d.jsx(Fs,{data:n,columns:x,loading:s,error:a,serverSide:!0,onServerSideChange:v,totalCount:l,pageSize:c.pageSize,pageIndex:c.pageIndex,sorting:f,globalFilter:p,className:"reservations-data-table"})})}const lp=(t=!1)=>{const{user:e}=Te(),{taskService:n}=Be(),[r,s]=S.useState([]),[i,a]=S.useState(!0),[o,l]=S.useState(null),[u,c]=S.useState(0),[h,f]=S.useState({pageIndex:0,pageSize:10}),[g,p]=S.useState([{id:"scheduled_datetime",desc:!1}]),[w,_]=S.useState(""),v=S.useCallback(async()=>{if(!(t&&!(e!=null&&e.id)))try{a(!0),l(null);const C=await n.queryTasks({userId:t?e==null?void 0:e.id:null,pagination:h,sorting:g,globalFilter:w});s(C.tasks),c(C.totalCount)}catch(C){const E=C instanceof Error?C.message:String(C);l(E),console.error("Error fetching tasks:",C)}finally{a(!1)}},[n,t,h,g,w,e==null?void 0:e.id]);S.useEffect(()=>{v()},[v]);const m=S.useCallback(C=>{C.pagination&&f(C.pagination),C.sorting!==void 0&&p(C.sorting),C.globalFilter!==void 0&&_(C.globalFilter)},[]),y=S.useCallback(async(C,E)=>{try{await n.updateTaskStatus(C,E),await v()}catch(b){console.error("Error updating task status:",b);const P=b instanceof Error?b.message:String(b);throw l(P),b}},[n,v]),x=S.useCallback(async(C,E)=>{try{await n.updateTaskAssignment(C,E,e==null?void 0:e.id),await v()}catch(b){console.error("Error updating task assignment:",b);const P=b instanceof Error?b.message:String(b);throw l(P),b}},[n,v,e==null?void 0:e.id]),k=S.useCallback(async(C,E)=>{try{await n.updateTaskTimes(C,E),await v()}catch(b){console.error("Error updating task times:",b);const P=b instanceof Error?b.message:String(b);throw l(P),b}},[n,v]);return{tasks:r,loading:i,error:o,totalCount:u,pagination:h,sorting:g,globalFilter:w,handleServerSideChange:m,updateTaskStatus:y,updateTaskAssignment:x,updateTaskTimes:k,refetchTasks:v}},Xt=t=>t?new Date(t).toLocaleString():"N/A",ux=t=>t?new Date(t).toLocaleDateString():"N/A",cx=t=>t?t.charAt(0).toUpperCase()+t.slice(1):"N/A",vo=(t,e=8)=>t?`${t.substring(0,e)}...`:"N/A",dx=(t,e=100)=>t?t.length>e?`${t.substring(0,e)}...`:t:"N/A",hx=()=>{const{userService:t}=Be(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,a]=S.useState(null);S.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0),a(null);const l=await t.getCleaners();n(l)}catch(l){console.error("Error fetching cleaners:",l),a(l.message),n([])}finally{s(!1)}};return{cleaners:e,loading:r,error:i,refetch:o}};function up({currentAssignedTo:t,taskId:e,onAssignmentChange:n,disabled:r=!1}){const{t:s}=X(),{cleaners:i,loading:a}=hx(),[o,l]=S.useState(!1),u=async h=>{const f=h.target.value||null;if(f!==t){l(!0);try{await n(e,f)}catch(g){console.error("Assignment change failed:",g),h.target.value=t||""}finally{l(!1)}}},c=()=>{if(!t)return s("assignment.unassigned");const h=i.find(f=>f.id===t);return h?h.name:`${s("assignment.unknown")} (${t.substring(0,8)}...)`};return a?d.jsx("span",{className:"loading-text",children:s("assignment.loading")}):d.jsxs("select",{value:t||"",onChange:u,disabled:r||o,className:`assignment-dropdown ${o?"updating":""}`,title:`Currently assigned to: ${c()}`,children:[d.jsx("option",{value:"",children:s("assignment.unassigned")}),i.map(h=>d.jsx("option",{value:h.id,children:h.name},h.id))]})}const cp=()=>{const{t}=X(),e=S.useMemo(()=>({id:{accessorKey:"id",header:t("columns.id"),cell:({getValue:o})=>{const l=o();return d.jsx("span",{className:"reservation-id",title:l,children:vo(l)})},enableSorting:!1},title:{accessorKey:"title",header:t("columns.title"),cell:({getValue:o})=>o()||t("columns.na")},taskTitle:{accessorKey:"title",header:t("columns.task"),cell:({getValue:o})=>o()||t("columns.na")},taskType:{accessorKey:"task_type",header:t("columns.type"),cell:({getValue:o})=>cx(o())},status:{accessorKey:"status",header:t("columns.status"),cell:({getValue:o})=>{const l=o();return d.jsx("span",{className:`status-badge status-${l}`,children:t(`statuses.${l}`)})}},description:{accessorKey:"description",header:t("columns.description"),cell:({getValue:o})=>dx(o())},listingId:{accessorKey:"listing_id",header:t("columns.listing"),cell:({getValue:o})=>o()||t("columns.na")},reservationId:{accessorKey:"reservation_id",header:t("columns.reservation"),cell:({getValue:o})=>{const l=o();return l?d.jsx("span",{className:"reservation-id",title:l,children:vo(l)}):t("columns.na")}},scheduledDateTime:{accessorKey:"scheduled_datetime",header:t("columns.scheduled"),cell:({getValue:o})=>Xt(o())},assignedTo:{accessorKey:"assigned_to",header:t("columns.assignedTo"),cell:({getValue:o})=>{const l=o();return l?d.jsx("span",{className:"reservation-id",title:l,children:vo(l)}):t("statuses.unassigned")}},assignedAt:{accessorKey:"assigned_at",header:t("columns.assignedAt"),cell:({getValue:o})=>Xt(o())},acceptedAt:{accessorKey:"accepted_at",header:t("columns.acceptedAt"),cell:({getValue:o})=>Xt(o())},completedAt:{accessorKey:"completed_at",header:t("columns.completedAt"),cell:({getValue:o})=>Xt(o())},createdAt:{accessorKey:"created_at",header:t("columns.created"),cell:({getValue:o})=>ux(o())}}),[t]),n=S.useMemo(()=>o=>({accessorKey:"assigned_to",header:t("columns.assignedTo"),cell:({getValue:l,row:u})=>{const c=l(),h=u.original;return d.jsx(up,{currentAssignedTo:c,taskId:h.id,onAssignmentChange:o})},enableSorting:!1}),[t]),r=S.useMemo(()=>()=>({accessorKey:"actions",header:t("tasks.actions"),cell:({row:o})=>{const l=o.original,u=()=>{window.location.href=`/tasks/${l.id}`};return d.jsx("div",{className:"task-actions",children:d.jsx("button",{className:"btn-view",onClick:u,children:t("columns.view")})})},enableSorting:!1}),[t]),s=S.useMemo(()=>(o,l)=>({accessorKey:"actions",header:t("tasks.actions"),cell:({row:u})=>{const c=u.original,h=c.status==="assigned",f=c.status==="accepted",g=c.status==="in_progress",p=c.status==="accepted",w=()=>{window.location.href=`/tasks/${c.id}`},_=async()=>{l?await l(c.id,{started_at:new Date().toISOString()}):o(c.id,"in_progress")},v=async()=>{l?await l(c.id,{finished_at:new Date().toISOString()}):o(c.id,"completed")};return d.jsxs("div",{className:"task-actions",children:[d.jsx("button",{className:"btn-view",onClick:w,children:t("columns.view")}),h&&d.jsx("button",{className:"btn-accept",onClick:()=>o(c.id,"accepted"),children:t("columns.accept")}),f&&d.jsx("button",{className:"btn-start",onClick:_,children:t("columns.start")}),g&&d.jsx("button",{className:"btn-complete",onClick:v,children:t("columns.complete")}),p&&d.jsx("button",{className:"btn-cancel",onClick:()=>o(c.id,"assigned"),children:t("columns.cancel")})]})},enableSorting:!1}),[t]),i=S.useMemo(()=>o=>{const l=e;return[l.id,l.title,l.taskType,l.status,l.listingId,l.reservationId,l.scheduledDateTime,n(o),l.assignedAt,l.acceptedAt,l.completedAt,l.createdAt,r()]},[e,n,r]),a=S.useMemo(()=>(o,l)=>{const u=e;return[u.scheduledDateTime,u.listingId,u.taskType,u.status,s(o,l)]},[e,s]);return{getAdminColumns:i,getCleanerColumns:a}};function fx(){const{t}=X(),{tasks:e,loading:n,error:r,totalCount:s,pagination:i,sorting:a,globalFilter:o,handleServerSideChange:l,updateTaskAssignment:u}=lp(!1),{getAdminColumns:c}=cp(),h=S.useMemo(()=>c(u),[c,u]);return d.jsxs("div",{className:"admin-reservations",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{className:"admin-title",children:t("tasks.management")}),d.jsx("p",{className:"admin-stats",children:n?t("tasks.loading"):t("tasks.totalTasks",{count:s})})]}),d.jsx(Fs,{data:e,columns:h,loading:n,error:r,serverSide:!0,onServerSideChange:l,totalCount:s,pageSize:i.pageSize,pageIndex:i.pageIndex,sorting:a,globalFilter:o,className:"tasks-data-table"})]})}const gx=["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina","Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)","Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas","Jabon de manos recargable","Bolsas basura bao","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador","Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa","Fibrn Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas","Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequea","Funda Edredon Pequea","Manta playa","Felpudo bao","Mantel","Repasadores (toalla cocina)"],px=(t,e=10)=>{if(!t||t.length<2)return[];const n=t.toLowerCase();return gx.filter(r=>r.toLowerCase().includes(n)).slice(0,e)},Kn={general:{name:"General",products:["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina"]},lavado_ropa:{name:"Lavado Ropa",products:["Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)"]},reposicion:{name:"Reposicin",products:["Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas"]},reposicion_bano:{name:"Reposicin Bao",products:["Jabon de manos recargable","Bolsas basura bao","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador"]},materiales_limpieza:{name:"Materiales Limpieza",products:["Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa"]},otros:{name:"Otros",products:["Fibrn Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas"]},sabanas:{name:"Sbanas",products:["Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequea","Funda Edredon Pequea","Manta playa","Felpudo bao","Mantel","Repasadores (toalla cocina)"]}};function dp({onTodoCreated:t,onCancel:e,attachedToType:n=null,attachedToId:r=null,title:s="Create New TODO"}){const{t:i}=X(),{user:a}=Te(),{listingService:o,todoService:l}=Be(),[u,c]=S.useState({title:"",description:""}),[h,f]=S.useState(""),[g,p]=S.useState([]),[w,_]=S.useState([]),[v,m]=S.useState([]),[y,x]=S.useState(r||""),[k,C]=S.useState(!1),[E,b]=S.useState(!1),[P,T]=S.useState(null);S.useEffect(()=>{(async()=>{try{C(!0);const j=await o.getListingsForSelection();m(j)}catch(j){console.error("Error fetching listings:",j),T(i("todos.failedToLoad"))}finally{C(!1)}})()},[o]),S.useEffect(()=>{if(h.length>=2){const O=px(h,8);p(O)}else p([])},[h]);const z=O=>{const{name:j,value:N}=O.target;c($=>({...$,[j]:N}))},D=O=>{x(O.target.value)},H=O=>{const j=w.find(N=>N.product_name===O);_(j?N=>N.map($=>$.product_name===O?{...$,quantity:$.quantity+1}:$):N=>[...N,{product_name:O,quantity:1}]),f(""),p([])},oe=(O,j)=>{const N=parseInt(j);N<=0?xt(O):_($=>$.map(F=>F.product_name===O?{...F,quantity:N}:F))},xt=O=>{_(j=>j.filter(N=>N.product_name!==O))},he=async O=>{if(O.preventDefault(),!!a){b(!0),T(null);try{const j={created_by:a.id,title:u.title,description:u.description||null,products:w.length>0?w:null,attached_to_type:y?"listing":n,attached_to_id:y||r};await l.createTodo(j),t==null||t()}catch(j){console.error("Error creating todo:",j),T(j instanceof Error?j.message:i("notes.errorOccurred"))}finally{b(!1)}}};return d.jsxs("div",{className:"todo-form",children:[d.jsxs("div",{className:"todo-form-header",children:[d.jsx("h3",{children:s}),d.jsx("button",{type:"button",onClick:e,className:"btn-close",children:""})]}),P&&d.jsx("div",{className:"error-message",children:P}),d.jsxs("form",{onSubmit:he,className:"todo-form-content",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"title",children:i("todos.title")}),d.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:z,required:!0,placeholder:i("todos.titlePlaceholder"),className:"form-input"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"listing",children:i("todos.assignToListing")}),d.jsxs("select",{id:"listing",name:"listing",value:y,onChange:D,className:"form-select",disabled:k,children:[d.jsx("option",{value:"",children:i("todos.noListingAssignment")}),v.map(O=>{var j;return d.jsxs("option",{value:O.id,children:[O.id," -"," ",((j=O.airbnb_payload)==null?void 0:j.formattedAddress)||i("forms.noAddress")]},O.id)})]}),k&&d.jsx("small",{children:i("todos.loadingListings")})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"product_search",children:i("todos.products")}),d.jsxs("div",{className:"product-search-container",children:[d.jsx("input",{type:"text",id:"product_search",value:h,onChange:O=>f(O.target.value),placeholder:i("todos.searchProductsPlaceholder"),className:"form-input"}),g.length>0&&d.jsx("div",{className:"search-results",children:g.map((O,j)=>d.jsx("button",{type:"button",onClick:()=>H(O),className:"search-result-item",children:O},j))})]}),w.length>0&&d.jsxs("div",{className:"selected-products",children:[d.jsx("h4",{children:i("todos.selectedProducts")}),w.map((O,j)=>d.jsxs("div",{className:"selected-product",children:[d.jsx("span",{className:"product-name",children:O.product_name}),d.jsxs("div",{className:"product-controls",children:[d.jsx("input",{type:"number",min:"1",value:O.quantity,onChange:N=>oe(O.product_name,N.target.value),className:"quantity-input"}),d.jsx("button",{type:"button",onClick:()=>xt(O.product_name),className:"btn-remove",children:i("todos.remove")})]})]},j))]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"description",children:i("todos.description")}),d.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:z,rows:3,placeholder:i("todos.detailsPlaceholder"),className:"form-textarea"})]}),d.jsxs("div",{className:"form-actions",children:[d.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:i("todos.cancel")}),d.jsx("button",{type:"submit",disabled:E,className:"btn-primary",children:E?i("todos.creating"):s})]})]})]})}function mx(){const{t}=X(),{isAdmin:e}=Te(),{userService:n,todoService:r}=Be(),[s,i]=S.useState([]),[a,o]=S.useState(!0),[l,u]=S.useState(null),[c,h]=S.useState(!1),[f,g]=S.useState("all"),p=async()=>{try{o(!0),u(null);let k=await r.fetchTodos()||[];f==="done"?k=k.filter(C=>C.done):f==="pending"&&(k=k.filter(C=>!C.done)),i(k)}catch(x){console.error("Error fetching todos:",x),u(x instanceof Error?x.message:String(x))}finally{o(!1)}};S.useEffect(()=>{p()},[f]);const w=()=>{h(!1),p()},_=async(x,k)=>{try{const C=await n.getCurrentUser(),E=C==null?void 0:C.id;await r.updateTodoStatus(x,k,E),p()}catch(C){console.error("Error updating todo status:",C),u(C instanceof Error?C.message:String(C))}},v=async x=>{if(confirm(t("todos.deleteConfirm")))try{await r.deleteTodo(x),p()}catch(k){console.error("Error deleting todo:",k),u(k instanceof Error?k.message:String(k))}},m=x=>x?"#10b981":"#6b7280",y=[{accessorKey:"title",header:t("columns.title"),cell:({getValue:x})=>d.jsx("span",{className:"font-medium",children:x()})},{accessorKey:"done",header:t("columns.status"),cell:({getValue:x,row:k})=>{const C=x();return d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:C,onChange:E=>_(k.original.id,E.target.checked),className:"rounded"}),d.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold text-white",style:{backgroundColor:m(C)},children:t(C?"todos.done":"todos.pending")})]})}},{accessorKey:"attached_to_type",header:t("todos.attachedTo"),cell:({getValue:x,row:k})=>{const C=x(),E=k.original.attached_to_id;return C?d.jsxs("span",{className:"text-sm",children:[C,": ",E]}):d.jsx("span",{className:"text-gray-500",children:t("todos.unattached")})}},{accessorKey:"created_at",header:t("columns.created"),cell:({getValue:x})=>d.jsx("span",{className:"text-sm",children:new Date(x()).toLocaleDateString()})},{id:"actions",header:t("columns.actions"),cell:({row:x})=>d.jsx("button",{onClick:()=>v(x.original.id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:t("todos.delete")})}];return e?d.jsxs("div",{className:"admin-todos",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{className:"admin-title",children:t("todos.allTodos")}),d.jsx("p",{className:"admin-stats",children:a?t("todos.loadingTodos"):t("todos.totalTodos",{count:s.length})})]}),d.jsxs("div",{className:"admin-controls",children:[d.jsxs("div",{className:"filter-controls",children:[d.jsx("label",{htmlFor:"status-filter",children:t("todos.filterByStatus")}),d.jsxs("select",{id:"status-filter",value:f,onChange:x=>g(x.target.value),className:"form-select",children:[d.jsx("option",{value:"all",children:t("todos.all")}),d.jsx("option",{value:"pending",children:t("todos.pending")}),d.jsx("option",{value:"done",children:t("todos.done")})]})]}),d.jsx("button",{onClick:()=>h(!0),className:"btn-primary",children:t("todos.createGeneral")})]}),l&&d.jsx("div",{className:"error-message",children:l}),c&&d.jsx("div",{className:"todo-form-overlay",children:d.jsx(dp,{title:t("todos.createGeneral"),onTodoCreated:w,onCancel:()=>h(!1)})}),d.jsx(Fs,{data:s,columns:y,loading:a,error:l,enablePagination:!0,className:"todos-data-table"})]}):d.jsx("div",{className:"admin-todos",children:d.jsx("div",{className:"error-message",children:t("todos.adminAccessRequired")})})}class vx{constructor(e){this.supabaseService=e}async saveThread(e){const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("threads").insert({channel:e.channel,participants:e.participants,listing_id:e.listing_id,reservation_id:e.reservation_id,phone_number_id:e.phone_number_id}).select("id").single();if(s)throw s;return r.id}async getMessageWithoutEmbedding(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.from("messages").select("id, thread_id, from_id, message, created_at").is("embedding",null).limit(1).single().overrideTypes();if(r&&r.code!=="PGRST116")throw r;return n||null}async updateMessageEmbedding(e,n){const r=this.supabaseService.getSupabaseClient(),{data:s,error:i}=await r.from("messages").update({embedding:JSON.stringify(n)}).eq("id",e).is("embedding",null).select("id").single().overrideTypes();if(i&&i.code!=="PGRST116")throw i;return!!s}async getMessagesWithoutEmbeddings(e=50){const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("messages").select("id, thread_id, from_id, message, created_at").is("embedding",null).order("created_at").limit(e).overrideTypes();if(s)throw s;return r||[]}async findSimilarThreads(e,n={}){const{limit:r=5,minSimilarity:s=0}=n,i=this.supabaseService.getSupabaseClient(),{data:a,error:o}=await i.rpc("match_messages",{query_embedding:e,match_threshold:s,match_count:r*10});if(o)throw o;const l=new Map;for(const _ of a||[]){const v=_.thread_id,m=l.get(v);m?(m.messages.push(_),m.maxSimilarity=Math.max(m.maxSimilarity,_.similarity)):l.set(v,{messages:[_],maxSimilarity:_.similarity})}const u=Array.from(l.entries()).sort((_,v)=>v[1].maxSimilarity-_[1].maxSimilarity).slice(0,r).map(([_])=>_);if(u.length===0)return[];const{data:c,error:h}=await i.from("threads").select("*").in("id",u);if(h)throw h;const{data:f,error:g}=await i.from("messages").select("*").in("thread_id",u).order("created_at");if(g)throw g;const p=new Map;for(const _ of f||[]){const v=_.thread_id;p.has(v)||p.set(v,[]),p.get(v).push(_)}const w=[];for(const _ of c||[]){const v=l.get(_.id);v&&w.push({thread:{id:_.id,channel:_.channel,participants:_.participants,created_at:_.created_at},messages:p.get(_.id)||[],similarity:v.maxSimilarity})}return w.sort((_,v)=>v.similarity-_.similarity)}async getEmbeddingStats(){const e=this.supabaseService.getSupabaseClient(),[n,r]=await Promise.all([e.from("messages").select("*",{count:"exact",head:!0}),e.from("messages").select("*",{count:"exact",head:!0}).not("embedding","is",null)]),s=n.count||0,i=r.count||0;return{totalMessages:s,messagesWithEmbeddings:i,embeddingProgress:s>0?i/s*100:0}}async getThreadById(e){const n=await this.supabaseService.getRecordById("threads",e),{data:r}=await this.supabaseService.queryFromTable("messages",{additionalFilters:{thread_id:e},sorting:[{id:"created_at",desc:!1}]});return{thread:n,messages:r}}async draftMessage(e,n){const r=await this.supabaseService.callSupabaseFunction("maddie-bot-response",{method:"POST",body:{listing_id:e,reservation_id:n}});if(!r.success)throw new Error(r.error||"Failed to draft message");return r.response}}const hp=(t,e)=>{const n=new Date(t),r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return i.getTime()===s.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):i.getTime()===s.getTime()-24*60*60*1e3?e("threads.yesterday"):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})},yx=({thread:t,isSelected:e,lastMessage:n,onClick:r})=>{const{t:s}=X(),i=()=>t.listing_id?s("threads.listingTitle",{id:t.listing_id}):t.reservation_id?s("threads.reservationTitle",{id:t.reservation_id}):s("threads.channelThread",{channel:t.channel}),a=()=>{const o=t.participants.length>0?t.participants.slice(0,2).join(", "):s("threads.noParticipants");return t.participants.length>2?s("threads.participantsWithMore",{participants:o,count:t.participants.length-2}):o};return d.jsxs("div",{className:`thread-item ${e?"selected":""}`,onClick:r,children:[d.jsx("div",{className:"thread-avatar",children:d.jsx("div",{className:"avatar-icon",children:t.channel==="whatsapp"?"":""})}),d.jsxs("div",{className:"thread-content",children:[d.jsxs("div",{className:"thread-header",children:[d.jsx("h3",{className:"thread-title",children:i()}),d.jsx("span",{className:"thread-time",children:hp((n==null?void 0:n.created_at)||t.created_at,s)})]}),d.jsxs("div",{className:"thread-preview",children:[d.jsx("p",{className:"thread-subtitle",children:a()}),n&&d.jsx("p",{className:"last-message",children:n.message.length>50?`${n.message.substring(0,50)}...`:n.message})]})]})]})},wx=({threads:t,selectedThreadId:e,onThreadSelect:n,searchTerm:r,onSearchChange:s})=>{const{t:i}=X(),a=t.filter(o=>{var u,c;const l=r.toLowerCase();return((u=o.listing_id)==null?void 0:u.toLowerCase().includes(l))||((c=o.reservation_id)==null?void 0:c.toLowerCase().includes(l))||o.participants.some(h=>h.toLowerCase().includes(l))||o.channel.toLowerCase().includes(l)});return d.jsxs("div",{className:"thread-list",children:[d.jsxs("div",{className:"thread-list-header",children:[d.jsx("h2",{children:i("threads.title")}),d.jsx("div",{className:"search-box",children:d.jsx("input",{type:"text",placeholder:i("threads.searchPlaceholder"),value:r,onChange:o=>s(o.target.value),className:"search-input"})})]}),d.jsx("div",{className:"thread-list-content",children:a.length===0?d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:i("threads.noThreadsFound")})}):a.map(o=>d.jsx(yx,{thread:o,isSelected:o.id===e,onClick:()=>n(o)},o.id))})]})},Sx=({messages:t,selectedThread:e,onDraftMessage:n})=>{const{t:r}=X();return e?d.jsxs("div",{className:"message-area",children:[d.jsxs("div",{className:"conversation-header",children:[d.jsxs("div",{className:"conversation-info",children:[d.jsx("h3",{children:e.listing_id?r("threads.listingTitle",{id:e.listing_id}):e.reservation_id?r("threads.reservationTitle",{id:e.reservation_id}):r("threads.channelThread",{channel:e.channel})}),d.jsx("p",{className:"participants",children:e.participants.length>0?e.participants.join(", "):r("threads.noParticipants")})]}),d.jsxs("div",{className:"conversation-actions",children:[e.listing_id&&e.reservation_id&&d.jsx("button",{onClick:()=>n==null?void 0:n(e.listing_id,e.reservation_id),className:"draft-message-btn",children:r("threads.draftMessage")}),d.jsx("div",{className:"channel-badge",children:e.channel})]})]}),d.jsx("div",{className:"messages-container",children:t.length===0?d.jsx("div",{className:"no-messages",children:d.jsx("p",{children:r("threads.noMessages")})}):d.jsx("div",{className:"messages-list",children:t.map((s,i)=>{var o;const a=i===0||((o=t[i-1])==null?void 0:o.from_id)!==s.from_id;return d.jsxs("div",{className:"message-group",children:[a&&d.jsx("div",{className:"message-sender",children:s.from_id}),d.jsxs("div",{className:"message-bubble",children:[d.jsx("div",{className:"message-content",children:s.message}),d.jsx("div",{className:"message-timestamp",children:hp(s.created_at,r)})]})]},s.id)})})})]}):d.jsx("div",{className:"message-area empty",children:d.jsxs("div",{className:"empty-conversation",children:[d.jsx("div",{className:"empty-icon",children:""}),d.jsx("h3",{children:r("threads.selectThread")}),d.jsx("p",{children:r("threads.selectThreadDescription")})]})})},_x=()=>{const{t}=X(),{supabaseService:e}=Te(),[n,r]=S.useState([]),[s,i]=S.useState([]),[a,o]=S.useState(),[l,u]=S.useState(""),[c,h]=S.useState(!0),[f,g]=S.useState(null),[p,w]=S.useState(null),[_,v]=S.useState(!1);S.useEffect(()=>{m()},[]),S.useEffect(()=>{a?y(a.id):i([])},[a]);const m=async()=>{if(e.getSupabaseClient())try{h(!0);const{data:C,error:E}=await e.getSupabaseClient().from("threads").select("*").order("created_at",{ascending:!1});if(E)throw E;r(C||[])}catch(C){console.error("Error loading threads:",C),g(t("threads.errorLoadingThreads"))}finally{h(!1)}},y=async C=>{if(e.getSupabaseClient())try{const{data:E,error:b}=await e.getSupabaseClient().from("messages").select("*").eq("thread_id",C).order("created_at",{ascending:!0});if(b)throw b;i(E||[])}catch(E){console.error("Error loading messages:",E),g(t("threads.errorLoadingMessages"))}},x=C=>{o(C),w(null)},k=async(C,E)=>{if(e)try{v(!0),g(null);const P=await new vx(e).draftMessage(C,E);w(P)}catch(b){console.error("Error drafting message:",b),g(t("threads.errorDraftingMessage"))}finally{v(!1)}};return c?d.jsx("div",{className:"threads-loading",children:d.jsx("div",{className:"loading-spinner",children:t("threads.loading")})}):f?d.jsx("div",{className:"threads-error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:t("threads.error")}),d.jsx("p",{children:f}),d.jsx("button",{onClick:m,className:"retry-button",children:t("threads.retry")})]})}):d.jsxs("div",{className:"threads-view",children:[d.jsx("div",{className:"threads-sidebar",children:d.jsx(wx,{threads:n,selectedThreadId:a==null?void 0:a.id,onThreadSelect:x,searchTerm:l,onSearchChange:u})}),d.jsxs("div",{className:"threads-main",children:[d.jsx(Sx,{messages:s,selectedThread:a,onDraftMessage:k}),p&&d.jsxs("div",{className:"drafted-message-panel",children:[d.jsxs("div",{className:"drafted-message-header",children:[d.jsx("h4",{children:t("threads.draftedMessage")}),d.jsx("button",{onClick:()=>w(null),className:"close-btn","aria-label":t("threads.closeDraft"),children:""})]}),d.jsx("div",{className:"drafted-message-content",children:d.jsx("textarea",{readOnly:!0,value:p,className:"drafted-message-text",rows:6})})]}),_&&d.jsx("div",{className:"drafting-message-loading",children:d.jsx("div",{className:"loading-spinner",children:t("threads.draftingMessage")})})]})]})};function xx(){const{t}=X(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,a]=S.useState(null),{listingService:o}=Be();S.useEffect(()=>{(async()=>{try{s(!0),a(null);const c=await o.fetchListings();n(c||[])}catch(c){console.error("Error fetching listings:",c),a(c.message)}finally{s(!1)}})()},[o]);const l=S.useMemo(()=>[{accessorKey:"id",header:t("columns.id"),cell:({getValue:u})=>{const c=u();return d.jsx(We,{to:`/listing/${c}`,className:"listing-id-link",children:c})}},{accessorKey:"airbnb_payload.formattedAddress",header:t("listings.address"),cell:({getValue:u})=>u()||t("columns.na")}],[t]);return d.jsxs("div",{className:"listings",children:[d.jsxs("div",{className:"listings-header",children:[d.jsx("h1",{className:"listings-title",children:t("listings.title")}),d.jsx("p",{className:"listings-stats",children:r?t("listings.loadingListings"):t("listings.totalListings",{count:e.length})})]}),d.jsx(Fs,{data:e,columns:l,loading:r,error:i,enablePagination:!0,className:"listings-data-table"})]})}function kx(){const{user:t}=Te(),{t:e}=X(),{tasks:n,loading:r,error:s,totalCount:i,pagination:a,sorting:o,globalFilter:l,handleServerSideChange:u,updateTaskStatus:c,updateTaskTimes:h}=lp(!0),{getCleanerColumns:f}=cp(),g=S.useMemo(()=>f(c,h),[f,c,h]);return t?d.jsxs("div",{className:"cleaner-tasks",children:[d.jsxs("div",{className:"cleaner-header",children:[d.jsx("h1",{className:"cleaner-title",children:e("tasks.myTasks")}),d.jsx("p",{className:"cleaner-stats",children:r?e("tasks.loading"):e("tasks.totalTasks",{count:i})})]}),d.jsx(Fs,{data:n,columns:g,loading:r,error:s,serverSide:!0,onServerSideChange:u,totalCount:i,pageSize:a.pageSize,pageIndex:a.pageIndex,sorting:o,globalFilter:l,className:"cleaner-tasks-data-table"})]}):d.jsx("div",{className:"cleaner-tasks",children:d.jsx("div",{className:"error-message",children:e("tasks.loginRequired")})})}function Cx({taskId:t,taskService:e}){const{t:n}=X(),[r,s]=S.useState([]),[i,a]=S.useState(!0),[o,l]=S.useState(null);S.useEffect(()=>{t&&e&&(async()=>{try{a(!0);const w=await e.getTaskAuditTrail(t);s(w)}catch(w){const _=w instanceof Error?w.message:String(w);l(_)}finally{a(!1)}})()},[t,e]);const u=p=>{switch(p){case"INSERT":return"";case"UPDATE":return"";case"DELETE":return"";default:return""}},c=p=>{switch(p){case"INSERT":return"audit-insert";case"UPDATE":return"audit-update";case"DELETE":return"audit-delete";default:return"audit-default"}},h=(p,w,_)=>!_||_.length===0?null:_.map(v=>{const m=p==null?void 0:p[v],y=w==null?void 0:w[v];return{field:v,oldValue:m!==void 0?m:null,newValue:y!==void 0?y:null}}).filter(v=>v.oldValue!==v.newValue),f=p=>{if(p==null)return"null";if(typeof p=="string"&&p.includes("T"))try{return Xt(p)}catch{return p}return String(p)},g=p=>{var w;return p.changed_by?p.changed_by_name?p.changed_by_name:p.changed_by_email?((w=p.changed_by_email)==null?void 0:w.split("@")[0])||"":n("audit.unknownUser"):n("audit.system")};return i?d.jsxs("div",{className:"audit-trail-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:n("audit.loading")})]}):o?d.jsx("div",{className:"audit-trail-error",children:d.jsx("p",{className:"error-message",children:o})}):r.length===0?d.jsx("div",{className:"audit-trail-empty",children:d.jsx("p",{children:n("audit.noHistory")})}):d.jsx("div",{className:"audit-trail-list",children:r.map((p,w)=>{var _;return d.jsxs("div",{className:`audit-entry ${c(p.action_type||"UPDATE")}`,children:[d.jsxs("div",{className:"audit-entry-header",children:[d.jsx("div",{className:"audit-entry-icon",children:u(p.action_type||"UPDATE")}),d.jsxs("div",{className:"audit-entry-info",children:[d.jsxs("div",{className:"audit-entry-action",children:[d.jsx("span",{className:"action-type",children:p.action_type}),d.jsx("span",{className:"action-time",children:Xt(p.changed_at)})]}),d.jsxs("div",{className:"audit-entry-user",children:[n("audit.by")," ",g(p)]})]})]}),d.jsxs("div",{className:"audit-entry-content",children:[p.action_type==="UPDATE"&&p.old_values&&p.new_values&&d.jsxs("div",{className:"audit-entry-values",children:[d.jsxs("span",{className:"values-label",children:[n("audit.valuesChanged"),":"]}),d.jsx("div",{className:"values-list",children:(_=h(p.old_values,p.new_values,p.changed_fields))==null?void 0:_.map((v,m)=>d.jsxs("div",{className:"value-item",children:[d.jsxs("span",{className:"field-name",children:[v.field,":"]}),d.jsxs("span",{className:"value-change",children:[d.jsx("span",{className:"old-value",children:f(v.oldValue)}),d.jsx("span",{className:"arrow",children:""}),d.jsx("span",{className:"new-value",children:f(v.newValue)})]})]},m))})]}),p.context&&Object.keys(p.context).length>0&&d.jsxs("div",{className:"audit-entry-context",children:[d.jsxs("span",{className:"context-label",children:[n("audit.context"),":"]}),d.jsx("pre",{className:"context-data",children:JSON.stringify(p.context,null,2)})]})]}),w<r.length-1&&d.jsx("div",{className:"audit-entry-connector"})]},p.id)})})}function fp({attachedToType:t=null,attachedToId:e=null,title:n="TODOs",showCreateButton:r=!0,showAttachmentInfo:s=!1}){const{isAdmin:i,isCleaner:a}=Te(),{userService:o,todoService:l}=Be(),[u,c]=S.useState([]),[h,f]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(!1),v=async()=>{try{f(!0),p(null);const E=await l.fetchTodos({attachedToType:t,attachedToId:e,isDone:!1});c(E||[])}catch(E){console.error("Error fetching todos:",E);const b=E instanceof Error?E.message:String(E);p(b)}finally{f(!1)}};S.useEffect(()=>{v()},[t,e]);const m=()=>{_(!1),v()},y=async(E,b)=>{try{const P=await o.getCurrentUser(),T=P==null?void 0:P.id;await l.updateTodoStatus(E,b,T),v()}catch(P){console.error("Error updating todo status:",P),p(P instanceof Error?P.message:String(P))}},x=async E=>{if(i&&confirm("Are you sure you want to delete this TODO?"))try{await l.deleteTodo(E),v()}catch(b){console.error("Error deleting todo:",b),p(b instanceof Error?b.message:String(b))}},k=E=>E?"status-completed":"status-pending",C=E=>E.attached_to_type?`${E.attached_to_type}: ${E.attached_to_id}`:"Unattached";return h?d.jsx("div",{className:"todo-list",children:d.jsx("div",{className:"loading",children:"Loading TODOs..."})}):d.jsxs("div",{className:"todo-list",children:[d.jsxs("div",{className:"todos-header",children:[d.jsx("h3",{children:n}),r&&(i||a)&&!w&&d.jsx("button",{onClick:()=>_(!0),className:"btn-primary btn-sm",children:"Add TODO"})]}),g&&d.jsx("div",{className:"error-message",children:g}),w&&d.jsx("div",{className:"todo-form-overlay",children:d.jsx(dp,{attachedToType:t,attachedToId:e,onTodoCreated:m,onCancel:()=>_(!1)})}),u.length===0?d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:"No TODOs found."})}):d.jsx("div",{className:"todos-list",children:u.map(E=>d.jsxs("div",{className:`todo-item ${k(E.done)}`,children:[d.jsxs("div",{className:"todo-header",children:[d.jsxs("div",{className:"todo-title-row",children:[d.jsx("h4",{className:"todo-title",children:E.title}),d.jsx("div",{className:"todo-badges",children:d.jsx("span",{className:`status-badge ${k(E.done)}`,children:E.done?"Done":"Pending"})})]}),d.jsxs("div",{className:"todo-meta",children:[d.jsxs("span",{className:"todo-date",children:["Created: ",new Date(E.created_at).toLocaleDateString()]}),E.completed_at&&d.jsxs("span",{className:"todo-completed-date",children:["Completed:"," ",new Date(E.completed_at).toLocaleDateString()]}),s&&d.jsxs("span",{className:"todo-attachment",children:["Attached to: ",C(E)]})]})]}),E.description&&d.jsx("p",{className:"todo-description",children:E.description}),E.products&&E.products.length>0&&d.jsxs("div",{className:"todo-products",children:[d.jsx("h5",{children:"Products needed:"}),d.jsx("ul",{className:"products-list",children:E.products.map((b,P)=>d.jsxs("li",{className:"product-item",children:[d.jsx("span",{className:"product-name",children:b.product_name}),d.jsxs("span",{className:"product-quantity",children:["",b.quantity]})]},P))})]}),d.jsxs("div",{className:"todo-actions",children:[i&&d.jsxs("label",{className:"todo-checkbox",children:[d.jsx("input",{type:"checkbox",checked:E.done,onChange:b=>y(E.id,b.target.checked)}),"Mark as done"]}),i&&d.jsx("button",{onClick:()=>x(E.id),className:"btn-danger btn-sm",children:"Delete"})]})]},E.id))})]})}function Ex({listingId:t,onTodoUpdated:e}){const{user:n}=Te(),{todoService:r}=Be(),[s,i]=S.useState(null),[a,o]=S.useState(!1),[l,u]=S.useState(null),c=S.useCallback(async()=>{try{o(!0),u(null);const p=await r.fetchTodos({attachedToType:"listing",attachedToId:t,titlePattern:"[AUTO]",isDone:!1}),w=(p==null?void 0:p[0])||null;i(w)}catch(p){console.error("Error fetching auto-generated todo:",p),u(p instanceof Error?p.message:String(p))}finally{o(!1)}},[t,r]);S.useEffect(()=>{c()},[c]);const h=S.useCallback(async p=>{if(!s)return;const w=await r.updateTodo(s.id,{products:p});i(w)},[s,r]),f=S.useCallback(async p=>{if(!(n!=null&&n.id))return;const w=await r.createTodo({title:`[AUTO] Product Replenishment ${new Date().toLocaleDateString()}`,description:"Auto-generated todo for product replenishment",products:p,attached_to_type:"listing",attached_to_id:t});i(w),e==null||e(w)},[n==null?void 0:n.id,r,t,e]),g=S.useCallback(async p=>{if(n!=null&&n.id)try{u(null),s?await h(p):p.length>0&&await f(p)}catch(w){const _=w instanceof Error?w.message:String(w);throw console.error("Error saving auto-generated todo:",_),u(_),w}},[n==null?void 0:n.id,s,h,f]);return{existingTodo:s,loading:a,error:l,saveAutoTodo:g,refetchAutoTodo:c}}function bx({existingTodo:t,onQuantitiesChange:e}){const[n,r]=S.useState({}),[s,i]=S.useState(new Set);S.useEffect(()=>{const c={};Object.values(Kn).forEach(h=>{h.products.forEach(f=>{c[f]=0})}),r(c)},[]),S.useEffect(()=>{t!=null&&t.products&&r(c=>{const h={...c};return t.products.forEach(f=>{h[f.product_name]=f.quantity}),h})},[t]);const a=S.useCallback(c=>Object.entries(c).filter(([,h])=>h>0).map(([h,f])=>({product_name:h,quantity:f})),[]),o=S.useCallback(async(c,h)=>{const f=a(c);try{await e(f)}catch(g){console.error("Error saving quantities:",g)}finally{h&&i(g=>{const p=new Set(g);return p.delete(h),p})}},[e,a]),l=S.useCallback(c=>{const h=window.scrollY;i(f=>new Set(f).add(c)),r(f=>{const g={...f,[c]:(f[c]||0)+1};return o(g,c),g}),setTimeout(()=>window.scrollTo(0,h),0)},[o]),u=S.useCallback(c=>{const h=window.scrollY;i(f=>new Set(f).add(c)),r(f=>{const g=Math.max(0,(f[c]||0)-1),p={...f,[c]:g};return o(p,c),p}),setTimeout(()=>window.scrollTo(0,h),0)},[o]);return{quantities:n,updatingProducts:s,incrementQuantity:l,decrementQuantity:u}}function jx({listingId:t,onTodoUpdated:e}){const{existingTodo:n,loading:r,error:s,saveAutoTodo:i}=Ex({listingId:t,onTodoUpdated:e}),{quantities:a,updatingProducts:o,incrementQuantity:l,decrementQuantity:u}=bx({existingTodo:n,onQuantitiesChange:i}),[c,h]=S.useState(new Set(Object.keys(Kn))),f=S.useMemo(()=>{const _=[];return Object.entries(Kn).forEach(([v,m])=>{m.products.forEach(y=>{_.push({name:y,category:v})})}),_},[]),g=_=>{h(v=>{const m=new Set(v);return m.has(_)?m.delete(_):m.add(_),m})},p=S.useMemo(()=>f.filter(_=>c.has(_.category)),[f,c]),w=S.useMemo(()=>{const _={};return Object.keys(Kn).forEach(v=>{_[v]=[]}),p.forEach(v=>{const m=v.category;_[m]||(_[m]=[]),_[m].push(v)}),_},[p]);return r?d.jsx("div",{className:"todo-creation-helper",children:d.jsx("div",{className:"loading",children:"Loading products..."})}):d.jsxs("div",{className:"todo-creation-helper",children:[s&&d.jsx("div",{className:"error-message",children:s}),d.jsx("div",{className:"category-toggles",children:d.jsx("div",{className:"category-checkboxes",children:Object.entries(Kn).map(([_,v])=>d.jsxs("label",{className:"category-checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:c.has(_),onChange:()=>g(_),className:"category-checkbox"}),d.jsx("span",{className:"category-checkbox-text",children:v.name})]},_))})}),d.jsx("div",{className:"products-by-category",children:Object.entries(w).map(([_,v])=>d.jsxs("div",{className:"category-section",children:[d.jsx("h4",{className:"category-title",children:(()=>{const m=Kn[_];return m?m.name:_})()}),d.jsx("div",{className:"products-grid",children:v.map(m=>d.jsxs("div",{className:`product-block ${(a[m.name]||0)>0?"has-quantity":""} ${o.has(m.name)?"updating":""}`,children:[o.has(m.name)&&d.jsx("div",{className:"product-loading-overlay",children:d.jsx("div",{className:"spinner"})}),d.jsx("div",{className:"product-name",children:m.name}),d.jsxs("div",{className:"product-controls",children:[d.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),u(m.name)},className:"quantity-btn quantity-btn-minus",disabled:(a[m.name]||0)===0||o.has(m.name),children:"-"}),d.jsx("span",{className:"quantity-display",children:a[m.name]||0}),d.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),l(m.name)},className:"quantity-btn quantity-btn-plus",disabled:o.has(m.name),children:"+"})]})]},m.name))})]},_))}),n&&d.jsx("div",{className:"existing-todo-info",children:d.jsx("span",{className:"info-text",children:"Auto-generated todo exists for this listing"})})]})}function $l({attachedToType:t=null,attachedToId:e=null,title:n="Notes",showAttachmentInfo:r=!1}){const{t:s}=X(),{user:i,isAdmin:a,isCleaner:o}=Te(),{noteService:l}=Be(),[u,c]=S.useState([]),[h,f]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(""),[v,m]=S.useState(!1),y=S.useRef(null),x=S.useRef(null),k=async()=>{try{f(!0),p(null);const D=await l.fetchNotes({attachedToType:t,attachedToId:e});c(D||[])}catch(D){console.error("Error fetching notes:",D);const H=D instanceof Error?D.message:String(D);p(H)}finally{f(!1)}},C=()=>{var D;(D=y.current)==null||D.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{k()},[t,e]);const E=async D=>{if(!(!i||!D.trim())){m(!0),p(null);try{const H={content:D.trim(),attached_to_type:t,attached_to_id:e};await l.createNote(H),_(""),k(),setTimeout(()=>C(),100)}catch(H){console.error("Error creating note:",H),p(H instanceof Error?H.message:String(H))}finally{m(!1)}}},b=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),w.trim()&&!v&&E(w))},P=D=>{D.preventDefault(),w.trim()&&!v&&E(w)},T=async D=>{if(a&&confirm(s("notes.deleteConfirm")))try{await l.deleteNote(D),k()}catch(H){console.error("Error deleting note:",H),p(H instanceof Error?H.message:String(H))}},z=D=>D.attached_to_type?`${D.attached_to_type}: ${D.attached_to_id}`:s("todos.unattached");return h?d.jsx("div",{className:"note-list",children:d.jsx("div",{className:"loading",children:s("notes.loadingNotes")})}):d.jsxs("div",{className:"chat-container",children:[n&&d.jsx("div",{className:"chat-header",children:d.jsx("h3",{children:n})}),d.jsxs("div",{className:"chat-messages",children:[h&&d.jsx("div",{className:"chat-loading",children:s("notes.loadingNotes")}),!h&&u.length===0&&d.jsx("div",{className:"chat-empty",children:d.jsx("p",{children:s("notes.noNotesYet")})}),u.map(D=>d.jsxs("div",{className:"chat-message",children:[d.jsxs("div",{className:"message-header",children:[d.jsx("span",{className:"message-author",children:D.user_name||D.user_email||s("notes.unknownUser")}),d.jsx("span",{className:"message-time",children:new Date(D.created_at).toLocaleString()}),a&&d.jsx("button",{onClick:()=>T(D.id),className:"message-delete",title:s("notes.deleteNote"),children:""})]}),d.jsx("div",{className:"message-content",children:D.content}),r&&d.jsxs("div",{className:"message-attachment",children:[s("notes.attachedToLabel"),z(D)]})]},D.id)),d.jsx("div",{ref:y})]}),(a||o)&&d.jsxs("div",{className:"chat-input-container",children:[g&&d.jsx("div",{className:"chat-error",children:g}),d.jsxs("form",{onSubmit:P,className:"chat-input-form",children:[d.jsx("textarea",{ref:x,value:w,onChange:D=>_(D.target.value),onKeyPress:b,placeholder:s("notes.typePlaceholder"),className:"chat-input",rows:1,disabled:v}),d.jsx("button",{type:"submit",disabled:!w.trim()||v,className:"chat-send-btn",children:s(v?"notes.sending":"notes.send")})]})]})]})}function Rx(){const{id:t}=mg(),e=Nu(),{user:n,isAdmin:r}=Te(),{taskService:s}=Be(),{t:i}=X(),[a,o]=S.useState(null),[l,u]=S.useState(!0),[c,h]=S.useState(null),[f,g]=S.useState(null),[p,w]=S.useState(""),[_,v]=S.useState(!1),[m,y]=S.useState("chat"),[x,k]=S.useState(!0),[C,E]=S.useState(!0),[b,P]=S.useState(!0),T=S.useCallback(async()=>{try{if(!t)return;u(!0);const N=await s.getTask(t);o(N)}catch(N){h(N.message)}finally{u(!1)}},[s,t]);S.useEffect(()=>{n&&t&&T()},[T,n,t]);const z=()=>{e(-1)},D=N=>`status-badge status-${N}`,H=S.useCallback(async(N,$)=>{if(a)try{if(u(!0),N==="started_at"||N==="finished_at"){const F={[N]:$};await s.updateTaskTimes(a.id,F)}else await s.updateTaskField(a.id,N,$);await T(),g(null)}catch(F){h(F.message)}finally{u(!1)}},[s,a==null?void 0:a.id,T]),oe=S.useCallback(async N=>{if(a)try{u(!0),await s.updateTaskStatus(a.id,N),await T()}catch($){h($.message)}finally{u(!1)}},[s,a==null?void 0:a.id,T]),xt=S.useCallback(async(N,$)=>{try{u(!0),await s.updateTaskAssignment(N,$,n==null?void 0:n.id),await T()}catch(F){throw h(F.message),F}finally{u(!1)}},[s,n==null?void 0:n.id,T]),he=S.useCallback((N,$)=>{g(N),w($||"")},[]),O=S.useCallback(()=>{g(null),w("")},[]),j=({field:N,value:$,type:F="text"})=>{if(!a)return null;const G=f===N,He=!(N==="started_at"||N==="finished_at")||a.status!=="assigned"&&a.status!=="unassigned",Mt=a.status!=="admin_accepted"||r;return G?d.jsxs("div",{className:"time-edit-container",children:[d.jsx("input",{type:F,value:p,onChange:kt=>w(kt.target.value),className:"time-input"}),d.jsx("button",{onClick:()=>H(N,p),className:"btn-save",disabled:l,children:i("columns.save")}),d.jsx("button",{onClick:O,className:"btn-cancel",disabled:l,children:i("columns.cancel")})]}):d.jsxs("div",{className:"time-display-container",children:[d.jsx("span",{children:$?Xt($):i("tasks.notSet")}),He&&Mt&&d.jsx("button",{onClick:()=>he(N,$?$.slice(0,16):""),className:"btn-edit",disabled:l,children:i("columns.edit")})]})};return l?d.jsx("div",{className:"task-detail",children:d.jsxs("div",{className:"task-detail-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:i("tasks.loadingDetails")})]})}):c?d.jsx("div",{className:"task-detail",children:d.jsxs("div",{className:"task-detail-error",children:[d.jsx("h2",{children:i("tasks.errorLoading")}),d.jsx("p",{children:c}),d.jsx("button",{onClick:z,className:"btn-primary",children:i("tasks.goBack")})]})}):a?d.jsxs("div",{className:"task-detail",children:[d.jsxs("div",{className:"task-detail-header",children:[d.jsxs("button",{onClick:z,className:"btn-back",children:[" ",i("tasks.back")]}),d.jsx("h1",{className:"task-detail-title",children:i("tasks.details")})]}),d.jsxs("div",{className:"task-detail-content",children:[d.jsxs("div",{className:"task-detail-section",children:[d.jsx("h2",{className:"section-title",children:i("tasks.information")}),d.jsxs("div",{className:"task-info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.titleLabel")}),d.jsx("span",{children:a.title||i("columns.na")})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.statusLabel")}),d.jsx("span",{className:D(a.status),children:a.status})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.scheduledLabel")}),d.jsx("span",{children:Xt(a.scheduled_datetime)})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.listingIdLabel")}),d.jsx("span",{children:a.listing_id||i("columns.na")})]}),r&&d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.assignedToLabel")}),d.jsx(up,{currentAssignedTo:a.assigned_to,taskId:a.id,onAssignmentChange:xt,disabled:l})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.startedAtLabel")}),d.jsx(j,{field:"started_at",value:a.started_at,type:"datetime-local"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.finishedAtLabel")}),d.jsx(j,{field:"finished_at",value:a.finished_at,type:"datetime-local"})]})]})]}),d.jsx("div",{className:"task-detail-section",children:d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:i("tasks.actions")}),d.jsxs("div",{className:"section-actions",children:[a.status==="admin_accepted"&&d.jsxs("div",{className:"admin-accepted-notice",children:[d.jsx("span",{className:"status-badge status-admin_accepted",children:i("tasks.acceptedByAdmin")}),d.jsx("p",{children:i("tasks.noFurtherEdits")})]}),a.status==="assigned"&&d.jsx("button",{onClick:()=>oe("accepted"),className:"btn-start",disabled:l,children:i("tasks.acceptTask")}),a.status==="accepted"&&d.jsx("button",{onClick:()=>H("started_at",new Date().toISOString()),className:"btn-start",disabled:l,children:i("tasks.startTask")}),a.status==="in_progress"&&!a.finished_at&&d.jsx("button",{onClick:()=>H("finished_at",new Date().toISOString()),className:"btn-end",disabled:l,children:i("tasks.completeTask")}),r&&a.status==="completed"&&d.jsx("div",{className:"admin-review-actions",children:d.jsx("button",{onClick:()=>oe("admin_accepted"),className:"btn-accept",disabled:l,children:i("tasks.acceptCompletion")})})]})]})}),d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>P(!b),className:"section-toggle","aria-label":i(b?"collapse_section":"expand_section"),children:[d.jsx("span",{className:`expand-icon ${b?"expanded":""}`,children:""}),d.jsx("span",{className:"section-title",children:"Product Replenishment Helper"})]})}),b&&a.listing_id&&d.jsx(jx,{listingId:a.listing_id})]}),a.listing_id&&d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>E(!C),className:"section-toggle","aria-label":i(C?"collapse_section":"expand_section"),children:[d.jsx("span",{className:`expand-icon ${C?"expanded":""}`,children:""}),d.jsx("span",{className:"section-title",children:i("listings.listingTodos")})]})}),C&&d.jsx(fp,{attachedToType:"listing",attachedToId:a.listing_id,title:""})]}),d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>k(!x),className:"section-toggle","aria-label":i(x?"collapse_section":"expand_section"),children:[d.jsx("span",{className:`expand-icon ${x?"expanded":""}`,children:""}),d.jsx("span",{className:"section-title",children:i("listings.listingChat")})]})}),x&&d.jsxs("div",{className:"tabbed-container",children:[d.jsx("div",{className:"tab-header",children:d.jsxs("div",{className:"tab-nav",children:[d.jsx("button",{className:`tab-button ${m==="chat"?"active":""}`,onClick:()=>y("chat"),children:i("taskDetail.taskTab")}),d.jsx("button",{className:`tab-button ${m==="listing"?"active":""}`,onClick:()=>y("listing"),children:i("taskDetail.listingTab")})]})}),d.jsx("div",{className:"tab-content",children:m==="chat"?d.jsx($l,{attachedToType:"task",attachedToId:a.id,title:""}):a.listing_id&&d.jsx($l,{attachedToType:"listing",attachedToId:a.listing_id,title:""})})]})]}),r&&d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>v(!_),className:"section-toggle","aria-label":i(_?"taskDetail.collapseAudit":"taskDetail.expandAudit"),children:[d.jsx("span",{className:`toggle-icon ${_?"expanded":"collapsed"}`,children:""}),d.jsx("h2",{className:"section-title",children:i("audit.history")})]})}),_&&d.jsx("div",{className:"audit-trail-container",children:d.jsx(Cx,{taskId:a.id,taskService:s})})]})]})]}):d.jsx("div",{className:"task-detail",children:d.jsxs("div",{className:"task-detail-not-found",children:[d.jsx("h2",{children:i("tasks.notFound")}),d.jsx("p",{children:i("tasks.notFoundDescription")}),d.jsx("button",{onClick:z,className:"btn-primary",children:i("tasks.goBack")})]})})}function Tx(){const{t}=X(),{id:e}=mg(),{listingService:n}=Be(),[r,s]=S.useState(null),[i,a]=S.useState(!0),[o,l]=S.useState(null);if(S.useEffect(()=>{(async()=>{if(e)try{a(!0),l(null);const h=await n.fetchListing(e);s(h)}catch(h){console.error("Error fetching listing:",h),l(h instanceof Error?h.message:String(h))}finally{a(!1)}})()},[e,n]),i)return d.jsxs("div",{className:"listing-detail-loading",children:[d.jsx("div",{className:"loading-spinner","data-testid":"loading-spinner"}),t("listings.loadingDetails")]});if(o)return d.jsxs("div",{className:"error",children:[d.jsx("h3",{className:"error-title",children:t("listings.failedToLoad")}),d.jsx("p",{className:"error-message",children:o})]});if(!r)return d.jsxs("div",{className:"error",children:[d.jsx("h3",{className:"error-title",children:t("listings.notFound")}),d.jsxs("p",{className:"error-message",children:['The listing with ID "',e,'" was not found.']})]});const u=r.airbnb_payload||{};return d.jsxs("div",{className:"listing-detail",children:[d.jsxs("div",{className:"listing-detail-header",children:[d.jsx("h1",{className:"listing-detail-title",children:t("listings.details")}),d.jsxs("div",{className:"listing-detail-subtitle",children:["ID: ",r.id]})]}),d.jsxs("div",{className:"listing-detail-content",children:[d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:t("listings.basicInformation")}),d.jsxs("div",{className:"listing-detail-grid",children:[d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.listingId"),":"]}),d.jsx("span",{children:r.id})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.airbnbId"),":"]}),d.jsx("span",{children:r.airbnb_id})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.address"),":"]}),d.jsx("span",{children:u.formattedAddress||t("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.propertyType"),":"]}),d.jsx("span",{children:u.propertyType||t("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.roomType"),":"]}),d.jsx("span",{children:u.roomType||t("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.bedrooms"),":"]}),d.jsx("span",{children:u.bedrooms||t("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.bathrooms"),":"]}),d.jsx("span",{children:u.bathrooms||t("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.maxGuests"),":"]}),d.jsx("span",{children:u.maxGuests||t("columns.na")})]})]})]}),d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:t("listings.dates")}),d.jsxs("div",{className:"listing-detail-grid",children:[d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.created"),":"]}),d.jsx("span",{children:new Date(r.created_at).toLocaleString()})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[t("listings.updated"),":"]}),d.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]})]})]}),u.amenities&&u.amenities.length>0&&d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:t("listings.amenities")}),d.jsx("div",{className:"amenities-list",children:u.amenities.map((c,h)=>d.jsx("span",{className:"amenity-tag",children:c},h))})]}),d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:t("listings.listingTodos")}),d.jsx(fp,{attachedToType:"listing",attachedToId:r.id,title:""})]}),d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:t("listings.listingChat")}),d.jsx($l,{attachedToType:"listing",attachedToId:r.id,title:""})]})]})]})}const Px=()=>{var u,c,h;const{t}=X(),[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,a]=S.useState(null),{user:o}=Te(),{healthCheckService:l}=Be();return S.useEffect(()=>{o&&(async()=>{try{s(!0),a(null);const g=await l.getHealthCheck();n(g)}catch(g){const p=g instanceof Error?g.message:"An error occurred";p.includes("Authentication failed")?a(t("auth.authenticationFailed")):p.includes("No valid authentication session")?a(t("auth.noAccessToken")):a(p),console.error("Health check error:",g)}finally{s(!1)}})()},[o,l,t]),r?d.jsxs("div",{className:"loading",children:[d.jsx("div",{className:"loading-spinner"}),t("healthCheck.loading")]}):i?d.jsxs("div",{className:"error",children:[d.jsx("h2",{className:"error-title",children:t("healthCheck.failed")}),d.jsx("p",{className:"error-message",children:i}),i.includes("Authentication failed")&&d.jsx("button",{onClick:()=>window.location.reload(),className:"google-signin-btn",style:{marginTop:"var(--space-4)"},children:t("healthCheck.reloadPage")})]}):d.jsxs("div",{className:"admin-reservations",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{className:"admin-title",children:t("healthCheck.title")}),d.jsx("p",{className:"admin-stats",children:t("healthCheck.monitoring")})]}),e&&d.jsxs("div",{style:{padding:"var(--space-6)"},children:[d.jsxs("div",{style:{display:"grid",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.overallStatus")}),d.jsx("span",{className:`status-badge status-${e.status==="ok"?"confirmed":"cancelled"}`,children:e.status==="ok"?t("healthCheck.healthy"):t("healthCheck.error")})]}),e.user&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.authenticatedUser")}),d.jsx("span",{style:{color:"var(--graphite-900)"},children:e.user.email})]}),((u=e.checks)==null?void 0:u.database)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.database")}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("span",{className:`status-badge status-${e.checks.database.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.database.status==="ok"?t("healthCheck.connected"):t("healthCheck.error")}),e.checks.database.version&&d.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--graphite-500)",marginTop:"var(--space-1)"},children:[t("system.version"),e.checks.database.version]})]})]}),((c=e.checks)==null?void 0:c.supabase)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.supabaseApi")}),d.jsx("span",{className:`status-badge status-${e.checks.supabase.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.supabase.status==="ok"?t("healthCheck.connected"):t("healthCheck.error")})]}),((h=e.checks)==null?void 0:h.environment)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.environment")}),d.jsx("span",{className:`status-badge status-${e.checks.environment.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.environment.status==="ok"?t("healthCheck.configured"):t("healthCheck.error")})]})]}),d.jsxs("div",{style:{textAlign:"center",color:"var(--graphite-500)",fontSize:"0.875rem",fontStyle:"italic",paddingTop:"var(--space-4)",borderTop:"1px solid var(--graphite-200)"},children:[t("system.lastChecked"),new Date(e.timestamp).toLocaleString()]})]})]})},Nx=()=>{const{currentLanguage:t,changeLanguage:e}=e_(),n=[{code:"en",name:"English",flag:""},{code:"es",name:"Espaol",flag:""}];return d.jsx("div",{className:"language-selector",children:d.jsx("select",{value:t,onChange:r=>e(r.target.value),className:"language-select",children:n.map(r=>d.jsxs("option",{value:r.code,children:[r.flag," ",r.name]},r.code))})})},ht=()=>{const t=gn(),{user:e,signOut:n,isAdmin:r,isCleaner:s}=Te(),{t:i}=X(),a=async()=>{try{await n()}catch(o){console.error("Sign out error:",o)}};return d.jsx("nav",{className:"navigation",children:d.jsxs("div",{className:"nav-content",children:[d.jsx(We,{to:"/",className:"nav-brand",children:i("navigation.brand")}),d.jsxs("div",{className:"nav-links",children:[d.jsx(We,{to:"/",className:`nav-link ${t.pathname==="/"?"active":""}`,children:i("navigation.dashboard")}),r&&d.jsx(We,{to:"/healthcheck",className:`nav-link ${t.pathname==="/healthcheck"?"active":""}`,children:i("navigation.healthCheck")}),r&&d.jsx(We,{to:"/listings",className:`nav-link ${t.pathname==="/listings"?"active":""}`,children:i("navigation.listings")}),r&&d.jsxs(d.Fragment,{children:[d.jsx(We,{to:"/admin",className:`nav-link ${t.pathname==="/admin"?"active":""}`,children:i("navigation.reservations")}),d.jsx(We,{to:"/admin/tasks",className:`nav-link ${t.pathname==="/admin/tasks"?"active":""}`,children:i("navigation.tasks")}),d.jsx(We,{to:"/admin/todos",className:`nav-link ${t.pathname==="/admin/todos"?"active":""}`,children:i("navigation.todos")}),d.jsx(We,{to:"/admin/threads",className:`nav-link ${t.pathname==="/admin/threads"?"active":""}`,children:i("navigation.threads")})]}),s&&d.jsx(We,{to:"/cleaner/tasks",className:`nav-link ${t.pathname==="/cleaner/tasks"?"active":""}`,children:i("navigation.myTasks")})]}),d.jsxs("div",{className:"nav-user",children:[d.jsx("span",{className:"user-email",children:e==null?void 0:e.email}),r&&d.jsx("span",{className:"admin-badge",children:i("navigation.adminBadge")}),s&&d.jsx("span",{className:"cleaner-badge",children:i("navigation.cleanerBadge")}),d.jsx(Nx,{}),d.jsx("button",{onClick:a,className:"signout-btn",children:i("navigation.signOut")})]})]})})},Lx=()=>{const{t}=X(),[e,n]=S.useState(!0),[r,s]=S.useState(null),i=Nu(),{userService:a}=Be();return S.useEffect(()=>{(async()=>{try{console.log("Handling auth callbackz..."),console.log("URL:",window.location.href);const l=new URLSearchParams(window.location.hash.substring(1));l.has("access_token")||l.has("error")?(console.log("Auth parameters found in URL, processing..."),await a.getCurrentSession()?(console.log("Auth successful, redirecting to home..."),i("/",{replace:!0})):(console.log("Session not ready, waiting..."),setTimeout(()=>{i("/",{replace:!0})},1e3))):(console.log("No auth parameters, checking existing session..."),await a.getCurrentSession()?(console.log("Existing session found, redirecting to home..."),i("/",{replace:!0})):(console.log("No session found, redirecting to login..."),i("/",{replace:!0})))}catch(l){console.error("Unexpected error in auth callback:",l),s(t("auth.unexpectedError")),n(!1)}})()},[a,i,t]),e?d.jsx("div",{className:"container",children:d.jsx("div",{className:"card",children:d.jsxs("div",{className:"loading",children:[d.jsx("h2",{children:t("auth.authenticating")}),d.jsx("p",{children:t("auth.pleaseWait")})]})})}):r?d.jsx("div",{className:"container",children:d.jsx("div",{className:"card",children:d.jsxs("div",{className:"error",children:[d.jsx("h2",{children:t("auth.authenticationError")}),d.jsx("p",{children:r}),d.jsx("button",{onClick:()=>i("/",{replace:!0}),children:t("auth.returnToLogin")})]})})}):null},$x=()=>{const{t}=X();return d.jsxs("div",{className:"content-container",children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h1",{className:"page-title",children:t("dashboard.title")}),d.jsx("p",{className:"page-subtitle",children:t("dashboard.welcome")})]}),d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-state-icon",children:""}),d.jsx("h2",{className:"empty-state-title",children:t("dashboard.comingSoon")}),d.jsx("p",{className:"empty-state-description",children:t("dashboard.comingSoonDescription")})]})]})},M=t=>typeof t=="string",Mr=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},Pd=t=>t==null?"":""+t,Ax=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},Ix=/###/g,Nd=t=>t&&t.indexOf("###")>-1?t.replace(Ix,"."):t,Ld=t=>!t||M(t),ss=(t,e,n)=>{const r=M(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Ld(t))return{};const i=Nd(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return Ld(t)?{}:{obj:t,k:Nd(r[s])}},$d=(t,e,n)=>{const{obj:r,k:s}=ss(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],a=e.slice(0,e.length-1),o=ss(t,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=ss(t,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},Ox=(t,e,n,r)=>{const{obj:s,k:i}=ss(t,e,Object);s[i]=s[i]||[],s[i].push(n)},Xi=(t,e)=>{const{obj:n,k:r}=ss(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Fx=(t,e,n)=>{const r=Xi(t,n);return r!==void 0?r:Xi(e,n)},gp=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?M(t[r])||t[r]instanceof String||M(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):gp(t[r],e[r],n):t[r]=e[r]);return t},Bn=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Dx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Mx=t=>M(t)?t.replace(/[&<>"'\/]/g,e=>Dx[e]):t;class Ux{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const zx=[" ",",","?","!",";"],Vx=new Ux(20),Bx=(t,e,n)=>{e=e||"",n=n||"";const r=zx.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const s=Vx.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!s.test(t);if(!i){const a=t.indexOf(n);a>0&&!s.test(t.substring(0,a))&&(i=!0)}return i},Al=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let a,o="";for(let l=i;l<r.length;++l)if(l!==i&&(o+=n),o+=r[l],a=s[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=a}return s},Cs=t=>t==null?void 0:t.replace("_","-"),Hx={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class Zi{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||Hx,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(M(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Zi(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Zi(this.logger,e)}}var mt=new Zi;class Ea{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,i])=>{for(let a=0;a<i;a++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let a=0;a<i;a++)s.apply(s,[e,...n])})}}class Ad extends Ea{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){var u,c;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,n],r&&(Array.isArray(r)?o.push(...r):M(r)&&i?o.push(...r.split(i)):o.push(r)));const l=Xi(this.data,o);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=o[0],n=o[1],r=o.slice(2).join(".")),l||!a||!M(r)?l:Al((c=(u=this.data)==null?void 0:u[e])==null?void 0:c[n],r,i)}addResource(e,n,r,s,i={silent:!1}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,n];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),s=n,n=o[1]),this.addNamespaces(n),$d(this.data,o,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const i in r)(M(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i,a={silent:!1,skipCopy:!1}){let o=[e,n];e.indexOf(".")>-1&&(o=e.split("."),s=r,r=n,n=o[1]),this.addNamespaces(n);let l=Xi(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?gp(l,r,i):l={...l,...r},$d(this.data,o,l),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var pp={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{var a;e=((a=this.processors[i])==null?void 0:a.process(e,n,r,s))??e}),e}};const mp=Symbol("i18next/PATH_KEY");function qx(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===mp?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Il(t,e){const{[mp]:n}=t(qx());return n.join((e==null?void 0:e.keySeparator)??".")}const Id={},Od=t=>!M(t)&&typeof t!="boolean"&&typeof t!="number";class ea extends Ea{constructor(e,n={}){super(),Ax(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);return(s==null?void 0:s.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Bx(e,r,s);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:M(i)?[i]:i};const u=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(s)}return{key:e,namespaces:M(i)?[i]:i}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Il(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],s),u=l[l.length-1];let c=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const h=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return f?i?{res:`${u}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${c}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:o;const g=this.resolve(e,s);let p=g==null?void 0:g.res;const w=(g==null?void 0:g.usedKey)||o,_=(g==null?void 0:g.exactUsedKey)||o,v=["[object Number]","[object Function]","[object RegExp]"],m=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,x=s.count!==void 0&&!M(s.count),k=ea.hasDefaultValue(s),C=x?this.pluralResolver.getSuffix(h,s.count,s):"",E=s.ordinal&&x?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",b=x&&!s.ordinal&&s.count===0,P=b&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${C}`]||s[`defaultValue${E}`]||s.defaultValue;let T=p;y&&!p&&k&&(T=P);const z=Od(T),D=Object.prototype.toString.apply(T);if(y&&T&&z&&v.indexOf(D)<0&&!(M(m)&&Array.isArray(T))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const H=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,T,{...s,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(g.res=H,g.usedParams=this.getUsedParamsDetails(s),g):H}if(a){const H=Array.isArray(T),oe=H?[]:{},xt=H?_:w;for(const he in T)if(Object.prototype.hasOwnProperty.call(T,he)){const O=`${xt}${a}${he}`;k&&!p?oe[he]=this.translate(O,{...s,defaultValue:Od(P)?P[he]:void 0,joinArrays:!1,ns:l}):oe[he]=this.translate(O,{...s,joinArrays:!1,ns:l}),oe[he]===O&&(oe[he]=T[he])}p=oe}}else if(y&&M(m)&&Array.isArray(p))p=p.join(m),p&&(p=this.extendTranslation(p,e,s,r));else{let H=!1,oe=!1;!this.isValidLookup(p)&&k&&(H=!0,p=P),this.isValidLookup(p)||(oe=!0,p=o);const he=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&oe?void 0:p,O=k&&P!==p&&this.options.updateMissing;if(oe||H||O){if(this.logger.log(O?"updateKey":"missingKey",h,u,o,O?P:p),a){const F=this.resolve(o,{...s,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let j=[];const N=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&N&&N[0])for(let F=0;F<N.length;F++)j.push(N[F]);else this.options.saveMissingTo==="all"?j=this.languageUtils.toResolveHierarchy(s.lng||this.language):j.push(s.lng||this.language);const $=(F,G,et)=>{var Mt;const He=k&&et!==p?et:he;this.options.missingKeyHandler?this.options.missingKeyHandler(F,u,G,He,O,s):(Mt=this.backendConnector)!=null&&Mt.saveMissing&&this.backendConnector.saveMissing(F,u,G,He,O,s),this.emit("missingKey",F,u,G,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?j.forEach(F=>{const G=this.pluralResolver.getSuffixes(F,s);b&&s[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(et=>{$([F],o+et,s[`defaultValue${et}`]||P)})}):$(j,o,P))}p=this.extendTranslation(p,e,s,g,r),oe&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${u}${c}${o}`),(oe||H)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${c}${o}`:o,H?p:void 0,s))}return i?(g.res=p,g.usedParams=this.getUsedParamsDetails(s),g):p}extendTranslation(e,n,r,s,i){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=M(e)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const g=e.match(this.interpolator.nestingRegexp);h=g&&g.length}let f=r.replace&&!M(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),c){const g=e.match(this.interpolator.nestingRegexp),p=g&&g.length;h<p&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(i==null?void 0:i[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,o=M(a)?[a]:a;return e!=null&&(o!=null&&o.length)&&r.applyPostProcessor!==!1&&(e=pp.handle(o,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,i,a,o;return M(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;s=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!M(n.count),g=f&&!n.ordinal&&n.count===0,p=n.context!==void 0&&(M(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(_=>{var v,m;this.isValidLookup(r)||(o=_,!Id[`${w[0]}-${_}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((m=this.utils)!=null&&m.hasLoadedNamespace(o))&&(Id[`${w[0]}-${_}`]=!0,this.logger.warn(`key "${s}" for languages "${w.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(y=>{var C;if(this.isValidLookup(r))return;a=y;const x=[c];if((C=this.i18nFormat)!=null&&C.addLookupKeys)this.i18nFormat.addLookupKeys(x,c,y,_,n);else{let E;f&&(E=this.pluralResolver.getSuffix(y,n.count,n));const b=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(n.ordinal&&E.indexOf(P)===0&&x.push(c+E.replace(P,this.options.pluralSeparator)),x.push(c+E),g&&x.push(c+b)),p){const T=`${c}${this.options.contextSeparator||"_"}${n.context}`;x.push(T),f&&(n.ordinal&&E.indexOf(P)===0&&x.push(T+E.replace(P,this.options.pluralSeparator)),x.push(T+E),g&&x.push(T+b))}}let k;for(;k=x.pop();)this.isValidLookup(r)||(i=k,r=this.getResource(y,_,k,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!M(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class Fd{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mt.create("languageUtils")}getScriptPartFromCode(e){if(e=Cs(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Cs(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(M(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(a=>{if(a===i)return a;if(!(a.indexOf("-")<0&&i.indexOf("-")<0)&&(a.indexOf("-")>0&&i.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===i||a.indexOf(i)===0&&i.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),M(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],i=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return M(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):M(e)&&i(this.formatLanguageCode(e)),r.forEach(a=>{s.indexOf(a)<0&&i(this.formatLanguageCode(a))}),s}}const Dd={zero:0,one:1,two:2,few:3,many:4,other:5},Md={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Wx{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=mt.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Cs(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Md;if(!e.match(/-|_/))return Md;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,n)}return this.pluralRulesCache[i]=a,a}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>Dd[s]-Dd[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Ud=(t,e,n,r=".",s=!0)=>{let i=Fx(t,e,n);return!i&&s&&M(n)&&(i=Al(t,n,r),i===void 0&&(i=Al(e,n,r))),i},yo=t=>t.replace(/\$/g,"$$$$");class Gx{constructor(e={}){var n;this.logger=mt.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:w,nestingOptionsSeparator:_,maxReplaces:v,alwaysFormat:m}=e.interpolation;this.escape=n!==void 0?n:Mx,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Bn(i):a||"{{",this.suffix=o?Bn(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=f?Bn(f):g||Bn("$t("),this.nestingSuffix=p?Bn(p):w||Bn(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=v||1e3,this.alwaysFormat=m!==void 0?m:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){var g;let i,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const m=Ud(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...s,...n,interpolationkey:p}):m}const w=p.split(this.formatSeparator),_=w.shift().trim(),v=w.join(this.formatSeparator).trim();return this.format(Ud(n,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...s,...n,interpolationkey:_})};this.resetRegExp();const c=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((g=s==null?void 0:s.interpolation)==null?void 0:g.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>yo(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?yo(this.escape(p)):yo(p)}].forEach(p=>{for(o=0;i=p.regex.exec(e);){const w=i[1].trim();if(a=u(w),a===void 0)if(typeof c=="function"){const v=c(e,i,s);a=M(v)?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,w))a="";else if(h){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),a="";else!M(a)&&!this.useRawValueToEscape&&(a=Pd(a));const _=p.safeValue(a);if(e=e.replace(i[0],_),h?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,i,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp(`${c}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,a);const g=f.match(/'/g),p=f.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!p||p.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),u&&(a={...u,...a})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${c}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&!M(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(l=s[1].slice(u).split(this.formatSeparator).map(c=>c.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),i=n(o.call(this,s[1].trim(),a),a),i&&s[0]===e&&!M(i))return i;M(i)||(i=Pd(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),l.length&&(i=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const Kx=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},zd=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=r+JSON.stringify(i);let o=e[a];return o||(o=t(Cs(r),s),e[a]=o),o(n)}},Qx=t=>(e,n,r)=>t(Cs(n),r)(e);class Jx{constructor(e={}){this.logger=mt.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?zd:Qx;this.formats={number:r((s,i)=>{const a=new Intl.NumberFormat(s,{...i});return o=>a.format(o)}),currency:r((s,i)=>{const a=new Intl.NumberFormat(s,{...i,style:"currency"});return o=>a.format(o)}),datetime:r((s,i)=>{const a=new Intl.DateTimeFormat(s,{...i});return o=>a.format(o)}),relativetime:r((s,i)=>{const a=new Intl.RelativeTimeFormat(s,{...i});return o=>a.format(o,i.range||"day")}),list:r((s,i)=>{const a=new Intl.ListFormat(s,{...i});return o=>a.format(o)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=zd(n)}format(e,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,l)=>{var h;const{formatName:u,formatOptions:c}=Kx(l);if(this.formats[u]){let f=o;try{const g=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},p=g.locale||g.lng||s.locale||s.lng||r;f=this.formats[u](o,p,{...c,...s,...g})}catch(g){this.logger.warn(g)}return f}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const Yx=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Xx extends Ea{constructor(e,n,r,s={}){var i,a;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=mt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(a=(i=this.backend)==null?void 0:i.init)==null||a.call(i,r,s.backend,s)}queueLoad(e,n,r,s){const i={},a={},o={},l={};return e.forEach(u=>{let c=!0;n.forEach(h=>{const f=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,c=!1,a[f]===void 0&&(a[f]=!0),i[f]===void 0&&(i[f]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(o[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],a=s[1];n&&this.emit("failedLoading",i,a,n),!n&&r&&this.store.addResourceBundle(i,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const o={};this.queue.forEach(l=>{Ox(l.loaded,[i],a),Yx(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,s=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,a)},i);return}a(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,n,o)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();M(e)&&(e=this.languageUtils.toResolveHierarchy(e)),M(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,a),!a&&o&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,n,r,s,i,a={},o=()=>{}){var l,u,c,h,f;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const g={...a,isUpdate:i},p=this.backend.create.bind(this.backend);if(p.length<6)try{let w;p.length===5?w=p(e,n,r,s,g):w=p(e,n,r,s),w&&typeof w.then=="function"?w.then(_=>o(null,_)).catch(o):o(null,w)}catch(w){o(w)}else p(e,n,r,s,o,g)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const Vd=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),M(t[1])&&(e.defaultValue=t[1]),M(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Bd=t=>{var e,n;return M(t.ns)&&(t.ns=[t.ns]),M(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),M(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},ci=()=>{},Zx=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Es extends Ea{constructor(e={},n){if(super(),this.options=Bd(e),this.services={},this.logger=mt,this.modules={external:[]},Zx(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(M(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Vd();this.options={...r,...this.options,...Bd(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?mt.init(s(this.modules.logger),this.options):mt.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Jx;const c=new Fd(this.options);this.store=new Ad(this.options.resources,this.options);const h=this.services;h.logger=mt,h.resourceStore=this.store,h.languageUtils=c,h.pluralResolver=new Wx(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Gx(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Xx(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new ea(this.services,this.options),this.translator.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ci),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...c)=>this.store[u](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...c)=>(this.store[u](...c),this)});const o=Mr(),l=()=>{const u=(c,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),n(c,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(e,n=ci){var i,a;let r=n;const s=M(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),(a=(i=this.options.preload)==null?void 0:i.forEach)==null||a.call(i,u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const s=Mr();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=ci),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&pp.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Mr();this.emit("languageChanging",e);const s=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,l)=>{l?this.isLanguageChangingTo===e&&(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(o,(...u)=>this.t(...u))},a=o=>{var c,h;!e&&!o&&this.services.languageDetector&&(o=[]);const l=M(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(M(o)?[o]:o);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(c=this.services.languageDetector)==null?void 0:c.cacheUserLanguage)==null||h.call(c,u)),this.loadResources(u,f=>{i(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),r}getFixedT(e,n,r){const s=(i,a,...o)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([i,a].concat(o)):l={...a},l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const u=this.options.keySeparator||".";let c;return l.keyPrefix&&Array.isArray(i)?c=i.map(h=>(typeof h=="function"&&(h=Il(h,{...this.options,...a})),`${l.keyPrefix}${u}${h}`)):(typeof i=="function"&&(i=Il(i,{...this.options,...a})),c=l.keyPrefix?`${l.keyPrefix}${u}${i}`:i),this.t(c,l)};return M(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const o=n.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!s||a(i,e)))}loadNamespaces(e,n){const r=Mr();return this.options.ns?(M(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Mr();M(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=s.concat(i),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new Fd(Vd());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Es(e,n)}cloneInstance(e={},n=ci){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Es(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const o=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((c,h)=>(c[h]={...l[u][h]},c),l[u]),l),{});i.store=new Ad(o,s),i.services.resourceStore=i.store}return i.translator=new ea(i.services,s),i.translator.on("*",(o,...l)=>{i.emit(o,...l)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ke=Es.createInstance();ke.createInstance=Es.createInstance;ke.createInstance;ke.dir;ke.init;ke.loadResources;ke.reloadResources;ke.use;ke.changeLanguage;ke.getFixedT;ke.t;ke.exists;ke.setDefaultNamespace;ke.hasLoadedNamespace;ke.loadNamespaces;ke.loadLanguages;const{slice:ek,forEach:tk}=[];function nk(t){return tk.call(ek.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function rk(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const Hd=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,sk=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let i=`${t}=${s}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!Hd.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!Hd.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},qd={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=sk(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var ik={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return qd.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=e;n&&typeof document<"u"&&qd.create(n,t,r,s,i)}},ak={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const a=s.substring(1).split("&");for(let o=0;o<a.length;o++){const l=a[o].indexOf("=");l>0&&a[o].substring(0,l)===e&&(n=a[o].substring(l+1))}}return n}},ok={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const a=i.substring(1);if(e){const o=a.split("&");for(let l=0;l<o.length;l++){const u=o[l].indexOf("=");u>0&&o[l].substring(0,u)===e&&(r=o[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(s=o[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let Hn=null;const Wd=()=>{if(Hn!==null)return Hn;try{if(Hn=typeof window<"u"&&window.localStorage!==null,!Hn)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Hn=!1}return Hn};var lk={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Wd())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&Wd()&&window.localStorage.setItem(n,t)}};let qn=null;const Gd=()=>{if(qn!==null)return qn;try{if(qn=typeof window<"u"&&window.sessionStorage!==null,!qn)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{qn=!1}return qn};var uk={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Gd())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&Gd()&&window.sessionStorage.setItem(n,t)}},ck={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},dk={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},hk={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},fk={name:"subdomain",lookup(t){var s,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let vp=!1;try{document.cookie,vp=!0}catch{}const yp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];vp||yp.splice(1,1);const gk=()=>({order:yp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class wp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=nk(n,this.options||{},gk()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(ik),this.addDetector(ak),this.addDetector(lk),this.addDetector(uk),this.addDetector(ck),this.addDetector(dk),this.addDetector(hk),this.addDetector(fk),this.addDetector(ok)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!rk(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}wp.type="languageDetector";const pk={brand:"Sonsoles Stays",dashboard:"Dashboard",healthCheck:"Health Check",listings:"Listings",reservations:"Reservations",tasks:"Tasks",todos:"TODOs",threads:"Threads",myTasks:"My Tasks",adminBadge:"Admin",cleanerBadge:"Cleaner",signOut:"Sign Out"},mk={title:"Threads",searchPlaceholder:"Search threads...",noThreadsFound:"No threads found",yesterday:"Yesterday",listingTitle:"Listing: {{id}}",reservationTitle:"Reservation: {{id}}",channelThread:"{{channel}} Thread",noParticipants:"No participants",participantsWithMore:"{{participants}} +{{count}}",selectThread:"Select a thread to view messages",selectThreadDescription:"Choose a thread from the sidebar to see the conversation",noMessages:"No messages in this thread yet",loading:"Loading threads...",error:"Error",retry:"Retry",errorLoadingThreads:"Failed to load threads",errorLoadingMessages:"Failed to load messages"},vk={welcome:"Welcome to Sonsoles Stays!",signInDescription:"Please sign in to access your stay management system.",signingIn:"Signing in...",signInWithGoogle:"Sign in with Google",authenticating:" Authenticating...",pleaseWait:"Please wait while we complete your sign-in.",authenticationError:" Authentication Error",returnToLogin:"Return to Login",unexpectedError:"An unexpected error occurred during authentication.",noAccessToken:"No access token available",authenticationFailed:"Authentication failed. Please sign in again."},yk={title:"Dashboard",welcome:"Welcome to your stay management system",comingSoon:"Dashboard Coming Soon",comingSoonDescription:"Your main dashboard will be available here."},wk={management:"Task Management",myTasks:"My Tasks",totalTasks:"Total Tasks: {{count}}",loading:"Loading...",loginRequired:"Please log in to view your tasks.",details:"Task Details",information:"Task Information",actions:"Actions",acceptTask:"Accept Task",startTask:"Start Task",completeTask:"Complete Task",acceptCompletion:"Accept Completion",acceptedByAdmin:"Accepted by Admin",noFurtherEdits:"No further edits allowed",loadingDetails:"Loading task details...",errorLoading:"Error Loading Task",goBack:"Go Back",notFound:"Task Not Found",notFoundDescription:"The requested task could not be found.",back:"Back",notSet:"Not set"},Sk={searchPlaceholder:"Search all columns...",showingEntries:"Showing {{start}} to {{end}} of {{total}} entries",showingCount:"Showing {{count}} of {{total}} entries",noData:"No Data Found",noResults:"No results match your search criteria.",noDataAvailable:"No data available.",pageInfo:"Page {{current}} of {{total}}",showSize:"Show {{size}}",loadingData:"Loading data...",failedToLoad:"Failed to Load Data"},_k={id:"ID",title:"Title",task:"Task",type:"Type",status:"Status",description:"Description",listing:"Listing",reservation:"Reservation",scheduled:"Scheduled",assignedTo:"Assigned To",assignedAt:"Assigned At",acceptedAt:"Accepted At",completedAt:"Completed At",created:"Created",na:"N/A",view:"View",accept:"Accept",start:"Start",complete:"Complete",cancel:"Cancel",edit:"Edit",save:"Save"},xk={unassigned:"Unassigned",assigned:"Assigned",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",admin_accepted:"Admin Accepted"},kk={guest:"Guest",property:"Property",checkIn:"Check-in",checkOut:"Check-out",nights:"Nights",guests:"Guests",total:"Total",hostPayout:"Host Payout"},Ck={checkingAccess:"Checking admin access...",authenticationRequired:"Authentication Required",signInToAccess:"Please sign in to access this page.",adminAccessRequired:"Admin Access Required",noAdminPrivileges:"You do not have admin privileges to access this page."},Ek={unassigned:"Unassigned",loading:"Loading...",unknown:"Unknown"},bk={loading:"Loading..."},jk={history:"Audit History",entries:"entries",loading:"Loading audit history...",noHistory:"No audit history available for this task.",by:"by",noDescription:"No description available",fieldsChanged:"Fields changed",valuesChanged:"Values changed",context:"Context",system:"System",unknownUser:"Unknown User"},Rk={title:"System Health Check",monitoring:"Monitoring system status and connectivity",failed:"Health Check Failed",loading:"Loading health status...",reloadPage:"Reload Page",healthy:"Healthy",error:"Error",connected:"Connected",configured:"Configured"},Tk={allTodos:"All TODOs",totalTodos:"Total TODOs: {{count}}",loadingTodos:"Loading TODOs...",filterByStatus:"Filter by Status:",all:"All",pending:"Pending",done:"Done",createGeneral:"Create General TODO",createNew:"Create New TODO",adminAccessRequired:"Admin access required to view all TODOs.",attachedTo:"Attached To",unattached:"Unattached",delete:"Delete",deleteConfirm:"Are you sure you want to delete this TODO?",creating:"Creating...",addNote:"Add Note",adding:"Adding...",noListingAssignment:"No listing assignment",description:"Description",failedToLoad:"Failed to load listings",addTodo:"Add TODO",noTodosFound:"No TODOs found.",createdLabel:"Created: ",completedLabel:"Completed: ",attachedToLabel:"Attached to: ",productsNeeded:"Products needed:",markAsDone:"Mark as done",title:"Title *",titlePlaceholder:"e.g., Fix the AC, Buy cleaning supplies",assignToListing:"Assign to Listing (Optional)",loadingListings:"Loading listings...",products:"Products (Optional)",searchProductsPlaceholder:"Search for products to add...",selectedProducts:"Selected Products:",remove:"Remove",detailsPlaceholder:"Additional details or notes...",cancel:"Cancel"},Pk={title:"Listings",details:"Listing Details",totalListings:"Total listings: {{count}}",loadingListings:"Loading listings...",loadingDetails:"Loading listing details...",address:"Address",basicInformation:"Basic Information",dates:"Dates",amenities:"Amenities",listingTodos:"Listing TODOs",listingChat:"Listing Chat",notFound:"Listing not found",notFoundWithId:'The listing with ID "{{id}}" was not found.',failedToLoad:"Failed to load listing",listingId:"Listing ID",airbnbId:"Airbnb ID",propertyType:"Property Type",roomType:"Room Type",bedrooms:"Bedrooms",bathrooms:"Bathrooms",maxGuests:"Max Guests",created:"Created",updated:"Updated"},Nk={accessRequired:"Access Required"},Lk={title:"Notes",unknownUser:"Unknown User",send:"Send",sending:"...",deleteNote:"Delete note",deleteConfirm:"Are you sure you want to delete this note?",loadingNotes:"Loading notes...",noNotesYet:"No notes yet. Start the conversation!",attachedToLabel:"Attached to: ",typePlaceholder:"Type a note... (Press Enter to send, Shift+Enter for new line)",noteLabel:"Note:",notePlaceholder:"Enter your note...",errorOccurred:"An error occurred"},$k={noAddress:"No address"},Ak={collapseAudit:"Collapse audit history",expandAudit:"Expand audit history",titleLabel:"Title:",statusLabel:"Status:",scheduledLabel:"Scheduled Date:",listingIdLabel:"Listing ID:",assignedToLabel:"Assigned To:",startedAtLabel:"Started At:",finishedAtLabel:"Finished At:",productHelper:"Product Replenishment Helper",taskTab:"Task",listingTab:"Listing"},Ik={overallStatus:"Overall Status:",authenticatedUser:"Authenticated User:",database:"Database:",version:"Version: ",supabaseApi:"Supabase API:",environment:"Environment:",lastChecked:"Last checked: ",systemLabel:"System",null:"null"},Ok={english:"English",spanish:"Espaol"},Fk={navigation:pk,threads:mk,auth:vk,dashboard:yk,tasks:wk,dataTable:Sk,columns:_k,statuses:xk,reservations:kk,admin:Ck,assignment:Ek,common:bk,audit:jk,healthCheck:Rk,todos:Tk,listings:Pk,cleaner:Nk,notes:Lk,forms:$k,taskDetail:Ak,system:Ik,language:Ok},Dk={brand:"Sonsoles Stays",dashboard:"Panel de Control",healthCheck:"Verificacin de Estado",listings:"Propiedades",reservations:"Reservas",tasks:"Tareas",todos:"Tareas Pendientes",threads:"Conversaciones",myTasks:"Mis Tareas",adminBadge:"Administrador",cleanerBadge:"Limpiador",signOut:"Cerrar Sesin"},Mk={title:"Conversaciones",searchPlaceholder:"Buscar conversaciones...",noThreadsFound:"No se encontraron conversaciones",yesterday:"Ayer",listingTitle:"Propiedad: {{id}}",reservationTitle:"Reserva: {{id}}",channelThread:"Conversacin {{channel}}",noParticipants:"Sin participantes",participantsWithMore:"{{participants}} +{{count}}",selectThread:"Selecciona una conversacin para ver mensajes",selectThreadDescription:"Elige una conversacin de la barra lateral para ver la conversacin",noMessages:"An no hay mensajes en esta conversacin",loading:"Cargando conversaciones...",error:"Error",retry:"Reintentar",errorLoadingThreads:"Error al cargar conversaciones",errorLoadingMessages:"Error al cargar mensajes"},Uk={welcome:"Bienvenido a Sonsoles Stays",signInDescription:"Por favor, inicia sesin para acceder a tu sistema de gestin de estancias.",signingIn:"Iniciando sesin...",signInWithGoogle:"Iniciar sesin con Google",authenticating:" Autenticando...",pleaseWait:"Por favor, espera mientras completamos tu inicio de sesin.",authenticationError:" Error de Autenticacin",returnToLogin:"Volver al Inicio de Sesin",unexpectedError:"Ocurri un error inesperado durante la autenticacin.",noAccessToken:"No hay token de acceso disponible",authenticationFailed:"La autenticacin fall. Por favor, inicia sesin nuevamente."},zk={title:"Panel de Control",welcome:"Bienvenido a tu sistema de gestin de estancias",comingSoon:"Panel de Control Prximamente",comingSoonDescription:"Tu panel de control principal estar disponible aqu."},Vk={management:"Gestin de Tareas",myTasks:"Mis Tareas",totalTasks:"Total de Tareas: {{count}}",loading:"Cargando...",loginRequired:"Por favor, inicia sesin para ver tus tareas.",details:"Detalles de la Tarea",information:"Informacin de la Tarea",actions:"Acciones",acceptTask:"Aceptar Tarea",startTask:"Iniciar Tarea",completeTask:"Completar Tarea",acceptCompletion:"Aceptar Finalizacin",acceptedByAdmin:"Aceptado por Administrador",noFurtherEdits:"No se permiten ms ediciones",loadingDetails:"Cargando detalles de la tarea...",errorLoading:"Error al Cargar la Tarea",goBack:"Volver",notFound:"Tarea No Encontrada",notFoundDescription:"La tarea solicitada no pudo ser encontrada.",back:"Atrs",notSet:"No establecido"},Bk={searchPlaceholder:"Buscar en todas las columnas...",showingEntries:"Mostrando {{start}} a {{end}} de {{total}} entradas",showingCount:"Mostrando {{count}} de {{total}} entradas",noData:"No Se Encontraron Datos",noResults:"No hay resultados que coincidan con tus criterios de bsqueda.",noDataAvailable:"No hay datos disponibles.",pageInfo:"Pgina {{current}} de {{total}}",showSize:"Mostrar {{size}}",loadingData:"Cargando datos...",failedToLoad:"Error al Cargar Datos"},Hk={id:"ID",title:"Ttulo",task:"Tarea",type:"Tipo",status:"Estado",description:"Descripcin",listing:"Propiedad",reservation:"Reserva",scheduled:"Programado",assignedTo:"Asignado A",assignedAt:"Asignado En",acceptedAt:"Aceptado En",completedAt:"Completado En",created:"Creado",na:"N/A",view:"Ver",accept:"Aceptar",start:"Iniciar",complete:"Completar",cancel:"Cancelar",edit:"Editar",save:"Guardar"},qk={unassigned:"Sin Asignar",assigned:"Asignada",accepted:"Aceptada",in_progress:"En Progreso",completed:"Completada",admin_accepted:"Aceptada por Administrador"},Wk={guest:"Husped",property:"Propiedad",checkIn:"Llegada",checkOut:"Salida",nights:"Noches",guests:"Huspedes",total:"Total",hostPayout:"Pago al Anfitrin"},Gk={checkingAccess:"Verificando acceso de administrador...",authenticationRequired:"Autenticacin Requerida",signInToAccess:"Por favor, inicia sesin para acceder a esta pgina.",adminAccessRequired:"Acceso de Administrador Requerido",noAdminPrivileges:"No tienes privilegios de administrador para acceder a esta pgina."},Kk={unassigned:"Sin Asignar",loading:"Cargando...",unknown:"Desconocido"},Qk={loading:"Cargando..."},Jk={history:"Historial de Auditora",entries:"entradas",loading:"Cargando historial de auditora...",noHistory:"No hay historial de auditora disponible para esta tarea.",by:"por",noDescription:"No hay descripcin disponible",fieldsChanged:"Campos modificados",valuesChanged:"Valores modificados",context:"Contexto",system:"Sistema",unknownUser:"Usuario Desconocido"},Yk={title:"Verificacin de Estado del Sistema",monitoring:"Monitoreando estado del sistema y conectividad",failed:"Verificacin de Estado Fall",loading:"Cargando estado de salud...",reloadPage:"Recargar Pgina",healthy:"Saludable",error:"Error",connected:"Conectado",configured:"Configurado"},Xk={allTodos:"Todas las Tareas",totalTodos:"Total de Tareas: {{count}}",loadingTodos:"Cargando tareas...",filterByStatus:"Filtrar por Estado:",all:"Todas",pending:"Pendientes",done:"Completadas",createGeneral:"Crear Tarea General",createNew:"Crear Nueva Tarea",adminAccessRequired:"Se requiere acceso de administrador para ver todas las tareas.",attachedTo:"Adjuntado A",unattached:"Sin Adjuntar",delete:"Eliminar",deleteConfirm:"Ests seguro de que quieres eliminar esta tarea?",creating:"Creando...",addNote:"Agregar Nota",adding:"Agregando...",noListingAssignment:"Sin asignacin de propiedad",description:"Descripcin",failedToLoad:"Error al cargar propiedades",addTodo:"Agregar Tarea",noTodosFound:"No se encontraron tareas.",createdLabel:"Creado: ",completedLabel:"Completado: ",attachedToLabel:"Adjuntado a: ",productsNeeded:"Productos necesarios:",markAsDone:"Marcar como completado",title:"Ttulo *",titlePlaceholder:"ej., Arreglar el aire acondicionado, Comprar suministros de limpieza",assignToListing:"Asignar a Propiedad (Opcional)",loadingListings:"Cargando propiedades...",products:"Productos (Opcional)",searchProductsPlaceholder:"Buscar productos para agregar...",selectedProducts:"Productos Seleccionados:",remove:"Quitar",detailsPlaceholder:"Detalles adicionales o notas...",cancel:"Cancelar"},Zk={title:"Propiedades",details:"Detalles de la Propiedad",totalListings:"Total de propiedades: {{count}}",loadingListings:"Cargando propiedades...",loadingDetails:"Cargando detalles de la propiedad...",address:"Direccin",basicInformation:"Informacin Bsica",dates:"Fechas",amenities:"Amenidades",listingTodos:"Tareas de la Propiedad",listingChat:"Chat de la Propiedad",notFound:"Propiedad no encontrada",notFoundWithId:'La propiedad con ID "{{id}}" no fue encontrada.',failedToLoad:"Error al cargar propiedad",listingId:"ID de Propiedad",airbnbId:"ID de Airbnb",propertyType:"Tipo de Propiedad",roomType:"Tipo de Habitacin",bedrooms:"Habitaciones",bathrooms:"Baos",maxGuests:"Mximo de Huspedes",created:"Creado",updated:"Actualizado"},eC={accessRequired:"Acceso Requerido"},tC={title:"Notas",unknownUser:"Usuario Desconocido",send:"Enviar",sending:"...",deleteNote:"Eliminar nota",deleteConfirm:"Ests seguro de que quieres eliminar esta nota?",loadingNotes:"Cargando notas...",noNotesYet:"An no hay notas. Comienza la conversacin!",attachedToLabel:"Adjuntado a: ",typePlaceholder:"Escribe una nota... (Presiona Enter para enviar, Shift+Enter para nueva lnea)",noteLabel:"Nota:",notePlaceholder:"Ingresa tu nota...",errorOccurred:"Ocurri un error"},nC={noAddress:"Sin direccin"},rC={collapseAudit:"Contraer historial de auditora",expandAudit:"Expandir historial de auditora",titleLabel:"Ttulo:",statusLabel:"Estado:",scheduledLabel:"Fecha Programada:",listingIdLabel:"ID de Propiedad:",assignedToLabel:"Asignado A:",startedAtLabel:"Iniciado En:",finishedAtLabel:"Finalizado En:",productHelper:"Asistente de Reposicin de Productos",taskTab:"Tarea",listingTab:"Propiedad"},sC={overallStatus:"Estado General:",authenticatedUser:"Usuario Autenticado:",database:"Base de Datos:",version:"Versin: ",supabaseApi:"API de Supabase:",environment:"Entorno:",lastChecked:"ltima verificacin: ",systemLabel:"Sistema",null:"nulo"},iC={english:"English",spanish:"Espaol"},aC={navigation:Dk,threads:Mk,auth:Uk,dashboard:zk,tasks:Vk,dataTable:Bk,columns:Hk,statuses:qk,reservations:Wk,admin:Gk,assignment:Kk,common:Qk,audit:Jk,healthCheck:Yk,todos:Xk,listings:Zk,cleaner:eC,notes:tC,forms:nC,taskDetail:rC,system:sC,language:iC},oC={en:{translation:Fk},es:{translation:aC}};ke.use(wp).use(KS).init({resources:oC,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"preferred-language",caches:["localStorage"]},supportedLngs:["en","es"],lng:"en",ns:["translation"],defaultNS:"translation"});function lC(){return d.jsx("div",{className:"app",children:d.jsx(ZS,{children:d.jsx(OS,{children:d.jsx(aw,{children:d.jsxs(Fy,{children:[d.jsx(qe,{path:"/auth/callback",element:d.jsx(Lx,{})}),d.jsx(qe,{path:"/",element:d.jsx(oo,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx($x,{})})]})})}),d.jsx(qe,{path:"/healthcheck",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(Px,{})})})]})})}),d.jsx(qe,{path:"/admin",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(lx,{})})})]})})}),d.jsx(qe,{path:"/admin/tasks",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(fx,{})})})]})})}),d.jsx(qe,{path:"/admin/todos",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(mx,{})})})]})})}),d.jsx(qe,{path:"/admin/threads",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx(_x,{})})]})})}),d.jsx(qe,{path:"/listings",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(xx,{})})})]})})}),d.jsx(qe,{path:"/cleaner/tasks",element:d.jsx(oo,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(kx,{})})})]})})}),d.jsx(qe,{path:"/tasks/:id",element:d.jsx(oo,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(Rx,{})})})]})})}),d.jsx(qe,{path:"/listing/:id",element:d.jsx(yn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(ht,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(Tx,{})})})]})})})]})})})})})}const Sp=document.getElementById("root");if(!Sp)throw new Error("Root element not found");wo.createRoot(Sp).render(d.jsx(lC,{}));
