(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var oh={exports:{}},ho={},ah={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),Fp=Symbol.for("react.portal"),Mp=Symbol.for("react.fragment"),Up=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),Vp=Symbol.for("react.provider"),Bp=Symbol.for("react.context"),Hp=Symbol.for("react.forward_ref"),qp=Symbol.for("react.suspense"),Wp=Symbol.for("react.memo"),Gp=Symbol.for("react.lazy"),rc=Symbol.iterator;function Kp(t){return t===null||typeof t!="object"?null:(t=rc&&t[rc]||t["@@iterator"],typeof t=="function"?t:null)}var lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uh=Object.assign,ch={};function Lr(t,e,n){this.props=t,this.context=e,this.refs=ch,this.updater=n||lh}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dh(){}dh.prototype=Lr.prototype;function Kl(t,e,n){this.props=t,this.context=e,this.refs=ch,this.updater=n||lh}var Ql=Kl.prototype=new dh;Ql.constructor=Kl;uh(Ql,Lr.prototype);Ql.isPureReactComponent=!0;var sc=Array.isArray,hh=Object.prototype.hasOwnProperty,Jl={current:null},fh={key:!0,ref:!0,__self:!0,__source:!0};function gh(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hh.call(e,r)&&!fh.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ds,type:t,key:i,ref:o,props:s,_owner:Jl.current}}function Qp(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function Jp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ic=/\/+/g;function Fo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Jp(""+t.key):e.toString(36)}function _i(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ds:case Fp:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fo(o,0):r,sc(s)?(n="",t!=null&&(n=t.replace(ic,"$&/")+"/"),_i(s,e,n,"",function(u){return u})):s!=null&&(Yl(s)&&(s=Qp(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ic,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sc(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Fo(i,a);o+=_i(i,e,n,l,s)}else if(l=Kp(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Fo(i,a++),o+=_i(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qs(t,e,n){if(t==null)return t;var r=[],s=0;return _i(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Yp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},xi={transition:null},Xp={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:xi,ReactCurrentOwner:Jl};function ph(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Qs,forEach:function(t,e,n){Qs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qs(t,function(){e++}),e},toArray:function(t){return Qs(t,function(e){return e})||[]},only:function(t){if(!Yl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};H.Component=Lr;H.Fragment=Mp;H.Profiler=zp;H.PureComponent=Kl;H.StrictMode=Up;H.Suspense=qp;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xp;H.act=ph;H.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uh({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Jl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hh.call(e,l)&&!fh.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ds,type:t.type,key:s,ref:i,props:r,_owner:o}};H.createContext=function(t){return t={$$typeof:Bp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vp,_context:t},t.Consumer=t};H.createElement=gh;H.createFactory=function(t){var e=gh.bind(null,t);return e.type=t,e};H.createRef=function(){return{current:null}};H.forwardRef=function(t){return{$$typeof:Hp,render:t}};H.isValidElement=Yl;H.lazy=function(t){return{$$typeof:Gp,_payload:{_status:-1,_result:t},_init:Yp}};H.memo=function(t,e){return{$$typeof:Wp,type:t,compare:e===void 0?null:e}};H.startTransition=function(t){var e=xi.transition;xi.transition={};try{t()}finally{xi.transition=e}};H.unstable_act=ph;H.useCallback=function(t,e){return Pe.current.useCallback(t,e)};H.useContext=function(t){return Pe.current.useContext(t)};H.useDebugValue=function(){};H.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};H.useEffect=function(t,e){return Pe.current.useEffect(t,e)};H.useId=function(){return Pe.current.useId()};H.useImperativeHandle=function(t,e,n){return Pe.current.useImperativeHandle(t,e,n)};H.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};H.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};H.useMemo=function(t,e){return Pe.current.useMemo(t,e)};H.useReducer=function(t,e,n){return Pe.current.useReducer(t,e,n)};H.useRef=function(t){return Pe.current.useRef(t)};H.useState=function(t){return Pe.current.useState(t)};H.useSyncExternalStore=function(t,e,n){return Pe.current.useSyncExternalStore(t,e,n)};H.useTransition=function(){return Pe.current.useTransition()};H.version="18.3.1";ah.exports=H;var S=ah.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=S,em=Symbol.for("react.element"),tm=Symbol.for("react.fragment"),nm=Object.prototype.hasOwnProperty,rm=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sm={key:!0,ref:!0,__self:!0,__source:!0};function mh(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nm.call(e,r)&&!sm.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:em,type:t,key:i,ref:o,props:s,_owner:rm.current}}ho.Fragment=tm;ho.jsx=mh;ho.jsxs=mh;oh.exports=ho;var c=oh.exports,Na={},vh={exports:{}},Ke={},yh={exports:{}},wh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,N){var L=b.length;b.push(N);e:for(;0<L;){var I=L-1>>>1,G=b[I];if(0<s(G,N))b[I]=N,b[L]=G,L=I;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var N=b[0],L=b.pop();if(L!==N){b[0]=L;e:for(var I=0,G=b.length,ze=G>>>1;I<ze;){var Ie=2*(I+1)-1,yt=b[Ie],Xe=Ie+1,Gn=b[Xe];if(0>s(yt,L))Xe<G&&0>s(Gn,yt)?(b[I]=Gn,b[Xe]=L,I=Xe):(b[I]=yt,b[Ie]=L,I=Ie);else if(Xe<G&&0>s(Gn,L))b[I]=Gn,b[Xe]=L,I=Xe;else break e}}return N}function s(b,N){var L=b.sortIndex-N.sortIndex;return L!==0?L:b.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,g=!1,p=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=b)r(u),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(u)}}function x(b){if(w=!1,y(b),!p)if(n(l)!==null)p=!0,ae(k);else{var N=n(u);N!==null&&A(x,N.startTime-b)}}function k(b,N){p=!1,w&&(w=!1,v(j),j=-1),g=!0;var L=f;try{for(y(N),h=n(l);h!==null&&(!(h.expirationTime>N)||b&&!z());){var I=h.callback;if(typeof I=="function"){h.callback=null,f=h.priorityLevel;var G=I(h.expirationTime<=N);N=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),y(N)}else r(l);h=n(l)}if(h!==null)var ze=!0;else{var Ie=n(u);Ie!==null&&A(x,Ie.startTime-N),ze=!1}return ze}finally{h=null,f=L,g=!1}}var C=!1,E=null,j=-1,P=5,T=-1;function z(){return!(t.unstable_now()-T<P)}function F(){if(E!==null){var b=t.unstable_now();T=b;var N=!0;try{N=E(!0,b)}finally{N?V():(C=!1,E=null)}}else C=!1}var V;if(typeof m=="function")V=function(){m(F)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ye=oe.port2;oe.port1.onmessage=F,V=function(){Ye.postMessage(null)}}else V=function(){_(F,0)};function ae(b){E=b,C||(C=!0,V())}function A(b,N){j=_(function(){b(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,ae(k))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var L=f;f=N;try{return b()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,N){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var L=f;f=b;try{return N()}finally{f=L}},t.unstable_scheduleCallback=function(b,N,L){var I=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,b){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=L+G,b={id:d++,callback:N,priorityLevel:b,startTime:L,expirationTime:G,sortIndex:-1},L>I?(b.sortIndex=L,e(u,b),n(l)===null&&b===n(u)&&(w?(v(j),j=-1):w=!0,A(x,L-I))):(b.sortIndex=G,e(l,b),p||g||(p=!0,ae(k))),b},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(b){var N=f;return function(){var L=f;f=N;try{return b.apply(this,arguments)}finally{f=L}}}})(wh);yh.exports=wh;var im=yh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=S,We=im;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sh=new Set,ms={};function Hn(t,e){Cr(t,e),Cr(t+"Capture",e)}function Cr(t,e){for(ms[t]=e,t=0;t<e.length;t++)Sh.add(e[t])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=Object.prototype.hasOwnProperty,am=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oc={},ac={};function lm(t){return Pa.call(ac,t)?!0:Pa.call(oc,t)?!1:am.test(t)?ac[t]=!0:(oc[t]=!0,!1)}function um(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cm(t,e,n,r){if(e===null||typeof e>"u"||um(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Le(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ye[t]=new Le(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ye[e]=new Le(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ye[t]=new Le(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ye[t]=new Le(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ye[t]=new Le(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ye[t]=new Le(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ye[t]=new Le(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ye[t]=new Le(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ye[t]=new Le(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xl=/[\-:]([a-z])/g;function Zl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xl,Zl);ye[e]=new Le(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xl,Zl);ye[e]=new Le(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xl,Zl);ye[e]=new Le(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ye[t]=new Le(t,1,!1,t.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ye[t]=new Le(t,1,!1,t.toLowerCase(),null,!0,!0)});function eu(t,e,n,r){var s=ye.hasOwnProperty(e)?ye[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cm(e,n,s,r)&&(n=null),r||s===null?lm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wt=om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Js=Symbol.for("react.element"),or=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),tu=Symbol.for("react.strict_mode"),La=Symbol.for("react.profiler"),_h=Symbol.for("react.provider"),xh=Symbol.for("react.context"),nu=Symbol.for("react.forward_ref"),$a=Symbol.for("react.suspense"),Ia=Symbol.for("react.suspense_list"),ru=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),kh=Symbol.for("react.offscreen"),lc=Symbol.iterator;function Mr(t){return t===null||typeof t!="object"?null:(t=lc&&t[lc]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,Mo;function Yr(t){if(Mo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mo=e&&e[1]||""}return`
`+Mo+t}var Uo=!1;function zo(t,e){if(!t||Uo)return"";Uo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yr(t):""}function dm(t){switch(t.tag){case 5:return Yr(t.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 2:case 15:return t=zo(t.type,!1),t;case 11:return t=zo(t.type.render,!1),t;case 1:return t=zo(t.type,!0),t;default:return""}}function Aa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ar:return"Fragment";case or:return"Portal";case La:return"Profiler";case tu:return"StrictMode";case $a:return"Suspense";case Ia:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xh:return(t.displayName||"Context")+".Consumer";case _h:return(t._context.displayName||"Context")+".Provider";case nu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ru:return e=t.displayName||null,e!==null?e:Aa(t.type)||"Memo";case Zt:e=t._payload,t=t._init;try{return Aa(t(e))}catch{}}return null}function hm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Aa(e);case 8:return e===tu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ch(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fm(t){var e=Ch(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ys(t){t._valueTracker||(t._valueTracker=fm(t))}function Eh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ch(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oa(t,e){var n=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jh(t,e){e=e.checked,e!=null&&eu(t,"checked",e,!1)}function Da(t,e){jh(t,e);var n=vn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fa(t,e.type,vn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fa(t,e,n){(e!=="number"||Ai(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xr=Array.isArray;function yr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ma(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Xr(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vn(n)}}function bh(t,e){var n=vn(e.value),r=vn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ua(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xs,Th=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gm=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(t){gm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ns[e]=ns[t]})});function Nh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ns.hasOwnProperty(t)&&ns[t]?(""+e).trim():e+"px"}function Ph(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Nh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pm=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(t,e){if(e){if(pm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Va(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function su(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ha=null,wr=null,Sr=null;function fc(t){if(t=Us(t)){if(typeof Ha!="function")throw Error(R(280));var e=t.stateNode;e&&(e=vo(e),Ha(t.stateNode,t.type,e))}}function Lh(t){wr?Sr?Sr.push(t):Sr=[t]:wr=t}function $h(){if(wr){var t=wr,e=Sr;if(Sr=wr=null,fc(t),e)for(t=0;t<e.length;t++)fc(e[t])}}function Ih(t,e){return t(e)}function Ah(){}var Vo=!1;function Oh(t,e,n){if(Vo)return t(e,n);Vo=!0;try{return Ih(t,e,n)}finally{Vo=!1,(wr!==null||Sr!==null)&&(Ah(),$h())}}function ys(t,e){var n=t.stateNode;if(n===null)return null;var r=vo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var qa=!1;if(zt)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){qa=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{qa=!1}function mm(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var rs=!1,Oi=null,Di=!1,Wa=null,vm={onError:function(t){rs=!0,Oi=t}};function ym(t,e,n,r,s,i,o,a,l){rs=!1,Oi=null,mm.apply(vm,arguments)}function wm(t,e,n,r,s,i,o,a,l){if(ym.apply(this,arguments),rs){if(rs){var u=Oi;rs=!1,Oi=null}else throw Error(R(198));Di||(Di=!0,Wa=u)}}function qn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gc(t){if(qn(t)!==t)throw Error(R(188))}function Sm(t){var e=t.alternate;if(!e){if(e=qn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return gc(s),t;if(i===r)return gc(s),e;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function Fh(t){return t=Sm(t),t!==null?Mh(t):null}function Mh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mh(t);if(e!==null)return e;t=t.sibling}return null}var Uh=We.unstable_scheduleCallback,pc=We.unstable_cancelCallback,_m=We.unstable_shouldYield,xm=We.unstable_requestPaint,le=We.unstable_now,km=We.unstable_getCurrentPriorityLevel,iu=We.unstable_ImmediatePriority,zh=We.unstable_UserBlockingPriority,Fi=We.unstable_NormalPriority,Cm=We.unstable_LowPriority,Vh=We.unstable_IdlePriority,fo=null,jt=null;function Em(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(fo,t,void 0,(t.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:Rm,jm=Math.log,bm=Math.LN2;function Rm(t){return t>>>=0,t===0?32:31-(jm(t)/bm|0)|0}var Zs=64,ei=4194304;function Zr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Zr(a):(i&=o,i!==0&&(r=Zr(i)))}else o=n&~s,o!==0?r=Zr(o):i!==0&&(r=Zr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gt(e),s=1<<n,r|=t[n],e&=~s;return r}function Tm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Tm(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Ga(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bh(){var t=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),t}function Bo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gt(e),t[e]=n}function Pm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ou(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var K=0;function Hh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qh,au,Wh,Gh,Kh,Ka=!1,ti=[],un=null,cn=null,dn=null,ws=new Map,Ss=new Map,tn=[],Lm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mc(t,e){switch(t){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":ws.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(e.pointerId)}}function zr(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Us(e),e!==null&&au(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $m(t,e,n,r,s){switch(e){case"focusin":return un=zr(un,t,e,n,r,s),!0;case"dragenter":return cn=zr(cn,t,e,n,r,s),!0;case"mouseover":return dn=zr(dn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ws.set(i,zr(ws.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ss.set(i,zr(Ss.get(i)||null,t,e,n,r,s)),!0}return!1}function Qh(t){var e=$n(t.target);if(e!==null){var n=qn(e);if(n!==null){if(e=n.tag,e===13){if(e=Dh(n),e!==null){t.blockedOn=e,Kh(t.priority,function(){Wh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ki(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ba=r,n.target.dispatchEvent(r),Ba=null}else return e=Us(n),e!==null&&au(e),t.blockedOn=n,!1;e.shift()}return!0}function vc(t,e,n){ki(t)&&n.delete(e)}function Im(){Ka=!1,un!==null&&ki(un)&&(un=null),cn!==null&&ki(cn)&&(cn=null),dn!==null&&ki(dn)&&(dn=null),ws.forEach(vc),Ss.forEach(vc)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ka||(Ka=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,Im)))}function _s(t){function e(s){return Vr(s,t)}if(0<ti.length){Vr(ti[0],t);for(var n=1;n<ti.length;n++){var r=ti[n];r.blockedOn===t&&(r.blockedOn=null)}}for(un!==null&&Vr(un,t),cn!==null&&Vr(cn,t),dn!==null&&Vr(dn,t),ws.forEach(e),Ss.forEach(e),n=0;n<tn.length;n++)r=tn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tn.length&&(n=tn[0],n.blockedOn===null);)Qh(n),n.blockedOn===null&&tn.shift()}var _r=Wt.ReactCurrentBatchConfig,Ui=!0;function Am(t,e,n,r){var s=K,i=_r.transition;_r.transition=null;try{K=1,lu(t,e,n,r)}finally{K=s,_r.transition=i}}function Om(t,e,n,r){var s=K,i=_r.transition;_r.transition=null;try{K=4,lu(t,e,n,r)}finally{K=s,_r.transition=i}}function lu(t,e,n,r){if(Ui){var s=Qa(t,e,n,r);if(s===null)Zo(t,e,r,zi,n),mc(t,r);else if($m(s,t,e,n,r))r.stopPropagation();else if(mc(t,r),e&4&&-1<Lm.indexOf(t)){for(;s!==null;){var i=Us(s);if(i!==null&&qh(i),i=Qa(t,e,n,r),i===null&&Zo(t,e,r,zi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zo(t,e,r,null,n)}}var zi=null;function Qa(t,e,n,r){if(zi=null,t=su(r),t=$n(t),t!==null)if(e=qn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zi=t,null}function Jh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(km()){case iu:return 1;case zh:return 4;case Fi:case Cm:return 16;case Vh:return 536870912;default:return 16}default:return 16}}var sn=null,uu=null,Ci=null;function Yh(){if(Ci)return Ci;var t,e=uu,n=e.length,r,s="value"in sn?sn.value:sn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ci=s.slice(t,1<r?1-r:void 0)}function Ei(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ni(){return!0}function yc(){return!1}function Qe(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ni:yc,this.isPropagationStopped=yc,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),e}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Qe($r),Ms=se({},$r,{view:0,detail:0}),Dm=Qe(Ms),Ho,qo,Br,go=se({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Br&&(Br&&t.type==="mousemove"?(Ho=t.screenX-Br.screenX,qo=t.screenY-Br.screenY):qo=Ho=0,Br=t),Ho)},movementY:function(t){return"movementY"in t?t.movementY:qo}}),wc=Qe(go),Fm=se({},go,{dataTransfer:0}),Mm=Qe(Fm),Um=se({},Ms,{relatedTarget:0}),Wo=Qe(Um),zm=se({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),Vm=Qe(zm),Bm=se({},$r,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hm=Qe(Bm),qm=se({},$r,{data:0}),Sc=Qe(qm),Wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Km={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Km[t])?!!e[t]:!1}function du(){return Qm}var Jm=se({},Ms,{key:function(t){if(t.key){var e=Wm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:du,charCode:function(t){return t.type==="keypress"?Ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ym=Qe(Jm),Xm=se({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_c=Qe(Xm),Zm=se({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:du}),ev=Qe(Zm),tv=se({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),nv=Qe(tv),rv=se({},go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sv=Qe(rv),iv=[9,13,27,32],hu=zt&&"CompositionEvent"in window,ss=null;zt&&"documentMode"in document&&(ss=document.documentMode);var ov=zt&&"TextEvent"in window&&!ss,Xh=zt&&(!hu||ss&&8<ss&&11>=ss),xc=" ",kc=!1;function Zh(t,e){switch(t){case"keyup":return iv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ef(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lr=!1;function av(t,e){switch(t){case"compositionend":return ef(e);case"keypress":return e.which!==32?null:(kc=!0,xc);case"textInput":return t=e.data,t===xc&&kc?null:t;default:return null}}function lv(t,e){if(lr)return t==="compositionend"||!hu&&Zh(t,e)?(t=Yh(),Ci=uu=sn=null,lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xh&&e.locale!=="ko"?null:e.data;default:return null}}var uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uv[t.type]:e==="textarea"}function tf(t,e,n,r){Lh(r),e=Vi(e,"onChange"),0<e.length&&(n=new cu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var is=null,xs=null;function cv(t){ff(t,0)}function po(t){var e=dr(t);if(Eh(e))return t}function dv(t,e){if(t==="change")return e}var nf=!1;if(zt){var Go;if(zt){var Ko="oninput"in document;if(!Ko){var Ec=document.createElement("div");Ec.setAttribute("oninput","return;"),Ko=typeof Ec.oninput=="function"}Go=Ko}else Go=!1;nf=Go&&(!document.documentMode||9<document.documentMode)}function jc(){is&&(is.detachEvent("onpropertychange",rf),xs=is=null)}function rf(t){if(t.propertyName==="value"&&po(xs)){var e=[];tf(e,xs,t,su(t)),Oh(cv,e)}}function hv(t,e,n){t==="focusin"?(jc(),is=e,xs=n,is.attachEvent("onpropertychange",rf)):t==="focusout"&&jc()}function fv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return po(xs)}function gv(t,e){if(t==="click")return po(e)}function pv(t,e){if(t==="input"||t==="change")return po(e)}function mv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:mv;function ks(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pa.call(e,s)||!vt(t[s],e[s]))return!1}return!0}function bc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rc(t,e){var n=bc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bc(n)}}function sf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function of(){for(var t=window,e=Ai();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ai(t.document)}return e}function fu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vv(t){var e=of(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sf(n.ownerDocument.documentElement,n)){if(r!==null&&fu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Rc(n,i);var o=Rc(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yv=zt&&"documentMode"in document&&11>=document.documentMode,ur=null,Ja=null,os=null,Ya=!1;function Tc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ya||ur==null||ur!==Ai(r)||(r=ur,"selectionStart"in r&&fu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),os&&ks(os,r)||(os=r,r=Vi(Ja,"onSelect"),0<r.length&&(e=new cu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ur)))}function ri(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cr={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionend:ri("Transition","TransitionEnd")},Qo={},af={};zt&&(af=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function mo(t){if(Qo[t])return Qo[t];if(!cr[t])return t;var e=cr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in af)return Qo[t]=e[n];return t}var lf=mo("animationend"),uf=mo("animationiteration"),cf=mo("animationstart"),df=mo("transitionend"),hf=new Map,Nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(t,e){hf.set(t,e),Hn(e,[t])}for(var Jo=0;Jo<Nc.length;Jo++){var Yo=Nc[Jo],wv=Yo.toLowerCase(),Sv=Yo[0].toUpperCase()+Yo.slice(1);Sn(wv,"on"+Sv)}Sn(lf,"onAnimationEnd");Sn(uf,"onAnimationIteration");Sn(cf,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(df,"onTransitionEnd");Cr("onMouseEnter",["mouseout","mouseover"]);Cr("onMouseLeave",["mouseout","mouseover"]);Cr("onPointerEnter",["pointerout","pointerover"]);Cr("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_v=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Pc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wm(r,e,void 0,t),t.currentTarget=null}function ff(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Pc(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Pc(s,a,u),i=l}}}if(Di)throw t=Wa,Di=!1,Wa=null,t}function X(t,e){var n=e[nl];n===void 0&&(n=e[nl]=new Set);var r=t+"__bubble";n.has(r)||(gf(e,t,2,!1),n.add(r))}function Xo(t,e,n){var r=0;e&&(r|=4),gf(n,t,r,e)}var si="_reactListening"+Math.random().toString(36).slice(2);function Cs(t){if(!t[si]){t[si]=!0,Sh.forEach(function(n){n!=="selectionchange"&&(_v.has(n)||Xo(n,!1,t),Xo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[si]||(e[si]=!0,Xo("selectionchange",!1,e))}}function gf(t,e,n,r){switch(Jh(e)){case 1:var s=Am;break;case 4:s=Om;break;default:s=lu}n=s.bind(null,e,n,t),s=void 0,!qa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zo(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=$n(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Oh(function(){var u=i,d=su(n),h=[];e:{var f=hf.get(t);if(f!==void 0){var g=cu,p=t;switch(t){case"keypress":if(Ei(n)===0)break e;case"keydown":case"keyup":g=Ym;break;case"focusin":p="focus",g=Wo;break;case"focusout":p="blur",g=Wo;break;case"beforeblur":case"afterblur":g=Wo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Mm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ev;break;case lf:case uf:case cf:g=Vm;break;case df:g=nv;break;case"scroll":g=Dm;break;case"wheel":g=sv;break;case"copy":case"cut":case"paste":g=Hm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_c}var w=(e&4)!==0,_=!w&&t==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var m=u,y;m!==null;){y=m;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,v!==null&&(x=ys(m,v),x!=null&&w.push(Es(m,x,y)))),_)break;m=m.return}0<w.length&&(f=new g(f,p,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ba&&(p=n.relatedTarget||n.fromElement)&&($n(p)||p[Vt]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=u,p=p?$n(p):null,p!==null&&(_=qn(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=u),g!==p)){if(w=wc,x="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=_c,x="onPointerLeave",v="onPointerEnter",m="pointer"),_=g==null?f:dr(g),y=p==null?f:dr(p),f=new w(x,m+"leave",g,n,d),f.target=_,f.relatedTarget=y,x=null,$n(d)===u&&(w=new w(v,m+"enter",p,n,d),w.target=y,w.relatedTarget=_,x=w),_=x,g&&p)t:{for(w=g,v=p,m=0,y=w;y;y=Kn(y))m++;for(y=0,x=v;x;x=Kn(x))y++;for(;0<m-y;)w=Kn(w),m--;for(;0<y-m;)v=Kn(v),y--;for(;m--;){if(w===v||v!==null&&w===v.alternate)break t;w=Kn(w),v=Kn(v)}w=null}else w=null;g!==null&&Lc(h,f,g,w,!1),p!==null&&_!==null&&Lc(h,_,p,w,!0)}}e:{if(f=u?dr(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=dv;else if(Cc(f))if(nf)k=pv;else{k=fv;var C=hv}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=gv);if(k&&(k=k(t,u))){tf(h,k,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Fa(f,"number",f.value)}switch(C=u?dr(u):window,t){case"focusin":(Cc(C)||C.contentEditable==="true")&&(ur=C,Ja=u,os=null);break;case"focusout":os=Ja=ur=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,Tc(h,n,d);break;case"selectionchange":if(yv)break;case"keydown":case"keyup":Tc(h,n,d)}var E;if(hu)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else lr?Zh(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Xh&&n.locale!=="ko"&&(lr||j!=="onCompositionStart"?j==="onCompositionEnd"&&lr&&(E=Yh()):(sn=d,uu="value"in sn?sn.value:sn.textContent,lr=!0)),C=Vi(u,j),0<C.length&&(j=new Sc(j,t,null,n,d),h.push({event:j,listeners:C}),E?j.data=E:(E=ef(n),E!==null&&(j.data=E)))),(E=ov?av(t,n):lv(t,n))&&(u=Vi(u,"onBeforeInput"),0<u.length&&(d=new Sc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}ff(h,e)})}function Es(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vi(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ys(t,n),i!=null&&r.unshift(Es(t,i,s)),i=ys(t,e),i!=null&&r.push(Es(t,i,s))),t=t.return}return r}function Kn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lc(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=ys(n,i),l!=null&&o.unshift(Es(n,l,a))):s||(l=ys(n,i),l!=null&&o.push(Es(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xv=/\r\n?/g,kv=/\u0000|\uFFFD/g;function $c(t){return(typeof t=="string"?t:""+t).replace(xv,`
`).replace(kv,"")}function ii(t,e,n){if(e=$c(e),$c(t)!==e&&n)throw Error(R(425))}function Bi(){}var Xa=null,Za=null;function el(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tl=typeof setTimeout=="function"?setTimeout:void 0,Cv=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,Ev=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic<"u"?function(t){return Ic.resolve(null).then(t).catch(jv)}:tl;function jv(t){setTimeout(function(){throw t})}function ea(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_s(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_s(e)}function hn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ac(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Ir,js="__reactProps$"+Ir,Vt="__reactContainer$"+Ir,nl="__reactEvents$"+Ir,bv="__reactListeners$"+Ir,Rv="__reactHandles$"+Ir;function $n(t){var e=t[Ct];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vt]||n[Ct]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ac(t);t!==null;){if(n=t[Ct])return n;t=Ac(t)}return e}t=n,n=t.parentNode}return null}function Us(t){return t=t[Ct]||t[Vt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function vo(t){return t[js]||null}var rl=[],hr=-1;function _n(t){return{current:t}}function Z(t){0>hr||(t.current=rl[hr],rl[hr]=null,hr--)}function J(t,e){hr++,rl[hr]=t.current,t.current=e}var yn={},je=_n(yn),Fe=_n(!1),Mn=yn;function Er(t,e){var n=t.type.contextTypes;if(!n)return yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Me(t){return t=t.childContextTypes,t!=null}function Hi(){Z(Fe),Z(je)}function Oc(t,e,n){if(je.current!==yn)throw Error(R(168));J(je,e),J(Fe,n)}function pf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(R(108,hm(t)||"Unknown",s));return se({},n,r)}function qi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yn,Mn=je.current,J(je,t),J(Fe,Fe.current),!0}function Dc(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=pf(t,e,Mn),r.__reactInternalMemoizedMergedChildContext=t,Z(Fe),Z(je),J(je,t)):Z(Fe),J(Fe,n)}var Ot=null,yo=!1,ta=!1;function mf(t){Ot===null?Ot=[t]:Ot.push(t)}function Tv(t){yo=!0,mf(t)}function xn(){if(!ta&&Ot!==null){ta=!0;var t=0,e=K;try{var n=Ot;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ot=null,yo=!1}catch(s){throw Ot!==null&&(Ot=Ot.slice(t+1)),Uh(iu,xn),s}finally{K=e,ta=!1}}return null}var fr=[],gr=0,Wi=null,Gi=0,et=[],tt=0,Un=null,Dt=1,Ft="";function Tn(t,e){fr[gr++]=Gi,fr[gr++]=Wi,Wi=t,Gi=e}function vf(t,e,n){et[tt++]=Dt,et[tt++]=Ft,et[tt++]=Un,Un=t;var r=Dt;t=Ft;var s=32-gt(r)-1;r&=~(1<<s),n+=1;var i=32-gt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dt=1<<32-gt(e)+s|n<<s|r,Ft=i+t}else Dt=1<<i|n<<s|r,Ft=t}function gu(t){t.return!==null&&(Tn(t,1),vf(t,1,0))}function pu(t){for(;t===Wi;)Wi=fr[--gr],fr[gr]=null,Gi=fr[--gr],fr[gr]=null;for(;t===Un;)Un=et[--tt],et[tt]=null,Ft=et[--tt],et[tt]=null,Dt=et[--tt],et[tt]=null}var qe=null,He=null,ee=!1,ft=null;function yf(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qe=t,He=hn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qe=t,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Un!==null?{id:Dt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qe=t,He=null,!0):!1;default:return!1}}function sl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function il(t){if(ee){var e=He;if(e){var n=e;if(!Fc(t,e)){if(sl(t))throw Error(R(418));e=hn(n.nextSibling);var r=qe;e&&Fc(t,e)?yf(r,n):(t.flags=t.flags&-4097|2,ee=!1,qe=t)}}else{if(sl(t))throw Error(R(418));t.flags=t.flags&-4097|2,ee=!1,qe=t}}}function Mc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qe=t}function oi(t){if(t!==qe)return!1;if(!ee)return Mc(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!el(t.type,t.memoizedProps)),e&&(e=He)){if(sl(t))throw wf(),Error(R(418));for(;e;)yf(t,e),e=hn(e.nextSibling)}if(Mc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){He=hn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}He=null}}else He=qe?hn(t.stateNode.nextSibling):null;return!0}function wf(){for(var t=He;t;)t=hn(t.nextSibling)}function jr(){He=qe=null,ee=!1}function mu(t){ft===null?ft=[t]:ft.push(t)}var Nv=Wt.ReactCurrentBatchConfig;function Hr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function ai(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uc(t){var e=t._init;return e(t._payload)}function Sf(t){function e(v,m){if(t){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=mn(v,m),v.index=0,v.sibling=null,v}function i(v,m,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,m,y,x){return m===null||m.tag!==6?(m=la(y,v.mode,x),m.return=v,m):(m=s(m,y),m.return=v,m)}function l(v,m,y,x){var k=y.type;return k===ar?d(v,m,y.props.children,x,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zt&&Uc(k)===m.type)?(x=s(m,y.props),x.ref=Hr(v,m,y),x.return=v,x):(x=Li(y.type,y.key,y.props,null,v.mode,x),x.ref=Hr(v,m,y),x.return=v,x)}function u(v,m,y,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=ua(y,v.mode,x),m.return=v,m):(m=s(m,y.children||[]),m.return=v,m)}function d(v,m,y,x,k){return m===null||m.tag!==7?(m=Dn(y,v.mode,x,k),m.return=v,m):(m=s(m,y),m.return=v,m)}function h(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=la(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Js:return y=Li(m.type,m.key,m.props,null,v.mode,y),y.ref=Hr(v,null,m),y.return=v,y;case or:return m=ua(m,v.mode,y),m.return=v,m;case Zt:var x=m._init;return h(v,x(m._payload),y)}if(Xr(m)||Mr(m))return m=Dn(m,v.mode,y,null),m.return=v,m;ai(v,m)}return null}function f(v,m,y,x){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:a(v,m,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Js:return y.key===k?l(v,m,y,x):null;case or:return y.key===k?u(v,m,y,x):null;case Zt:return k=y._init,f(v,m,k(y._payload),x)}if(Xr(y)||Mr(y))return k!==null?null:d(v,m,y,x,null);ai(v,y)}return null}function g(v,m,y,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return v=v.get(y)||null,a(m,v,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Js:return v=v.get(x.key===null?y:x.key)||null,l(m,v,x,k);case or:return v=v.get(x.key===null?y:x.key)||null,u(m,v,x,k);case Zt:var C=x._init;return g(v,m,y,C(x._payload),k)}if(Xr(x)||Mr(x))return v=v.get(y)||null,d(m,v,x,k,null);ai(m,x)}return null}function p(v,m,y,x){for(var k=null,C=null,E=m,j=m=0,P=null;E!==null&&j<y.length;j++){E.index>j?(P=E,E=null):P=E.sibling;var T=f(v,E,y[j],x);if(T===null){E===null&&(E=P);break}t&&E&&T.alternate===null&&e(v,E),m=i(T,m,j),C===null?k=T:C.sibling=T,C=T,E=P}if(j===y.length)return n(v,E),ee&&Tn(v,j),k;if(E===null){for(;j<y.length;j++)E=h(v,y[j],x),E!==null&&(m=i(E,m,j),C===null?k=E:C.sibling=E,C=E);return ee&&Tn(v,j),k}for(E=r(v,E);j<y.length;j++)P=g(E,v,j,y[j],x),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?j:P.key),m=i(P,m,j),C===null?k=P:C.sibling=P,C=P);return t&&E.forEach(function(z){return e(v,z)}),ee&&Tn(v,j),k}function w(v,m,y,x){var k=Mr(y);if(typeof k!="function")throw Error(R(150));if(y=k.call(y),y==null)throw Error(R(151));for(var C=k=null,E=m,j=m=0,P=null,T=y.next();E!==null&&!T.done;j++,T=y.next()){E.index>j?(P=E,E=null):P=E.sibling;var z=f(v,E,T.value,x);if(z===null){E===null&&(E=P);break}t&&E&&z.alternate===null&&e(v,E),m=i(z,m,j),C===null?k=z:C.sibling=z,C=z,E=P}if(T.done)return n(v,E),ee&&Tn(v,j),k;if(E===null){for(;!T.done;j++,T=y.next())T=h(v,T.value,x),T!==null&&(m=i(T,m,j),C===null?k=T:C.sibling=T,C=T);return ee&&Tn(v,j),k}for(E=r(v,E);!T.done;j++,T=y.next())T=g(E,v,j,T.value,x),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?j:T.key),m=i(T,m,j),C===null?k=T:C.sibling=T,C=T);return t&&E.forEach(function(F){return e(v,F)}),ee&&Tn(v,j),k}function _(v,m,y,x){if(typeof y=="object"&&y!==null&&y.type===ar&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Js:e:{for(var k=y.key,C=m;C!==null;){if(C.key===k){if(k=y.type,k===ar){if(C.tag===7){n(v,C.sibling),m=s(C,y.props.children),m.return=v,v=m;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zt&&Uc(k)===C.type){n(v,C.sibling),m=s(C,y.props),m.ref=Hr(v,C,y),m.return=v,v=m;break e}n(v,C);break}else e(v,C);C=C.sibling}y.type===ar?(m=Dn(y.props.children,v.mode,x,y.key),m.return=v,v=m):(x=Li(y.type,y.key,y.props,null,v.mode,x),x.ref=Hr(v,m,y),x.return=v,v=x)}return o(v);case or:e:{for(C=y.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=s(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=ua(y,v.mode,x),m.return=v,v=m}return o(v);case Zt:return C=y._init,_(v,m,C(y._payload),x)}if(Xr(y))return p(v,m,y,x);if(Mr(y))return w(v,m,y,x);ai(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=s(m,y),m.return=v,v=m):(n(v,m),m=la(y,v.mode,x),m.return=v,v=m),o(v)):n(v,m)}return _}var br=Sf(!0),_f=Sf(!1),Ki=_n(null),Qi=null,pr=null,vu=null;function yu(){vu=pr=Qi=null}function wu(t){var e=Ki.current;Z(Ki),t._currentValue=e}function ol(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xr(t,e){Qi=t,vu=pr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(De=!0),t.firstContext=null)}function it(t){var e=t._currentValue;if(vu!==t)if(t={context:t,memoizedValue:e,next:null},pr===null){if(Qi===null)throw Error(R(308));pr=t,Qi.dependencies={lanes:0,firstContext:t}}else pr=pr.next=t;return e}var In=null;function Su(t){In===null?In=[t]:In.push(t)}function xf(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Su(e)):(n.next=s.next,s.next=n),e.interleaved=n,Bt(t,r)}function Bt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var en=!1;function _u(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Bt(t,n)}return s=r.interleaved,s===null?(e.next=e,Su(r)):(e.next=s.next,s.next=e),r.interleaved=e,Bt(t,n)}function ji(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}function zc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ji(t,e,n,r){var s=t.updateQueue;en=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,w=a;switch(f=e,g=n,w.tag){case 1:if(p=w.payload,typeof p=="function"){h=p.call(g,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=w.payload,f=typeof p=="function"?p.call(g,h,f):p,f==null)break e;h=se({},h,f);break e;case 2:en=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vn|=o,t.lanes=o,t.memoizedState=h}}function Vc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var zs={},bt=_n(zs),bs=_n(zs),Rs=_n(zs);function An(t){if(t===zs)throw Error(R(174));return t}function xu(t,e){switch(J(Rs,e),J(bs,t),J(bt,zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ua(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ua(e,t)}Z(bt),J(bt,e)}function Rr(){Z(bt),Z(bs),Z(Rs)}function Cf(t){An(Rs.current);var e=An(bt.current),n=Ua(e,t.type);e!==n&&(J(bs,t),J(bt,n))}function ku(t){bs.current===t&&(Z(bt),Z(bs))}var te=_n(0);function Yi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function Cu(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var bi=Wt.ReactCurrentDispatcher,ra=Wt.ReactCurrentBatchConfig,zn=0,ne=null,he=null,ge=null,Xi=!1,as=!1,Ts=0,Pv=0;function xe(){throw Error(R(321))}function Eu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vt(t[n],e[n]))return!1;return!0}function ju(t,e,n,r,s,i){if(zn=i,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bi.current=t===null||t.memoizedState===null?Av:Ov,t=n(r,s),as){i=0;do{if(as=!1,Ts=0,25<=i)throw Error(R(301));i+=1,ge=he=null,e.updateQueue=null,bi.current=Dv,t=n(r,s)}while(as)}if(bi.current=Zi,e=he!==null&&he.next!==null,zn=0,ge=he=ne=null,Xi=!1,e)throw Error(R(300));return t}function bu(){var t=Ts!==0;return Ts=0,t}function xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?ne.memoizedState=ge=t:ge=ge.next=t,ge}function ot(){if(he===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=he.next;var e=ge===null?ne.memoizedState:ge.next;if(e!==null)ge=e,he=t;else{if(t===null)throw Error(R(310));he=t,t={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},ge===null?ne.memoizedState=ge=t:ge=ge.next=t}return ge}function Ns(t,e){return typeof e=="function"?e(t):e}function sa(t){var e=ot(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=he,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((zn&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ne.lanes|=d,Vn|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,vt(r,e.memoizedState)||(De=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ne.lanes|=i,Vn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ia(t){var e=ot(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vt(i,e.memoizedState)||(De=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ef(){}function jf(t,e){var n=ne,r=ot(),s=e(),i=!vt(r.memoizedState,s);if(i&&(r.memoizedState=s,De=!0),r=r.queue,Ru(Tf.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ge!==null&&ge.memoizedState.tag&1){if(n.flags|=2048,Ps(9,Rf.bind(null,n,r,s,e),void 0,null),pe===null)throw Error(R(349));zn&30||bf(n,e,s)}return s}function bf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rf(t,e,n,r){e.value=n,e.getSnapshot=r,Nf(e)&&Pf(t)}function Tf(t,e,n){return n(function(){Nf(e)&&Pf(t)})}function Nf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vt(t,n)}catch{return!0}}function Pf(t){var e=Bt(t,1);e!==null&&pt(e,t,1,-1)}function Bc(t){var e=xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},e.queue=t,t=t.dispatch=Iv.bind(null,ne,t),[e.memoizedState,t]}function Ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lf(){return ot().memoizedState}function Ri(t,e,n,r){var s=xt();ne.flags|=t,s.memoizedState=Ps(1|e,n,void 0,r===void 0?null:r)}function wo(t,e,n,r){var s=ot();r=r===void 0?null:r;var i=void 0;if(he!==null){var o=he.memoizedState;if(i=o.destroy,r!==null&&Eu(r,o.deps)){s.memoizedState=Ps(e,n,i,r);return}}ne.flags|=t,s.memoizedState=Ps(1|e,n,i,r)}function Hc(t,e){return Ri(8390656,8,t,e)}function Ru(t,e){return wo(2048,8,t,e)}function $f(t,e){return wo(4,2,t,e)}function If(t,e){return wo(4,4,t,e)}function Af(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Of(t,e,n){return n=n!=null?n.concat([t]):null,wo(4,4,Af.bind(null,e,t),n)}function Tu(){}function Df(t,e){var n=ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ff(t,e){var n=ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Eu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mf(t,e,n){return zn&21?(vt(n,e)||(n=Bh(),ne.lanes|=n,Vn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,De=!0),t.memoizedState=n)}function Lv(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=ra.transition;ra.transition={};try{t(!1),e()}finally{K=n,ra.transition=r}}function Uf(){return ot().memoizedState}function $v(t,e,n){var r=pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zf(t))Vf(e,n);else if(n=xf(t,e,n,r),n!==null){var s=Ne();pt(n,t,r,s),Bf(n,e,r)}}function Iv(t,e,n){var r=pn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zf(t))Vf(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vt(a,o)){var l=e.interleaved;l===null?(s.next=s,Su(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=xf(t,e,s,r),n!==null&&(s=Ne(),pt(n,t,r,s),Bf(n,e,r))}}function zf(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function Vf(t,e){as=Xi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}var Zi={readContext:it,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},Av={readContext:it,useCallback:function(t,e){return xt().memoizedState=[t,e===void 0?null:e],t},useContext:it,useEffect:Hc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ri(4194308,4,Af.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ri(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ri(4,2,t,e)},useMemo:function(t,e){var n=xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$v.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=xt();return t={current:t},e.memoizedState=t},useState:Bc,useDebugValue:Tu,useDeferredValue:function(t){return xt().memoizedState=t},useTransition:function(){var t=Bc(!1),e=t[0];return t=Lv.bind(null,t[1]),xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,s=xt();if(ee){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),pe===null)throw Error(R(349));zn&30||bf(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Hc(Tf.bind(null,r,i,t),[t]),r.flags|=2048,Ps(9,Rf.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xt(),e=pe.identifierPrefix;if(ee){var n=Ft,r=Dt;n=(r&~(1<<32-gt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ts++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ov={readContext:it,useCallback:Df,useContext:it,useEffect:Ru,useImperativeHandle:Of,useInsertionEffect:$f,useLayoutEffect:If,useMemo:Ff,useReducer:sa,useRef:Lf,useState:function(){return sa(Ns)},useDebugValue:Tu,useDeferredValue:function(t){var e=ot();return Mf(e,he.memoizedState,t)},useTransition:function(){var t=sa(Ns)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Uf,unstable_isNewReconciler:!1},Dv={readContext:it,useCallback:Df,useContext:it,useEffect:Ru,useImperativeHandle:Of,useInsertionEffect:$f,useLayoutEffect:If,useMemo:Ff,useReducer:ia,useRef:Lf,useState:function(){return ia(Ns)},useDebugValue:Tu,useDeferredValue:function(t){var e=ot();return he===null?e.memoizedState=t:Mf(e,he.memoizedState,t)},useTransition:function(){var t=ia(Ns)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Ef,useSyncExternalStore:jf,useId:Uf,unstable_isNewReconciler:!1};function ct(t,e){if(t&&t.defaultProps){e=se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function al(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var So={isMounted:function(t){return(t=t._reactInternals)?qn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),s=pn(t),i=Mt(r,s);i.payload=e,n!=null&&(i.callback=n),e=fn(t,i,s),e!==null&&(pt(e,t,s,r),ji(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),s=pn(t),i=Mt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=fn(t,i,s),e!==null&&(pt(e,t,s,r),ji(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=pn(t),s=Mt(n,r);s.tag=2,e!=null&&(s.callback=e),e=fn(t,s,r),e!==null&&(pt(e,t,r,n),ji(e,t,r))}};function qc(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ks(n,r)||!ks(s,i):!0}function Hf(t,e,n){var r=!1,s=yn,i=e.contextType;return typeof i=="object"&&i!==null?i=it(i):(s=Me(e)?Mn:je.current,r=e.contextTypes,i=(r=r!=null)?Er(t,s):yn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=So,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&So.enqueueReplaceState(e,e.state,null)}function ll(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_u(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=it(i):(i=Me(e)?Mn:je.current,s.context=Er(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(al(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&So.enqueueReplaceState(s,s.state,null),Ji(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Tr(t,e){try{var n="",r=e;do n+=dm(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function oa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ul(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function qf(t,e,n){n=Mt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){to||(to=!0,wl=r),ul(t,e)},n}function Wf(t,e,n){n=Mt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ul(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ul(t,e),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Fv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Xv.bind(null,t,e,n),e.then(t,t))}function Kc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qc(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mt(-1,1),e.tag=2,fn(n,e,1))),n.lanes|=1),t)}var Mv=Wt.ReactCurrentOwner,De=!1;function Te(t,e,n,r){e.child=t===null?_f(e,null,n,r):br(e,t.child,n,r)}function Jc(t,e,n,r,s){n=n.render;var i=e.ref;return xr(e,s),r=ju(t,e,n,r,i,s),n=bu(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ht(t,e,s)):(ee&&n&&gu(e),e.flags|=1,Te(t,e,r,s),e.child)}function Yc(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Du(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Gf(t,e,i,r,s)):(t=Li(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ks,n(o,r)&&t.ref===e.ref)return Ht(t,e,s)}return e.flags|=1,t=mn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Gf(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ks(i,r)&&t.ref===e.ref)if(De=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(De=!0);else return e.lanes=t.lanes,Ht(t,e,s)}return cl(t,e,n,r,s)}function Kf(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(vr,Be),Be|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(vr,Be),Be|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,J(vr,Be),Be|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,J(vr,Be),Be|=r;return Te(t,e,s,n),e.child}function Qf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cl(t,e,n,r,s){var i=Me(n)?Mn:je.current;return i=Er(e,i),xr(e,s),n=ju(t,e,n,r,i,s),r=bu(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ht(t,e,s)):(ee&&r&&gu(e),e.flags|=1,Te(t,e,n,s),e.child)}function Xc(t,e,n,r,s){if(Me(n)){var i=!0;qi(e)}else i=!1;if(xr(e,s),e.stateNode===null)Ti(t,e),Hf(e,n,r),ll(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=it(u):(u=Me(n)?Mn:je.current,u=Er(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Wc(e,o,r,u),en=!1;var f=e.memoizedState;o.state=f,Ji(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Fe.current||en?(typeof d=="function"&&(al(e,n,d,r),l=e.memoizedState),(a=en||qc(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kf(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ct(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=it(l):(l=Me(n)?Mn:je.current,l=Er(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Wc(e,o,r,l),en=!1,f=e.memoizedState,o.state=f,Ji(e,r,o,s);var p=e.memoizedState;a!==h||f!==p||Fe.current||en?(typeof g=="function"&&(al(e,n,g,r),p=e.memoizedState),(u=en||qc(e,n,u,r,f,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return dl(t,e,n,r,i,s)}function dl(t,e,n,r,s,i){Qf(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Dc(e,n,!1),Ht(t,e,i);r=e.stateNode,Mv.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=br(e,t.child,null,i),e.child=br(e,null,a,i)):Te(t,e,a,i),e.memoizedState=r.state,s&&Dc(e,n,!0),e.child}function Jf(t){var e=t.stateNode;e.pendingContext?Oc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oc(t,e.context,!1),xu(t,e.containerInfo)}function Zc(t,e,n,r,s){return jr(),mu(s),e.flags|=256,Te(t,e,n,r),e.child}var hl={dehydrated:null,treeContext:null,retryLane:0};function fl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yf(t,e,n){var r=e.pendingProps,s=te.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),J(te,s&1),t===null)return il(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ko(o,r,0,null),t=Dn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fl(n),e.memoizedState=hl,t):Nu(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Uv(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=mn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=mn(a,i):(i=Dn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hl,r}return i=t.child,t=i.sibling,r=mn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nu(t,e){return e=ko({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function li(t,e,n,r){return r!==null&&mu(r),br(e,t.child,null,n),t=Nu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Uv(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=oa(Error(R(422))),li(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ko({mode:"visible",children:r.children},s,0,null),i=Dn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&br(e,t.child,null,o),e.child.memoizedState=fl(o),e.memoizedState=hl,i);if(!(e.mode&1))return li(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(R(419)),r=oa(i,r,void 0),li(t,e,o,r)}if(a=(o&t.childLanes)!==0,De||a){if(r=pe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bt(t,s),pt(r,t,s,-1))}return Ou(),r=oa(Error(R(421))),li(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Zv.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,He=hn(s.nextSibling),qe=e,ee=!0,ft=null,t!==null&&(et[tt++]=Dt,et[tt++]=Ft,et[tt++]=Un,Dt=t.id,Ft=t.overflow,Un=e),e=Nu(e,r.children),e.flags|=4096,e)}function ed(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ol(t.return,e,n)}function aa(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xf(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Te(t,e,r.children,n),r=te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ed(t,n,e);else if(t.tag===19)ed(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(J(te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Yi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),aa(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Yi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}aa(e,!0,n,null,i);break;case"together":aa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ti(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zv(t,e,n){switch(e.tag){case 3:Jf(e),jr();break;case 5:Cf(e);break;case 1:Me(e.type)&&qi(e);break;case 4:xu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;J(Ki,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(J(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?Yf(t,e,n):(J(te,te.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);J(te,te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xf(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(te,te.current),r)break;return null;case 22:case 23:return e.lanes=0,Kf(t,e,n)}return Ht(t,e,n)}var Zf,gl,eg,tg;Zf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gl=function(){};eg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,An(bt.current);var i=null;switch(n){case"input":s=Oa(t,s),r=Oa(t,r),i=[];break;case"select":s=se({},s,{value:void 0}),r=se({},r,{value:void 0}),i=[];break;case"textarea":s=Ma(t,s),r=Ma(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bi)}za(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ms.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ms.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&X("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};tg=function(t,e,n,r){n!==r&&(e.flags|=4)};function qr(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Vv(t,e,n){var r=e.pendingProps;switch(pu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return Me(e.type)&&Hi(),ke(e),null;case 3:return r=e.stateNode,Rr(),Z(Fe),Z(je),Cu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ft!==null&&(xl(ft),ft=null))),gl(t,e),ke(e),null;case 5:ku(e);var s=An(Rs.current);if(n=e.type,t!==null&&e.stateNode!=null)eg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return ke(e),null}if(t=An(bt.current),oi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ct]=e,r[js]=i,t=(e.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(s=0;s<es.length;s++)X(es[s],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":uc(r,i),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},X("invalid",r);break;case"textarea":dc(r,i),X("invalid",r)}za(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ii(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ii(r.textContent,a,t),s=["children",""+a]):ms.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&X("scroll",r)}switch(n){case"input":Ys(r),cc(r,i,!0);break;case"textarea":Ys(r),hc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bi)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ct]=e,t[js]=r,Zf(t,e,!1,!1),e.stateNode=t;e:{switch(o=Va(n,r),n){case"dialog":X("cancel",t),X("close",t),s=r;break;case"iframe":case"object":case"embed":X("load",t),s=r;break;case"video":case"audio":for(s=0;s<es.length;s++)X(es[s],t);s=r;break;case"source":X("error",t),s=r;break;case"img":case"image":case"link":X("error",t),X("load",t),s=r;break;case"details":X("toggle",t),s=r;break;case"input":uc(t,r),s=Oa(t,r),X("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=se({},r,{value:void 0}),X("invalid",t);break;case"textarea":dc(t,r),s=Ma(t,r),X("invalid",t);break;default:s=r}za(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ph(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Th(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vs(t,l):typeof l=="number"&&vs(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ms.hasOwnProperty(i)?l!=null&&i==="onScroll"&&X("scroll",t):l!=null&&eu(t,i,l,o))}switch(n){case"input":Ys(t),cc(t,r,!1);break;case"textarea":Ys(t),hc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?yr(t,!!r.multiple,i,!1):r.defaultValue!=null&&yr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)tg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=An(Rs.current),An(bt.current),oi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ct]=e,(i=r.nodeValue!==n)&&(t=qe,t!==null))switch(t.tag){case 3:ii(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ii(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=e,e.stateNode=r}return ke(e),null;case 13:if(Z(te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&He!==null&&e.mode&1&&!(e.flags&128))wf(),jr(),e.flags|=98560,i=!1;else if(i=oi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Ct]=e}else jr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),i=!1}else ft!==null&&(xl(ft),ft=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?fe===0&&(fe=3):Ou())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return Rr(),gl(t,e),t===null&&Cs(e.stateNode.containerInfo),ke(e),null;case 10:return wu(e.type._context),ke(e),null;case 17:return Me(e.type)&&Hi(),ke(e),null;case 19:if(Z(te),i=e.memoizedState,i===null)return ke(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qr(i,!1);else{if(fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yi(t),o!==null){for(e.flags|=128,qr(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(te,te.current&1|2),e.child}t=t.sibling}i.tail!==null&&le()>Nr&&(e.flags|=128,r=!0,qr(i,!1),e.lanes=4194304)}else{if(!r)if(t=Yi(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ee)return ke(e),null}else 2*le()-i.renderingStartTime>Nr&&n!==1073741824&&(e.flags|=128,r=!0,qr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,n=te.current,J(te,r?n&1|2:n&1),e):(ke(e),null);case 22:case 23:return Au(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Be&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Bv(t,e){switch(pu(e),e.tag){case 1:return Me(e.type)&&Hi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rr(),Z(Fe),Z(je),Cu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ku(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));jr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return Rr(),null;case 10:return wu(e.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var ui=!1,Ee=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,$=null;function mr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ie(t,e,r)}else n.current=null}function pl(t,e,n){try{n()}catch(r){ie(t,e,r)}}var td=!1;function qv(t,e){if(Xa=Ui,t=of(),fu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Za={focusedElem:t,selectionRange:n},Ui=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var w=p.memoizedProps,_=p.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:ct(e.type,w),_);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(x){ie(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return p=td,td=!1,p}function ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pl(e,n,i)}s=s.next}while(s!==r)}}function _o(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ml(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ng(t){var e=t.alternate;e!==null&&(t.alternate=null,ng(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ct],delete e[js],delete e[nl],delete e[bv],delete e[Rv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rg(t){return t.tag===5||t.tag===3||t.tag===4}function nd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bi));else if(r!==4&&(t=t.child,t!==null))for(vl(t,e,n),t=t.sibling;t!==null;)vl(t,e,n),t=t.sibling}function yl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yl(t,e,n),t=t.sibling;t!==null;)yl(t,e,n),t=t.sibling}var me=null,dt=!1;function Qt(t,e,n){for(n=n.child;n!==null;)sg(t,e,n),n=n.sibling}function sg(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(fo,n)}catch{}switch(n.tag){case 5:Ee||mr(n,e);case 6:var r=me,s=dt;me=null,Qt(t,e,n),me=r,dt=s,me!==null&&(dt?(t=me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):me.removeChild(n.stateNode));break;case 18:me!==null&&(dt?(t=me,n=n.stateNode,t.nodeType===8?ea(t.parentNode,n):t.nodeType===1&&ea(t,n),_s(t)):ea(me,n.stateNode));break;case 4:r=me,s=dt,me=n.stateNode.containerInfo,dt=!0,Qt(t,e,n),me=r,dt=s;break;case 0:case 11:case 14:case 15:if(!Ee&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pl(n,e,o),s=s.next}while(s!==r)}Qt(t,e,n);break;case 1:if(!Ee&&(mr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ie(n,e,a)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(Ee=(r=Ee)||n.memoizedState!==null,Qt(t,e,n),Ee=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function rd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hv),e.forEach(function(r){var s=ey.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:me=a.stateNode,dt=!1;break e;case 3:me=a.stateNode.containerInfo,dt=!0;break e;case 4:me=a.stateNode.containerInfo,dt=!0;break e}a=a.return}if(me===null)throw Error(R(160));sg(i,o,s),me=null,dt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ie(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ig(e,t),e=e.sibling}function ig(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(lt(e,t),St(t),r&4){try{ls(3,t,t.return),_o(3,t)}catch(w){ie(t,t.return,w)}try{ls(5,t,t.return)}catch(w){ie(t,t.return,w)}}break;case 1:lt(e,t),St(t),r&512&&n!==null&&mr(n,n.return);break;case 5:if(lt(e,t),St(t),r&512&&n!==null&&mr(n,n.return),t.flags&32){var s=t.stateNode;try{vs(s,"")}catch(w){ie(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&jh(s,i),Va(a,o);var u=Va(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Ph(s,h):d==="dangerouslySetInnerHTML"?Th(s,h):d==="children"?vs(s,h):eu(s,d,h,u)}switch(a){case"input":Da(s,i);break;case"textarea":bh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?yr(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?yr(s,!!i.multiple,i.defaultValue,!0):yr(s,!!i.multiple,i.multiple?[]:"",!1))}s[js]=i}catch(w){ie(t,t.return,w)}}break;case 6:if(lt(e,t),St(t),r&4){if(t.stateNode===null)throw Error(R(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ie(t,t.return,w)}}break;case 3:if(lt(e,t),St(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_s(e.containerInfo)}catch(w){ie(t,t.return,w)}break;case 4:lt(e,t),St(t);break;case 13:lt(e,t),St(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($u=le())),r&4&&rd(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ee=(u=Ee)||d,lt(e,t),Ee=u):lt(e,t),St(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(f=$,g=f.child,f.tag){case 0:case 11:case 14:case 15:ls(4,f,f.return);break;case 1:mr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(w){ie(r,n,w)}}break;case 5:mr(f,f.return);break;case 22:if(f.memoizedState!==null){id(h);continue}}g!==null?(g.return=f,$=g):id(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nh("display",o))}catch(w){ie(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ie(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:lt(e,t),St(t),r&4&&rd(t);break;case 21:break;default:lt(e,t),St(t)}}function St(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rg(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vs(s,""),r.flags&=-33);var i=nd(t);yl(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nd(t);vl(t,a,o);break;default:throw Error(R(161))}}catch(l){ie(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wv(t,e,n){$=t,og(t)}function og(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ui;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ee;a=ui;var u=Ee;if(ui=o,(Ee=l)&&!u)for($=s;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?od(s):l!==null?(l.return=o,$=l):od(s);for(;i!==null;)$=i,og(i),i=i.sibling;$=s,ui=a,Ee=u}sd(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):sd(t)}}function sd(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ee||_o(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ee)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ct(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Vc(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vc(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_s(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ee||e.flags&512&&ml(e)}catch(f){ie(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function id(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function od(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_o(4,e)}catch(l){ie(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ie(e,s,l)}}var i=e.return;try{ml(e)}catch(l){ie(e,i,l)}break;case 5:var o=e.return;try{ml(e)}catch(l){ie(e,o,l)}}}catch(l){ie(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var Gv=Math.ceil,eo=Wt.ReactCurrentDispatcher,Pu=Wt.ReactCurrentOwner,rt=Wt.ReactCurrentBatchConfig,W=0,pe=null,ue=null,ve=0,Be=0,vr=_n(0),fe=0,Ls=null,Vn=0,xo=0,Lu=0,us=null,Ae=null,$u=0,Nr=1/0,$t=null,to=!1,wl=null,gn=null,ci=!1,on=null,no=0,cs=0,Sl=null,Ni=-1,Pi=0;function Ne(){return W&6?le():Ni!==-1?Ni:Ni=le()}function pn(t){return t.mode&1?W&2&&ve!==0?ve&-ve:Nv.transition!==null?(Pi===0&&(Pi=Bh()),Pi):(t=K,t!==0||(t=window.event,t=t===void 0?16:Jh(t.type)),t):1}function pt(t,e,n,r){if(50<cs)throw cs=0,Sl=null,Error(R(185));Fs(t,n,r),(!(W&2)||t!==pe)&&(t===pe&&(!(W&2)&&(xo|=n),fe===4&&nn(t,ve)),Ue(t,r),n===1&&W===0&&!(e.mode&1)&&(Nr=le()+500,yo&&xn()))}function Ue(t,e){var n=t.callbackNode;Nm(t,e);var r=Mi(t,t===pe?ve:0);if(r===0)n!==null&&pc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pc(n),e===1)t.tag===0?Tv(ad.bind(null,t)):mf(ad.bind(null,t)),Ev(function(){!(W&6)&&xn()}),n=null;else{switch(Hh(r)){case 1:n=iu;break;case 4:n=zh;break;case 16:n=Fi;break;case 536870912:n=Vh;break;default:n=Fi}n=gg(n,ag.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ag(t,e){if(Ni=-1,Pi=0,W&6)throw Error(R(327));var n=t.callbackNode;if(kr()&&t.callbackNode!==n)return null;var r=Mi(t,t===pe?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ro(t,r);else{e=r;var s=W;W|=2;var i=ug();(pe!==t||ve!==e)&&($t=null,Nr=le()+500,On(t,e));do try{Jv();break}catch(a){lg(t,a)}while(!0);yu(),eo.current=i,W=s,ue!==null?e=0:(pe=null,ve=0,e=fe)}if(e!==0){if(e===2&&(s=Ga(t),s!==0&&(r=s,e=_l(t,s))),e===1)throw n=Ls,On(t,0),nn(t,r),Ue(t,le()),n;if(e===6)nn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Kv(s)&&(e=ro(t,r),e===2&&(i=Ga(t),i!==0&&(r=i,e=_l(t,i))),e===1))throw n=Ls,On(t,0),nn(t,r),Ue(t,le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:Nn(t,Ae,$t);break;case 3:if(nn(t,r),(r&130023424)===r&&(e=$u+500-le(),10<e)){if(Mi(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tl(Nn.bind(null,t,Ae,$t),e);break}Nn(t,Ae,$t);break;case 4:if(nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gv(r/1960))-r,10<r){t.timeoutHandle=tl(Nn.bind(null,t,Ae,$t),r);break}Nn(t,Ae,$t);break;case 5:Nn(t,Ae,$t);break;default:throw Error(R(329))}}}return Ue(t,le()),t.callbackNode===n?ag.bind(null,t):null}function _l(t,e){var n=us;return t.current.memoizedState.isDehydrated&&(On(t,e).flags|=256),t=ro(t,e),t!==2&&(e=Ae,Ae=n,e!==null&&xl(e)),t}function xl(t){Ae===null?Ae=t:Ae.push.apply(Ae,t)}function Kv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nn(t,e){for(e&=~Lu,e&=~xo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gt(e),r=1<<n;t[n]=-1,e&=~r}}function ad(t){if(W&6)throw Error(R(327));kr();var e=Mi(t,0);if(!(e&1))return Ue(t,le()),null;var n=ro(t,e);if(t.tag!==0&&n===2){var r=Ga(t);r!==0&&(e=r,n=_l(t,r))}if(n===1)throw n=Ls,On(t,0),nn(t,e),Ue(t,le()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nn(t,Ae,$t),Ue(t,le()),null}function Iu(t,e){var n=W;W|=1;try{return t(e)}finally{W=n,W===0&&(Nr=le()+500,yo&&xn())}}function Bn(t){on!==null&&on.tag===0&&!(W&6)&&kr();var e=W;W|=1;var n=rt.transition,r=K;try{if(rt.transition=null,K=1,t)return t()}finally{K=r,rt.transition=n,W=e,!(W&6)&&xn()}}function Au(){Be=vr.current,Z(vr)}function On(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Cv(n)),ue!==null)for(n=ue.return;n!==null;){var r=n;switch(pu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hi();break;case 3:Rr(),Z(Fe),Z(je),Cu();break;case 5:ku(r);break;case 4:Rr();break;case 13:Z(te);break;case 19:Z(te);break;case 10:wu(r.type._context);break;case 22:case 23:Au()}n=n.return}if(pe=t,ue=t=mn(t.current,null),ve=Be=e,fe=0,Ls=null,Lu=xo=Vn=0,Ae=us=null,In!==null){for(e=0;e<In.length;e++)if(n=In[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}In=null}return t}function lg(t,e){do{var n=ue;try{if(yu(),bi.current=Zi,Xi){for(var r=ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xi=!1}if(zn=0,ge=he=ne=null,as=!1,Ts=0,Pu.current=null,n===null||n.return===null){fe=1,Ls=e,ue=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=ve,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Kc(o);if(g!==null){g.flags&=-257,Qc(g,o,a,i,e),g.mode&1&&Gc(i,u,e),e=g,l=u;var p=e.updateQueue;if(p===null){var w=new Set;w.add(l),e.updateQueue=w}else p.add(l);break e}else{if(!(e&1)){Gc(i,u,e),Ou();break e}l=Error(R(426))}}else if(ee&&a.mode&1){var _=Kc(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Qc(_,o,a,i,e),mu(Tr(l,a));break e}}i=l=Tr(l,a),fe!==4&&(fe=2),us===null?us=[i]:us.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=qf(i,l,e);zc(i,v);break e;case 1:a=l;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(gn===null||!gn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Wf(i,a,e);zc(i,x);break e}}i=i.return}while(i!==null)}dg(n)}catch(k){e=k,ue===n&&n!==null&&(ue=n=n.return);continue}break}while(!0)}function ug(){var t=eo.current;return eo.current=Zi,t===null?Zi:t}function Ou(){(fe===0||fe===3||fe===2)&&(fe=4),pe===null||!(Vn&268435455)&&!(xo&268435455)||nn(pe,ve)}function ro(t,e){var n=W;W|=2;var r=ug();(pe!==t||ve!==e)&&($t=null,On(t,e));do try{Qv();break}catch(s){lg(t,s)}while(!0);if(yu(),W=n,eo.current=r,ue!==null)throw Error(R(261));return pe=null,ve=0,fe}function Qv(){for(;ue!==null;)cg(ue)}function Jv(){for(;ue!==null&&!_m();)cg(ue)}function cg(t){var e=fg(t.alternate,t,Be);t.memoizedProps=t.pendingProps,e===null?dg(t):ue=e,Pu.current=null}function dg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Bv(n,e),n!==null){n.flags&=32767,ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fe=6,ue=null;return}}else if(n=Vv(n,e,Be),n!==null){ue=n;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);fe===0&&(fe=5)}function Nn(t,e,n){var r=K,s=rt.transition;try{rt.transition=null,K=1,Yv(t,e,n,r)}finally{rt.transition=s,K=r}return null}function Yv(t,e,n,r){do kr();while(on!==null);if(W&6)throw Error(R(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Pm(t,i),t===pe&&(ue=pe=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ci||(ci=!0,gg(Fi,function(){return kr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rt.transition,rt.transition=null;var o=K;K=1;var a=W;W|=4,Pu.current=null,qv(t,n),ig(n,t),vv(Za),Ui=!!Xa,Za=Xa=null,t.current=n,Wv(n),xm(),W=a,K=o,rt.transition=i}else t.current=n;if(ci&&(ci=!1,on=t,no=s),i=t.pendingLanes,i===0&&(gn=null),Em(n.stateNode),Ue(t,le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(to)throw to=!1,t=wl,wl=null,t;return no&1&&t.tag!==0&&kr(),i=t.pendingLanes,i&1?t===Sl?cs++:(cs=0,Sl=t):cs=0,xn(),null}function kr(){if(on!==null){var t=Hh(no),e=rt.transition,n=K;try{if(rt.transition=null,K=16>t?16:t,on===null)var r=!1;else{if(t=on,on=null,no=0,W&6)throw Error(R(331));var s=W;for(W|=4,$=t.current;$!==null;){var i=$,o=i.child;if($.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:ls(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var f=d.sibling,g=d.return;if(ng(d),d===u){$=null;break}if(f!==null){f.return=g,$=f;break}$=g}}}var p=i.alternate;if(p!==null){var w=p.child;if(w!==null){p.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}$=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$=o;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ls(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,$=v;break e}$=i.return}}var m=t.current;for($=m;$!==null;){o=$;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,$=y;else e:for(o=m;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_o(9,a)}}catch(k){ie(a,a.return,k)}if(a===o){$=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,$=x;break e}$=a.return}}if(W=s,xn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(fo,t)}catch{}r=!0}return r}finally{K=n,rt.transition=e}}return!1}function ld(t,e,n){e=Tr(n,e),e=qf(t,e,1),t=fn(t,e,1),e=Ne(),t!==null&&(Fs(t,1,e),Ue(t,e))}function ie(t,e,n){if(t.tag===3)ld(t,t,n);else for(;e!==null;){if(e.tag===3){ld(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){t=Tr(n,t),t=Wf(e,t,1),e=fn(e,t,1),t=Ne(),e!==null&&(Fs(e,1,t),Ue(e,t));break}}e=e.return}}function Xv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,pe===t&&(ve&n)===n&&(fe===4||fe===3&&(ve&130023424)===ve&&500>le()-$u?On(t,0):Lu|=n),Ue(t,e)}function hg(t,e){e===0&&(t.mode&1?(e=ei,ei<<=1,!(ei&130023424)&&(ei=4194304)):e=1);var n=Ne();t=Bt(t,e),t!==null&&(Fs(t,e,n),Ue(t,n))}function Zv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hg(t,n)}function ey(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),hg(t,n)}var fg;fg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fe.current)De=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return De=!1,zv(t,e,n);De=!!(t.flags&131072)}else De=!1,ee&&e.flags&1048576&&vf(e,Gi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ti(t,e),t=e.pendingProps;var s=Er(e,je.current);xr(e,n),s=ju(null,e,r,t,s,n);var i=bu();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Me(r)?(i=!0,qi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_u(e),s.updater=So,e.stateNode=s,s._reactInternals=e,ll(e,r,t,n),e=dl(null,e,r,!0,i,n)):(e.tag=0,ee&&i&&gu(e),Te(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ti(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ny(r),t=ct(r,t),s){case 0:e=cl(null,e,r,t,n);break e;case 1:e=Xc(null,e,r,t,n);break e;case 11:e=Jc(null,e,r,t,n);break e;case 14:e=Yc(null,e,r,ct(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ct(r,s),cl(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ct(r,s),Xc(t,e,r,s,n);case 3:e:{if(Jf(e),t===null)throw Error(R(387));r=e.pendingProps,i=e.memoizedState,s=i.element,kf(t,e),Ji(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Tr(Error(R(423)),e),e=Zc(t,e,r,n,s);break e}else if(r!==s){s=Tr(Error(R(424)),e),e=Zc(t,e,r,n,s);break e}else for(He=hn(e.stateNode.containerInfo.firstChild),qe=e,ee=!0,ft=null,n=_f(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jr(),r===s){e=Ht(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return Cf(e),t===null&&il(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,el(r,s)?o=null:i!==null&&el(r,i)&&(e.flags|=32),Qf(t,e),Te(t,e,o,n),e.child;case 6:return t===null&&il(e),null;case 13:return Yf(t,e,n);case 4:return xu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=br(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ct(r,s),Jc(t,e,r,s,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,J(Ki,r._currentValue),r._currentValue=o,i!==null)if(vt(i.value,o)){if(i.children===s.children&&!Fe.current){e=Ht(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Mt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ol(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ol(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Te(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xr(e,n),s=it(s),r=r(s),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,s=ct(r,e.pendingProps),s=ct(r.type,s),Yc(t,e,r,s,n);case 15:return Gf(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ct(r,s),Ti(t,e),e.tag=1,Me(r)?(t=!0,qi(e)):t=!1,xr(e,n),Hf(e,r,s),ll(e,r,s,n),dl(null,e,r,!0,t,n);case 19:return Xf(t,e,n);case 22:return Kf(t,e,n)}throw Error(R(156,e.tag))};function gg(t,e){return Uh(t,e)}function ty(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new ty(t,e,n,r)}function Du(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ny(t){if(typeof t=="function")return Du(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nu)return 11;if(t===ru)return 14}return 2}function mn(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Li(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Du(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ar:return Dn(n.children,s,i,e);case tu:o=8,s|=8;break;case La:return t=nt(12,n,e,s|2),t.elementType=La,t.lanes=i,t;case $a:return t=nt(13,n,e,s),t.elementType=$a,t.lanes=i,t;case Ia:return t=nt(19,n,e,s),t.elementType=Ia,t.lanes=i,t;case kh:return ko(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _h:o=10;break e;case xh:o=9;break e;case nu:o=11;break e;case ru:o=14;break e;case Zt:o=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=nt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Dn(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function ko(t,e,n,r){return t=nt(22,t,r,e),t.elementType=kh,t.lanes=n,t.stateNode={isHidden:!1},t}function la(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function ua(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ry(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bo(0),this.expirationTimes=Bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fu(t,e,n,r,s,i,o,a,l){return t=new ry(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_u(i),t}function sy(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pg(t){if(!t)return yn;t=t._reactInternals;e:{if(qn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Me(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Me(n))return pf(t,n,e)}return e}function mg(t,e,n,r,s,i,o,a,l){return t=Fu(n,r,!0,t,s,i,o,a,l),t.context=pg(null),n=t.current,r=Ne(),s=pn(n),i=Mt(r,s),i.callback=e??null,fn(n,i,s),t.current.lanes=s,Fs(t,s,r),Ue(t,r),t}function Co(t,e,n,r){var s=e.current,i=Ne(),o=pn(s);return n=pg(n),e.context===null?e.context=n:e.pendingContext=n,e=Mt(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fn(s,e,o),t!==null&&(pt(t,s,o,i),ji(t,s,o)),o}function so(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ud(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mu(t,e){ud(t,e),(t=t.alternate)&&ud(t,e)}function iy(){return null}var vg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uu(t){this._internalRoot=t}Eo.prototype.render=Uu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Co(t,e,null,null)};Eo.prototype.unmount=Uu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bn(function(){Co(null,t,null,null)}),e[Vt]=null}};function Eo(t){this._internalRoot=t}Eo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tn.length&&e!==0&&e<tn[n].priority;n++);tn.splice(n,0,t),n===0&&Qh(t)}};function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cd(){}function oy(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=so(o);i.call(u)}}var o=mg(e,r,t,0,null,!1,!1,"",cd);return t._reactRootContainer=o,t[Vt]=o.current,Cs(t.nodeType===8?t.parentNode:t),Bn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=so(l);a.call(u)}}var l=Fu(t,0,!1,null,null,!1,!1,"",cd);return t._reactRootContainer=l,t[Vt]=l.current,Cs(t.nodeType===8?t.parentNode:t),Bn(function(){Co(e,l,n,r)}),l}function bo(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=so(o);a.call(l)}}Co(e,o,t,s)}else o=oy(n,e,t,s,r);return so(o)}qh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zr(e.pendingLanes);n!==0&&(ou(e,n|1),Ue(e,le()),!(W&6)&&(Nr=le()+500,xn()))}break;case 13:Bn(function(){var r=Bt(t,1);if(r!==null){var s=Ne();pt(r,t,1,s)}}),Mu(t,1)}};au=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var n=Ne();pt(e,t,134217728,n)}Mu(t,134217728)}};Wh=function(t){if(t.tag===13){var e=pn(t),n=Bt(t,e);if(n!==null){var r=Ne();pt(n,t,e,r)}Mu(t,e)}};Gh=function(){return K};Kh=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};Ha=function(t,e,n){switch(e){case"input":if(Da(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vo(r);if(!s)throw Error(R(90));Eh(r),Da(r,s)}}}break;case"textarea":bh(t,n);break;case"select":e=n.value,e!=null&&yr(t,!!n.multiple,e,!1)}};Ih=Iu;Ah=Bn;var ay={usingClientEntryPoint:!1,Events:[Us,dr,vo,Lh,$h,Iu]},Wr={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ly={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Fh(t),t===null?null:t.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||iy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{fo=di.inject(ly),jt=di}catch{}}Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ay;Ke.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zu(e))throw Error(R(200));return sy(t,e,null,n)};Ke.createRoot=function(t,e){if(!zu(t))throw Error(R(299));var n=!1,r="",s=vg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fu(t,1,!1,null,null,n,!1,r,s),t[Vt]=e.current,Cs(t.nodeType===8?t.parentNode:t),new Uu(e)};Ke.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Fh(e),t=t===null?null:t.stateNode,t};Ke.flushSync=function(t){return Bn(t)};Ke.hydrate=function(t,e,n){if(!jo(e))throw Error(R(200));return bo(null,t,e,!0,n)};Ke.hydrateRoot=function(t,e,n){if(!zu(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mg(e,null,t,1,n??null,s,!1,i,o),t[Vt]=e.current,Cs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eo(e)};Ke.render=function(t,e,n){if(!jo(e))throw Error(R(200));return bo(null,t,e,!1,n)};Ke.unmountComponentAtNode=function(t){if(!jo(t))throw Error(R(40));return t._reactRootContainer?(Bn(function(){bo(null,null,t,!1,function(){t._reactRootContainer=null,t[Vt]=null})}),!0):!1};Ke.unstable_batchedUpdates=Iu;Ke.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jo(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return bo(t,e,n,!1,r)};Ke.version="18.3.1-next-f1338f8080-20240426";function yg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yg)}catch(t){console.error(t)}}yg(),vh.exports=Ke;var uy=vh.exports,dd=uy;Na.createRoot=dd.createRoot,Na.hydrateRoot=dd.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hd="popstate";function cy(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return kl("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$s(s)}return hy(e,n,null,t)}function re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dy(){return Math.random().toString(36).substring(2,10)}function fd(t,e){return{usr:t.state,key:t.key,idx:e}}function kl(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ar(e):e,state:n,key:e&&e.key||r||dy()}}function $s({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ar(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function hy(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let _=d(),v=_==null?null:_-u;u=_,l&&l({action:a,location:w.location,delta:v})}function f(_,v){a="PUSH";let m=kl(w.location,_,v);u=d()+1;let y=fd(m,u),x=w.createHref(m);try{o.pushState(y,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}i&&l&&l({action:a,location:w.location,delta:1})}function g(_,v){a="REPLACE";let m=kl(w.location,_,v);u=d();let y=fd(m,u),x=w.createHref(m);o.replaceState(y,"",x),i&&l&&l({action:a,location:w.location,delta:0})}function p(_){return fy(_)}let w={get action(){return a},get location(){return t(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(hd,h),l=_,()=>{s.removeEventListener(hd,h),l=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let v=p(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(_){return o.go(_)}};return w}function fy(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),re(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:$s(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function wg(t,e,n="/"){return gy(t,e,n,!1)}function gy(t,e,n,r){let s=typeof e=="string"?Ar(e):e,i=qt(s.pathname||"/",n);if(i==null)return null;let o=Sg(t);py(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=jy(i);a=Cy(o[l],u,r)}return a}function Sg(t,e=[],n=[],r="",s=!1){let i=(o,a,l=s,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;re(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=Ut([r,d.relativePath]),f=n.concat(d);o.children&&o.children.length>0&&(re(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Sg(o.children,e,f,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:xy(h,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of _g(o.path))i(o,a,!0,u)}),e}function _g(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_g(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function py(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ky(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var my=/^:[\w-]+$/,vy=3,yy=2,wy=1,Sy=10,_y=-2,gd=t=>t==="*";function xy(t,e){let n=t.split("/"),r=n.length;return n.some(gd)&&(r+=_y),e&&(r+=yy),n.filter(s=>!gd(s)).reduce((s,i)=>s+(my.test(i)?vy:i===""?wy:Sy),r)}function ky(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Cy(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=io({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=io({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ut([i,h.pathname]),pathnameBase:Ny(Ut([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ut([i,h.pathnameBase]))}return o}function io(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ey(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let p=a[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[f];return h&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Ey(t,e=!1,n=!0){Rt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function qt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function by(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ar(t):t;return{pathname:n?n.startsWith("/")?n:Ry(n,e):e,search:Py(r),hash:Ly(s)}}function Ry(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ca(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ty(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xg(t){let e=Ty(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function kg(t,e,n,r=!1){let s;typeof t=="string"?s=Ar(t):(s={...t},re(!s.pathname||!s.pathname.includes("?"),ca("?","pathname","search",s)),re(!s.pathname||!s.pathname.includes("#"),ca("#","pathname","hash",s)),re(!s.search||!s.search.includes("#"),ca("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=by(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ut=t=>t.join("/").replace(/\/\/+/g,"/"),Ny=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Py=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ly=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $y(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Cg=["POST","PUT","PATCH","DELETE"];new Set(Cg);var Iy=["GET",...Cg];new Set(Iy);var Or=S.createContext(null);Or.displayName="DataRouter";var Ro=S.createContext(null);Ro.displayName="DataRouterState";S.createContext(!1);var Eg=S.createContext({isTransitioning:!1});Eg.displayName="ViewTransition";var Ay=S.createContext(new Map);Ay.displayName="Fetchers";var Oy=S.createContext(null);Oy.displayName="Await";var Tt=S.createContext(null);Tt.displayName="Navigation";var Vs=S.createContext(null);Vs.displayName="Location";var Nt=S.createContext({outlet:null,matches:[],isDataRoute:!1});Nt.displayName="Route";var Vu=S.createContext(null);Vu.displayName="RouteError";function Dy(t,{relative:e}={}){re(Bs(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Tt),{hash:s,pathname:i,search:o}=Hs(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:Ut([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Bs(){return S.useContext(Vs)!=null}function kn(){return re(Bs(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Vs).location}var jg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bg(t){S.useContext(Tt).static||S.useLayoutEffect(t)}function Bu(){let{isDataRoute:t}=S.useContext(Nt);return t?Jy():Fy()}function Fy(){re(Bs(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Or),{basename:e,navigator:n}=S.useContext(Tt),{matches:r}=S.useContext(Nt),{pathname:s}=kn(),i=JSON.stringify(xg(r)),o=S.useRef(!1);return bg(()=>{o.current=!0}),S.useCallback((l,u={})=>{if(Rt(o.current,jg),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=kg(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ut([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,i,s,t])}S.createContext(null);function Rg(){let{matches:t}=S.useContext(Nt),e=t[t.length-1];return e?e.params:{}}function Hs(t,{relative:e}={}){let{matches:n}=S.useContext(Nt),{pathname:r}=kn(),s=JSON.stringify(xg(n));return S.useMemo(()=>kg(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function My(t,e){return Tg(t,e)}function Tg(t,e,n,r,s){var m;re(Bs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Tt),{matches:o}=S.useContext(Nt),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let y=h&&h.path||"";Ng(u,!h||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=kn(),g;if(e){let y=typeof e=="string"?Ar(e):e;re(d==="/"||((m=y.pathname)==null?void 0:m.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),g=y}else g=f;let p=g.pathname||"/",w=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");w="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let _=wg(t,{pathname:w});Rt(h||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Rt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=Hy(_&&_.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Ut([d,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Ut([d,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r,s);return e&&v?S.createElement(Vs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function Uy(){let t=Qy(),e=$y(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,o)}var zy=S.createElement(Uy,null),Vy=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(Nt.Provider,{value:this.props.routeContext},S.createElement(Vu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function By({routeContext:t,match:e,children:n}){let r=S.useContext(Or);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Nt.Provider,{value:t},n)}function Hy(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);re(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,g=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let f,g=!1,p=null,w=null;n&&(f=o&&d.route.id?o[d.route.id]:void 0,p=d.route.errorElement||zy,a&&(l<0&&h===0?(Ng("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):l===h&&(g=!0,w=d.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,h+1)),v=()=>{let m;return f?m=p:g?m=w:d.route.Component?m=S.createElement(d.route.Component,null):d.route.element?m=d.route.element:m=u,S.createElement(By,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:m})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(Vy,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:r}):v()},null)}function Hu(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qy(t){let e=S.useContext(Or);return re(e,Hu(t)),e}function Wy(t){let e=S.useContext(Ro);return re(e,Hu(t)),e}function Gy(t){let e=S.useContext(Nt);return re(e,Hu(t)),e}function qu(t){let e=Gy(t),n=e.matches[e.matches.length-1];return re(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Ky(){return qu("useRouteId")}function Qy(){var r;let t=S.useContext(Vu),e=Wy("useRouteError"),n=qu("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Jy(){let{router:t}=qy("useNavigate"),e=qu("useNavigate"),n=S.useRef(!1);return bg(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{Rt(n.current,jg),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var pd={};function Ng(t,e,n){!e&&!pd[t]&&(pd[t]=!0,Rt(!1,n))}S.memo(Yy);function Yy({routes:t,future:e,state:n,unstable_onError:r}){return Tg(t,void 0,n,r,e)}function Ze(t){re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xy({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){re(!Bs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Ar(n));let{pathname:l="/",search:u="",hash:d="",state:h=null,key:f="default"}=n,g=S.useMemo(()=>{let p=qt(l,o);return p==null?null:{location:{pathname:p,search:u,hash:d,state:h,key:f},navigationType:r}},[o,l,u,d,h,f,r]);return Rt(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:S.createElement(Tt.Provider,{value:a},S.createElement(Vs.Provider,{children:e,value:g}))}function Zy({children:t,location:e}){return My(Cl(t),e)}function Cl(t,e=[]){let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,Cl(r.props.children,i));return}re(r.type===Ze,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Cl(r.props.children,i)),n.push(o)}),n}var $i="get",Ii="application/x-www-form-urlencoded";function To(t){return t!=null&&typeof t.tagName=="string"}function ew(t){return To(t)&&t.tagName.toLowerCase()==="button"}function tw(t){return To(t)&&t.tagName.toLowerCase()==="form"}function nw(t){return To(t)&&t.tagName.toLowerCase()==="input"}function rw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sw(t,e){return t.button===0&&(!e||e==="_self")&&!rw(t)}var hi=null;function iw(){if(hi===null)try{new FormData(document.createElement("form"),0),hi=!1}catch{hi=!0}return hi}var ow=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function da(t){return t!=null&&!ow.has(t)?(Rt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ii}"`),null):t}function aw(t,e){let n,r,s,i,o;if(tw(t)){let a=t.getAttribute("action");r=a?qt(a,e):null,n=t.getAttribute("method")||$i,s=da(t.getAttribute("enctype"))||Ii,i=new FormData(t)}else if(ew(t)||nw(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?qt(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||$i,s=da(t.getAttribute("formenctype"))||da(a.getAttribute("enctype"))||Ii,i=new FormData(a,t),!iw()){let{name:u,type:d,value:h}=t;if(d==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if(To(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$i,r=null,s=Ii,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wu(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lw(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&qt(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function uw(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cw(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dw(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await uw(i,n);return o.links?o.links():[]}return[]}));return pw(r.flat(1).filter(cw).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function md(t,e,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?e.filter((l,u)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function hw(t,e,{includeHydrateFallback:n}={}){return fw(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function fw(t){return[...new Set(t)]}function gw(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function pw(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(gw(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Pg(){let t=S.useContext(Or);return Wu(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function mw(){let t=S.useContext(Ro);return Wu(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Gu=S.createContext(void 0);Gu.displayName="FrameworkContext";function Lg(){let t=S.useContext(Gu);return Wu(t,"You must render this element inside a <HydratedRouter> element"),t}function vw(t,e){let n=S.useContext(Gu),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,f=S.useRef(null);S.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=v=>{v.forEach(m=>{o(m.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return f.current&&_.observe(f.current),()=>{_.disconnect()}}},[t]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{s(!0)},p=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Gr(a,g),onBlur:Gr(l,p),onMouseEnter:Gr(u,g),onMouseLeave:Gr(d,p),onTouchStart:Gr(h,g)}]:[!1,f,{}]}function Gr(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function yw({page:t,...e}){let{router:n}=Pg(),r=S.useMemo(()=>wg(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?S.createElement(Sw,{page:t,matches:r,...e}):null}function ww(t){let{manifest:e,routeModules:n}=Lg(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return dw(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function Sw({page:t,matches:e,...n}){let r=kn(),{manifest:s,routeModules:i}=Lg(),{basename:o}=Pg(),{loaderData:a,matches:l}=mw(),u=S.useMemo(()=>md(t,e,l,s,r,"data"),[t,e,l,s,r]),d=S.useMemo(()=>md(t,e,l,s,r,"assets"),[t,e,l,s,r]),h=S.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,w=!1;if(e.forEach(v=>{var y;let m=s.routes[v.route.id];!m||!m.hasLoader||(!u.some(x=>x.route.id===v.route.id)&&v.route.id in a&&((y=i[v.route.id])!=null&&y.shouldRevalidate)||m.hasClientLoader?w=!0:p.add(v.route.id))}),p.size===0)return[];let _=lw(t,o,"data");return w&&p.size>0&&_.searchParams.set("_routes",e.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[_.pathname+_.search]},[o,a,r,s,u,e,t,i]),f=S.useMemo(()=>hw(d,s),[d,s]),g=ww(d);return S.createElement(S.Fragment,null,h.map(p=>S.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>S.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),g.map(({key:p,link:w})=>S.createElement("link",{key:p,nonce:n.nonce,...w})))}function _w(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var $g=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$g&&(window.__reactRouterVersion="7.8.2")}catch{}function xw({basename:t,children:e,window:n}){let r=S.useRef();r.current==null&&(r.current=cy({window:n,v5Compat:!0}));let s=r.current,[i,o]=S.useState({action:s.action,location:s.location}),a=S.useCallback(l=>{S.startTransition(()=>o(l))},[o]);return S.useLayoutEffect(()=>s.listen(a),[s,a]),S.createElement(Xy,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Ig=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=S.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h,...f},g){let{basename:p}=S.useContext(Tt),w=typeof u=="string"&&Ig.test(u),_,v=!1;if(typeof u=="string"&&w&&(_=u,$g))try{let P=new URL(window.location.href),T=u.startsWith("//")?new URL(P.protocol+u):new URL(u),z=qt(T.pathname,p);T.origin===P.origin&&z!=null?u=z+T.search+T.hash:v=!0}catch{Rt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=Dy(u,{relative:s}),[y,x,k]=vw(r,f),C=jw(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function E(P){e&&e(P),P.defaultPrevented||C(P)}let j=S.createElement("a",{...f,...k,href:_||m,onClick:v||i?e:E,ref:_w(g,x),target:l,"data-discover":!w&&n==="render"?"true":void 0});return y&&!w?S.createElement(S.Fragment,null,j,S.createElement(yw,{page:m})):j});Ve.displayName="Link";var kw=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},d){let h=Hs(o,{relative:u.relative}),f=kn(),g=S.useContext(Ro),{navigator:p,basename:w}=S.useContext(Tt),_=g!=null&&Pw(h)&&a===!0,v=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,m=f.pathname,y=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(m=m.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&w&&(y=qt(y,w)||y);const x=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let k=m===v||!s&&m.startsWith(v)&&m.charAt(x)==="/",C=y!=null&&(y===v||!s&&y.startsWith(v)&&y.charAt(v.length)==="/"),E={isActive:k,isPending:C,isTransitioning:_},j=k?e:void 0,P;typeof r=="function"?P=r(E):P=[r,k?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(E):i;return S.createElement(Ve,{...u,"aria-current":j,className:P,ref:d,style:T,to:o,viewTransition:a},typeof l=="function"?l(E):l)});kw.displayName="NavLink";var Cw=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=$i,action:a,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:h,...f},g)=>{let p=Tw(),w=Nw(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&Ig.test(a),m=y=>{if(l&&l(y),y.defaultPrevented)return;y.preventDefault();let x=y.nativeEvent.submitter,k=(x==null?void 0:x.getAttribute("formmethod"))||o;p(x||y.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return S.createElement("form",{ref:g,method:_,action:w,onSubmit:r?l:m,...f,"data-discover":!v&&t==="render"?"true":void 0})});Cw.displayName="Form";function Ew(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ag(t){let e=S.useContext(Or);return re(e,Ew(t)),e}function jw(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Bu(),l=kn(),u=Hs(t,{relative:i});return S.useCallback(d=>{if(sw(d,e)){d.preventDefault();let h=n!==void 0?n:$s(l)===$s(u);a(t,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,e,t,s,i,o])}var bw=0,Rw=()=>`__${String(++bw)}__`;function Tw(){let{router:t}=Ag("useSubmit"),{basename:e}=S.useContext(Tt),n=Ky();return S.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=aw(r,e);if(s.navigate===!1){let d=s.fetcherKey||Rw();await t.fetch(d,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function Nw(t,{relative:e}={}){let{basename:n}=S.useContext(Tt),r=S.useContext(Nt);re(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Hs(t||".",{relative:e})},o=kn();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ut([n,i.pathname])),$s(i)}function Pw(t,{relative:e}={}){let n=S.useContext(Eg);re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ag("useViewTransitionState"),s=Hs(t,{relative:e});if(!n.isTransitioning)return!1;let i=qt(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=qt(n.nextLocation.pathname,r)||n.nextLocation.pathname;return io(s.pathname,o)!=null||io(s.pathname,i)!=null}const Lw="modulepreload",$w=function(t){return"/"+t},vd={},qs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=$w(l),l in vd)return;vd[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Lw,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Iw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Dr);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Ku extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Aw extends Ku{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class yd extends Ku{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wd extends Ku{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var El;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(El||(El={}));var Ow=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Dw{constructor(e,{headers:n={},customFetch:r,region:s=El.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Iw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Ow(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(w=>{throw new Aw(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new yd(h);if(!h.ok)throw new wd(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield h.json():g==="application/octet-stream"?p=yield h.blob():g==="text/event-stream"?p=h:g==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof wd||s instanceof yd?s.context:void 0}}})}}var Oe={},Qu={},No={},Ws={},Po={},Lo={},Fw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pr=Fw();const Mw=Pr.fetch,Og=Pr.fetch.bind(Pr),Dg=Pr.Headers,Uw=Pr.Request,zw=Pr.Response,Dr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Dg,Request:Uw,Response:zw,default:Og,fetch:Mw},Symbol.toStringTag,{value:"Module"})),Vw=Dp(Dr);var $o={};Object.defineProperty($o,"__esModule",{value:!0});let Bw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$o.default=Bw;var Fg=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lo,"__esModule",{value:!0});const Hw=Fg(Vw),qw=Fg($o);let Ww=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Hw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let d=null,h=null,f=null,g=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const _=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(h=[],d=null,g=200,p="OK")}catch{i.status===404&&_===""?(g=204,p="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,p="OK"),d&&this.shouldThrowOnError)throw new qw.default(d)}return{error:d,data:h,count:f,status:g,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Lo.default=Ww;var Gw=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Po,"__esModule",{value:!0});const Kw=Gw(Lo);let Qw=class extends Kw.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Po.default=Qw;var Jw=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ws,"__esModule",{value:!0});const Yw=Jw(Po);let Xw=class extends Yw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Ws.default=Xw;var Zw=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(No,"__esModule",{value:!0});const Kr=Zw(Ws);let e0=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Kr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Kr.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Kr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};No.default=e0;var Mg=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qu,"__esModule",{value:!0});const t0=Mg(No),n0=Mg(Ws);let r0=class Ug{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new t0.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ug(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new n0.default({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Qu.default=r0;var Fr=st&&st.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const zg=Fr(Qu);Oe.PostgrestClient=zg.default;const Vg=Fr(No);Oe.PostgrestQueryBuilder=Vg.default;const Bg=Fr(Ws);Oe.PostgrestFilterBuilder=Bg.default;const Hg=Fr(Po);Oe.PostgrestTransformBuilder=Hg.default;const qg=Fr(Lo);Oe.PostgrestBuilder=qg.default;const Wg=Fr($o);Oe.PostgrestError=Wg.default;var s0=Oe.default={PostgrestClient:zg.default,PostgrestQueryBuilder:Vg.default,PostgrestFilterBuilder:Bg.default,PostgrestTransformBuilder:Hg.default,PostgrestBuilder:qg.default,PostgrestError:Wg.default};const{PostgrestClient:i0,PostgrestQueryBuilder:TC,PostgrestFilterBuilder:NC,PostgrestTransformBuilder:PC,PostgrestBuilder:LC,PostgrestError:$C}=s0;class o0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const a0="2.15.1",l0=`realtime-js/${a0}`,u0="1.0.0",jl=1e4,c0=1e3,d0=100;var ds;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ds||(ds={}));var ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ce||(ce={}));var ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ht||(ht={}));var bl;(function(t){t.websocket="websocket"})(bl||(bl={}));var Ln;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ln||(Ln={}));class h0{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Gg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Q||(Q={}));const Sd=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=f0(o,t,e,s),i),{})},f0=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Kg(i,o):Rl(o)},Kg=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return v0(e,n)}switch(t){case Q.bool:return g0(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return p0(e);case Q.json:case Q.jsonb:return m0(e);case Q.timestamp:return y0(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Rl(e);default:return Rl(e)}},Rl=t=>t,g0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},p0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},m0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},v0=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Kg(e,a))}return t},y0=t=>typeof t=="string"?t.replace(" ","T"):t,Qg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ha{constructor(e,n,r={},s=jl){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _d;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_d||(_d={}));class hs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=hs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hs.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),p=d.filter(_=>g.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);p.length>0&&(a[u]=p),w.length>0&&(l[u]=w)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xd||(xd={}));var fs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fs||(fs={}));var It;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(It||(It={}));class Ju{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ha(this,ht.join,this.params,this.timeout),this.rejoinTimer=new Gg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ce.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ht.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new hs(this),this.broadcastEndpointURL=Qg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ce.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[fs.PRESENCE]&&this.bindings[fs.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(It.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(It.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e==null||e(It.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,w=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,_=[];for(let v=0;v<w;v++){const m=p[v],{filter:{event:y,schema:x,table:k,filter:C}}=m,E=f&&f[v];if(E&&E.event===y&&E.schema===x&&E.table===k&&E.filter===C)_.push(Object.assign(Object.assign({},m),{id:E.id}));else{this.unsubscribe(),this.state=ce.errored,e==null||e(It.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(It.SUBSCRIBED);return}}).receive("error",f=>{this.state=ce.errored,e==null||e(It.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(It.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ce.joined&&e===fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ce.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ht.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ha(this,ht.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ce.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ha(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>d0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=ht;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,w,_;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((_=(w=g.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(g=>g.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,w,_,v,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const x=g.id,k=(p=g.filter)===null||p===void 0?void 0:p.event;return x&&((w=n.ids)===null||w===void 0?void 0:w.includes(x))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(m=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return x==="*"||x===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:w,table:_,commit_timestamp:v,type:m,errors:y}=p;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:v,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(p))}g.callback(f,r)})}_isClosed(){return this.state===ce.closed}_isJoined(){return this.state===ce.joined}_isJoining(){return this.state===ce.joining}_isLeaving(){return this.state===ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ju.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ht.close,{},e)}_onError(e){this._on(ht.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Sd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Sd(e.columns,e.old_record)),n}}const kd=()=>{},fi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},w0=[1e3,2e3,5e3,1e4],S0=1e4,_0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x0{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jl,this.transport=null,this.heartbeatIntervalMs=fi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=kd,this.ref=0,this.reconnectTimer=null,this.logger=kd,this.conn=null,this.sendBuffer=[],this.serializer=new h0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>qs(async()=>{const{default:a}=await Promise.resolve().then(()=>Dr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${bl.websocket}`,this.httpEndpoint=Qg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=o0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:u0}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return Ln.Connecting;case ds.open:return Ln.Open;case ds.closing:return Ln.Closing;default:return Ln.Closed}}isConnected(){return this.connectionState()===Ln.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Ju(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(c0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ht.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([_0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:l0};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(ht.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Gg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:jl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:fi.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e==null?void 0:e.reconnectAfterMs)!==null&&a!==void 0?a:d=>w0[d-1]||S0,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Yu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function de(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class k0 extends Yu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tl extends Yu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var C0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Jg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Dr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},E0=()=>C0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qs(()=>Promise.resolve().then(()=>Dr),void 0)).Response:Response}),Nl=t=>{if(Array.isArray(t))return t.map(n=>Nl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Nl(r)}),e},j0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Wn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const fa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b0=(t,e,n)=>Wn(void 0,void 0,void 0,function*(){const r=yield E0();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new k0(fa(s),i,o))}).catch(s=>{e(new Tl(fa(s),s))}):e(new Tl(fa(t),t))}),R0=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(j0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Gs(t,e,n,r,s,i){return Wn(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,R0(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>b0(l,a,r))})})}function oo(t,e,n,r){return Wn(this,void 0,void 0,function*(){return Gs(t,"GET",e,n,r)})}function kt(t,e,n,r,s){return Wn(this,void 0,void 0,function*(){return Gs(t,"POST",e,r,s,n)})}function Pl(t,e,n,r,s){return Wn(this,void 0,void 0,function*(){return Gs(t,"PUT",e,r,s,n)})}function T0(t,e,n,r){return Wn(this,void 0,void 0,function*(){return Gs(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Yg(t,e,n,r,s){return Wn(this,void 0,void 0,function*(){return Gs(t,"DELETE",e,r,s,n)})}var Re=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const N0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class P0{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Jg(s)}uploadOrUpdate(e,n,r,s){return Re(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cd),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?Pl:kt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Cd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Pl(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(de(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Re(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield kt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Yu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}update(e,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Re(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield kt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Re(this,void 0,void 0,function*(){try{const s=yield kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}download(e,n){return Re(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield oo(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}info(e){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield oo(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Nl(r),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}exists(e){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield T0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(de(r)&&r instanceof Tl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Yg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}list(e,n,r){return Re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},N0),n),{prefix:e||""});return{data:yield kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}listV2(e,n){return Re(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const L0="2.11.0",$0={"X-Client-Info":`storage-js/${L0}`};var Qn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class I0{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},$0),n),this.fetch=Jg(r)}listBuckets(){return Qn(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(de(e))return{data:null,error:e};throw e}})}getBucket(e){return Qn(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Qn(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Qn(this,void 0,void 0,function*(){try{return{data:yield Pl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Qn(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Qn(this,void 0,void 0,function*(){try{return{data:yield Yg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}}class A0 extends I0{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new P0(this.url,this.headers,e,this.fetch)}}const O0="2.56.0";let ts="";typeof Deno<"u"?ts="deno":typeof document<"u"?ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ts="react-native":ts="node";const D0={"X-Client-Info":`supabase-js-${ts}/${O0}`},F0={headers:D0},M0={schema:"public"},U0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},z0={};var V0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const B0=t=>{let e;return t?e=t:typeof fetch>"u"?e=Og:e=fetch,(...n)=>e(...n)},H0=()=>typeof Headers>"u"?Dg:Headers,q0=(t,e,n)=>{const r=B0(n),s=H0();return(i,o)=>V0(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var W0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function G0(t){return t.endsWith("/")?t:t+"/"}function K0(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>W0(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Xg="2.71.1",rr=30*1e3,Ll=3,ga=Ll*rr,Q0="http://localhost:9999",J0="supabase.auth.token",Y0={"X-Client-Info":`gotrue-js/${Xg}`},$l="X-Supabase-Api-Version",Zg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},X0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Z0=10*60*1e3;class Xu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class eS extends Xu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function tS(t){return U(t)&&t.name==="AuthApiError"}class ep extends Xu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Cn extends Xu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Yt extends Cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nS(t){return U(t)&&t.name==="AuthSessionMissingError"}class gi extends Cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pi extends Cn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mi extends Cn{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rS(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class Ed extends Cn{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Il extends Cn{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function pa(t){return U(t)&&t.name==="AuthRetryableFetchError"}class jd extends Cn{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Al extends Cn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bd=` 	
\r=`.split(""),sS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<bd.length;e+=1)t[bd[e].charCodeAt(0)]=-2;for(let e=0;e<ao.length;e+=1)t[ao[e].charCodeAt(0)]=e;return t})();function Rd(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ao[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ao[r]),e.queuedBits-=6}}function tp(t,e,n){const r=sS[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Td(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{aS(o,r,n)};for(let o=0;o<t.length;o+=1)tp(t.charCodeAt(o),s,i);return e.join("")}function iS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function oS(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}iS(r,e)}}function aS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function lS(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tp(t.charCodeAt(s),n,r);return new Uint8Array(e)}function uS(t){const e=[];return oS(t,n=>e.push(n)),new Uint8Array(e)}function cS(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Rd(s,n,r)),Rd(null,n,r),e.join("")}function dS(t){return Math.round(Date.now()/1e3)+t}function hS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ut=()=>typeof window<"u"&&typeof document<"u",jn={tested:!1,writable:!1},np=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jn.tested)return jn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jn.tested=!0,jn.writable=!0}catch{jn.tested=!0,jn.writable=!1}return jn.writable};function fS(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const rp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Dr);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},gS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",sr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},bn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jt=async(t,e)=>{await t.removeItem(e)};class Io{constructor(){this.promise=new Io.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Io.promiseConstructor=Promise;function ma(t){const e=t.split(".");if(e.length!==3)throw new Al("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!X0.test(e[r]))throw new Al("JWT not in base64url format");return{header:JSON.parse(Td(e[0])),payload:JSON.parse(Td(e[1])),signature:lS(e[2]),raw:{header:e[0],payload:e[1]}}}async function pS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function mS(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function vS(t){return("0"+t.toString(16)).substr(-2)}function yS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,vS).join("")}async function wS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function SS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await wS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(t,e,n=!1){const r=yS();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await sr(t,`${e}-code-verifier`,s);const i=await SS(r);return[i,r===i?"plain":"s256"]}const _S=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xS(t){const e=t.headers.get($l);if(!e||!e.match(_S))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function CS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ES=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yn(t){if(!ES.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function va(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nd(t){return JSON.parse(JSON.stringify(t))}var jS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Pn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bS=[502,503,504];async function Pd(t){var e;if(!gS(t))throw new Il(Pn(t),0);if(bS.includes(t.status))throw new Il(Pn(t),t.status);let n;try{n=await t.json()}catch(i){throw new ep(Pn(i),i)}let r;const s=xS(t);if(s&&s.getTime()>=Zg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new jd(Pn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Yt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new jd(Pn(n),t.status,n.weak_password.reasons);throw new eS(Pn(n),t.status||500,r)}const RS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function B(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[$l]||(i[$l]=Zg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await TS(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function TS(t,e,n,r,s,i){const o=RS(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Il(Pn(l),0)}if(a.ok||await Pd(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Pd(l)}}function Lt(t){var e;let n=null;$S(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=dS(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ld(t){const e=Lt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function rn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function NS(t){return{data:t,error:null}}function PS(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=jS(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function LS(t){return t}function $S(t){return t.access_token&&t.refresh_token&&t.expires_in}const ya=["global","local","others"];var IS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class AS{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=rp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=ya[0]){if(ya.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ya.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:rn})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=IS(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:PS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rn})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:LS});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(p=>{const w=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(U(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Yn(e);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rn})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Yn(e);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:rn})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Yn(e);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:rn})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yn(e.userId);try{const{data:n,error:r}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Yn(e.userId),Yn(e.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}function $d(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function OS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xn={debug:!!(globalThis&&np()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class DS extends sp{}async function FS(t,e,n){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Xn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new DS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}OS();const MS={url:Q0,storageKey:J0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Y0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Id(t,e,n){return await n()}const Zn={};class Is{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},MS),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new AS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=rp(s.fetch),this.lock=s.lock||Id,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=FS:this.lock=Id,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:np()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$d(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$d(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Zn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Zn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zn[this.storageKey]=Object.assign(Object.assign({},Zn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=fS(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ut()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rS(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new ep("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Lt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Jn(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:p},xform:Lt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lt})}else throw new pi("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ld})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ld})}else throw new pi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,u,d,h,f,g;let p,w;if("message"in e)p=e.message,w=e.signature;else{const{chain:_,wallet:v,statement:m,options:y}=e;let x;if(ut())if(typeof v=="object")x=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const k=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:_,error:v}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:cS(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Lt});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new gi}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(U(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await bn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Lt});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new gi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(U(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Lt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new gi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Jn(this.storage,this.storageKey));const{error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new pi("You must provide either an email or phone number.")}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Lt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(U(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jn(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:NS})}catch(i){if(U(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Yt;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await B(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await B(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new pi("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await bn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ga:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await bn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=va()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yt}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:rn})})}catch(n){if(U(n))return nS(n)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Yt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Jn(this.storage,this.storageKey));const{data:u,error:d}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:rn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(U(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ma(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Yt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ut())throw new mi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ed("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ed("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new mi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const g=f-d;g*1e3<=rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(U(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await bn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(tS(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=hS(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Jn(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(U(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(U(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await mS(async s=>(s>0&&await pS(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&pa(i)&&Date.now()+o-r<rr})}catch(r){if(this._debug(n,"error",r),U(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await bn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await bn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await sr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:va()}else if(s&&!s.user&&!s.user){const o=await bn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Jt(this.storage,this.storageKey+"-user"),await sr(this.storage,this.storageKey,s)):s.user=va()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ga;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ga}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),pa(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Io;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Yt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),U(i)){const o={session:null,error:i};return pa(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await sr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Nd(s);await sr(this.storage,this.storageKey,i)}else{const s=Nd(n);await sr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${rr}ms, refresh threshold is ${Ll} ticks`),s<=Ll&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ma(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Z0>s)return r;const{data:i,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:p}=await this.getSession();if(p||!g.session)return{data:null,error:p};r=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=ma(r);n!=null&&n.allowExpired||kS(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const d=CS(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,uS(`${a}.${l}`)))throw new Al("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}}}Is.nextInstanceID=0;const US=Is;class zS extends US{constructor(e){super(e)}}var VS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class BS{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=G0(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:M0,realtime:z0,auth:Object.assign(Object.assign({},U0),{storageKey:u}),global:F0},h=K0(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=q0(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new i0(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new A0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Dw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return VS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zS({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new x0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const HS=(t,e,n)=>new BS(t,e,n);function qS(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}qS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const WS={BASE_URL:"/",DEV:!1,MODE:"production",NODE_ENV:"production",PROD:!0,SSR:!1,SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZGhlZ2N6d3djZm5yYW5reWRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNTY2NDIsImV4cCI6MjA2OTYzMjY0Mn0.7BisAmVNNmsr-zdqrrJoILPnW0sQ6DfSfH0IEsjLoOI",SUPABASE_URL:"https://sqdhegczwwcfnrankyde.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"},ip=t=>WS[t],Ol=()=>ip("SUPABASE_URL"),GS=()=>ip("SUPABASE_ANON_KEY");class KS{constructor(e){this.supabase=e}async callSupabaseFunction(e,n){const{method:r="GET",body:s,headers:i={},requiresAuth:o=!0}=n||{};try{let a={};if(o){const{data:f,error:g}=await this.supabase.auth.getSession();if(g)throw g;const p=f.session;if(!(p!=null&&p.access_token))throw new Error("No valid authentication session found");a={Authorization:`Bearer ${p.access_token}`}}const l={"Content-Type":"application/json",...a,...i},u=s&&r!=="GET"?s:void 0,{data:d,error:h}=await this.supabase.functions.invoke(e,{body:u,headers:l});if(h)throw h;return d}catch(a){if(a instanceof Error){if(a.message.includes("401")||a.message.includes("Unauthorized"))throw new Error("Authentication failed. Please log in again.");if(a.message.includes("403")||a.message.includes("Forbidden"))throw new Error("Access denied. Insufficient permissions.");if(a.message.includes("404")||a.message.includes("Not Found"))throw new Error("API endpoint not found.");if(a.message.includes("500")||a.message.includes("Internal Server Error"))throw new Error("Server error. Please try again later.")}throw a}}getSupabaseClient(){return this.supabase}handleSingleQuery(e){if(e.error)throw e.error.code==="PGRST116"?new Error("Record not found"):e.error;return e.data}async performCrudOperation(e,n,r,s){let i=this.supabase.from(n);switch(e){case"insert":const o=await i.insert(s).select().single();return this.handleSingleQuery(o);case"update":const a=await i.update(s).eq("id",r).select().single();return this.handleSingleQuery(a);case"delete":const l=await i.delete().eq("id",r);this.handleSingleQuery(l);return}}async executeQuery(e){const n=await e();return this.handleSingleQuery(n)}applyGlobalFilter(e,n,r=[]){if(n&&r.length>0){const s=r.map(i=>`${i}.ilike.%${n}%`).join(",");return e.or(s)}return e}applySorting(e,n){if(n&&n.length>0){const r=n[0];if(r)return e.order(r.id,{ascending:!r.desc})}return e}applyPagination(e,n){if(n){const r=n.pageIndex*n.pageSize,s=r+n.pageSize-1;return e.range(r,s)}return e}applyUserFilter(e,n,r,s="assigned_to"){return n&&r?e.eq(s,r):e}async getCurrentUser(){const{data:e,error:n}=await this.supabase.auth.getUser();if(n)throw n;return e}async queryFromTable(e,n){const{filterByUser:r=!1,userId:s=null,userColumn:i="assigned_to",additionalFilters:o={},globalFilter:a="",globalFilterColumns:l=[],sorting:u=[],pagination:d,select:h="*"}=n;let f=this.supabase.from(e).select(h,{count:"exact"});f=this.applyUserFilter(f,r,s,i),f=this.applyGlobalFilter(f,a,l),f=this.applySorting(f,u),f=this.applyPagination(f,d),o&&Object.entries(o).forEach(([_,v])=>{v!=null&&(f=f.eq(_,v))});const{data:g,error:p,count:w}=await f;if(p)throw p;return{data:g||[],count:w||0}}async getRecordById(e,n,r){try{return await this.executeQuery(()=>this.supabase.from(e).select(r||"*").eq("id",n).single())}catch(s){throw s instanceof Error&&s.message==="Record not found"?new Error(`${e} record not found`):s}}async updateRecord(e,n,r){await this.performCrudOperation("update",e,n,r)}async createRecord(e,n){return this.performCrudOperation("insert",e,void 0,n)}async deleteRecord(e,n){await this.performCrudOperation("delete",e,n)}async queryRecordsWithFilter(e,n,r){let s=this.supabase.from(e).select((r==null?void 0:r.select)||"*");Object.entries(n).forEach(([o,a])=>{a!=null&&(typeof a=="object"&&a!==null?"lt"in a?s=s.lt(o,a.lt):"gte"in a?s=s.gte(o,a.gte):"not"in a&&"in"in a.not?s=s.not(o,"in",a.not.in):s=s.eq(o,a):s=s.eq(o,a))}),s=this.applySorting(s,r==null?void 0:r.sorting),s=this.applyPagination(s,r==null?void 0:r.pagination);const i=await s;if(i.error)throw i.error;return i.data||[]}}const QS=Ol(),JS=GS(),Xt=HS(QS,JS);typeof window<"u"&&(window.supabase=Xt);const op=S.createContext(void 0),$e=()=>{const t=S.useContext(op);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},YS=({children:t})=>{console.log("AuthProvider rendering...");const[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,o]=S.useState(null),[a,l]=S.useState("unassigned"),u=a==="admin",d=a==="cleaner",h=S.useMemo(()=>new KS(Xt),[]),f=async()=>{try{const{data:{session:m}}=await Xt.auth.getSession();return(m==null?void 0:m.access_token)||null}catch(m){return console.error("Error getting access token:",m),null}},g=async m=>{try{console.log("checkUserRoles: Starting role check for userId:",m),s(!0);const y=await f();if(console.log("checkUserRoles: Got access token:",!!y),!y){console.log("checkUserRoles: No access token, setting role to unassigned"),l("unassigned");return}console.log("checkUserRoles: Querying roles table");const{data:x,error:k}=await Xt.from("roles").select("role").eq("user_id",m);if(console.log("checkUserRoles: Query result:",{data:x,error:k}),k){console.error("Role check error:",k),l("unassigned");return}const C=(x==null?void 0:x.map(j=>j.role))||[];let E="unassigned";C.includes("admin")?E="admin":C.includes("cleaner")&&(E="cleaner"),console.log("checkUserRoles: Setting role to:",E),l(E)}catch(y){console.error("Error checking user roles:",y),l("unassigned")}finally{console.log("checkUserRoles: Finished, setting loading to false"),s(!1)}},p=async(m,y)=>{var x;y?console.log("Auth state changed:",y,(x=m==null?void 0:m.user)==null?void 0:x.email):console.log("Initial session:",m),o(m),n((m==null?void 0:m.user)??null),s(!1),m!=null&&m.user?(console.log("Starting role check for user:",m.user.id),g(m.user.id).catch(k=>{console.error("Role check failed:",k),l("unassigned")})):l("unassigned")};S.useEffect(()=>{console.log("AuthProvider useEffect running..."),(async()=>{try{console.log("Getting initial session...");const{data:{session:x}}=await Xt.auth.getSession();await p(x)}catch(x){console.error("Error getting initial session:",x),s(!1)}})();const{data:{subscription:y}}=Xt.auth.onAuthStateChange(async(x,k)=>{await p(k,x)});return()=>y.unsubscribe()},[]),console.log("AuthProvider state:",{user:e,loading:r,session:i});const v={user:e,session:i,loading:r,role:a,setRole:l,isAdmin:u,isCleaner:d,signInWithGoogle:async()=>{try{const m=`${window.location.origin}/auth/callback`;console.log("Starting Google OAuth sign in...",m);const{error:y}=await Xt.auth.signInWithOAuth({provider:"google",options:{redirectTo:m}});if(y)throw y}catch(m){throw console.error("Error signing in with Google:",m),m}},signOut:async()=>{try{const{error:m}=await Xt.auth.signOut();if(m)throw m}catch(m){throw console.error("Error signing out:",m),m}},getAccessToken:f,checkUserRoles:g,supabaseService:h};return c.jsx(op.Provider,{value:v,children:t})},XS=(t,e,n,r)=>{var i,o,a,l;const s=[n,{code:e,...r||{}}];if((o=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&o.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Fn(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Ad={},Dl=(t,e,n,r)=>{Fn(n)&&Ad[n]||(Fn(n)&&(Ad[n]=new Date),XS(t,e,n,r))},ap=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Fl=(t,e,n)=>{t.loadNamespaces(e,ap(t,n))},Od=(t,e,n,r)=>{if(Fn(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Fl(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,ap(t,r))},ZS=(t,e,n={})=>!e.languages||!e.languages.length?(Dl(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),Fn=t=>typeof t=="string",e_=t=>typeof t=="object"&&t!==null,t_=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,n_={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},r_=t=>n_[t],s_=t=>t.replace(t_,r_);let Ml={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:s_};const i_=(t={})=>{Ml={...Ml,...t}},o_=()=>Ml;let lp;const a_=t=>{lp=t},l_=()=>lp,u_={type:"3rdParty",init(t){i_(t.options.react),a_(t)}},c_=S.createContext();class d_{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const h_=(t,e)=>{const n=S.useRef();return S.useEffect(()=>{n.current=t},[t,e]),n.current},up=(t,e,n,r)=>t.getFixedT(e,n,r),f_=(t,e,n,r)=>S.useCallback(up(t,e,n,r),[t,e,n,r]),Y=(t,e={})=>{var x,k,C,E;const{i18n:n}=e,{i18n:r,defaultNS:s}=S.useContext(c_)||{},i=n||r||l_();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new d_),!i){Dl(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const j=(T,z)=>Fn(z)?z:e_(z)&&Fn(z.defaultValue)?z.defaultValue:Array.isArray(T)?T[T.length-1]:T,P=[j,{},!1];return P.t=j,P.i18n={},P.ready=!1,P}(x=i.options.react)!=null&&x.wait&&Dl(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...o_(),...i.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let u=s||((k=i.options)==null?void 0:k.defaultNS);u=Fn(u)?[u]:u||["translation"],(E=(C=i.reportNamespaces).addUsedNamespaces)==null||E.call(C,u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(j=>ZS(j,i,o)),h=f_(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),f=()=>h,g=()=>up(i,e.lng||null,o.nsMode==="fallback"?u:u[0],l),[p,w]=S.useState(f);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const v=h_(_),m=S.useRef(!0);S.useEffect(()=>{const{bindI18n:j,bindI18nStore:P}=o;m.current=!0,!d&&!a&&(e.lng?Od(i,e.lng,u,()=>{m.current&&w(g)}):Fl(i,u,()=>{m.current&&w(g)})),d&&v&&v!==_&&m.current&&w(g);const T=()=>{m.current&&w(g)};return j&&(i==null||i.on(j,T)),P&&(i==null||i.store.on(P,T)),()=>{m.current=!1,i&&j&&(j==null||j.split(" ").forEach(z=>i.off(z,T))),P&&i&&P.split(" ").forEach(z=>i.store.off(z,T))}},[i,_]),S.useEffect(()=>{m.current&&d&&w(f)},[i,l,d]);const y=[p,i,d];if(y.t=p,y.i18n=i,y.ready=d,d||!d&&!a)return y;throw new Promise(j=>{e.lng?Od(i,e.lng,u,()=>j()):Fl(i,u,()=>j())})},cp=S.createContext(void 0),g_=({children:t})=>{const{i18n:e}=Y(),[n,r]=S.useState("en");S.useEffect(()=>{const o=localStorage.getItem("preferred-language")||"en";r(o),e.changeLanguage(o)},[e]);const i={currentLanguage:n,changeLanguage:o=>{r(o),e.changeLanguage(o),localStorage.setItem("preferred-language",o)}};return c.jsx(cp.Provider,{value:i,children:t})},p_=()=>{const t=S.useContext(cp);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},m_=()=>{const{signInWithGoogle:t,loading:e}=$e(),{t:n}=Y(),r=async()=>{try{await t()}catch(s){console.error("Sign in error:",s)}};return c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsx("h1",{className:"auth-title",children:n("auth.welcome")}),c.jsx("p",{className:"auth-description",children:n("auth.signInDescription")}),c.jsx("button",{onClick:r,disabled:e,className:"google-signin-btn",children:e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"loading-spinner",style:{width:"20px",height:"20px",margin:0}}),n("auth.signingIn")]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[c.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n("auth.signInWithGoogle")]})})]})})},wa=({children:t})=>{console.log("ProtectedRoute rendering...");const{user:e,loading:n}=$e(),{t:r}=Y();return console.log("ProtectedRoute state:",{user:e,loading:n}),n?(console.log("ProtectedRoute: showing loading state"),c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"loading",children:[c.jsx("div",{className:"loading-spinner"}),r("common.loading")]})})})):e?(console.log("ProtectedRoute: showing protected content"),t):(console.log("ProtectedRoute: showing login component"),c.jsx(m_,{}))},Rn=({children:t})=>{const{user:e,loading:n,isAdmin:r}=$e(),{t:s}=Y();return n?c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"loading",children:[c.jsx("div",{className:"loading-spinner"}),s("admin.checkingAccess")]})})}):e?r?t:c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"access-denied",children:[c.jsx("div",{className:"access-denied-icon",children:""}),c.jsx("h2",{className:"access-denied-title",children:s("admin.adminAccessRequired")}),c.jsx("p",{className:"access-denied-description",children:s("admin.noAdminPrivileges")})]})})}):c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"access-denied",children:[c.jsx("div",{className:"access-denied-icon",children:""}),c.jsx("h2",{className:"access-denied-title",children:s("admin.authenticationRequired")}),c.jsx("p",{className:"access-denied-description",children:s("admin.signInToAccess")})]})})})},Dd=["listing","task"],Sa=["unassigned","assigned","accepted","in_progress","completed","admin_accepted","cancelled"],v_={unassigned:["assigned"],assigned:["accepted","in_progress","unassigned"],accepted:["assigned","in_progress"],in_progress:["completed","assigned"],completed:["admin_accepted"],admin_accepted:[],cancelled:["assigned"]},Fd=["listing","task"];class y_{constructor(e,n){this.supabaseService=e,this.role=n}async fetchTodos(e={}){const n=this.role==="cleaner"?"id, title, description, products, done, completed_at, completed_by, created_at, updated_at, attached_to_type, attached_to_id":"*",r={};return e.attachedToType!==void 0&&(r.attached_to_type=e.attachedToType),e.attachedToId!==void 0&&(r.attached_to_id=e.attachedToId),e.isDone!==void 0&&(r.done=e.isDone),(await this.supabaseService.queryFromTable("todos",{select:n,additionalFilters:r,globalFilter:e.titlePattern||"",globalFilterColumns:["title"]})).data}async fetchTodosWithUserInfo(e={}){const n=await this.fetchTodos(e);return n.length>0&&this.role==="admin"?this.enrichTodosWithUserInfo(n):n}async updateTodoStatus(e,n,r){if(!await this.supabaseService.getRecordById("todos",e))throw new Error(`Todo with ID ${e} not found`);const i={done:n,updated_at:new Date().toISOString(),completed_at:n?new Date().toISOString():null,completed_by:n&&r||null};await this.supabaseService.updateRecord("todos",e,i)}async createTodo(e){return this.validateTodoData(e),this.supabaseService.createRecord("todos",e)}async updateTodo(e,n){return this.validateTodoUpdate(n),await this.supabaseService.updateRecord("todos",e,n),this.supabaseService.getRecordById("todos",e)}async deleteTodo(e){await this.supabaseService.deleteRecord("todos",e)}validateTodoData(e){const n=[];if((!e.title||typeof e.title!="string"||e.title.trim().length===0)&&n.push("Title is required and cannot be empty"),e.title&&e.title.length>255&&n.push("Title cannot exceed 255 characters"),e.description!==void 0&&e.description!==null&&(typeof e.description!="string"?n.push("Description must be a string"):e.description.length>1e3&&n.push("Description cannot exceed 1000 characters")),e.attached_to_type!==void 0&&e.attached_to_type!==null&&(Dd.includes(e.attached_to_type)||n.push(`Invalid attachment type: ${e.attached_to_type}`)),e.attached_to_type&&!e.attached_to_id&&n.push("Attachment ID is required when attachment type is specified"),!e.attached_to_type&&e.attached_to_id&&n.push("Attachment type is required when attachment ID is specified"),e.products!==void 0&&e.products!==null&&(Array.isArray(e.products)?e.products.forEach((r,s)=>{(!r.product_name||typeof r.product_name!="string")&&n.push(`Product ${s+1}: product_name is required and must be a string`),(typeof r.quantity!="number"||r.quantity<=0)&&n.push(`Product ${s+1}: quantity must be a positive number`)}):n.push("Products must be an array")),n.length>0)throw new Error(`Todo validation failed: ${n.join(", ")}`)}validateTodoUpdate(e){const n=[];if(e.title!==void 0&&((typeof e.title!="string"||e.title.trim().length===0)&&n.push("Title cannot be empty"),e.title.length>255&&n.push("Title cannot exceed 255 characters")),e.description!==void 0&&e.description!==null&&(typeof e.description!="string"?n.push("Description must be a string"):e.description.length>1e3&&n.push("Description cannot exceed 1000 characters")),e.attached_to_type!==void 0&&e.attached_to_type!==null&&(Dd.includes(e.attached_to_type)||n.push(`Invalid attachment type: ${e.attached_to_type}`)),e.attached_to_type&&!e.attached_to_id&&n.push("Attachment ID is required when attachment type is specified"),!e.attached_to_type&&e.attached_to_id&&n.push("Attachment type is required when attachment ID is specified"),e.products!==void 0&&e.products!==null&&(Array.isArray(e.products)?e.products.forEach((r,s)=>{(!r.product_name||typeof r.product_name!="string")&&n.push(`Product ${s+1}: product_name is required and must be a string`),(typeof r.quantity!="number"||r.quantity<=0)&&n.push(`Product ${s+1}: quantity must be a positive number`)}):n.push("Products must be an array")),e.completed_at!==void 0&&e.completed_at!==null&&(typeof e.completed_at!="string"&&n.push("Completed at must be a string"),isNaN(Date.parse(e.completed_at))&&n.push("Completed at must be a valid ISO date string")),n.length>0)throw new Error(`Todo update validation failed: ${n.join(", ")}`)}async enrichTodosWithUserInfo(e){const n=[...new Set(e.map(i=>[i.created_by,i.completed_by]).flat().filter(Boolean))];if(n.length===0)return e;const r=await this.supabaseService.queryFromTable("user_profiles",{select:"id, email, name",additionalFilters:{id:n}}),s=new Map(r.data.map(i=>[i.id,i]));return e.map(i=>{const o=i,a=s.get(i.created_by);return a&&(a.email!==null&&(o.user_email=a.email),a.name!==null&&(o.user_name=a.name)),o})}async getTodosByAttachment(e,n){return this.fetchTodos({attachedToType:e,attachedToId:n})}async getCompletedTodos(e={}){return this.fetchTodos({...e,isDone:!0})}async getPendingTodos(e={}){return this.fetchTodos({...e,isDone:!1})}async searchTodosByTitle(e,n={}){return this.fetchTodos({...n,titlePattern:e})}}class w_{constructor(e,n){this.supabaseService=e,this.auditService=n}validateTaskUpdate(e){const n=[],r=e.status;r!==void 0&&(typeof r!="string"||!Sa.includes(r))&&n.push(`Invalid status: ${String(r)}`),["started_at","finished_at","accepted_at","completed_at","assigned_at","admin_accepted_at","scheduled_datetime"].forEach(a=>{const l=e[a];if(l!=null)if(typeof l=="string"||typeof l=="number"||l instanceof Date){const u=new Date(l);isNaN(u.getTime())&&n.push(`Invalid date format for ${a}: ${String(l)}`)}else n.push(`Invalid date type for ${a}: ${typeof l}`)});const i=["assigned_to","assigned_by"],o=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(i.forEach(a=>{const l=e[a];l!=null&&(typeof l=="string"?o.test(l)||n.push(`Invalid UUID format for ${a}: ${l}`):n.push(`Invalid ID type for ${a}: ${typeof l}`))}),n.length>0)throw new Error(`Validation errors: ${n.join(", ")}`)}validateStatusTransition(e,n){var r;if(!((r=v_[e])!=null&&r.includes(n)))throw new Error(`Invalid status transition from ${e} to ${n}`)}async getTask(e){try{return await this.supabaseService.getRecordById("tasks",e)}catch(n){throw console.error("Error fetching task:",n),n}}async updateTaskField(e,n,r,s={}){const i={[n]:r};try{this.validateTaskUpdate(i)}catch(o){throw new Error(`Invalid update: ${o instanceof Error?o.message:String(o)}`)}try{return await this.supabaseService.updateRecord("tasks",e,i),{success:!0}}catch(o){throw console.error(`Error updating task ${n}:`,o),o}}async updateTaskFields(e,n){try{this.validateTaskUpdate(n)}catch(r){throw new Error(`Invalid updates: ${r instanceof Error?r.message:String(r)}`)}try{return await this.supabaseService.updateRecord("tasks",e,n),{success:!0}}catch(r){throw console.error("Error updating task fields:",r),r}}async updateTaskStatus(e,n,r={}){const s={status:n,...r};switch(n){case"accepted":s.accepted_at=new Date().toISOString();break;case"completed":s.completed_at=new Date().toISOString();break;case"admin_accepted":s.admin_accepted_at=new Date().toISOString();break;case"assigned":r.clearAccepted&&(s.accepted_at=null);break}return this.updateTaskFields(e,s)}async updateTaskTimes(e,{started_at:n,finished_at:r}){const s={};if(n!==void 0&&(s.started_at=n),r!==void 0&&(s.finished_at=r),n&&r&&new Date(r)<=new Date(n))throw new Error("Finish time must be after start time");return this.updateTaskFields(e,s)}async updateTaskAssignment(e,n,r=null){const s={assigned_to:n,assigned_at:n?new Date().toISOString():null};return r&&(s.assigned_by=r),this.updateTaskFields(e,s)}async queryTasks(e={}){const{pagination:n={pageIndex:0,pageSize:10},sorting:r=[{id:"scheduled_datetime",desc:!1}],globalFilter:s="",additionalFilters:i={}}=e;try{const o=await this.supabaseService.queryFromTable("tasks",{userId:e.userId||null,userColumn:"assigned_to",additionalFilters:i,globalFilter:s,globalFilterColumns:["title","description","task_type","status"],sorting:r,pagination:n});return{tasks:o.data,totalCount:o.count}}catch(o){throw console.error("Error querying tasks:",o),o}}async createTask(e){try{this.validateTaskUpdate(e)}catch(n){throw new Error(`Invalid task data: ${n instanceof Error?n.message:String(n)}`)}try{return await this.supabaseService.createRecord("tasks",e)}catch(n){throw console.error("Error creating task:",n),n}}async deleteTask(e){try{return await this.supabaseService.deleteRecord("tasks",e),{success:!0}}catch(n){throw console.error("Error deleting task:",n),n}}async getTasksCountByStatus(e){try{let n=this.supabaseService.getSupabaseClient().from("tasks").select("status");e&&(n=n.eq("assigned_to",e));const{data:r,error:s}=await n;if(s)throw s;const i={};return Sa.forEach(o=>{i[o]=0}),r==null||r.forEach(o=>{const a=o.status;i.hasOwnProperty(a)&&Sa.includes(a)&&(i[a]=(i[a]||0)+1)}),i}catch(n){throw console.error("Error getting task counts:",n),n}}async getOverdueTasks(e){try{let n=this.supabaseService.getSupabaseClient().from("tasks").select("*");n=n.lt("scheduled_datetime",new Date().toISOString()),n=n.neq("status","completed").neq("status","admin_accepted").neq("status","cancelled"),e&&(n=n.eq("assigned_to",e));const{data:r,error:s}=await n;if(s)throw s;return r||[]}catch(n){throw console.error("Error getting overdue tasks:",n),n}}async getUpcomingTasks(e){try{const n=new Date,r=new Date(n.getTime()+24*60*60*1e3);let s=this.supabaseService.getSupabaseClient().from("tasks").select("*");s=s.gte("scheduled_datetime",n.toISOString()),s=s.lt("scheduled_datetime",r.toISOString()),s=s.neq("status","completed").neq("status","admin_accepted").neq("status","cancelled"),e&&(s=s.eq("assigned_to",e));const{data:i,error:o}=await s;if(o)throw o;return i||[]}catch(n){throw console.error("Error getting upcoming tasks:",n),n}}async getTaskAuditTrail(e){try{return await this.auditService.getAuditLog("tasks",e)}catch(n){throw console.error("Error fetching task audit trail:",n),n}}}class S_{constructor(e,n){this.supabaseService=e,this.role=n}async fetchNotes(e){if(e.attachedToType&&!Fd.includes(e.attachedToType))throw new Error(`Invalid attachment type: ${e.attachedToType}`);if(e.attachedToType&&!e.attachedToId)throw new Error("attachedToId is required when attachedToType is specified");const r={select:this.role==="cleaner"?"id, content, created_at, attached_to_type, attached_to_id":"id, content, created_by, created_at, attached_to_type, attached_to_id",sorting:[{id:"created_at",desc:!1}]};e.attachedToType&&e.attachedToId&&(r.additionalFilters={attached_to_type:e.attachedToType,attached_to_id:e.attachedToId});const i=(await this.supabaseService.queryFromTable("notes",r)).data;return i.length>0&&this.role==="admin"?this.enrichNotesWithUserInfo(i):i}async createNote(e){return this.validateNoteData(e),await this.supabaseService.createRecord("notes",e)}async deleteNote(e){if(!e)throw new Error("Note ID is required for deletion");await this.supabaseService.deleteRecord("notes",e)}async getNotesByAttachment(e,n){return this.fetchNotes({attachedToType:e,attachedToId:n})}validateNoteData(e){const n=[];if((!e.content||e.content.trim().length===0)&&n.push("Note content is required"),e.content&&e.content.trim().length>1e4&&n.push("Note content cannot exceed 10,000 characters"),e.attached_to_type&&!Fd.includes(e.attached_to_type)&&n.push(`Invalid attachment type: ${e.attached_to_type}`),e.attached_to_type&&!e.attached_to_id&&n.push("attached_to_id is required when attached_to_type is specified"),e.attached_to_id&&!e.attached_to_type&&n.push("attached_to_type is required when attached_to_id is specified"),n.length>0)throw new Error(`Note validation failed: ${n.join(", ")}`)}async enrichNotesWithUserInfo(e){const n=[...new Set(e.map(o=>o.created_by).filter(Boolean))];if(n.length===0)return e;const{data:r,error:s}=await this.supabaseService.getSupabaseClient().from("user_profiles").select("id, email, name").in("id",n);if(s)throw s;const i=new Map(r.map(o=>[o.id,o]));return e.map(o=>{const a=o,l=i.get(o.created_by);return l&&(l.email!==null&&(a.user_email=l.email),l.name!==null&&(a.user_name=l.name)),a})}}class __{constructor(e){this.supabaseService=e}async getReservations(e={}){const{filters:n={},sorting:r=[{id:"check_in",desc:!0}],pagination:s={pageIndex:0,pageSize:10}}=e;let i=this.supabaseService.getSupabaseClient().from("reservations").select("*",{count:"exact"});if(n.status&&(i=i.eq("status",n.status)),n.listingId&&(i=i.eq("listing_id",n.listingId)),n.dateRange&&(n.dateRange.checkInFrom&&(i=i.gte("check_in",n.dateRange.checkInFrom)),n.dateRange.checkInTo&&(i=i.lte("check_in",n.dateRange.checkInTo)),n.dateRange.checkOutFrom&&(i=i.gte("check_out",n.dateRange.checkOutFrom)),n.dateRange.checkOutTo&&(i=i.lte("check_out",n.dateRange.checkOutTo))),n.globalFilter&&(i=i.or(`guest_name.ilike.%${n.globalFilter}%,listing_id.ilike.%${n.globalFilter}%,status.ilike.%${n.globalFilter}%`)),r&&r.length>0){const h=r[0];h&&(i=i.order(h.id,{ascending:!h.desc}))}const o=s.pageIndex*s.pageSize,a=o+s.pageSize-1;i=i.range(o,a);const{data:l,error:u,count:d}=await i;if(u)throw u;return{data:l||[],count:d||0}}async getReservationById(e){if(!e)throw new Error("Reservation ID is required");return this.supabaseService.getRecordById("reservations",e)}async createReservation(e){return this.validateReservationData(e),await this.supabaseService.createRecord("reservations",e)}async updateReservation(e,n){if(!e)throw new Error("Reservation ID is required for updates");this.validateReservationUpdate(n),await this.supabaseService.updateRecord("reservations",e,n)}async deleteReservation(e){if(!e)throw new Error("Reservation ID is required for deletion");await this.supabaseService.deleteRecord("reservations",e)}async getReservationsByListing(e){return(await this.supabaseService.queryFromTable("reservations",{additionalFilters:{listing_id:e},sorting:[{id:"check_in",desc:!0}]})).data}async getReservationsByStatus(e){return(await this.supabaseService.queryFromTable("reservations",{additionalFilters:{status:e},sorting:[{id:"check_in",desc:!0}]})).data}async getUpcomingReservations(){const e=new Date().toISOString().split("T")[0];return this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("reservations").select("*").gte("check_in",e).order("check_in",{ascending:!0}))}validateReservationData(e){const n=[];if((!e.id||e.id.trim().length===0)&&n.push("Reservation ID is required"),(!e.guest_name||e.guest_name.trim().length===0)&&n.push("Guest name is required"),e.guest_name&&e.guest_name.trim().length>255&&n.push("Guest name cannot exceed 255 characters"),e.check_in&&e.check_out){const s=new Date(e.check_in);new Date(e.check_out)<=s&&n.push("Check-out date must be after check-in date")}e.nights!==void 0&&e.nights!==null&&e.nights<0&&n.push("Number of nights cannot be negative"),e.party_size!==void 0&&e.party_size!==null&&e.party_size<0&&n.push("Party size cannot be negative");const r=["pricing_nightly_rate","pricing_subtotal","pricing_cleaning_fee","pricing_guest_service_fee","pricing_guest_total","pricing_host_service_fee","pricing_host_payout"];for(const s of r){const i=e[s];i!=null&&i<0&&n.push(`${s} cannot be negative`)}if(n.length>0)throw new Error(`Reservation validation failed: ${n.join(", ")}`)}validateReservationUpdate(e){const n=[];if(e.guest_name!==void 0&&e.guest_name.trim().length===0&&n.push("Guest name cannot be empty"),e.guest_name&&e.guest_name.trim().length>255&&n.push("Guest name cannot exceed 255 characters"),e.check_in&&e.check_out){const s=new Date(e.check_in);new Date(e.check_out)<=s&&n.push("Check-out date must be after check-in date")}e.nights!==void 0&&e.nights!==null&&e.nights<0&&n.push("Number of nights cannot be negative"),e.party_size!==void 0&&e.party_size!==null&&e.party_size<0&&n.push("Party size cannot be negative");const r=["pricing_nightly_rate","pricing_subtotal","pricing_cleaning_fee","pricing_guest_service_fee","pricing_guest_total","pricing_host_service_fee","pricing_host_payout"];for(const s of r){const i=e[s];i!=null&&i<0&&n.push(`${s} cannot be negative`)}if(n.length>0)throw new Error(`Reservation update validation failed: ${n.join(", ")}`)}}class x_{constructor(e,n){this.supabaseService=e,this.role=n}async getCleaners(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.from("roles").select("user_id").eq("role","cleaner").order("created_at");if(r)throw r;if(!n||n.length===0)return[];const{data:s,error:i}=await e.from("user_profiles").select("id, name, email").in("id",n.map(a=>a.user_id)).overrideTypes();if(i)throw i;return(s==null?void 0:s.map(a=>({id:a.id,name:a.name||a.email||`User ${a.id.substring(0,8)}...`,email:a.email||""})))||[]}async getCurrentSession(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.auth.getSession();if(r)throw r;return n.session}async getCurrentUser(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.auth.getUser();if(r)throw r;return n.user}async getUserProfile(e){if(!e)throw new Error("User ID is required");try{return await this.supabaseService.getRecordById("user_profiles",e)}catch(n){if(n instanceof Error&&n.message.includes("not found"))return null;throw n}}async getUsersByRole(e){if(e==="cleaner")return this.getCleaners();const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("roles").select("user_id").eq("role",e).order("created_at");if(s)throw s;if(!r||r.length===0)return[];const{data:i,error:o}=await n.from("user_profiles").select("id, name, email").in("id",r.map(l=>l.user_id)).overrideTypes();if(o)throw o;return(i==null?void 0:i.map(l=>({id:l.id,name:l.name||l.email||`User ${l.id.substring(0,8)}...`,email:l.email||""})))||[]}async getAllUsers(e={}){if(this.role!=="admin")throw new Error("Only admins can fetch all users");const{sorting:n=[{id:"created_at",desc:!0}],pagination:r={pageIndex:0,pageSize:10}}=e,s={sorting:n,pagination:r};if(e.role){const i=await this.supabaseService.queryFromTable("user_profiles",s);if(e.role!=="unassigned"){const o=await this.getUsersByRole(e.role),a=new Set(o.map(u=>u.id)),l=i.data.filter(u=>a.has(u.id));return{data:l,count:l.length}}return i}return this.supabaseService.queryFromTable("user_profiles",s)}async hasRole(e,n){if(!e)throw new Error("User ID is required");const r=this.supabaseService.getSupabaseClient();if(n==="unassigned"){const{data:o,error:a}=await r.from("roles").select("role").eq("user_id",e);if(a)throw a;return!o||o.length===0}const{data:s,error:i}=await r.from("roles").select("role").eq("user_id",e).eq("role",n).single();if(i){if(i.code==="PGRST116")return!1;throw i}return!!s}async getUserRoles(e){if(!e)throw new Error("User ID is required");const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("roles").select("role").eq("user_id",e);if(s)throw s;return(r==null?void 0:r.map(i=>i.role))||[]}async validateUserPermission(e,n,r){if(!e)throw new Error("User ID is required for permission validation");return await this.hasRole(e,n)?!0:(console.warn(`User ${e} lacks ${n} role for operation: ${r}`),!1)}async deleteUserProfile(e){if(!e)throw new Error("User ID is required for profile deletion");await this.supabaseService.deleteRecord("user_profiles",e)}}class k_{constructor(e){this.supabaseService=e}async fetchListings(){return(await this.supabaseService.queryFromTable("listings",{select:"id, airbnb_id, airbnb_payload, created_at, updated_at",sorting:[{id:"id",desc:!1}]})).data}async fetchListing(e){return this.supabaseService.getRecordById("listings",e)}async getListingsForSelection(){return(await this.supabaseService.queryFromTable("listings",{sorting:[{id:"id",desc:!1}]})).data}async searchListings(e={}){const n={};return e.id&&(n.id=e.id),e.airbnbId&&(n.airbnb_id=e.airbnbId),(await this.supabaseService.queryFromTable("listings",{additionalFilters:n,globalFilter:e.searchPattern||"",globalFilterColumns:["id","airbnb_id"],sorting:[{id:"id",desc:!1}]})).data}}class C_{constructor(e){this.supabaseService=e}async getAuditLog(e,n){const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("table_name",e).eq("record_id",n).order("changed_at",{ascending:!1}));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getAuditLogWithFilters(e={}){const{tableName:n,recordId:r,actionType:s,changedBy:i,dateFrom:o,dateTo:a,limit:l=100}=e;let u=this.supabaseService.getSupabaseClient().from("audit_log").select("*").order("changed_at",{ascending:!1}).limit(l);n&&(u=u.eq("table_name",n)),r&&(u=u.eq("record_id",r)),s&&(u=u.eq("action_type",s)),i&&(u=u.eq("changed_by",i)),o&&(u=u.gte("changed_at",o)),a&&(u=u.lte("changed_at",a));const d=await this.supabaseService.executeQuery(()=>u);return!d||d.length===0?[]:this.enrichWithUserProfiles(d)}async getTableAuditLog(e,n){if(!n||n.length===0)return[];const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("table_name",e).in("record_id",n).order("changed_at",{ascending:!1}));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getUserAuditLog(e,n=50){const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("changed_by",e).order("changed_at",{ascending:!1}).limit(n));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getRecentAuditActivity(e=20){const n=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").order("changed_at",{ascending:!1}).limit(e));return!n||n.length===0?[]:this.enrichWithUserProfiles(n)}async enrichWithUserProfiles(e){if(!e||e.length===0)return e;const n=[...new Set(e.map(i=>i.changed_by).filter(i=>i!==null))];if(n.length===0)return e;const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("user_profiles").select("id, email, name").in("id",n)),s=new Map((r==null?void 0:r.map(i=>[i.id,i]))||[]);return e.map(i=>{const o={...i};if(i.changed_by&&s.has(i.changed_by)){const a=s.get(i.changed_by);o.changed_by_name=a.name||void 0,o.changed_by_email=a.email||void 0}return o})}formatAuditEntry(e){const n=this.getActionDescription(e.action_type||"UPDATE"),r=this.getChangeDescription(e),s=new Date(e.changed_at).toLocaleString(),i=this.getUserDisplayName(e);return{action:n,description:r,timestamp:s,user:i}}getActionDescription(e){switch(e){case"INSERT":return"Created";case"UPDATE":return"Updated";case"DELETE":return"Deleted";default:return"Modified"}}getChangeDescription(e){if(e.action_type==="INSERT")return`New ${e.table_name} record created`;if(e.action_type==="DELETE")return`${e.table_name} record deleted`;if(e.changed_fields&&e.changed_fields.length>0){const n=e.changed_fields.length,r=e.changed_fields.join(", ");return`Updated ${n} field(s): ${r}`}return`${e.table_name} record updated`}getUserDisplayName(e){return e.changed_by?e.changed_by_name?e.changed_by_name:e.changed_by_email?e.changed_by_email.split("@")[0]:"Unknown User":"System"}}class E_{constructor(e){this.supabaseService=e}async getHealthCheck(){return this.supabaseService.callSupabaseFunction("health")}}const Je=()=>{const{role:t,supabaseService:e}=$e(),n=S.useMemo(()=>new y_(e,t),[e,t]),r=S.useMemo(()=>new S_(e,t),[e,t]),s=S.useMemo(()=>new __(e),[e]),i=S.useMemo(()=>new x_(e,t),[e,t]),o=S.useMemo(()=>new k_(e),[e]),a=S.useMemo(()=>new C_(e),[e]),l=S.useMemo(()=>new w_(e,a),[e,a]),u=S.useMemo(()=>new E_(e),[e]);return{supabaseService:e,todoService:n,taskService:l,noteService:r,reservationService:s,userService:i,listingService:o,auditService:a,healthCheckService:u}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function an(t,e){return typeof t=="function"?t(e):t}function Ge(t,e){return n=>{e.setState(r=>({...r,[t]:an(n,r[t])}))}}function Ao(t){return t instanceof Function}function j_(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function b_(t,e){const n=[],r=s=>{s.forEach(i=>{n.push(i);const o=e(i);o!=null&&o.length&&r(o)})};return r(t),n}function O(t,e,n){let r=[],s;return i=>{let o;n.key&&n.debug&&(o=Date.now());const a=t(i);if(!(a.length!==r.length||a.some((d,h)=>r[h]!==d)))return s;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),s=e(...a),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-o)*100)/100,h=Math.round((Date.now()-u)*100)/100,f=h/16,g=(p,w)=>{for(p=String(p);p.length<w;)p=" "+p;return p};console.info(`%c ${g(h,5)} /${g(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function D(t,e,n,r){return{debug:()=>{var s;return(s=t==null?void 0:t.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function R_(t,e,n,r){const s=()=>{var o;return(o=i.getValue())!=null?o:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:O(()=>[t,n,e,i],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),D(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(i,n,e,t)},{}),i}function T_(t,e,n,r){var s,i;const a={...t._getDefaultColumnDef(),...e},l=a.accessorKey;let u=(s=(i=a.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof a.header=="string"?a.header:void 0,d;if(a.accessorFn?d=a.accessorFn:l&&(l.includes(".")?d=f=>{let g=f;for(const w of l.split(".")){var p;g=(p=g)==null?void 0:p[w]}return g}:d=f=>f[a.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:d,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:O(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(g=>g.getFlatColumns())]},D(t.options,"debugColumns")),getLeafColumns:O(()=>[t._getOrderColumnsFn()],f=>{var g;if((g=h.columns)!=null&&g.length){let p=h.columns.flatMap(w=>w.getLeafColumns());return f(p)}return[h]},D(t.options,"debugColumns"))};for(const f of t._features)f.createColumn==null||f.createColumn(h,t);return h}const Ce="debugHeaders";function Md(t,e,n){var r;let i={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(i),o},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(i,t)}),i}const N_={createTable:t=>{t.getHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var i,o;const a=(i=r==null?void 0:r.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?i:[],l=(o=s==null?void 0:s.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?o:[],u=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(s!=null&&s.includes(h.id)));return vi(e,[...a,...u,...l],t)},D(t.options,Ce)),t.getCenterHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),vi(e,n,t,"center")),D(t.options,Ce)),t.getLeftHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return vi(e,i,t,"left")},D(t.options,Ce)),t.getRightHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return vi(e,i,t,"right")},D(t.options,Ce)),t.getFooterGroups=O(()=>[t.getHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getLeftFooterGroups=O(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getCenterFooterGroups=O(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getRightFooterGroups=O(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getFlatHeaders=O(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getLeftFlatHeaders=O(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getCenterFlatHeaders=O(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getRightFlatHeaders=O(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getCenterLeafHeaders=O(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),D(t.options,Ce)),t.getLeftLeafHeaders=O(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),D(t.options,Ce)),t.getRightLeafHeaders=O(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),D(t.options,Ce)),t.getLeafHeaders=O(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,i,o,a,l,u;return[...(s=(i=e[0])==null?void 0:i.headers)!=null?s:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(d=>d.getLeafHeaders()).flat()},D(t.options,Ce))}};function vi(t,e,n,r){var s,i;let o=0;const a=function(f,g){g===void 0&&(g=1),o=Math.max(o,g),f.filter(p=>p.getIsVisible()).forEach(p=>{var w;(w=p.columns)!=null&&w.length&&a(p.columns,g+1)},0)};a(t);let l=[];const u=(f,g)=>{const p={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},w=[];f.forEach(_=>{const v=[...w].reverse()[0],m=_.column.depth===p.depth;let y,x=!1;if(m&&_.column.parent?y=_.column.parent:(y=_.column,x=!0),v&&(v==null?void 0:v.column)===y)v.subHeaders.push(_);else{const k=Md(n,y,{id:[r,g,y.id,_==null?void 0:_.id].filter(Boolean).join("_"),isPlaceholder:x,placeholderId:x?`${w.filter(C=>C.column===y).length}`:void 0,depth:g,index:w.length});k.subHeaders.push(_),w.push(k)}p.headers.push(_),_.headerGroup=p}),l.push(p),g>0&&u(w,g-1)},d=e.map((f,g)=>Md(n,f,{depth:o,index:g}));u(d,o-1),l.reverse();const h=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let w=0,_=0,v=[0];p.subHeaders&&p.subHeaders.length?(v=[],h(p.subHeaders).forEach(y=>{let{colSpan:x,rowSpan:k}=y;w+=x,v.push(k)})):w=1;const m=Math.min(...v);return _=_+m,p.colSpan=w,p.rowSpan=_,{colSpan:w,rowSpan:_}});return h((s=(i=l[0])==null?void 0:i.headers)!=null?s:[]),l}const Zu=(t,e,n,r,s,i,o)=>{let a={id:e,index:r,original:n,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>b_(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?t.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const d=u.getParentRow();if(!d)break;l.push(d),u=d}return l.reverse()},getAllCells:O(()=>[t.getAllLeafColumns()],l=>l.map(u=>R_(t,a,u,u.id)),D(t.options,"debugRows")),_getAllCellsByColumnId:O(()=>[a.getAllCells()],l=>l.reduce((u,d)=>(u[d.column.id]=d,u),{}),D(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(a,t)}return a},P_={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},dp=(t,e,n)=>{var r,s;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};dp.autoRemove=t=>mt(t);const hp=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};hp.autoRemove=t=>mt(t);const fp=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};fp.autoRemove=t=>mt(t);const gp=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};gp.autoRemove=t=>mt(t);const pp=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});pp.autoRemove=t=>mt(t)||!(t!=null&&t.length);const mp=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});mp.autoRemove=t=>mt(t)||!(t!=null&&t.length);const vp=(t,e,n)=>t.getValue(e)===n;vp.autoRemove=t=>mt(t);const yp=(t,e,n)=>t.getValue(e)==n;yp.autoRemove=t=>mt(t);const ec=(t,e,n)=>{let[r,s]=n;const i=t.getValue(e);return i>=r&&i<=s};ec.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(s)?1/0:s;if(i>o){const a=i;i=o,o=a}return[i,o]};ec.autoRemove=t=>mt(t)||mt(t[0])&&mt(t[1]);const At={includesString:dp,includesStringSensitive:hp,equalsString:fp,arrIncludes:gp,arrIncludesAll:pp,arrIncludesSome:mp,equals:vp,weakEquals:yp,inNumberRange:ec};function mt(t){return t==null||t===""}const L_={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Ge("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?At.includesString:typeof r=="number"?At.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?At.equals:Array.isArray(r)?At.arrIncludes:At.weakEquals},t.getFilterFn=()=>{var n,r;return Ao(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:At[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),i=r==null?void 0:r.find(d=>d.id===t.id),o=an(n,i?i.value:void 0);if(Ud(s,o,t)){var a;return(a=r==null?void 0:r.filter(d=>d.id!==t.id))!=null?a:[]}const l={id:t.id,value:o};if(i){var u;return(u=r==null?void 0:r.map(d=>d.id===t.id?l:d))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var i;return(i=an(e,s))==null?void 0:i.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(Ud(l,o.value,a))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Ud(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const $_=(t,e,n)=>n.reduce((r,s)=>{const i=s.getValue(t);return r+(typeof i=="number"?i:0)},0),I_=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},A_=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},O_=(t,e,n)=>{let r,s;return n.forEach(i=>{const o=i.getValue(t);o!=null&&(r===void 0?o>=o&&(r=s=o):(r>o&&(r=o),s<o&&(s=o)))}),[r,s]},D_=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let i=s.getValue(t);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},F_=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!j_(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((i,o)=>i-o);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},M_=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),U_=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,z_=(t,e)=>e.length,_a={sum:$_,min:I_,max:A_,extent:O_,mean:D_,median:F_,unique:M_,uniqueCount:U_,count:z_},V_={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Ge("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return _a.sum;if(Object.prototype.toString.call(r)==="[object Date]")return _a.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Ao(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:_a[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function B_(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(i=>!e.includes(i.id));return n==="remove"?r:[...e.map(i=>t.find(o=>o.id===i)).filter(Boolean),...r]}const H_={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Ge("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=O(n=>[gs(e,n)],n=>n.findIndex(r=>r.id===t.id),D(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=gs(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=gs(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=O(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let i=[];if(!(e!=null&&e.length))i=s;else{const o=[...e],a=[...s];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(d=>d.id===l);u>-1&&i.push(a.splice(u,1)[0])}i=[...i,...a]}return B_(i,n,r)},D(t.options,"debugTable"))}},xa=()=>({left:[],right:[]}),q_={getInitialState:t=>({columnPinning:xa(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Ge("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var i,o;if(n==="right"){var a,l;return{left:((a=s==null?void 0:s.left)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var u,d;return{left:[...((u=s==null?void 0:s.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((d=s==null?void 0:s.right)!=null?d:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((i=s==null?void 0:s.left)!=null?i:[]).filter(h=>!(r!=null&&r.includes(h))),right:((o=s==null?void 0:s.right)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,i,o;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(a=>a.id),{left:r,right:s}=e.getState().columnPinning,i=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>s==null?void 0:s.includes(a));return i?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=O(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const i=[...r??[],...s??[]];return n.filter(o=>!i.includes(o.column.id))},D(e.options,"debugRows")),t.getLeftVisibleCells=O(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),D(e.options,"debugRows")),t.getRightVisibleCells=O(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),D(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?xa():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:xa())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=O(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),D(t.options,"debugColumns")),t.getRightLeafColumns=O(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),D(t.options,"debugColumns")),t.getCenterLeafColumns=O(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(i=>!s.includes(i.id))},D(t.options,"debugColumns"))}};function W_(t){return t||(typeof document<"u"?document:null)}const yi={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},ka=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),G_={getDefaultColumnDef:()=>yi,getInitialState:t=>({columnSizing:{},columnSizingInfo:ka(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ge("columnSizing",t),onColumnSizingInfoChange:Ge("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:yi.minSize,(r=i??t.columnDef.size)!=null?r:yi.size),(s=t.columnDef.maxSize)!=null?s:yi.maxSize)},t.getStart=O(n=>[n,gs(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,i)=>s+i.getSize(),0),D(e.options,"debugColumns")),t.getAfter=O(n=>[n,gs(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,i)=>s+i.getSize(),0),D(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;n+=(i=s.column.getSize())!=null?i:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r==null?void 0:r.getCanResize();return i=>{if(!r||!s||(i.persist==null||i.persist(),Ca(i)&&i.touches&&i.touches.length>1))return;const o=t.getSize(),a=t?t.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[r.id,r.getSize()]],l=Ca(i)?Math.round(i.touches[0].clientX):i.clientX,u={},d=(v,m)=>{typeof m=="number"&&(e.setColumnSizingInfo(y=>{var x,k;const C=e.options.columnResizeDirection==="rtl"?-1:1,E=(m-((x=y==null?void 0:y.startOffset)!=null?x:0))*C,j=Math.max(E/((k=y==null?void 0:y.startSize)!=null?k:0),-.999999);return y.columnSizingStart.forEach(P=>{let[T,z]=P;u[T]=Math.round(Math.max(z+z*j,0)*100)/100}),{...y,deltaOffset:E,deltaPercentage:j}}),(e.options.columnResizeMode==="onChange"||v==="end")&&e.setColumnSizing(y=>({...y,...u})))},h=v=>d("move",v),f=v=>{d("end",v),e.setColumnSizingInfo(m=>({...m,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=W_(n),p={moveHandler:v=>h(v.clientX),upHandler:v=>{g==null||g.removeEventListener("mousemove",p.moveHandler),g==null||g.removeEventListener("mouseup",p.upHandler),f(v.clientX)}},w={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),h(v.touches[0].clientX),!1),upHandler:v=>{var m;g==null||g.removeEventListener("touchmove",w.moveHandler),g==null||g.removeEventListener("touchend",w.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),f((m=v.touches[0])==null?void 0:m.clientX)}},_=K_()?{passive:!1}:!1;Ca(i)?(g==null||g.addEventListener("touchmove",w.moveHandler,_),g==null||g.addEventListener("touchend",w.upHandler,_)):(g==null||g.addEventListener("mousemove",p.moveHandler,_),g==null||g.addEventListener("mouseup",p.upHandler,_)),e.setColumnSizingInfo(v=>({...v,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?ka():(n=t.initialState.columnSizingInfo)!=null?n:ka())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let wi=null;function K_(){if(typeof wi=="boolean")return wi;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return wi=t,wi}function Ca(t){return t.type==="touchstart"}const Q_={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Ge("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(i=>i.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=O(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),D(e.options,"debugRows")),t.getVisibleCells=O(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],D(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>O(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),D(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function gs(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const J_={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Y_={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Ge("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>At.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Ao(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:At[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},X_={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Ge("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,i;t.setExpanded(r?{}:(s=(i=t.initialState)==null?void 0:i.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const o=i.split(".");r=Math.max(r,o.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[t.id]);let o={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(s=n)!=null?s:!i,!i&&n)return{...o,[t.id]:!0};if(i&&!n){const{[t.id]:a,...l}=o;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},Ul=0,zl=10,Ea=()=>({pageIndex:Ul,pageSize:zl}),Z_={getInitialState:t=>({...t,pagination:{...Ea(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:Ge("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=i=>an(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?Ea():(s=t.initialState.pagination)!=null?s:Ea())},t.setPageIndex=r=>{t.setPagination(s=>{let i=an(r,s.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...s,pageIndex:i}})},t.resetPageIndex=r=>{var s,i;t.setPageIndex(r?Ul:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Ul)},t.resetPageSize=r=>{var s,i;t.setPageSize(r?zl:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:zl)},t.setPageSize=r=>{t.setPagination(s=>{const i=Math.max(1,an(r,s.pageSize)),o=s.pageSize*s.pageIndex,a=Math.floor(o/i);return{...s,pageIndex:a,pageSize:i}})},t.setPageCount=r=>t.setPagination(s=>{var i;let o=an(r,(i=t.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),t.getPageOptions=O(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,o)=>o)),s},D(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},ja=()=>({top:[],bottom:[]}),ex={getInitialState:t=>({rowPinning:ja(),...t}),getDefaultOptions:t=>({onRowPinningChange:Ge("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const i=r?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=s?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,t.id,...i]);e.setRowPinning(l=>{var u,d;if(n==="bottom"){var h,f;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(w=>!(a!=null&&a.has(w))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(w=>!(a!=null&&a.has(w))),...Array.from(a)]}}if(n==="top"){var g,p;return{top:[...((g=l==null?void 0:l.top)!=null?g:[]).filter(w=>!(a!=null&&a.has(w))),...Array.from(a)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(w=>!(a!=null&&a.has(w)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(w=>!(a!=null&&a.has(w))),bottom:((d=l==null?void 0:l.bottom)!=null?d:[]).filter(w=>!(a!=null&&a.has(w)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,i=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>s==null?void 0:s.includes(a));return i?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const i=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=i==null?void 0:i.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?ja():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:ja())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(o=>{const a=t.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>e.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},t.getTopRows=O(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),D(t.options,"debugRows")),t.getBottomRows=O(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),D(t.options,"debugRows")),t.getCenterRows=O(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(i=>!s.has(i.id))},D(t.options,"debugRows"))}},tx={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Ge("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(i=>{Vl(s,i.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=O(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?ba(t,n):{rows:[],flatRows:[],rowsById:{}},D(t.options,"debugTable")),t.getFilteredSelectedRowModel=O(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?ba(t,n):{rows:[],flatRows:[],rowsById:{}},D(t.options,"debugTable")),t.getGroupedSelectedRowModel=O(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?ba(t,n):{rows:[],flatRows:[],rowsById:{}},D(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(i=>{var o;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return i;const a={...i};return Vl(a,t.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,e),a})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return tc(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return Bl(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return Bl(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Vl=(t,e,n,r,s)=>{var i;const o=s.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(a=>delete t[a]),o.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>Vl(t,a.id,n,r,s))};function ba(t,e){const n=t.getState().rowSelection,r=[],s={},i=function(o,a){return o.map(l=>{var u;const d=tc(l,n);if(d&&(r.push(l),s[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:i(l.subRows)}),d)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:s}}function tc(t,e){var n;return(n=e[t.id])!=null?n:!1}function Bl(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return t.subRows.forEach(o=>{if(!(i&&!s)&&(o.getCanSelect()&&(tc(o,e)?i=!0:s=!1),o.subRows&&o.subRows.length)){const a=Bl(o,e);a==="all"?i=!0:(a==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const Hl=/([0-9]+)/gm,nx=(t,e,n)=>wp(wn(t.getValue(n)).toLowerCase(),wn(e.getValue(n)).toLowerCase()),rx=(t,e,n)=>wp(wn(t.getValue(n)),wn(e.getValue(n))),sx=(t,e,n)=>nc(wn(t.getValue(n)).toLowerCase(),wn(e.getValue(n)).toLowerCase()),ix=(t,e,n)=>nc(wn(t.getValue(n)),wn(e.getValue(n))),ox=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},ax=(t,e,n)=>nc(t.getValue(n),e.getValue(n));function nc(t,e){return t===e?0:t>e?1:-1}function wn(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function wp(t,e){const n=t.split(Hl).filter(Boolean),r=e.split(Hl).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),i=r.shift(),o=parseInt(s,10),a=parseInt(i,10),l=[o,a].sort();if(isNaN(l[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const Qr={alphanumeric:nx,alphanumericCaseSensitive:rx,text:sx,textCaseSensitive:ix,datetime:ox,basic:ax},lx={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Ge("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const i=s==null?void 0:s.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return Qr.datetime;if(typeof i=="string"&&(r=!0,i.split(Hl).length>1))return Qr.alphanumeric}return r?Qr.text:Qr.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Ao(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Qr[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(o=>{const a=o==null?void 0:o.find(g=>g.id===t.id),l=o==null?void 0:o.findIndex(g=>g.id===t.id);let u=[],d,h=i?n:s==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&r?a?d="toggle":d="add":o!=null&&o.length&&l!==o.length-1?d="replace":a?d="toggle":d="replace",d==="toggle"&&(i||s||(d="remove")),d==="add"){var f;u=[...o,{id:t.id,desc:h}],u.splice(0,u.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=o.map(g=>g.id===t.id?{...g,desc:h}:g):d==="remove"?u=o.filter(g=>g.id!==t.id):u=[{id:t.id,desc:h}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const i=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},ux=[N_,Q_,H_,q_,P_,L_,J_,Y_,lx,V_,X_,Z_,ex,tx,G_];function cx(t){var e,n;const r=[...ux,...(e=t._features)!=null?e:[]];let s={_features:r};const i=s._features.reduce((f,g)=>Object.assign(f,g.getDefaultOptions==null?void 0:g.getDefaultOptions(s)),{}),o=f=>s.options.mergeOptions?s.options.mergeOptions(i,f):{...i,...f};let l={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(f=>{var g;l=(g=f.getInitialState==null?void 0:f.getInitialState(l))!=null?g:l});const u=[];let d=!1;const h={_features:r,options:{...i,...t},initialState:l,_queue:f=>{u.push(f),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{s.setState(s.initialState)},setOptions:f=>{const g=an(f,s.options);s.options=o(g)},getState:()=>s.options.state,setState:f=>{s.options.onStateChange==null||s.options.onStateChange(f)},_getRowId:(f,g,p)=>{var w;return(w=s.options.getRowId==null?void 0:s.options.getRowId(f,g,p))!=null?w:`${p?[p.id,g].join("."):g}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(f,g)=>{let p=(g?s.getPrePaginationRowModel():s.getRowModel()).rowsById[f];if(!p&&(p=s.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:O(()=>[s.options.defaultColumn],f=>{var g;return f=(g=f)!=null?g:{},{header:p=>{const w=p.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:p=>{var w,_;return(w=(_=p.renderValue())==null||_.toString==null?void 0:_.toString())!=null?w:null},...s._features.reduce((p,w)=>Object.assign(p,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...f}},D(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:O(()=>[s._getColumnDefs()],f=>{const g=function(p,w,_){return _===void 0&&(_=0),p.map(v=>{const m=T_(s,v,_,w),y=v;return m.columns=y.columns?g(y.columns,m,_+1):[],m})};return g(f)},D(t,"debugColumns")),getAllFlatColumns:O(()=>[s.getAllColumns()],f=>f.flatMap(g=>g.getFlatColumns()),D(t,"debugColumns")),_getAllFlatColumnsById:O(()=>[s.getAllFlatColumns()],f=>f.reduce((g,p)=>(g[p.id]=p,g),{}),D(t,"debugColumns")),getAllLeafColumns:O(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(f,g)=>{let p=f.flatMap(w=>w.getLeafColumns());return g(p)},D(t,"debugColumns")),getColumn:f=>s._getAllFlatColumnsById()[f]};Object.assign(s,h);for(let f=0;f<s._features.length;f++){const g=s._features[f];g==null||g.createTable==null||g.createTable(s)}return s}function dx(){return t=>O(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,i,o){i===void 0&&(i=0);const a=[];for(let u=0;u<s.length;u++){const d=Zu(t,t._getRowId(s[u],u,o),s[u],u,i,void 0,o==null?void 0:o.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,a.push(d),t.options.getSubRows){var l;d.originalSubRows=t.options.getSubRows(s[u],u),(l=d.originalSubRows)!=null&&l.length&&(d.subRows=r(d.originalSubRows,i+1,d))}}return a};return n.rows=r(e),n},D(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function hx(t){const e=[],n=r=>{var s;e.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function fx(t,e,n){return n.options.filterFromLeafRows?gx(t,e,n):px(t,e,n)}function gx(t,e,n){var r;const s=[],i={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const d=[];for(let f=0;f<l.length;f++){var h;let g=l[f];const p=Zu(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(p.columnFilters=g.columnFilters,(h=g.subRows)!=null&&h.length&&u<o){if(p.subRows=a(g.subRows,u+1),g=p,e(g)&&!p.subRows.length){d.push(g),i[g.id]=g,s.push(g);continue}if(e(g)||p.subRows.length){d.push(g),i[g.id]=g,s.push(g);continue}}else g=p,e(g)&&(d.push(g),i[g.id]=g,s.push(g))}return d};return{rows:a(t),flatRows:s,rowsById:i}}function px(t,e,n){var r;const s=[],i={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const d=[];for(let f=0;f<l.length;f++){let g=l[f];if(e(g)){var h;if((h=g.subRows)!=null&&h.length&&u<o){const w=Zu(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);w.subRows=a(g.subRows,u+1),g=w}d.push(g),s.push(g),i[g.id]=g}}return d};return{rows:a(t),flatRows:s,rowsById:i}}function mx(){return t=>O(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,r)=>{if(!e.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<e.flatRows.length;f++)e.flatRows[f].columnFilters={},e.flatRows[f].columnFiltersMeta={};return e}const s=[],i=[];(n??[]).forEach(f=>{var g;const p=t.getColumn(f.id);if(!p)return;const w=p.getFilterFn();w&&s.push({id:f.id,filterFn:w,resolvedValue:(g=w.resolveFilterValue==null?void 0:w.resolveFilterValue(f.value))!=null?g:f.value})});const o=(n??[]).map(f=>f.id),a=t.getGlobalFilterFn(),l=t.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(f=>{var g;i.push({id:f.id,filterFn:a,resolvedValue:(g=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?g:r})}));let u,d;for(let f=0;f<e.flatRows.length;f++){const g=e.flatRows[f];if(g.columnFilters={},s.length)for(let p=0;p<s.length;p++){u=s[p];const w=u.id;g.columnFilters[w]=u.filterFn(g,w,u.resolvedValue,_=>{g.columnFiltersMeta[w]=_})}if(i.length){for(let p=0;p<i.length;p++){d=i[p];const w=d.id;if(d.filterFn(g,w,d.resolvedValue,_=>{g.columnFiltersMeta[w]=_})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const h=f=>{for(let g=0;g<o.length;g++)if(f.columnFilters[o[g]]===!1)return!1;return!0};return fx(e.rows,h,t)},D(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function vx(t){return e=>O(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:i}=n;let{rows:o,flatRows:a,rowsById:l}=r;const u=s*i,d=u+s;o=o.slice(u,d);let h;e.options.paginateExpandedRows?h={rows:o,flatRows:a,rowsById:l}:h=hx({rows:o,flatRows:a,rowsById:l}),h.flatRows=[];const f=g=>{h.flatRows.push(g),g.subRows.length&&g.subRows.forEach(f)};return h.rows.forEach(f),h},D(e.options,"debugTable"))}function yx(){return t=>O(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],i=r.filter(l=>{var u;return(u=t.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};i.forEach(l=>{const u=t.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(d=>({...d}));return u.sort((d,h)=>{for(let g=0;g<i.length;g+=1){var f;const p=i[g],w=o[p.id],_=w.sortUndefined,v=(f=p==null?void 0:p.desc)!=null?f:!1;let m=0;if(_){const y=d.getValue(p.id),x=h.getValue(p.id),k=y===void 0,C=x===void 0;if(k||C){if(_==="first")return k?-1:1;if(_==="last")return k?1:-1;m=k&&C?0:k?_:-_}}if(m===0&&(m=w.sortingFn(d,h,p.id)),m!==0)return v&&(m*=-1),w.invertSorting&&(m*=-1),m}return d.index-h.index}),u.forEach(d=>{var h;s.push(d),(h=d.subRows)!=null&&h.length&&(d.subRows=a(d.subRows))}),u};return{rows:a(n.rows),flatRows:s,rowsById:n.rowsById}},D(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function zd(t,e){return t?wx(t)?S.createElement(t,e):t:null}function wx(t){return Sx(t)||typeof t=="function"||_x(t)}function Sx(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function _x(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function xx(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=S.useState(()=>({current:cx(e)})),[r,s]=S.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:o=>{s(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}const Ks=({data:t=[],columns:e=[],loading:n=!1,error:r=null,enablePagination:s=!0,serverSide:i=!1,onServerSideChange:o,totalCount:a=0,pageSize:l=10,pageIndex:u=0,sorting:d=[],globalFilter:h="",className:f=""})=>{const{t:g}=Y(),[p,w]=S.useState(d),[_,v]=S.useState(h),[m,y]=S.useState({pageIndex:u,pageSize:l}),x=C=>{i&&o&&o(C)},k=xx({data:t,columns:e,getCoreRowModel:dx(),getSortedRowModel:yx(),getPaginationRowModel:vx(),getFilteredRowModel:mx(),state:{sorting:p,globalFilter:_,pagination:m},onSortingChange:C=>{const E=typeof C=="function"?C(p):C;w(E),i&&x({sorting:E,pagination:m,globalFilter:_})},onGlobalFilterChange:C=>{if(v(C),i){const E={...m,pageIndex:0};y(E),x({sorting:p,pagination:E,globalFilter:C})}},onPaginationChange:C=>{const E=typeof C=="function"?C(m):C;y(E),i&&x({sorting:p,pagination:E,globalFilter:_})},manualSorting:i,manualFiltering:i,manualPagination:i,...i&&{rowCount:a}});return n?c.jsxs("div",{className:"data-table-loading",children:[c.jsx("div",{className:"loading-spinner"}),g("dataTable.loadingData")]}):r?c.jsxs("div",{className:"error",children:[c.jsx("h3",{className:"error-title",children:g("dataTable.failedToLoad")}),c.jsx("p",{className:"error-message",children:r})]}):c.jsxs("div",{className:`data-table ${f}`,children:[c.jsxs("div",{className:"data-table-controls",children:[c.jsx("div",{className:"search-container",children:c.jsx("input",{type:"text",placeholder:g("dataTable.searchPlaceholder"),value:_??"",onChange:C=>k.setGlobalFilter(C.target.value),className:"search-input"})}),c.jsx("div",{className:"table-info",children:i?c.jsx("span",{className:"table-stats",children:g("dataTable.showingEntries",{start:Math.min(m.pageIndex*m.pageSize+1,a),end:Math.min((m.pageIndex+1)*m.pageSize,a),total:a})}):c.jsx("span",{className:"table-stats",children:g("dataTable.showingCount",{count:k.getRowModel().rows.length,total:t.length})})})]}),c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"data-table-element",children:[c.jsx("thead",{children:k.getHeaderGroups().map(C=>c.jsx("tr",{children:C.headers.map(E=>c.jsx("th",{className:"data-table-header",children:E.isPlaceholder?null:c.jsxs("div",{className:`header-content ${E.column.getCanSort()?"sortable":""}`,onClick:E.column.getToggleSortingHandler(),children:[zd(E.column.columnDef.header,E.getContext()),E.column.getCanSort()&&c.jsx("span",{className:"sort-indicator",children:{asc:" ",desc:" "}[E.column.getIsSorted()]??" "})]})},E.id))},C.id))}),c.jsx("tbody",{children:k.getRowModel().rows.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:e.length,className:"empty-row",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:""}),c.jsx("h3",{className:"empty-state-title",children:g("dataTable.noData")}),c.jsx("p",{className:"empty-state-description",children:g(_?"dataTable.noResults":"dataTable.noDataAvailable")})]})})}):k.getRowModel().rows.map(C=>c.jsx("tr",{className:"data-table-row",children:C.getVisibleCells().map(E=>c.jsx("td",{className:"data-table-cell",children:zd(E.column.columnDef.cell,E.getContext())},E.id))},C.id))})]})}),s&&c.jsxs("div",{className:"pagination-controls",children:[c.jsx("div",{className:"pagination-info",children:c.jsx("span",{children:g("dataTable.pageInfo",{current:k.getState().pagination.pageIndex+1,total:k.getPageCount()})})}),c.jsxs("div",{className:"pagination-buttons",children:[c.jsx("button",{onClick:()=>k.setPageIndex(0),disabled:!k.getCanPreviousPage(),className:"pagination-btn",children:""}),c.jsx("button",{onClick:()=>k.previousPage(),disabled:!k.getCanPreviousPage(),className:"pagination-btn",children:""}),c.jsx("button",{onClick:()=>k.nextPage(),disabled:!k.getCanNextPage(),className:"pagination-btn",children:""}),c.jsx("button",{onClick:()=>k.setPageIndex(k.getPageCount()-1),disabled:!k.getCanNextPage(),className:"pagination-btn",children:""})]}),c.jsx("div",{className:"page-size-selector",children:c.jsx("select",{value:k.getState().pagination.pageSize,onChange:C=>{k.setPageSize(Number(C.target.value))},className:"page-size-select",children:[10,25,50,100].map(C=>c.jsx("option",{value:C,children:g("dataTable.showSize",{size:C})},C))})})]})]})};function kx(){const{reservationService:t}=Je(),{t:e}=Y(),[n,r]=S.useState([]),[s,i]=S.useState(!0),[o,a]=S.useState(null),[l,u]=S.useState(0),[d,h]=S.useState({pageIndex:0,pageSize:10}),[f,g]=S.useState([{id:"check_in",desc:!0}]),[p,w]=S.useState("");S.useEffect(()=>{_()},[d,f,p]);const _=async()=>{try{i(!0),a(null);const k=await t.getReservations({filters:{globalFilter:p},sorting:f,pagination:d});r(k.data),u(k.count)}catch(k){a(k instanceof Error?k.message:String(k)),console.error("Error fetching reservations:",k)}finally{i(!1)}},v=k=>{k.pagination&&h(k.pagination),k.sorting!==void 0&&g(k.sorting),k.globalFilter!==void 0&&w(k.globalFilter)},m=k=>k?new Date(k).toLocaleDateString():e("columns.na"),y=k=>k?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k):e("columns.na"),x=S.useMemo(()=>[{accessorKey:"id",header:e("columns.id"),cell:({getValue:k})=>{const C=k();return c.jsxs("span",{className:"reservation-id",title:C,children:[C.substring(0,8),"..."]})},enableSorting:!1},{accessorKey:"guest_name",header:e("reservations.guest"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"listing_id",header:e("reservations.property"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"check_in",header:e("reservations.checkIn"),cell:({getValue:k})=>m(k())},{accessorKey:"check_out",header:e("reservations.checkOut"),cell:({getValue:k})=>m(k())},{accessorKey:"nights",header:e("reservations.nights"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"party_size",header:e("reservations.guests"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"status",header:e("columns.status"),cell:({getValue:k})=>{const C=k();return c.jsx("span",{className:`status-badge status-${C}`,children:C})}},{accessorKey:"pricing_guest_total",header:e("reservations.total"),cell:({getValue:k})=>c.jsx("span",{className:"currency",children:y(k())})},{accessorKey:"pricing_host_payout",header:e("reservations.hostPayout"),cell:({getValue:k})=>c.jsx("span",{className:"currency",children:y(k())})}],[m,y,e]);return c.jsx("div",{className:"admin-reservations",children:c.jsx(Ks,{data:n,columns:x,loading:s,error:o,serverSide:!0,onServerSideChange:v,totalCount:l,pageSize:d.pageSize,pageIndex:d.pageIndex,sorting:f,globalFilter:p,className:"reservations-data-table"})})}const Sp=(t=!1)=>{const{user:e}=$e(),{taskService:n}=Je(),[r,s]=S.useState([]),[i,o]=S.useState(!0),[a,l]=S.useState(null),[u,d]=S.useState(0),[h,f]=S.useState({pageIndex:0,pageSize:10}),[g,p]=S.useState([{id:"scheduled_datetime",desc:!1}]),[w,_]=S.useState(""),v=S.useCallback(async()=>{if(!(t&&!(e!=null&&e.id)))try{o(!0),l(null);const C=await n.queryTasks({userId:t?e==null?void 0:e.id:null,pagination:h,sorting:g,globalFilter:w});s(C.tasks),d(C.totalCount)}catch(C){const E=C instanceof Error?C.message:String(C);l(E),console.error("Error fetching tasks:",C)}finally{o(!1)}},[n,t,h,g,w,e==null?void 0:e.id]);S.useEffect(()=>{v()},[v]);const m=S.useCallback(C=>{C.pagination&&f(C.pagination),C.sorting!==void 0&&p(C.sorting),C.globalFilter!==void 0&&_(C.globalFilter)},[]),y=S.useCallback(async(C,E)=>{try{await n.updateTaskStatus(C,E),await v()}catch(j){console.error("Error updating task status:",j);const P=j instanceof Error?j.message:String(j);throw l(P),j}},[n,v]),x=S.useCallback(async(C,E)=>{try{await n.updateTaskAssignment(C,E,e==null?void 0:e.id),await v()}catch(j){console.error("Error updating task assignment:",j);const P=j instanceof Error?j.message:String(j);throw l(P),j}},[n,v,e==null?void 0:e.id]),k=S.useCallback(async(C,E)=>{try{await n.updateTaskTimes(C,E),await v()}catch(j){console.error("Error updating task times:",j);const P=j instanceof Error?j.message:String(j);throw l(P),j}},[n,v]);return{tasks:r,loading:i,error:a,totalCount:u,pagination:h,sorting:g,globalFilter:w,handleServerSideChange:m,updateTaskStatus:y,updateTaskAssignment:x,updateTaskTimes:k,refetchTasks:v}},ln=t=>t?new Date(t).toLocaleString():"N/A",Cx=t=>t?new Date(t).toLocaleDateString():"N/A",Ex=t=>t?t.charAt(0).toUpperCase()+t.slice(1):"N/A",Ra=(t,e=8)=>t?`${t.substring(0,e)}...`:"N/A",jx=(t,e=100)=>t?t.length>e?`${t.substring(0,e)}...`:t:"N/A",bx=()=>{const{userService:t}=Je(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null);S.useEffect(()=>{a()},[]);const a=async()=>{try{s(!0),o(null);const l=await t.getCleaners();n(l)}catch(l){console.error("Error fetching cleaners:",l),o(l.message),n([])}finally{s(!1)}};return{cleaners:e,loading:r,error:i,refetch:a}};function _p({currentAssignedTo:t,taskId:e,onAssignmentChange:n,disabled:r=!1}){const{t:s}=Y(),{cleaners:i,loading:o}=bx(),[a,l]=S.useState(!1),u=async h=>{const f=h.target.value||null;if(f!==t){l(!0);try{await n(e,f)}catch(g){console.error("Assignment change failed:",g),h.target.value=t||""}finally{l(!1)}}},d=()=>{if(!t)return s("assignment.unassigned");const h=i.find(f=>f.id===t);return h?h.name:`${s("assignment.unknown")} (${t.substring(0,8)}...)`};return o?c.jsx("span",{className:"loading-text",children:s("assignment.loading")}):c.jsxs("select",{value:t||"",onChange:u,disabled:r||a,className:`assignment-dropdown ${a?"updating":""}`,title:`Currently assigned to: ${d()}`,children:[c.jsx("option",{value:"",children:s("assignment.unassigned")}),i.map(h=>c.jsx("option",{value:h.id,children:h.name},h.id))]})}const xp=()=>{const{t}=Y(),e=S.useMemo(()=>({id:{accessorKey:"id",header:t("columns.id"),cell:({getValue:a})=>{const l=a();return c.jsx("span",{className:"reservation-id",title:l,children:Ra(l)})},enableSorting:!1},title:{accessorKey:"title",header:t("columns.title"),cell:({getValue:a})=>a()||t("columns.na")},taskTitle:{accessorKey:"title",header:t("columns.task"),cell:({getValue:a})=>a()||t("columns.na")},taskType:{accessorKey:"task_type",header:t("columns.type"),cell:({getValue:a})=>Ex(a())},status:{accessorKey:"status",header:t("columns.status"),cell:({getValue:a})=>{const l=a();return c.jsx("span",{className:`status-badge status-${l}`,children:t(`statuses.${l}`)})}},description:{accessorKey:"description",header:t("columns.description"),cell:({getValue:a})=>jx(a())},listingId:{accessorKey:"listing_id",header:t("columns.listing"),cell:({getValue:a})=>a()||t("columns.na")},reservationId:{accessorKey:"reservation_id",header:t("columns.reservation"),cell:({getValue:a})=>{const l=a();return l?c.jsx("span",{className:"reservation-id",title:l,children:Ra(l)}):t("columns.na")}},scheduledDateTime:{accessorKey:"scheduled_datetime",header:t("columns.scheduled"),cell:({getValue:a})=>ln(a())},assignedTo:{accessorKey:"assigned_to",header:t("columns.assignedTo"),cell:({getValue:a})=>{const l=a();return l?c.jsx("span",{className:"reservation-id",title:l,children:Ra(l)}):t("statuses.unassigned")}},assignedAt:{accessorKey:"assigned_at",header:t("columns.assignedAt"),cell:({getValue:a})=>ln(a())},acceptedAt:{accessorKey:"accepted_at",header:t("columns.acceptedAt"),cell:({getValue:a})=>ln(a())},completedAt:{accessorKey:"completed_at",header:t("columns.completedAt"),cell:({getValue:a})=>ln(a())},createdAt:{accessorKey:"created_at",header:t("columns.created"),cell:({getValue:a})=>Cx(a())}}),[t]),n=S.useMemo(()=>a=>({accessorKey:"assigned_to",header:t("columns.assignedTo"),cell:({getValue:l,row:u})=>{const d=l(),h=u.original;return c.jsx(_p,{currentAssignedTo:d,taskId:h.id,onAssignmentChange:a})},enableSorting:!1}),[t]),r=S.useMemo(()=>()=>({accessorKey:"actions",header:t("tasks.actions"),cell:({row:a})=>{const l=a.original,u=()=>{window.location.href=`/tasks/${l.id}`};return c.jsx("div",{className:"task-actions",children:c.jsx("button",{className:"btn-view",onClick:u,children:t("columns.view")})})},enableSorting:!1}),[t]),s=S.useMemo(()=>(a,l)=>({accessorKey:"actions",header:t("tasks.actions"),cell:({row:u})=>{const d=u.original,h=d.status==="assigned",f=d.status==="accepted",g=d.status==="in_progress",p=d.status==="accepted",w=()=>{window.location.href=`/tasks/${d.id}`},_=async()=>{l?await l(d.id,{started_at:new Date().toISOString()}):a(d.id,"in_progress")},v=async()=>{l?await l(d.id,{finished_at:new Date().toISOString()}):a(d.id,"completed")};return c.jsxs("div",{className:"task-actions",children:[c.jsx("button",{className:"btn-view",onClick:w,children:t("columns.view")}),h&&c.jsx("button",{className:"btn-accept",onClick:()=>a(d.id,"accepted"),children:t("columns.accept")}),f&&c.jsx("button",{className:"btn-start",onClick:_,children:t("columns.start")}),g&&c.jsx("button",{className:"btn-complete",onClick:v,children:t("columns.complete")}),p&&c.jsx("button",{className:"btn-cancel",onClick:()=>a(d.id,"assigned"),children:t("columns.cancel")})]})},enableSorting:!1}),[t]),i=S.useMemo(()=>a=>{const l=e;return[l.id,l.title,l.taskType,l.status,l.listingId,l.reservationId,l.scheduledDateTime,n(a),l.assignedAt,l.acceptedAt,l.completedAt,l.createdAt,r()]},[e,n,r]),o=S.useMemo(()=>(a,l)=>{const u=e;return[u.scheduledDateTime,u.listingId,u.taskType,u.status,s(a,l)]},[e,s]);return{getAdminColumns:i,getCleanerColumns:o}};function Rx(){const{t}=Y(),{tasks:e,loading:n,error:r,totalCount:s,pagination:i,sorting:o,globalFilter:a,handleServerSideChange:l,updateTaskAssignment:u}=Sp(!1),{getAdminColumns:d}=xp(),h=S.useMemo(()=>d(u),[d,u]);return c.jsxs("div",{className:"admin-reservations",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{className:"admin-title",children:t("tasks.management")}),c.jsx("p",{className:"admin-stats",children:n?t("tasks.loading"):t("tasks.totalTasks",{count:s})})]}),c.jsx(Ks,{data:e,columns:h,loading:n,error:r,serverSide:!0,onServerSideChange:l,totalCount:s,pageSize:i.pageSize,pageIndex:i.pageIndex,sorting:o,globalFilter:a,className:"tasks-data-table"})]})}const Tx=["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina","Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)","Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas","Jabon de manos recargable","Bolsas basura bao","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador","Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa","Fibrn Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas","Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequea","Funda Edredon Pequea","Manta playa","Felpudo bao","Mantel","Repasadores (toalla cocina)"],Nx=(t,e=10)=>{if(!t||t.length<2)return[];const n=t.toLowerCase();return Tx.filter(r=>r.toLowerCase().includes(n)).slice(0,e)},ir={general:{name:"General",products:["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina"]},lavado_ropa:{name:"Lavado Ropa",products:["Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)"]},reposicion:{name:"Reposicin",products:["Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas"]},reposicion_bano:{name:"Reposicin Bao",products:["Jabon de manos recargable","Bolsas basura bao","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador"]},materiales_limpieza:{name:"Materiales Limpieza",products:["Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa"]},otros:{name:"Otros",products:["Fibrn Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas"]},sabanas:{name:"Sbanas",products:["Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequea","Funda Edredon Pequea","Manta playa","Felpudo bao","Mantel","Repasadores (toalla cocina)"]}};function kp({onTodoCreated:t,onCancel:e,attachedToType:n=null,attachedToId:r=null,title:s="Create New TODO"}){const{t:i}=Y(),{user:o}=$e(),{listingService:a,todoService:l}=Je(),[u,d]=S.useState({title:"",description:""}),[h,f]=S.useState(""),[g,p]=S.useState([]),[w,_]=S.useState([]),[v,m]=S.useState([]),[y,x]=S.useState(r||""),[k,C]=S.useState(!1),[E,j]=S.useState(!1),[P,T]=S.useState(null);S.useEffect(()=>{(async()=>{try{C(!0);const b=await a.getListingsForSelection();m(b)}catch(b){console.error("Error fetching listings:",b),T(i("todos.failedToLoad"))}finally{C(!1)}})()},[a]),S.useEffect(()=>{if(h.length>=2){const A=Nx(h,8);p(A)}else p([])},[h]);const z=A=>{const{name:b,value:N}=A.target;d(L=>({...L,[b]:N}))},F=A=>{x(A.target.value)},V=A=>{const b=w.find(N=>N.product_name===A);_(b?N=>N.map(L=>L.product_name===A?{...L,quantity:L.quantity+1}:L):N=>[...N,{product_name:A,quantity:1}]),f(""),p([])},oe=(A,b)=>{const N=parseInt(b);N<=0?Ye(A):_(L=>L.map(I=>I.product_name===A?{...I,quantity:N}:I))},Ye=A=>{_(b=>b.filter(N=>N.product_name!==A))},ae=async A=>{if(A.preventDefault(),!!o){j(!0),T(null);try{const b={created_by:o.id,title:u.title,description:u.description||null,products:w.length>0?w:null,attached_to_type:y?"listing":n,attached_to_id:y||r};await l.createTodo(b),t==null||t()}catch(b){console.error("Error creating todo:",b),T(b instanceof Error?b.message:i("notes.errorOccurred"))}finally{j(!1)}}};return c.jsxs("div",{className:"todo-form",children:[c.jsxs("div",{className:"todo-form-header",children:[c.jsx("h3",{children:s}),c.jsx("button",{type:"button",onClick:e,className:"btn-close",children:""})]}),P&&c.jsx("div",{className:"error-message",children:P}),c.jsxs("form",{onSubmit:ae,className:"todo-form-content",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"title",children:i("todos.title")}),c.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:z,required:!0,placeholder:i("todos.titlePlaceholder"),className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"listing",children:i("todos.assignToListing")}),c.jsxs("select",{id:"listing",name:"listing",value:y,onChange:F,className:"form-select",disabled:k,children:[c.jsx("option",{value:"",children:i("todos.noListingAssignment")}),v.map(A=>{var b;return c.jsxs("option",{value:A.id,children:[A.id," -"," ",((b=A.airbnb_payload)==null?void 0:b.formattedAddress)||i("forms.noAddress")]},A.id)})]}),k&&c.jsx("small",{children:i("todos.loadingListings")})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"product_search",children:i("todos.products")}),c.jsxs("div",{className:"product-search-container",children:[c.jsx("input",{type:"text",id:"product_search",value:h,onChange:A=>f(A.target.value),placeholder:i("todos.searchProductsPlaceholder"),className:"form-input"}),g.length>0&&c.jsx("div",{className:"search-results",children:g.map((A,b)=>c.jsx("button",{type:"button",onClick:()=>V(A),className:"search-result-item",children:A},b))})]}),w.length>0&&c.jsxs("div",{className:"selected-products",children:[c.jsx("h4",{children:i("todos.selectedProducts")}),w.map((A,b)=>c.jsxs("div",{className:"selected-product",children:[c.jsx("span",{className:"product-name",children:A.product_name}),c.jsxs("div",{className:"product-controls",children:[c.jsx("input",{type:"number",min:"1",value:A.quantity,onChange:N=>oe(A.product_name,N.target.value),className:"quantity-input"}),c.jsx("button",{type:"button",onClick:()=>Ye(A.product_name),className:"btn-remove",children:i("todos.remove")})]})]},b))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"description",children:i("todos.description")}),c.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:z,rows:3,placeholder:i("todos.detailsPlaceholder"),className:"form-textarea"})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:i("todos.cancel")}),c.jsx("button",{type:"submit",disabled:E,className:"btn-primary",children:E?i("todos.creating"):s})]})]})]})}function Px(){const{t}=Y(),{isAdmin:e}=$e(),{userService:n,todoService:r}=Je(),[s,i]=S.useState([]),[o,a]=S.useState(!0),[l,u]=S.useState(null),[d,h]=S.useState(!1),[f,g]=S.useState("all"),p=async()=>{try{a(!0),u(null);let k=await r.fetchTodos()||[];f==="done"?k=k.filter(C=>C.done):f==="pending"&&(k=k.filter(C=>!C.done)),i(k)}catch(x){console.error("Error fetching todos:",x),u(x instanceof Error?x.message:String(x))}finally{a(!1)}};S.useEffect(()=>{p()},[f]);const w=()=>{h(!1),p()},_=async(x,k)=>{try{const C=await n.getCurrentUser(),E=C==null?void 0:C.id;await r.updateTodoStatus(x,k,E),p()}catch(C){console.error("Error updating todo status:",C),u(C instanceof Error?C.message:String(C))}},v=async x=>{if(confirm(t("todos.deleteConfirm")))try{await r.deleteTodo(x),p()}catch(k){console.error("Error deleting todo:",k),u(k instanceof Error?k.message:String(k))}},m=x=>x?"#10b981":"#6b7280",y=[{accessorKey:"title",header:t("columns.title"),cell:({getValue:x})=>c.jsx("span",{className:"font-medium",children:x()})},{accessorKey:"done",header:t("columns.status"),cell:({getValue:x,row:k})=>{const C=x();return c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:E=>_(k.original.id,E.target.checked),className:"rounded"}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold text-white",style:{backgroundColor:m(C)},children:t(C?"todos.done":"todos.pending")})]})}},{accessorKey:"attached_to_type",header:t("todos.attachedTo"),cell:({getValue:x,row:k})=>{const C=x(),E=k.original.attached_to_id;return C?c.jsxs("span",{className:"text-sm",children:[C,": ",E]}):c.jsx("span",{className:"text-gray-500",children:t("todos.unattached")})}},{accessorKey:"created_at",header:t("columns.created"),cell:({getValue:x})=>c.jsx("span",{className:"text-sm",children:new Date(x()).toLocaleDateString()})},{id:"actions",header:t("columns.actions"),cell:({row:x})=>c.jsx("button",{onClick:()=>v(x.original.id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:t("todos.delete")})}];return e?c.jsxs("div",{className:"admin-todos",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{className:"admin-title",children:t("todos.allTodos")}),c.jsx("p",{className:"admin-stats",children:o?t("todos.loadingTodos"):t("todos.totalTodos",{count:s.length})})]}),c.jsxs("div",{className:"admin-controls",children:[c.jsxs("div",{className:"filter-controls",children:[c.jsx("label",{htmlFor:"status-filter",children:t("todos.filterByStatus")}),c.jsxs("select",{id:"status-filter",value:f,onChange:x=>g(x.target.value),className:"form-select",children:[c.jsx("option",{value:"all",children:t("todos.all")}),c.jsx("option",{value:"pending",children:t("todos.pending")}),c.jsx("option",{value:"done",children:t("todos.done")})]})]}),c.jsx("button",{onClick:()=>h(!0),className:"btn-primary",children:t("todos.createGeneral")})]}),l&&c.jsx("div",{className:"error-message",children:l}),d&&c.jsx("div",{className:"todo-form-overlay",children:c.jsx(kp,{title:t("todos.createGeneral"),onTodoCreated:w,onCancel:()=>h(!1)})}),c.jsx(Ks,{data:s,columns:y,loading:o,error:l,enablePagination:!0,className:"todos-data-table"})]}):c.jsx("div",{className:"admin-todos",children:c.jsx("div",{className:"error-message",children:t("todos.adminAccessRequired")})})}const Cp=(t,e)=>{const n=new Date(t),r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return i.getTime()===s.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):i.getTime()===s.getTime()-24*60*60*1e3?e("threads.yesterday"):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})},Lx=({thread:t,isSelected:e,lastMessage:n,onClick:r})=>{const{t:s}=Y(),i=()=>t.listing_id?s("threads.listingTitle",{id:t.listing_id}):t.reservation_id?s("threads.reservationTitle",{id:t.reservation_id}):s("threads.channelThread",{channel:t.channel}),o=()=>{const a=t.participants.length>0?t.participants.slice(0,2).join(", "):s("threads.noParticipants");return t.participants.length>2?s("threads.participantsWithMore",{participants:a,count:t.participants.length-2}):a};return c.jsxs("div",{className:`thread-item ${e?"selected":""}`,onClick:r,children:[c.jsx("div",{className:"thread-avatar",children:c.jsx("div",{className:"avatar-icon",children:t.channel==="whatsapp"?"":""})}),c.jsxs("div",{className:"thread-content",children:[c.jsxs("div",{className:"thread-header",children:[c.jsx("h3",{className:"thread-title",children:i()}),c.jsx("span",{className:"thread-time",children:Cp((n==null?void 0:n.created_at)||t.created_at,s)})]}),c.jsxs("div",{className:"thread-preview",children:[c.jsx("p",{className:"thread-subtitle",children:o()}),n&&c.jsx("p",{className:"last-message",children:n.message.length>50?`${n.message.substring(0,50)}...`:n.message})]})]})]})},$x=({threads:t,selectedThreadId:e,onThreadSelect:n})=>{const{t:r}=Y();return c.jsxs("div",{className:"thread-list",children:[c.jsx("div",{className:"thread-list-header",children:c.jsx("h2",{children:r("threads.title")})}),c.jsx("div",{className:"thread-list-content",children:t.length===0?c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:r("threads.noThreadsFound")})}):t.map(s=>c.jsx(Lx,{thread:s,isSelected:s.id===e,onClick:()=>n(s)},s.id))})]})},Ix=({selectedThread:t,onBack:e})=>{const{t:n}=Y();return t?c.jsxs("div",{className:"mobile-header",children:[c.jsx("button",{className:"mobile-back-btn",onClick:e,children:""}),c.jsxs("div",{className:"mobile-header-info",children:[c.jsx("h3",{className:"mobile-thread-title",children:t.listing_id?n("threads.listingTitle",{id:t.listing_id}):t.reservation_id?n("threads.reservationTitle",{id:t.reservation_id}):n("threads.channelThread",{channel:t.channel})}),c.jsx("p",{className:"mobile-thread-participants",children:t.participants.length>0?t.participants.slice(0,2).join(", "):n("threads.noParticipants")})]})]}):null},Ax=({messages:t,selectedThread:e})=>{const{t:n}=Y();return e?c.jsxs("div",{className:"message-area",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsxs("div",{className:"conversation-info",children:[c.jsx("h3",{children:e.listing_id?n("threads.listingTitle",{id:e.listing_id}):e.reservation_id?n("threads.reservationTitle",{id:e.reservation_id}):n("threads.channelThread",{channel:e.channel})}),c.jsxs("p",{className:"thread-id",children:["Thread ID: ",e.id]}),c.jsx("p",{className:"participants",children:e.participants.length>0?e.participants.join(", "):n("threads.noParticipants")})]}),c.jsx("div",{className:"conversation-actions",children:c.jsx("div",{className:"channel-badge",children:e.channel})})]}),c.jsx("div",{className:"messages-container",children:t.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:n("threads.noMessages")})}):c.jsx("div",{className:"messages-list",children:t.map((r,s)=>{var a,l;const i=s===0||((a=t[s-1])==null?void 0:a.from_id)!==r.from_id,o=((l=r.from_id)==null?void 0:l.toString())==="464431353";return c.jsxs("div",{className:`message-group ${o?"maddie-message":"user-message"}`,children:[i&&c.jsx("div",{className:"message-sender",children:r.from_id}),c.jsxs("div",{className:"message-bubble",children:[c.jsx("div",{className:"message-content",children:r.message}),c.jsx("div",{className:"message-timestamp",children:Cp(r.created_at,n)})]})]},r.id)})})})]}):c.jsx("div",{className:"message-area empty",children:c.jsxs("div",{className:"empty-conversation",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:n("threads.selectThread")}),c.jsx("p",{children:n("threads.selectThreadDescription")})]})})},Ox=()=>{const{t}=Y(),{supabaseService:e}=$e(),[n,r]=S.useState([]),[s,i]=S.useState([]),[o,a]=S.useState(),[l,u]=S.useState(!0),[d,h]=S.useState(null),[f,g]=S.useState(null),[p,w]=S.useState(!1),[_,v]=S.useState(null),[m,y]=S.useState(!1),[x,k]=S.useState(!1),[C,E]=S.useState(300),[j,P]=S.useState(400),[T,z]=S.useState(""),[F,V]=S.useState(""),[oe,Ye]=S.useState(!1),[ae,A]=S.useState([]),[b,N]=S.useState(!1),[L,I]=S.useState(!1);S.useEffect(()=>{G()},[]),S.useEffect(()=>{o?ze(o.id):i([])},[o]);const G=async()=>{if(e.getSupabaseClient())try{u(!0);const{data:q,error:we}=await e.getSupabaseClient().from("threads").select("*").order("created_at",{ascending:!1});if(we)throw we;r(q||[])}catch(q){console.error("Error loading threads:",q),h(t("threads.errorLoadingThreads"))}finally{u(!1)}},ze=async q=>{if(e.getSupabaseClient())try{const{data:we,error:Se}=await e.getSupabaseClient().from("messages").select("*").eq("thread_id",q).order("created_at",{ascending:!0});if(Se)throw Se;i(we||[])}catch(we){console.error("Error loading messages:",we),h(t("threads.errorLoadingMessages"))}},Ie=q=>{a(q),g(null),window.innerWidth<=768&&Ye(!0)},yt=()=>{Ye(!1),a(void 0)},Xe=async(q,we)=>{if(!(!e||!o))try{w(!0),h(null),v({status:"starting",message:"Initializing..."});const Se=crypto.randomUUID();console.log("Generated session ID:",Se),console.log("Creating channel subscription...");const _e=e.getSupabaseClient().channel(`bot-status-${Se}`).on("broadcast",{event:"status-update"},wt=>{console.log("Received status update:",wt.payload);const Op=wt.payload;v(Op)}).subscribe();for(;_e.state!=="joined";)console.log("Waiting for channel to join..."),await new Promise(wt=>setTimeout(wt,500));console.log("Channel created:",_e),await new Promise(wt=>setTimeout(wt,500));const{data:at,error:Pt}=await e.getSupabaseClient().auth.getSession();if(Pt)throw Pt;const Gt=at.session;if(!(Gt!=null&&Gt.access_token))throw new Error("No valid authentication session found");const Kt=await fetch(`${Ol()}/functions/v1/maddie-bot-response`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Gt.access_token}`},body:JSON.stringify({listing_id:q,reservation_id:we,session_id:Se,thread_id:o.id,arbitrary_context:T,message_draft:F})});if(!Kt.ok){const wt=await Kt.text();throw new Error(`HTTP ${Kt.status}: ${wt}`)}const En=await Kt.json();if(!En.success)throw new Error(En.error||"Failed to draft message");const Do={status:"completed",message:"Response generated successfully",progress:100,timestamp:new Date().toISOString()};v(Do),g(En.response),_e.unsubscribe()}catch(Se){console.error("Error drafting message:",Se),h(t("threads.errorDraftingMessage"));const _e={status:"error",message:"Failed to generate response",timestamp:new Date().toISOString()};v(_e)}finally{w(!1)}},Gn=async()=>{if(!(!e||!o))try{N(!0),I(!0);const{data:q,error:we}=await e.getSupabaseClient().auth.getSession();if(we)throw we;const Se=q.session;if(!(Se!=null&&Se.access_token))throw new Error("No valid authentication session found");const _e=await fetch(`${Ol()}/functions/v1/conversation-directions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Se.access_token}`},body:JSON.stringify({thread_id:o.id})});if(!_e.ok){const Pt=await _e.text();throw new Error(`HTTP ${_e.status}: ${Pt}`)}const at=await _e.json();if(!at.success)throw new Error(at.error||"Failed to load conversation directions");A(at.directions||[])}catch(q){console.error("Error loading conversation directions:",q),h(t("threads.errorLoadingDirections"))}finally{N(!1)}},$p=q=>{z(q.context),I(!1)},Ip=q=>{y(!0),q.preventDefault()},Ap=q=>{k(!0),q.preventDefault()};return S.useEffect(()=>{const q=Se=>{if(m){const _e=document.querySelector(".threads-split-container");if(!_e)return;const at=_e.getBoundingClientRect(),Pt=at.height,Gt=Se.clientY-at.top,Kt=Pt-Gt,En=60,Do=Pt*.5,wt=Math.max(En,Math.min(Do,Kt));E(wt)}if(x){const _e=document.querySelector(".threads-view");if(!_e)return;const at=_e.getBoundingClientRect(),Pt=Se.clientX-at.left,Gt=300,Kt=at.width*.6,En=Math.max(Gt,Math.min(Kt,Pt));P(En)}},we=()=>{y(!1),k(!1)};return(m||x)&&(document.addEventListener("mousemove",q),document.addEventListener("mouseup",we)),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",we)}},[m,x]),l?c.jsxs("div",{className:"threads-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("span",{children:t("threads.loading")})]}):d?c.jsx("div",{className:"threads-error",children:c.jsxs("div",{className:"error-message",children:[c.jsx("h3",{children:t("threads.error")}),c.jsx("p",{children:d}),c.jsx("button",{onClick:G,className:"retry-button",children:t("threads.retry")})]})}):c.jsxs("div",{className:`threads-view ${m?"dragging-horizontal":""} ${x?"dragging-vertical":""} ${oe?"mobile-conversation":""}`,children:[c.jsx("div",{className:"threads-sidebar",style:{width:`${j}px`},children:c.jsx($x,{threads:n,selectedThreadId:o==null?void 0:o.id,onThreadSelect:Ie})}),c.jsx("div",{className:"vertical-resize-handle",onMouseDown:Ap}),c.jsxs("div",{className:"threads-main",children:[c.jsx(Ix,{selectedThread:o,onBack:yt}),c.jsxs("div",{className:"threads-split-container",children:[c.jsx("div",{className:"threads-chat-area",children:c.jsx(Ax,{messages:s,selectedThread:o,onDraftMessage:Xe})}),c.jsx("div",{className:"resize-handle",onMouseDown:Ip}),c.jsx("div",{className:"threads-drafting-area",style:{height:`${C}px`},children:c.jsx("div",{className:"drafting-panel",children:c.jsxs("div",{className:"drafting-form",children:[c.jsxs("div",{className:"context-row",children:[c.jsxs("div",{className:"context-group",children:[c.jsxs("label",{htmlFor:"context-input",className:"form-label",children:[t("threads.contextLabel"),c.jsx("button",{onClick:Gn,disabled:b||!o,className:"directions-btn",type:"button",title:"Get conversation direction suggestions",children:b?"":""})]}),c.jsx("textarea",{id:"context-input",className:"context-textarea",rows:1,value:T,onChange:q=>z(q.target.value),disabled:p})]}),c.jsx("div",{className:"button-group",children:c.jsxs("button",{onClick:()=>Xe(o==null?void 0:o.listing_id,o==null?void 0:o.reservation_id),disabled:p||!o,className:"submit-btn",children:[c.jsx("span",{className:"btn-icon",children:""}),c.jsx("span",{className:"btn-text",children:p?(_==null?void 0:_.message)||t("threads.draftingMessage"):t("threads.generateResponse")})]})})]}),L&&c.jsxs("div",{className:"directions-panel",children:[c.jsxs("div",{className:"directions-header",children:[c.jsx("h4",{children:"Conversation Direction Suggestions"}),c.jsx("button",{onClick:()=>I(!1),className:"close-directions-btn",children:""})]}),c.jsx("div",{className:"directions-list",children:b?c.jsxs("div",{className:"directions-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("span",{children:"Loading suggestions..."})]}):ae.length>0?ae.map((q,we)=>c.jsxs("div",{className:`direction-item direction-${q.category}`,onClick:()=>$p(q),children:[c.jsxs("div",{className:"direction-header",children:[c.jsx("h5",{className:"direction-title",children:q.title}),c.jsx("span",{className:"direction-category",children:q.category})]}),c.jsx("p",{className:"direction-description",children:q.description}),c.jsx("div",{className:"direction-context",children:c.jsxs("small",{children:["Context: ",q.context]})})]},we)):c.jsx("div",{className:"no-directions",children:c.jsx("p",{children:"No direction suggestions available"})})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"draft-input",className:"form-label",children:t("threads.messageLabel")}),c.jsx("textarea",{id:"draft-input",value:f||F,onChange:q=>{f||V(q.target.value)},className:"draft-textarea",disabled:p})]})]})})})]})]})]})};function Dx(){const{t}=Y(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null),{listingService:a}=Je();S.useEffect(()=>{(async()=>{try{s(!0),o(null);const d=await a.fetchListings();n(d||[])}catch(d){console.error("Error fetching listings:",d),o(d.message)}finally{s(!1)}})()},[a]);const l=S.useMemo(()=>[{accessorKey:"id",header:t("columns.id"),cell:({getValue:u})=>{const d=u();return c.jsx(Ve,{to:`/listing/${d}`,className:"listing-id-link",children:d})}},{accessorKey:"airbnb_payload.formattedAddress",header:t("listings.address"),cell:({getValue:u})=>u()||t("columns.na")}],[t]);return c.jsxs("div",{className:"listings",children:[c.jsxs("div",{className:"listings-header",children:[c.jsx("h1",{className:"listings-title",children:t("listings.title")}),c.jsx("p",{className:"listings-stats",children:r?t("listings.loadingListings"):t("listings.totalListings",{count:e.length})})]}),c.jsx(Ks,{data:e,columns:l,loading:r,error:i,enablePagination:!0,className:"listings-data-table"})]})}function Fx(){const{user:t}=$e(),{t:e}=Y(),{tasks:n,loading:r,error:s,totalCount:i,pagination:o,sorting:a,globalFilter:l,handleServerSideChange:u,updateTaskStatus:d,updateTaskTimes:h}=Sp(!0),{getCleanerColumns:f}=xp(),g=S.useMemo(()=>f(d,h),[f,d,h]);return t?c.jsxs("div",{className:"cleaner-tasks",children:[c.jsxs("div",{className:"cleaner-header",children:[c.jsx("h1",{className:"cleaner-title",children:e("tasks.myTasks")}),c.jsx("p",{className:"cleaner-stats",children:r?e("tasks.loading"):e("tasks.totalTasks",{count:i})})]}),c.jsx(Ks,{data:n,columns:g,loading:r,error:s,serverSide:!0,onServerSideChange:u,totalCount:i,pageSize:o.pageSize,pageIndex:o.pageIndex,sorting:a,globalFilter:l,className:"cleaner-tasks-data-table"})]}):c.jsx("div",{className:"cleaner-tasks",children:c.jsx("div",{className:"error-message",children:e("tasks.loginRequired")})})}function Mx({taskId:t,taskService:e}){const{t:n}=Y(),[r,s]=S.useState([]),[i,o]=S.useState(!0),[a,l]=S.useState(null);S.useEffect(()=>{t&&e&&(async()=>{try{o(!0);const w=await e.getTaskAuditTrail(t);s(w)}catch(w){const _=w instanceof Error?w.message:String(w);l(_)}finally{o(!1)}})()},[t,e]);const u=p=>{switch(p){case"INSERT":return"";case"UPDATE":return"";case"DELETE":return"";default:return""}},d=p=>{switch(p){case"INSERT":return"audit-insert";case"UPDATE":return"audit-update";case"DELETE":return"audit-delete";default:return"audit-default"}},h=(p,w,_)=>!_||_.length===0?null:_.map(v=>{const m=p==null?void 0:p[v],y=w==null?void 0:w[v];return{field:v,oldValue:m!==void 0?m:null,newValue:y!==void 0?y:null}}).filter(v=>v.oldValue!==v.newValue),f=p=>{if(p==null)return"null";if(typeof p=="string"&&p.includes("T"))try{return ln(p)}catch{return p}return String(p)},g=p=>{var w;return p.changed_by?p.changed_by_name?p.changed_by_name:p.changed_by_email?((w=p.changed_by_email)==null?void 0:w.split("@")[0])||"":n("audit.unknownUser"):n("audit.system")};return i?c.jsxs("div",{className:"audit-trail-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:n("audit.loading")})]}):a?c.jsx("div",{className:"audit-trail-error",children:c.jsx("p",{className:"error-message",children:a})}):r.length===0?c.jsx("div",{className:"audit-trail-empty",children:c.jsx("p",{children:n("audit.noHistory")})}):c.jsx("div",{className:"audit-trail-list",children:r.map((p,w)=>{var _;return c.jsxs("div",{className:`audit-entry ${d(p.action_type||"UPDATE")}`,children:[c.jsxs("div",{className:"audit-entry-header",children:[c.jsx("div",{className:"audit-entry-icon",children:u(p.action_type||"UPDATE")}),c.jsxs("div",{className:"audit-entry-info",children:[c.jsxs("div",{className:"audit-entry-action",children:[c.jsx("span",{className:"action-type",children:p.action_type}),c.jsx("span",{className:"action-time",children:ln(p.changed_at)})]}),c.jsxs("div",{className:"audit-entry-user",children:[n("audit.by")," ",g(p)]})]})]}),c.jsxs("div",{className:"audit-entry-content",children:[p.action_type==="UPDATE"&&p.old_values&&p.new_values&&c.jsxs("div",{className:"audit-entry-values",children:[c.jsxs("span",{className:"values-label",children:[n("audit.valuesChanged"),":"]}),c.jsx("div",{className:"values-list",children:(_=h(p.old_values,p.new_values,p.changed_fields))==null?void 0:_.map((v,m)=>c.jsxs("div",{className:"value-item",children:[c.jsxs("span",{className:"field-name",children:[v.field,":"]}),c.jsxs("span",{className:"value-change",children:[c.jsx("span",{className:"old-value",children:f(v.oldValue)}),c.jsx("span",{className:"arrow",children:""}),c.jsx("span",{className:"new-value",children:f(v.newValue)})]})]},m))})]}),p.context&&Object.keys(p.context).length>0&&c.jsxs("div",{className:"audit-entry-context",children:[c.jsxs("span",{className:"context-label",children:[n("audit.context"),":"]}),c.jsx("pre",{className:"context-data",children:JSON.stringify(p.context,null,2)})]})]}),w<r.length-1&&c.jsx("div",{className:"audit-entry-connector"})]},p.id)})})}function Ep({attachedToType:t=null,attachedToId:e=null,title:n="TODOs",showCreateButton:r=!0,showAttachmentInfo:s=!1}){const{isAdmin:i,isCleaner:o}=$e(),{userService:a,todoService:l}=Je(),[u,d]=S.useState([]),[h,f]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(!1),v=async()=>{try{f(!0),p(null);const E=await l.fetchTodos({attachedToType:t,attachedToId:e,isDone:!1});d(E||[])}catch(E){console.error("Error fetching todos:",E);const j=E instanceof Error?E.message:String(E);p(j)}finally{f(!1)}};S.useEffect(()=>{v()},[t,e]);const m=()=>{_(!1),v()},y=async(E,j)=>{try{const P=await a.getCurrentUser(),T=P==null?void 0:P.id;await l.updateTodoStatus(E,j,T),v()}catch(P){console.error("Error updating todo status:",P),p(P instanceof Error?P.message:String(P))}},x=async E=>{if(i&&confirm("Are you sure you want to delete this TODO?"))try{await l.deleteTodo(E),v()}catch(j){console.error("Error deleting todo:",j),p(j instanceof Error?j.message:String(j))}},k=E=>E?"status-completed":"status-pending",C=E=>E.attached_to_type?`${E.attached_to_type}: ${E.attached_to_id}`:"Unattached";return h?c.jsx("div",{className:"todo-list",children:c.jsx("div",{className:"loading",children:"Loading TODOs..."})}):c.jsxs("div",{className:"todo-list",children:[c.jsxs("div",{className:"todos-header",children:[c.jsx("h3",{children:n}),r&&(i||o)&&!w&&c.jsx("button",{onClick:()=>_(!0),className:"btn-primary btn-sm",children:"Add TODO"})]}),g&&c.jsx("div",{className:"error-message",children:g}),w&&c.jsx("div",{className:"todo-form-overlay",children:c.jsx(kp,{attachedToType:t,attachedToId:e,onTodoCreated:m,onCancel:()=>_(!1)})}),u.length===0?c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:"No TODOs found."})}):c.jsx("div",{className:"todos-list",children:u.map(E=>c.jsxs("div",{className:`todo-item ${k(E.done)}`,children:[c.jsxs("div",{className:"todo-header",children:[c.jsxs("div",{className:"todo-title-row",children:[c.jsx("h4",{className:"todo-title",children:E.title}),c.jsx("div",{className:"todo-badges",children:c.jsx("span",{className:`status-badge ${k(E.done)}`,children:E.done?"Done":"Pending"})})]}),c.jsxs("div",{className:"todo-meta",children:[c.jsxs("span",{className:"todo-date",children:["Created: ",new Date(E.created_at).toLocaleDateString()]}),E.completed_at&&c.jsxs("span",{className:"todo-completed-date",children:["Completed:"," ",new Date(E.completed_at).toLocaleDateString()]}),s&&c.jsxs("span",{className:"todo-attachment",children:["Attached to: ",C(E)]})]})]}),E.description&&c.jsx("p",{className:"todo-description",children:E.description}),E.products&&E.products.length>0&&c.jsxs("div",{className:"todo-products",children:[c.jsx("h5",{children:"Products needed:"}),c.jsx("ul",{className:"products-list",children:E.products.map((j,P)=>c.jsxs("li",{className:"product-item",children:[c.jsx("span",{className:"product-name",children:j.product_name}),c.jsxs("span",{className:"product-quantity",children:["",j.quantity]})]},P))})]}),c.jsxs("div",{className:"todo-actions",children:[i&&c.jsxs("label",{className:"todo-checkbox",children:[c.jsx("input",{type:"checkbox",checked:E.done,onChange:j=>y(E.id,j.target.checked)}),"Mark as done"]}),i&&c.jsx("button",{onClick:()=>x(E.id),className:"btn-danger btn-sm",children:"Delete"})]})]},E.id))})]})}function Ux({listingId:t,onTodoUpdated:e}){const{user:n}=$e(),{todoService:r}=Je(),[s,i]=S.useState(null),[o,a]=S.useState(!1),[l,u]=S.useState(null),d=S.useCallback(async()=>{try{a(!0),u(null);const p=await r.fetchTodos({attachedToType:"listing",attachedToId:t,titlePattern:"[AUTO]",isDone:!1}),w=(p==null?void 0:p[0])||null;i(w)}catch(p){console.error("Error fetching auto-generated todo:",p),u(p instanceof Error?p.message:String(p))}finally{a(!1)}},[t,r]);S.useEffect(()=>{d()},[d]);const h=S.useCallback(async p=>{if(!s)return;const w=await r.updateTodo(s.id,{products:p});i(w)},[s,r]),f=S.useCallback(async p=>{if(!(n!=null&&n.id))return;const w=await r.createTodo({title:`[AUTO] Product Replenishment ${new Date().toLocaleDateString()}`,description:"Auto-generated todo for product replenishment",products:p,attached_to_type:"listing",attached_to_id:t});i(w),e==null||e(w)},[n==null?void 0:n.id,r,t,e]),g=S.useCallback(async p=>{if(n!=null&&n.id)try{u(null),s?await h(p):p.length>0&&await f(p)}catch(w){const _=w instanceof Error?w.message:String(w);throw console.error("Error saving auto-generated todo:",_),u(_),w}},[n==null?void 0:n.id,s,h,f]);return{existingTodo:s,loading:o,error:l,saveAutoTodo:g,refetchAutoTodo:d}}function zx({existingTodo:t,onQuantitiesChange:e}){const[n,r]=S.useState({}),[s,i]=S.useState(new Set);S.useEffect(()=>{const d={};Object.values(ir).forEach(h=>{h.products.forEach(f=>{d[f]=0})}),r(d)},[]),S.useEffect(()=>{t!=null&&t.products&&r(d=>{const h={...d};return t.products.forEach(f=>{h[f.product_name]=f.quantity}),h})},[t]);const o=S.useCallback(d=>Object.entries(d).filter(([,h])=>h>0).map(([h,f])=>({product_name:h,quantity:f})),[]),a=S.useCallback(async(d,h)=>{const f=o(d);try{await e(f)}catch(g){console.error("Error saving quantities:",g)}finally{h&&i(g=>{const p=new Set(g);return p.delete(h),p})}},[e,o]),l=S.useCallback(d=>{const h=window.scrollY;i(f=>new Set(f).add(d)),r(f=>{const g={...f,[d]:(f[d]||0)+1};return a(g,d),g}),setTimeout(()=>window.scrollTo(0,h),0)},[a]),u=S.useCallback(d=>{const h=window.scrollY;i(f=>new Set(f).add(d)),r(f=>{const g=Math.max(0,(f[d]||0)-1),p={...f,[d]:g};return a(p,d),p}),setTimeout(()=>window.scrollTo(0,h),0)},[a]);return{quantities:n,updatingProducts:s,incrementQuantity:l,decrementQuantity:u}}function Vx({listingId:t,onTodoUpdated:e}){const{existingTodo:n,loading:r,error:s,saveAutoTodo:i}=Ux({listingId:t,onTodoUpdated:e}),{quantities:o,updatingProducts:a,incrementQuantity:l,decrementQuantity:u}=zx({existingTodo:n,onQuantitiesChange:i}),[d,h]=S.useState(new Set(Object.keys(ir))),f=S.useMemo(()=>{const _=[];return Object.entries(ir).forEach(([v,m])=>{m.products.forEach(y=>{_.push({name:y,category:v})})}),_},[]),g=_=>{h(v=>{const m=new Set(v);return m.has(_)?m.delete(_):m.add(_),m})},p=S.useMemo(()=>f.filter(_=>d.has(_.category)),[f,d]),w=S.useMemo(()=>{const _={};return Object.keys(ir).forEach(v=>{_[v]=[]}),p.forEach(v=>{const m=v.category;_[m]||(_[m]=[]),_[m].push(v)}),_},[p]);return r?c.jsx("div",{className:"todo-creation-helper",children:c.jsx("div",{className:"loading",children:"Loading products..."})}):c.jsxs("div",{className:"todo-creation-helper",children:[s&&c.jsx("div",{className:"error-message",children:s}),c.jsx("div",{className:"category-toggles",children:c.jsx("div",{className:"category-checkboxes",children:Object.entries(ir).map(([_,v])=>c.jsxs("label",{className:"category-checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:d.has(_),onChange:()=>g(_),className:"category-checkbox"}),c.jsx("span",{className:"category-checkbox-text",children:v.name})]},_))})}),c.jsx("div",{className:"products-by-category",children:Object.entries(w).map(([_,v])=>c.jsxs("div",{className:"category-section",children:[c.jsx("h4",{className:"category-title",children:(()=>{const m=ir[_];return m?m.name:_})()}),c.jsx("div",{className:"products-grid",children:v.map(m=>c.jsxs("div",{className:`product-block ${(o[m.name]||0)>0?"has-quantity":""} ${a.has(m.name)?"updating":""}`,children:[a.has(m.name)&&c.jsx("div",{className:"product-loading-overlay",children:c.jsx("div",{className:"spinner"})}),c.jsx("div",{className:"product-name",children:m.name}),c.jsxs("div",{className:"product-controls",children:[c.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),u(m.name)},className:"quantity-btn quantity-btn-minus",disabled:(o[m.name]||0)===0||a.has(m.name),children:"-"}),c.jsx("span",{className:"quantity-display",children:o[m.name]||0}),c.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),l(m.name)},className:"quantity-btn quantity-btn-plus",disabled:a.has(m.name),children:"+"})]})]},m.name))})]},_))}),n&&c.jsx("div",{className:"existing-todo-info",children:c.jsx("span",{className:"info-text",children:"Auto-generated todo exists for this listing"})})]})}function ql({attachedToType:t=null,attachedToId:e=null,title:n="Notes",showAttachmentInfo:r=!1}){const{t:s}=Y(),{user:i,isAdmin:o,isCleaner:a}=$e(),{noteService:l}=Je(),[u,d]=S.useState([]),[h,f]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(""),[v,m]=S.useState(!1),y=S.useRef(null),x=S.useRef(null),k=async()=>{try{f(!0),p(null);const F=await l.fetchNotes({attachedToType:t,attachedToId:e});d(F||[])}catch(F){console.error("Error fetching notes:",F);const V=F instanceof Error?F.message:String(F);p(V)}finally{f(!1)}},C=()=>{var F;(F=y.current)==null||F.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{k()},[t,e]);const E=async F=>{if(!(!i||!F.trim())){m(!0),p(null);try{const V={content:F.trim(),attached_to_type:t,attached_to_id:e};await l.createNote(V),_(""),k(),setTimeout(()=>C(),100)}catch(V){console.error("Error creating note:",V),p(V instanceof Error?V.message:String(V))}finally{m(!1)}}},j=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),w.trim()&&!v&&E(w))},P=F=>{F.preventDefault(),w.trim()&&!v&&E(w)},T=async F=>{if(o&&confirm(s("notes.deleteConfirm")))try{await l.deleteNote(F),k()}catch(V){console.error("Error deleting note:",V),p(V instanceof Error?V.message:String(V))}},z=F=>F.attached_to_type?`${F.attached_to_type}: ${F.attached_to_id}`:s("todos.unattached");return h?c.jsx("div",{className:"note-list",children:c.jsx("div",{className:"loading",children:s("notes.loadingNotes")})}):c.jsxs("div",{className:"chat-container",children:[n&&c.jsx("div",{className:"chat-header",children:c.jsx("h3",{children:n})}),c.jsxs("div",{className:"chat-messages",children:[h&&c.jsx("div",{className:"chat-loading",children:s("notes.loadingNotes")}),!h&&u.length===0&&c.jsx("div",{className:"chat-empty",children:c.jsx("p",{children:s("notes.noNotesYet")})}),u.map(F=>c.jsxs("div",{className:"chat-message",children:[c.jsxs("div",{className:"message-header",children:[c.jsx("span",{className:"message-author",children:F.user_name||F.user_email||s("notes.unknownUser")}),c.jsx("span",{className:"message-time",children:new Date(F.created_at).toLocaleString()}),o&&c.jsx("button",{onClick:()=>T(F.id),className:"message-delete",title:s("notes.deleteNote"),children:""})]}),c.jsx("div",{className:"message-content",children:F.content}),r&&c.jsxs("div",{className:"message-attachment",children:[s("notes.attachedToLabel"),z(F)]})]},F.id)),c.jsx("div",{ref:y})]}),(o||a)&&c.jsxs("div",{className:"chat-input-container",children:[g&&c.jsx("div",{className:"chat-error",children:g}),c.jsxs("form",{onSubmit:P,className:"chat-input-form",children:[c.jsx("textarea",{ref:x,value:w,onChange:F=>_(F.target.value),onKeyPress:j,placeholder:s("notes.typePlaceholder"),className:"chat-input",rows:1,disabled:v}),c.jsx("button",{type:"submit",disabled:!w.trim()||v,className:"chat-send-btn",children:s(v?"notes.sending":"notes.send")})]})]})]})}function Bx(){const{id:t}=Rg(),e=Bu(),{user:n,isAdmin:r}=$e(),{taskService:s}=Je(),{t:i}=Y(),[o,a]=S.useState(null),[l,u]=S.useState(!0),[d,h]=S.useState(null),[f,g]=S.useState(null),[p,w]=S.useState(""),[_,v]=S.useState(!1),[m,y]=S.useState("chat"),[x,k]=S.useState(!0),[C,E]=S.useState(!0),[j,P]=S.useState(!0),T=S.useCallback(async()=>{try{if(!t)return;u(!0);const N=await s.getTask(t);a(N)}catch(N){h(N.message)}finally{u(!1)}},[s,t]);S.useEffect(()=>{n&&t&&T()},[T,n,t]);const z=()=>{e(-1)},F=N=>`status-badge status-${N}`,V=S.useCallback(async(N,L)=>{if(o)try{if(u(!0),N==="started_at"||N==="finished_at"){const I={[N]:L};await s.updateTaskTimes(o.id,I)}else await s.updateTaskField(o.id,N,L);await T(),g(null)}catch(I){h(I.message)}finally{u(!1)}},[s,o==null?void 0:o.id,T]),oe=S.useCallback(async N=>{if(o)try{u(!0),await s.updateTaskStatus(o.id,N),await T()}catch(L){h(L.message)}finally{u(!1)}},[s,o==null?void 0:o.id,T]),Ye=S.useCallback(async(N,L)=>{try{u(!0),await s.updateTaskAssignment(N,L,n==null?void 0:n.id),await T()}catch(I){throw h(I.message),I}finally{u(!1)}},[s,n==null?void 0:n.id,T]),ae=S.useCallback((N,L)=>{g(N),w(L||"")},[]),A=S.useCallback(()=>{g(null),w("")},[]),b=({field:N,value:L,type:I="text"})=>{if(!o)return null;const G=f===N,Ie=!(N==="started_at"||N==="finished_at")||o.status!=="assigned"&&o.status!=="unassigned",yt=o.status!=="admin_accepted"||r;return G?c.jsxs("div",{className:"time-edit-container",children:[c.jsx("input",{type:I,value:p,onChange:Xe=>w(Xe.target.value),className:"time-input"}),c.jsx("button",{onClick:()=>V(N,p),className:"btn-save",disabled:l,children:i("columns.save")}),c.jsx("button",{onClick:A,className:"btn-cancel",disabled:l,children:i("columns.cancel")})]}):c.jsxs("div",{className:"time-display-container",children:[c.jsx("span",{children:L?ln(L):i("tasks.notSet")}),Ie&&yt&&c.jsx("button",{onClick:()=>ae(N,L?L.slice(0,16):""),className:"btn-edit",disabled:l,children:i("columns.edit")})]})};return l?c.jsx("div",{className:"task-detail",children:c.jsxs("div",{className:"task-detail-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:i("tasks.loadingDetails")})]})}):d?c.jsx("div",{className:"task-detail",children:c.jsxs("div",{className:"task-detail-error",children:[c.jsx("h2",{children:i("tasks.errorLoading")}),c.jsx("p",{children:d}),c.jsx("button",{onClick:z,className:"btn-primary",children:i("tasks.goBack")})]})}):o?c.jsxs("div",{className:"task-detail",children:[c.jsxs("div",{className:"task-detail-header",children:[c.jsxs("button",{onClick:z,className:"btn-back",children:[" ",i("tasks.back")]}),c.jsx("h1",{className:"task-detail-title",children:i("tasks.details")})]}),c.jsxs("div",{className:"task-detail-content",children:[c.jsxs("div",{className:"task-detail-section",children:[c.jsx("h2",{className:"section-title",children:i("tasks.information")}),c.jsxs("div",{className:"task-info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.titleLabel")}),c.jsx("span",{children:o.title||i("columns.na")})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.statusLabel")}),c.jsx("span",{className:F(o.status),children:o.status})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.scheduledLabel")}),c.jsx("span",{children:ln(o.scheduled_datetime)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.listingIdLabel")}),c.jsx("span",{children:o.listing_id||i("columns.na")})]}),r&&c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.assignedToLabel")}),c.jsx(_p,{currentAssignedTo:o.assigned_to,taskId:o.id,onAssignmentChange:Ye,disabled:l})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.startedAtLabel")}),c.jsx(b,{field:"started_at",value:o.started_at,type:"datetime-local"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.finishedAtLabel")}),c.jsx(b,{field:"finished_at",value:o.finished_at,type:"datetime-local"})]})]})]}),c.jsx("div",{className:"task-detail-section",children:c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{className:"section-title",children:i("tasks.actions")}),c.jsxs("div",{className:"section-actions",children:[o.status==="admin_accepted"&&c.jsxs("div",{className:"admin-accepted-notice",children:[c.jsx("span",{className:"status-badge status-admin_accepted",children:i("tasks.acceptedByAdmin")}),c.jsx("p",{children:i("tasks.noFurtherEdits")})]}),o.status==="assigned"&&c.jsx("button",{onClick:()=>oe("accepted"),className:"btn-start",disabled:l,children:i("tasks.acceptTask")}),o.status==="accepted"&&c.jsx("button",{onClick:()=>V("started_at",new Date().toISOString()),className:"btn-start",disabled:l,children:i("tasks.startTask")}),o.status==="in_progress"&&!o.finished_at&&c.jsx("button",{onClick:()=>V("finished_at",new Date().toISOString()),className:"btn-end",disabled:l,children:i("tasks.completeTask")}),r&&o.status==="completed"&&c.jsx("div",{className:"admin-review-actions",children:c.jsx("button",{onClick:()=>oe("admin_accepted"),className:"btn-accept",disabled:l,children:i("tasks.acceptCompletion")})})]})]})}),c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>P(!j),className:"section-toggle","aria-label":i(j?"collapse_section":"expand_section"),children:[c.jsx("span",{className:`expand-icon ${j?"expanded":""}`,children:""}),c.jsx("span",{className:"section-title",children:"Product Replenishment Helper"})]})}),j&&o.listing_id&&c.jsx(Vx,{listingId:o.listing_id})]}),o.listing_id&&c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>E(!C),className:"section-toggle","aria-label":i(C?"collapse_section":"expand_section"),children:[c.jsx("span",{className:`expand-icon ${C?"expanded":""}`,children:""}),c.jsx("span",{className:"section-title",children:i("listings.listingTodos")})]})}),C&&c.jsx(Ep,{attachedToType:"listing",attachedToId:o.listing_id,title:""})]}),c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>k(!x),className:"section-toggle","aria-label":i(x?"collapse_section":"expand_section"),children:[c.jsx("span",{className:`expand-icon ${x?"expanded":""}`,children:""}),c.jsx("span",{className:"section-title",children:i("listings.listingChat")})]})}),x&&c.jsxs("div",{className:"tabbed-container",children:[c.jsx("div",{className:"tab-header",children:c.jsxs("div",{className:"tab-nav",children:[c.jsx("button",{className:`tab-button ${m==="chat"?"active":""}`,onClick:()=>y("chat"),children:i("taskDetail.taskTab")}),c.jsx("button",{className:`tab-button ${m==="listing"?"active":""}`,onClick:()=>y("listing"),children:i("taskDetail.listingTab")})]})}),c.jsx("div",{className:"tab-content",children:m==="chat"?c.jsx(ql,{attachedToType:"task",attachedToId:o.id,title:""}):o.listing_id&&c.jsx(ql,{attachedToType:"listing",attachedToId:o.listing_id,title:""})})]})]}),r&&c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>v(!_),className:"section-toggle","aria-label":i(_?"taskDetail.collapseAudit":"taskDetail.expandAudit"),children:[c.jsx("span",{className:`toggle-icon ${_?"expanded":"collapsed"}`,children:""}),c.jsx("h2",{className:"section-title",children:i("audit.history")})]})}),_&&c.jsx("div",{className:"audit-trail-container",children:c.jsx(Mx,{taskId:o.id,taskService:s})})]})]})]}):c.jsx("div",{className:"task-detail",children:c.jsxs("div",{className:"task-detail-not-found",children:[c.jsx("h2",{children:i("tasks.notFound")}),c.jsx("p",{children:i("tasks.notFoundDescription")}),c.jsx("button",{onClick:z,className:"btn-primary",children:i("tasks.goBack")})]})})}function Hx(){const{t}=Y(),{id:e}=Rg(),{listingService:n}=Je(),[r,s]=S.useState(null),[i,o]=S.useState(!0),[a,l]=S.useState(null);if(S.useEffect(()=>{(async()=>{if(e)try{o(!0),l(null);const h=await n.fetchListing(e);s(h)}catch(h){console.error("Error fetching listing:",h),l(h instanceof Error?h.message:String(h))}finally{o(!1)}})()},[e,n]),i)return c.jsxs("div",{className:"listing-detail-loading",children:[c.jsx("div",{className:"loading-spinner","data-testid":"loading-spinner"}),t("listings.loadingDetails")]});if(a)return c.jsxs("div",{className:"error",children:[c.jsx("h3",{className:"error-title",children:t("listings.failedToLoad")}),c.jsx("p",{className:"error-message",children:a})]});if(!r)return c.jsxs("div",{className:"error",children:[c.jsx("h3",{className:"error-title",children:t("listings.notFound")}),c.jsxs("p",{className:"error-message",children:['The listing with ID "',e,'" was not found.']})]});const u=r.airbnb_payload||{};return c.jsxs("div",{className:"listing-detail",children:[c.jsxs("div",{className:"listing-detail-header",children:[c.jsx("h1",{className:"listing-detail-title",children:t("listings.details")}),c.jsxs("div",{className:"listing-detail-subtitle",children:["ID: ",r.id]})]}),c.jsxs("div",{className:"listing-detail-content",children:[c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.basicInformation")}),c.jsxs("div",{className:"listing-detail-grid",children:[c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.listingId"),":"]}),c.jsx("span",{children:r.id})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.airbnbId"),":"]}),c.jsx("span",{children:r.airbnb_id})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.address"),":"]}),c.jsx("span",{children:u.formattedAddress||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.propertyType"),":"]}),c.jsx("span",{children:u.propertyType||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.roomType"),":"]}),c.jsx("span",{children:u.roomType||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.bedrooms"),":"]}),c.jsx("span",{children:u.bedrooms||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.bathrooms"),":"]}),c.jsx("span",{children:u.bathrooms||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.maxGuests"),":"]}),c.jsx("span",{children:u.maxGuests||t("columns.na")})]})]})]}),c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.dates")}),c.jsxs("div",{className:"listing-detail-grid",children:[c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.created"),":"]}),c.jsx("span",{children:new Date(r.created_at).toLocaleString()})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.updated"),":"]}),c.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]})]})]}),u.amenities&&u.amenities.length>0&&c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.amenities")}),c.jsx("div",{className:"amenities-list",children:u.amenities.map((d,h)=>c.jsx("span",{className:"amenity-tag",children:d},h))})]}),c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.listingTodos")}),c.jsx(Ep,{attachedToType:"listing",attachedToId:r.id,title:""})]}),c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.listingChat")}),c.jsx(ql,{attachedToType:"listing",attachedToId:r.id,title:""})]})]})]})}const qx=()=>{var u,d,h;const{t}=Y(),[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,o]=S.useState(null),{user:a}=$e(),{healthCheckService:l}=Je();return S.useEffect(()=>{a&&(async()=>{try{s(!0),o(null);const g=await l.getHealthCheck();n(g)}catch(g){const p=g instanceof Error?g.message:"An error occurred";p.includes("Authentication failed")?o(t("auth.authenticationFailed")):p.includes("No valid authentication session")?o(t("auth.noAccessToken")):o(p),console.error("Health check error:",g)}finally{s(!1)}})()},[a,l,t]),r?c.jsxs("div",{className:"loading",children:[c.jsx("div",{className:"loading-spinner"}),t("healthCheck.loading")]}):i?c.jsxs("div",{className:"error",children:[c.jsx("h2",{className:"error-title",children:t("healthCheck.failed")}),c.jsx("p",{className:"error-message",children:i}),i.includes("Authentication failed")&&c.jsx("button",{onClick:()=>window.location.reload(),className:"google-signin-btn",style:{marginTop:"var(--space-4)"},children:t("healthCheck.reloadPage")})]}):c.jsxs("div",{className:"admin-reservations",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{className:"admin-title",children:t("healthCheck.title")}),c.jsx("p",{className:"admin-stats",children:t("healthCheck.monitoring")})]}),e&&c.jsxs("div",{style:{padding:"var(--space-6)"},children:[c.jsxs("div",{style:{display:"grid",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.overallStatus")}),c.jsx("span",{className:`status-badge status-${e.status==="ok"?"confirmed":"cancelled"}`,children:e.status==="ok"?t("healthCheck.healthy"):t("healthCheck.error")})]}),e.user&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.authenticatedUser")}),c.jsx("span",{style:{color:"var(--graphite-900)"},children:e.user.email})]}),((u=e.checks)==null?void 0:u.database)&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.database")}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("span",{className:`status-badge status-${e.checks.database.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.database.status==="ok"?t("healthCheck.connected"):t("healthCheck.error")}),e.checks.database.version&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--graphite-500)",marginTop:"var(--space-1)"},children:[t("system.version"),e.checks.database.version]})]})]}),((d=e.checks)==null?void 0:d.supabase)&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.supabaseApi")}),c.jsx("span",{className:`status-badge status-${e.checks.supabase.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.supabase.status==="ok"?t("healthCheck.connected"):t("healthCheck.error")})]}),((h=e.checks)==null?void 0:h.environment)&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.environment")}),c.jsx("span",{className:`status-badge status-${e.checks.environment.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.environment.status==="ok"?t("healthCheck.configured"):t("healthCheck.error")})]})]}),c.jsxs("div",{style:{textAlign:"center",color:"var(--graphite-500)",fontSize:"0.875rem",fontStyle:"italic",paddingTop:"var(--space-4)",borderTop:"1px solid var(--graphite-200)"},children:[t("system.lastChecked"),new Date(e.timestamp).toLocaleString()]})]})]})},Wx=()=>{const{currentLanguage:t,changeLanguage:e}=p_(),n=[{code:"en",name:"English",flag:""},{code:"es",name:"Espaol",flag:""}];return c.jsx("div",{className:"language-selector",children:c.jsx("select",{value:t,onChange:r=>e(r.target.value),className:"language-select",children:n.map(r=>c.jsxs("option",{value:r.code,children:[r.flag," ",r.name]},r.code))})})},_t=()=>{const t=kn(),{user:e,signOut:n,isAdmin:r,isCleaner:s}=$e(),{t:i}=Y(),[o,a]=S.useState(!1),l=S.useRef(null),u=async()=>{try{await n()}catch(f){console.error("Sign out error:",f)}},d=()=>{a(!o)},h=()=>{a(!1)};return S.useEffect(()=>{const f=g=>{l.current&&!l.current.contains(g.target)&&h()};return o?(document.addEventListener("mousedown",f),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("mousedown",f),document.body.style.overflow="unset"}},[o]),c.jsxs(c.Fragment,{children:[c.jsx("nav",{className:"navigation",children:c.jsx("div",{className:"nav-content",children:c.jsxs("div",{className:"mobile-nav",children:[c.jsxs("div",{className:"mobile-nav-left",children:[c.jsxs("button",{className:"hamburger-btn",onClick:d,"aria-label":"Toggle navigation menu",children:[c.jsx("span",{className:`hamburger-line ${o?"open":""}`}),c.jsx("span",{className:`hamburger-line ${o?"open":""}`}),c.jsx("span",{className:`hamburger-line ${o?"open":""}`})]}),c.jsx(Ve,{to:"/",className:"nav-brand",children:i("navigation.brand")})]}),c.jsx("div",{className:"mobile-nav-right",children:c.jsx("span",{className:"mobile-user-email",children:e==null?void 0:e.email})})]})})}),o&&c.jsx("div",{className:"mobile-overlay",onClick:h}),c.jsxs("div",{ref:l,className:`sidebar ${o?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsxs("div",{className:"sidebar-user-info",children:[c.jsx(Ve,{to:"/",className:"sidebar-brand",children:i("navigation.brand")}),c.jsx("span",{className:"sidebar-user-email",children:e==null?void 0:e.email}),c.jsxs("div",{className:"sidebar-badges",children:[r&&c.jsx("span",{className:"admin-badge",children:i("navigation.adminBadge")}),s&&c.jsx("span",{className:"cleaner-badge",children:i("navigation.cleanerBadge")})]})]}),c.jsx("button",{className:"close-btn",onClick:h,"aria-label":"Close navigation menu",children:""})]}),c.jsxs("div",{className:"sidebar-nav-links",children:[c.jsx(Ve,{to:"/",className:`sidebar-nav-link ${t.pathname==="/"?"active":""}`,onClick:h,children:i("navigation.dashboard")}),r&&c.jsx(Ve,{to:"/healthcheck",className:`sidebar-nav-link ${t.pathname==="/healthcheck"?"active":""}`,onClick:h,children:i("navigation.healthCheck")}),r&&c.jsx(Ve,{to:"/listings",className:`sidebar-nav-link ${t.pathname==="/listings"?"active":""}`,onClick:h,children:i("navigation.listings")}),r&&c.jsxs(c.Fragment,{children:[c.jsx(Ve,{to:"/admin",className:`sidebar-nav-link ${t.pathname==="/admin"?"active":""}`,onClick:h,children:i("navigation.reservations")}),c.jsx(Ve,{to:"/admin/tasks",className:`sidebar-nav-link ${t.pathname==="/admin/tasks"?"active":""}`,onClick:h,children:i("navigation.tasks")}),c.jsx(Ve,{to:"/admin/todos",className:`sidebar-nav-link ${t.pathname==="/admin/todos"?"active":""}`,onClick:h,children:i("navigation.todos")}),c.jsx(Ve,{to:"/admin/threads",className:`sidebar-nav-link ${t.pathname==="/admin/threads"?"active":""}`,onClick:h,children:i("navigation.threads")})]}),s&&c.jsx(Ve,{to:"/cleaner/tasks",className:`sidebar-nav-link ${t.pathname==="/cleaner/tasks"?"active":""}`,onClick:h,children:i("navigation.myTasks")})]}),c.jsxs("div",{className:"sidebar-footer",children:[c.jsx(Wx,{}),c.jsx("button",{onClick:u,className:"sidebar-signout-btn",children:i("navigation.signOut")})]})]})]})},Gx=()=>{const{t}=Y(),[e,n]=S.useState(!0),[r,s]=S.useState(null),i=Bu(),{userService:o}=Je();return S.useEffect(()=>{(async()=>{try{console.log("Handling auth callbackz..."),console.log("URL:",window.location.href);const l=new URLSearchParams(window.location.hash.substring(1));l.has("access_token")||l.has("error")?(console.log("Auth parameters found in URL, processing..."),await o.getCurrentSession()?(console.log("Auth successful, redirecting to home..."),i("/",{replace:!0})):(console.log("Session not ready, waiting..."),setTimeout(()=>{i("/",{replace:!0})},1e3))):(console.log("No auth parameters, checking existing session..."),await o.getCurrentSession()?(console.log("Existing session found, redirecting to home..."),i("/",{replace:!0})):(console.log("No session found, redirecting to login..."),i("/",{replace:!0})))}catch(l){console.error("Unexpected error in auth callback:",l),s(t("auth.unexpectedError")),n(!1)}})()},[o,i,t]),e?c.jsx("div",{className:"container",children:c.jsx("div",{className:"card",children:c.jsxs("div",{className:"loading",children:[c.jsx("h2",{children:t("auth.authenticating")}),c.jsx("p",{children:t("auth.pleaseWait")})]})})}):r?c.jsx("div",{className:"container",children:c.jsx("div",{className:"card",children:c.jsxs("div",{className:"error",children:[c.jsx("h2",{children:t("auth.authenticationError")}),c.jsx("p",{children:r}),c.jsx("button",{onClick:()=>i("/",{replace:!0}),children:t("auth.returnToLogin")})]})})}):null},Kx=()=>{const{t}=Y();return c.jsxs("div",{className:"content-container",children:[c.jsxs("div",{className:"page-header",children:[c.jsx("h1",{className:"page-title",children:t("dashboard.title")}),c.jsx("p",{className:"page-subtitle",children:t("dashboard.welcome")})]}),c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:""}),c.jsx("h2",{className:"empty-state-title",children:t("dashboard.comingSoon")}),c.jsx("p",{className:"empty-state-description",children:t("dashboard.comingSoonDescription")})]})]})},M=t=>typeof t=="string",Jr=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},Vd=t=>t==null?"":""+t,Qx=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},Jx=/###/g,Bd=t=>t&&t.indexOf("###")>-1?t.replace(Jx,"."):t,Hd=t=>!t||M(t),ps=(t,e,n)=>{const r=M(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Hd(t))return{};const i=Bd(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return Hd(t)?{}:{obj:t,k:Bd(r[s])}},qd=(t,e,n)=>{const{obj:r,k:s}=ps(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=ps(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=ps(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},Yx=(t,e,n,r)=>{const{obj:s,k:i}=ps(t,e,Object);s[i]=s[i]||[],s[i].push(n)},lo=(t,e)=>{const{obj:n,k:r}=ps(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Xx=(t,e,n)=>{const r=lo(t,n);return r!==void 0?r:lo(e,n)},jp=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?M(t[r])||t[r]instanceof String||M(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):jp(t[r],e[r],n):t[r]=e[r]);return t},er=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Zx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ek=t=>M(t)?t.replace(/[&<>"'\/]/g,e=>Zx[e]):t;class tk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const nk=[" ",",","?","!",";"],rk=new tk(20),sk=(t,e,n)=>{e=e||"",n=n||"";const r=nk.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=rk.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},Wl=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},As=t=>t==null?void 0:t.replace("_","-"),ik={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class uo{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||ik,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(M(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new uo(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new uo(this.logger,e)}}var Et=new uo;class Oo{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s.apply(s,[e,...n])})}}class Wd extends Oo{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){var u,d;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):M(r)&&i?a.push(...r.split(i)):a.push(r)));const l=lo(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!M(r)?l:Wl((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[n],r,i)}addResource(e,n,r,s,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),qd(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const i in r)(M(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=lo(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?jp(l,r,i):l={...l,...r},qd(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var bp={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{var o;e=((o=this.processors[i])==null?void 0:o.process(e,n,r,s))??e}),e}};const Rp=Symbol("i18next/PATH_KEY");function ok(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===Rp?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Gl(t,e){const{[Rp]:n}=t(ok());return n.join((e==null?void 0:e.keySeparator)??".")}const Gd={},Kd=t=>!M(t)&&typeof t!="boolean"&&typeof t!="number";class co extends Oo{constructor(e,n={}){super(),Qx(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Et.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);return(s==null?void 0:s.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!sk(e,r,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:M(i)?[i]:i};const u=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(s)}return{key:e,namespaces:M(i)?[i]:i}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Gl(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],s),u=l[l.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return f?i?{res:`${u}${d}${a}`,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:a;const g=this.resolve(e,s);let p=g==null?void 0:g.res;const w=(g==null?void 0:g.usedKey)||a,_=(g==null?void 0:g.exactUsedKey)||a,v=["[object Number]","[object Function]","[object RegExp]"],m=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,x=s.count!==void 0&&!M(s.count),k=co.hasDefaultValue(s),C=x?this.pluralResolver.getSuffix(h,s.count,s):"",E=s.ordinal&&x?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",j=x&&!s.ordinal&&s.count===0,P=j&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${C}`]||s[`defaultValue${E}`]||s.defaultValue;let T=p;y&&!p&&k&&(T=P);const z=Kd(T),F=Object.prototype.toString.apply(T);if(y&&T&&z&&v.indexOf(F)<0&&!(M(m)&&Array.isArray(T))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,T,{...s,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(g.res=V,g.usedParams=this.getUsedParamsDetails(s),g):V}if(o){const V=Array.isArray(T),oe=V?[]:{},Ye=V?_:w;for(const ae in T)if(Object.prototype.hasOwnProperty.call(T,ae)){const A=`${Ye}${o}${ae}`;k&&!p?oe[ae]=this.translate(A,{...s,defaultValue:Kd(P)?P[ae]:void 0,joinArrays:!1,ns:l}):oe[ae]=this.translate(A,{...s,joinArrays:!1,ns:l}),oe[ae]===A&&(oe[ae]=T[ae])}p=oe}}else if(y&&M(m)&&Array.isArray(p))p=p.join(m),p&&(p=this.extendTranslation(p,e,s,r));else{let V=!1,oe=!1;!this.isValidLookup(p)&&k&&(V=!0,p=P),this.isValidLookup(p)||(oe=!0,p=a);const ae=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&oe?void 0:p,A=k&&P!==p&&this.options.updateMissing;if(oe||V||A){if(this.logger.log(A?"updateKey":"missingKey",h,u,a,A?P:p),o){const I=this.resolve(a,{...s,keySeparator:!1});I&&I.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let b=[];const N=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&N&&N[0])for(let I=0;I<N.length;I++)b.push(N[I]);else this.options.saveMissingTo==="all"?b=this.languageUtils.toResolveHierarchy(s.lng||this.language):b.push(s.lng||this.language);const L=(I,G,ze)=>{var yt;const Ie=k&&ze!==p?ze:ae;this.options.missingKeyHandler?this.options.missingKeyHandler(I,u,G,Ie,A,s):(yt=this.backendConnector)!=null&&yt.saveMissing&&this.backendConnector.saveMissing(I,u,G,Ie,A,s),this.emit("missingKey",I,u,G,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?b.forEach(I=>{const G=this.pluralResolver.getSuffixes(I,s);j&&s[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(ze=>{L([I],a+ze,s[`defaultValue${ze}`]||P)})}):L(b,a,P))}p=this.extendTranslation(p,e,s,g,r),oe&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${u}${d}${a}`),(oe||V)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${a}`:a,V?p:void 0,s))}return i?(g.res=p,g.usedParams=this.getUsedParamsDetails(s),g):p}extendTranslation(e,n,r,s,i){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=M(e)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const g=e.match(this.interpolator.nestingRegexp);h=g&&g.length}let f=r.replace&&!M(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),d){const g=e.match(this.interpolator.nestingRegexp),p=g&&g.length;h<p&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(i==null?void 0:i[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=M(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=bp.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,i,o,a;return M(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),d=u.key;s=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!M(n.count),g=f&&!n.ordinal&&n.count===0,p=n.context!==void 0&&(M(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(_=>{var v,m;this.isValidLookup(r)||(a=_,!Gd[`${w[0]}-${_}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((m=this.utils)!=null&&m.hasLoadedNamespace(a))&&(Gd[`${w[0]}-${_}`]=!0,this.logger.warn(`key "${s}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(y=>{var C;if(this.isValidLookup(r))return;o=y;const x=[d];if((C=this.i18nFormat)!=null&&C.addLookupKeys)this.i18nFormat.addLookupKeys(x,d,y,_,n);else{let E;f&&(E=this.pluralResolver.getSuffix(y,n.count,n));const j=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(n.ordinal&&E.indexOf(P)===0&&x.push(d+E.replace(P,this.options.pluralSeparator)),x.push(d+E),g&&x.push(d+j)),p){const T=`${d}${this.options.contextSeparator||"_"}${n.context}`;x.push(T),f&&(n.ordinal&&E.indexOf(P)===0&&x.push(T+E.replace(P,this.options.pluralSeparator)),x.push(T+E),g&&x.push(T+j))}}let k;for(;k=x.pop();)this.isValidLookup(r)||(i=k,r=this.getResource(y,_,k,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!M(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class Qd{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Et.create("languageUtils")}getScriptPartFromCode(e){if(e=As(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=As(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(M(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),M(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return M(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):M(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const Jd={zero:0,one:1,two:2,few:3,many:4,other:5},Yd={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ak{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Et.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=As(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Yd;if(!e.match(/-|_/))return Yd;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>Jd[s]-Jd[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Xd=(t,e,n,r=".",s=!0)=>{let i=Xx(t,e,n);return!i&&s&&M(n)&&(i=Wl(t,n,r),i===void 0&&(i=Wl(e,n,r))),i},Ta=t=>t.replace(/\$/g,"$$$$");class lk{constructor(e={}){var n;this.logger=Et.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:w,nestingOptionsSeparator:_,maxReplaces:v,alwaysFormat:m}=e.interpolation;this.escape=n!==void 0?n:ek,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?er(i):o||"{{",this.suffix=a?er(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=f?er(f):g||er("$t("),this.nestingSuffix=p?er(p):w||er(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=v||1e3,this.alwaysFormat=m!==void 0?m:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){var g;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const m=Xd(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...s,...n,interpolationkey:p}):m}const w=p.split(this.formatSeparator),_=w.shift().trim(),v=w.join(this.formatSeparator).trim();return this.format(Xd(n,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...s,...n,interpolationkey:_})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((g=s==null?void 0:s.interpolation)==null?void 0:g.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>Ta(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?Ta(this.escape(p)):Ta(p)}].forEach(p=>{for(a=0;i=p.regex.exec(e);){const w=i[1].trim();if(o=u(w),o===void 0)if(typeof d=="function"){const v=d(e,i,s);o=M(v)?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,w))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),o="";else!M(o)&&!this.useRawValueToEscape&&(o=Vd(o));const _=p.safeValue(o);if(e=e.replace(i[0],_),h?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,i,o;const a=(l,u)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const h=l.split(new RegExp(`${d}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,o);const g=f.match(/'/g),p=f.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!p||p.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),u&&(o={...u,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${d}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!M(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(l=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!M(i))return i;M(i)||(i=Vd(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),l.length&&(i=l.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const uk=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},Zd=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(As(r),s),e[o]=a),a(n)}},ck=t=>(e,n,r)=>t(As(n),r)(e);class dk{constructor(e={}){this.logger=Et.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?Zd:ck;this.formats={number:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i});return a=>o.format(a)}),currency:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i,style:"currency"});return a=>o.format(a)}),datetime:r((s,i)=>{const o=new Intl.DateTimeFormat(s,{...i});return a=>o.format(a)}),relativetime:r((s,i)=>{const o=new Intl.RelativeTimeFormat(s,{...i});return a=>o.format(a,i.range||"day")}),list:r((s,i)=>{const o=new Intl.ListFormat(s,{...i});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Zd(n)}format(e,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{var h;const{formatName:u,formatOptions:d}=uk(l);if(this.formats[u]){let f=a;try{const g=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},p=g.locale||g.lng||s.locale||s.lng||r;f=this.formats[u](a,p,{...d,...s,...g})}catch(g){this.logger.warn(g)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const hk=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class fk extends Oo{constructor(e,n,r,s={}){var i,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Et.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},l={};return e.forEach(u=>{let d=!0;n.forEach(h=>{const f=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,d=!1,o[f]===void 0&&(o[f]=!0),i[f]===void 0&&(i[f]=!0),l[h]===void 0&&(l[h]=!0)))}),d||(a[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{Yx(l.loaded,[i],o),hk(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const d=l.loaded[u];d.length&&d.forEach(h=>{a[u][h]===void 0&&(a[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,s=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(u,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}return}return l(e,n,a)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();M(e)&&(e=this.languageUtils.toResolveHierarchy(e)),M(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i,o={},a=()=>{}){var l,u,d,h,f;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const g={...o,isUpdate:i},p=this.backend.create.bind(this.backend);if(p.length<6)try{let w;p.length===5?w=p(e,n,r,s,g):w=p(e,n,r,s),w&&typeof w.then=="function"?w.then(_=>a(null,_)).catch(a):a(null,w)}catch(w){a(w)}else p(e,n,r,s,a,g)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const eh=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),M(t[1])&&(e.defaultValue=t[1]),M(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),th=t=>{var e,n;return M(t.ns)&&(t.ns=[t.ns]),M(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),M(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Si=()=>{},gk=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Os extends Oo{constructor(e={},n){if(super(),this.options=th(e),this.services={},this.logger=Et,this.modules={external:[]},gk(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(M(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=eh();this.options={...r,...this.options,...th(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Et.init(s(this.modules.logger),this.options):Et.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=dk;const d=new Qd(this.options);this.store=new Wd(this.options.resources,this.options);const h=this.services;h.logger=Et,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new ak(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new lk(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new fk(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new co(this.services,this.options),this.translator.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Si),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const a=Jr(),l=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(h),n(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,n=Si){var i,o;let r=n;const s=M(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&a.indexOf(h)<0&&a.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,u=>l(u)),this.services.backendConnector.load(a,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const s=Jr();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Si),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&bp.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Jr();this.emit("languageChanging",e);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,l)=>{l?this.isLanguageChangingTo===e&&(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(a,(...u)=>this.t(...u))},o=a=>{var d,h;!e&&!a&&this.services.languageDetector&&(a=[]);const l=M(a)?a:a&&a[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(M(a)?[a]:a);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,f=>{i(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const s=(i,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([i,o].concat(a)):l={...o},l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const u=this.options.keySeparator||".";let d;return l.keyPrefix&&Array.isArray(i)?d=i.map(h=>(typeof h=="function"&&(h=Gl(h,{...this.options,...o})),`${l.keyPrefix}${u}${h}`)):(typeof i=="function"&&(i=Gl(i,{...this.options,...o})),d=l.keyPrefix?`${l.keyPrefix}${u}${i}`:i),this.t(d,l)};return M(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=Jr();return this.options.ns?(M(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Jr();M(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new Qd(eh());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Os(e,n)}cloneInstance(e={},n=Si){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Os(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((d,h)=>(d[h]={...l[u][h]},d),l[u]),l),{});i.store=new Wd(a,s),i.services.resourceStore=i.store}return i.translator=new co(i.services,s),i.translator.on("*",(a,...l)=>{i.emit(a,...l)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const be=Os.createInstance();be.createInstance=Os.createInstance;be.createInstance;be.dir;be.init;be.loadResources;be.reloadResources;be.use;be.changeLanguage;be.getFixedT;be.t;be.exists;be.setDefaultNamespace;be.hasLoadedNamespace;be.loadNamespaces;be.loadLanguages;const{slice:pk,forEach:mk}=[];function vk(t){return mk.call(pk.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function yk(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const nh=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,wk=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let i=`${t}=${s}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!nh.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!nh.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},rh={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=wk(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Sk={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return rh.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=e;n&&typeof document<"u"&&rh.create(n,t,r,s,i)}},_k={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===e&&(n=o[a].substring(l+1))}}return n}},xk={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const o=i.substring(1);if(e){const a=o.split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===e&&(r=a[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const a=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(s=a[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let tr=null;const sh=()=>{if(tr!==null)return tr;try{if(tr=typeof window<"u"&&window.localStorage!==null,!tr)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{tr=!1}return tr};var kk={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&sh())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&sh()&&window.localStorage.setItem(n,t)}};let nr=null;const ih=()=>{if(nr!==null)return nr;try{if(nr=typeof window<"u"&&window.sessionStorage!==null,!nr)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{nr=!1}return nr};var Ck={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&ih())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&ih()&&window.sessionStorage.setItem(n,t)}},Ek={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},jk={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},bk={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},Rk={name:"subdomain",lookup(t){var s,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Tp=!1;try{document.cookie,Tp=!0}catch{}const Np=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Tp||Np.splice(1,1);const Tk=()=>({order:Np,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Pp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=vk(n,this.options||{},Tk()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Sk),this.addDetector(_k),this.addDetector(kk),this.addDetector(Ck),this.addDetector(Ek),this.addDetector(jk),this.addDetector(bk),this.addDetector(Rk),this.addDetector(xk)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!yk(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Pp.type="languageDetector";const Nk={brand:"Sonsoles Stays",dashboard:"Dashboard",healthCheck:"Health Check",listings:"Listings",reservations:"Reservations",tasks:"Tasks",todos:"TODOs",threads:"Threads",myTasks:"My Tasks",adminBadge:"Admin",cleanerBadge:"Cleaner",signOut:"Sign Out"},Pk={title:"Threads",searchPlaceholder:"Search threads...",noThreadsFound:"No threads found",yesterday:"Yesterday",listingTitle:"Listing: {{id}}",reservationTitle:"Reservation: {{id}}",channelThread:"{{channel}} Thread",noParticipants:"No participants",participantsWithMore:"{{participants}} +{{count}}",selectThread:"Select a thread to view messages",selectThreadDescription:"Choose a thread from the sidebar to see the conversation",noMessages:"No messages in this thread yet",loading:"Loading threads...",error:"Error",retry:"Retry",errorLoadingThreads:"Failed to load threads",errorLoadingMessages:"Failed to load messages",draftMessage:"Draft Message",draftingMessage:"Drafting message...",draftedMessage:"Drafted Message",closeDraft:"Close draft",errorDraftingMessage:"Failed to draft message",noDraftMessage:"No Draft Message",selectThreadToDraft:"Create AI-powered responses for your selected conversation",contextLabel:"Give Maddie AI Bot arbitrary context",messageLabel:"Message",generateResponse:"Generate Response"},Lk={welcome:"Welcome to Sonsoles Stays!",signInDescription:"Please sign in to access your stay management system.",signingIn:"Signing in...",signInWithGoogle:"Sign in with Google",authenticating:" Authenticating...",pleaseWait:"Please wait while we complete your sign-in.",authenticationError:" Authentication Error",returnToLogin:"Return to Login",unexpectedError:"An unexpected error occurred during authentication.",noAccessToken:"No access token available",authenticationFailed:"Authentication failed. Please sign in again."},$k={title:"Dashboard",welcome:"Welcome to your stay management system",comingSoon:"Dashboard Coming Soon",comingSoonDescription:"Your main dashboard will be available here."},Ik={management:"Task Management",myTasks:"My Tasks",totalTasks:"Total Tasks: {{count}}",loading:"Loading...",loginRequired:"Please log in to view your tasks.",details:"Task Details",information:"Task Information",actions:"Actions",acceptTask:"Accept Task",startTask:"Start Task",completeTask:"Complete Task",acceptCompletion:"Accept Completion",acceptedByAdmin:"Accepted by Admin",noFurtherEdits:"No further edits allowed",loadingDetails:"Loading task details...",errorLoading:"Error Loading Task",goBack:"Go Back",notFound:"Task Not Found",notFoundDescription:"The requested task could not be found.",back:"Back",notSet:"Not set"},Ak={searchPlaceholder:"Search all columns...",showingEntries:"Showing {{start}} to {{end}} of {{total}} entries",showingCount:"Showing {{count}} of {{total}} entries",noData:"No Data Found",noResults:"No results match your search criteria.",noDataAvailable:"No data available.",pageInfo:"Page {{current}} of {{total}}",showSize:"Show {{size}}",loadingData:"Loading data...",failedToLoad:"Failed to Load Data"},Ok={id:"ID",title:"Title",task:"Task",type:"Type",status:"Status",description:"Description",listing:"Listing",reservation:"Reservation",scheduled:"Scheduled",assignedTo:"Assigned To",assignedAt:"Assigned At",acceptedAt:"Accepted At",completedAt:"Completed At",created:"Created",na:"N/A",view:"View",accept:"Accept",start:"Start",complete:"Complete",cancel:"Cancel",edit:"Edit",save:"Save"},Dk={unassigned:"Unassigned",assigned:"Assigned",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",admin_accepted:"Admin Accepted"},Fk={guest:"Guest",property:"Property",checkIn:"Check-in",checkOut:"Check-out",nights:"Nights",guests:"Guests",total:"Total",hostPayout:"Host Payout"},Mk={checkingAccess:"Checking admin access...",authenticationRequired:"Authentication Required",signInToAccess:"Please sign in to access this page.",adminAccessRequired:"Admin Access Required",noAdminPrivileges:"You do not have admin privileges to access this page."},Uk={unassigned:"Unassigned",loading:"Loading...",unknown:"Unknown"},zk={loading:"Loading..."},Vk={history:"Audit History",entries:"entries",loading:"Loading audit history...",noHistory:"No audit history available for this task.",by:"by",noDescription:"No description available",fieldsChanged:"Fields changed",valuesChanged:"Values changed",context:"Context",system:"System",unknownUser:"Unknown User"},Bk={title:"System Health Check",monitoring:"Monitoring system status and connectivity",failed:"Health Check Failed",loading:"Loading health status...",reloadPage:"Reload Page",healthy:"Healthy",error:"Error",connected:"Connected",configured:"Configured"},Hk={allTodos:"All TODOs",totalTodos:"Total TODOs: {{count}}",loadingTodos:"Loading TODOs...",filterByStatus:"Filter by Status:",all:"All",pending:"Pending",done:"Done",createGeneral:"Create General TODO",createNew:"Create New TODO",adminAccessRequired:"Admin access required to view all TODOs.",attachedTo:"Attached To",unattached:"Unattached",delete:"Delete",deleteConfirm:"Are you sure you want to delete this TODO?",creating:"Creating...",addNote:"Add Note",adding:"Adding...",noListingAssignment:"No listing assignment",description:"Description",failedToLoad:"Failed to load listings",addTodo:"Add TODO",noTodosFound:"No TODOs found.",createdLabel:"Created: ",completedLabel:"Completed: ",attachedToLabel:"Attached to: ",productsNeeded:"Products needed:",markAsDone:"Mark as done",title:"Title *",titlePlaceholder:"e.g., Fix the AC, Buy cleaning supplies",assignToListing:"Assign to Listing (Optional)",loadingListings:"Loading listings...",products:"Products (Optional)",searchProductsPlaceholder:"Search for products to add...",selectedProducts:"Selected Products:",remove:"Remove",detailsPlaceholder:"Additional details or notes...",cancel:"Cancel"},qk={title:"Listings",details:"Listing Details",totalListings:"Total listings: {{count}}",loadingListings:"Loading listings...",loadingDetails:"Loading listing details...",address:"Address",basicInformation:"Basic Information",dates:"Dates",amenities:"Amenities",listingTodos:"Listing TODOs",listingChat:"Listing Chat",notFound:"Listing not found",notFoundWithId:'The listing with ID "{{id}}" was not found.',failedToLoad:"Failed to load listing",listingId:"Listing ID",airbnbId:"Airbnb ID",propertyType:"Property Type",roomType:"Room Type",bedrooms:"Bedrooms",bathrooms:"Bathrooms",maxGuests:"Max Guests",created:"Created",updated:"Updated"},Wk={accessRequired:"Access Required"},Gk={title:"Notes",unknownUser:"Unknown User",send:"Send",sending:"...",deleteNote:"Delete note",deleteConfirm:"Are you sure you want to delete this note?",loadingNotes:"Loading notes...",noNotesYet:"No notes yet. Start the conversation!",attachedToLabel:"Attached to: ",typePlaceholder:"Type a note... (Press Enter to send, Shift+Enter for new line)",noteLabel:"Note:",notePlaceholder:"Enter your note...",errorOccurred:"An error occurred"},Kk={noAddress:"No address"},Qk={collapseAudit:"Collapse audit history",expandAudit:"Expand audit history",titleLabel:"Title:",statusLabel:"Status:",scheduledLabel:"Scheduled Date:",listingIdLabel:"Listing ID:",assignedToLabel:"Assigned To:",startedAtLabel:"Started At:",finishedAtLabel:"Finished At:",productHelper:"Product Replenishment Helper",taskTab:"Task",listingTab:"Listing"},Jk={overallStatus:"Overall Status:",authenticatedUser:"Authenticated User:",database:"Database:",version:"Version: ",supabaseApi:"Supabase API:",environment:"Environment:",lastChecked:"Last checked: ",systemLabel:"System",null:"null"},Yk={english:"English",spanish:"Espaol"},Xk={navigation:Nk,threads:Pk,auth:Lk,dashboard:$k,tasks:Ik,dataTable:Ak,columns:Ok,statuses:Dk,reservations:Fk,admin:Mk,assignment:Uk,common:zk,audit:Vk,healthCheck:Bk,todos:Hk,listings:qk,cleaner:Wk,notes:Gk,forms:Kk,taskDetail:Qk,system:Jk,language:Yk},Zk={brand:"Sonsoles Stays",dashboard:"Panel de Control",healthCheck:"Verificacin de Estado",listings:"Propiedades",reservations:"Reservas",tasks:"Tareas",todos:"Tareas Pendientes",threads:"Conversaciones",myTasks:"Mis Tareas",adminBadge:"Administrador",cleanerBadge:"Limpiador",signOut:"Cerrar Sesin"},eC={title:"Conversaciones",searchPlaceholder:"Buscar conversaciones...",noThreadsFound:"No se encontraron conversaciones",yesterday:"Ayer",listingTitle:"Propiedad: {{id}}",reservationTitle:"Reserva: {{id}}",channelThread:"Conversacin {{channel}}",noParticipants:"Sin participantes",participantsWithMore:"{{participants}} +{{count}}",selectThread:"Selecciona una conversacin para ver mensajes",selectThreadDescription:"Elige una conversacin de la barra lateral para ver la conversacin",noMessages:"An no hay mensajes en esta conversacin",loading:"Cargando conversaciones...",error:"Error",retry:"Reintentar",errorLoadingThreads:"Error al cargar conversaciones",errorLoadingMessages:"Error al cargar mensajes",draftMessage:"Redactar Mensaje",draftingMessage:"Redactando mensaje...",draftedMessage:"Mensaje Redactado",closeDraft:"Cerrar borrador",errorDraftingMessage:"Error al redactar mensaje",noDraftMessage:"Sin Mensaje Borrador",selectThreadToDraft:"Crea respuestas potenciadas por IA para tu conversacin seleccionada",contextLabel:"Dale contexto arbitrario al Bot IA Maddie",messageLabel:"Mensaje",generateResponse:"Generar Respuesta"},tC={welcome:"Bienvenido a Sonsoles Stays",signInDescription:"Por favor, inicia sesin para acceder a tu sistema de gestin de estancias.",signingIn:"Iniciando sesin...",signInWithGoogle:"Iniciar sesin con Google",authenticating:" Autenticando...",pleaseWait:"Por favor, espera mientras completamos tu inicio de sesin.",authenticationError:" Error de Autenticacin",returnToLogin:"Volver al Inicio de Sesin",unexpectedError:"Ocurri un error inesperado durante la autenticacin.",noAccessToken:"No hay token de acceso disponible",authenticationFailed:"La autenticacin fall. Por favor, inicia sesin nuevamente."},nC={title:"Panel de Control",welcome:"Bienvenido a tu sistema de gestin de estancias",comingSoon:"Panel de Control Prximamente",comingSoonDescription:"Tu panel de control principal estar disponible aqu."},rC={management:"Gestin de Tareas",myTasks:"Mis Tareas",totalTasks:"Total de Tareas: {{count}}",loading:"Cargando...",loginRequired:"Por favor, inicia sesin para ver tus tareas.",details:"Detalles de la Tarea",information:"Informacin de la Tarea",actions:"Acciones",acceptTask:"Aceptar Tarea",startTask:"Iniciar Tarea",completeTask:"Completar Tarea",acceptCompletion:"Aceptar Finalizacin",acceptedByAdmin:"Aceptado por Administrador",noFurtherEdits:"No se permiten ms ediciones",loadingDetails:"Cargando detalles de la tarea...",errorLoading:"Error al Cargar la Tarea",goBack:"Volver",notFound:"Tarea No Encontrada",notFoundDescription:"La tarea solicitada no pudo ser encontrada.",back:"Atrs",notSet:"No establecido"},sC={searchPlaceholder:"Buscar en todas las columnas...",showingEntries:"Mostrando {{start}} a {{end}} de {{total}} entradas",showingCount:"Mostrando {{count}} de {{total}} entradas",noData:"No Se Encontraron Datos",noResults:"No hay resultados que coincidan con tus criterios de bsqueda.",noDataAvailable:"No hay datos disponibles.",pageInfo:"Pgina {{current}} de {{total}}",showSize:"Mostrar {{size}}",loadingData:"Cargando datos...",failedToLoad:"Error al Cargar Datos"},iC={id:"ID",title:"Ttulo",task:"Tarea",type:"Tipo",status:"Estado",description:"Descripcin",listing:"Propiedad",reservation:"Reserva",scheduled:"Programado",assignedTo:"Asignado A",assignedAt:"Asignado En",acceptedAt:"Aceptado En",completedAt:"Completado En",created:"Creado",na:"N/A",view:"Ver",accept:"Aceptar",start:"Iniciar",complete:"Completar",cancel:"Cancelar",edit:"Editar",save:"Guardar"},oC={unassigned:"Sin Asignar",assigned:"Asignada",accepted:"Aceptada",in_progress:"En Progreso",completed:"Completada",admin_accepted:"Aceptada por Administrador"},aC={guest:"Husped",property:"Propiedad",checkIn:"Llegada",checkOut:"Salida",nights:"Noches",guests:"Huspedes",total:"Total",hostPayout:"Pago al Anfitrin"},lC={checkingAccess:"Verificando acceso de administrador...",authenticationRequired:"Autenticacin Requerida",signInToAccess:"Por favor, inicia sesin para acceder a esta pgina.",adminAccessRequired:"Acceso de Administrador Requerido",noAdminPrivileges:"No tienes privilegios de administrador para acceder a esta pgina."},uC={unassigned:"Sin Asignar",loading:"Cargando...",unknown:"Desconocido"},cC={loading:"Cargando..."},dC={history:"Historial de Auditora",entries:"entradas",loading:"Cargando historial de auditora...",noHistory:"No hay historial de auditora disponible para esta tarea.",by:"por",noDescription:"No hay descripcin disponible",fieldsChanged:"Campos modificados",valuesChanged:"Valores modificados",context:"Contexto",system:"Sistema",unknownUser:"Usuario Desconocido"},hC={title:"Verificacin de Estado del Sistema",monitoring:"Monitoreando estado del sistema y conectividad",failed:"Verificacin de Estado Fall",loading:"Cargando estado de salud...",reloadPage:"Recargar Pgina",healthy:"Saludable",error:"Error",connected:"Conectado",configured:"Configurado"},fC={allTodos:"Todas las Tareas",totalTodos:"Total de Tareas: {{count}}",loadingTodos:"Cargando tareas...",filterByStatus:"Filtrar por Estado:",all:"Todas",pending:"Pendientes",done:"Completadas",createGeneral:"Crear Tarea General",createNew:"Crear Nueva Tarea",adminAccessRequired:"Se requiere acceso de administrador para ver todas las tareas.",attachedTo:"Adjuntado A",unattached:"Sin Adjuntar",delete:"Eliminar",deleteConfirm:"Ests seguro de que quieres eliminar esta tarea?",creating:"Creando...",addNote:"Agregar Nota",adding:"Agregando...",noListingAssignment:"Sin asignacin de propiedad",description:"Descripcin",failedToLoad:"Error al cargar propiedades",addTodo:"Agregar Tarea",noTodosFound:"No se encontraron tareas.",createdLabel:"Creado: ",completedLabel:"Completado: ",attachedToLabel:"Adjuntado a: ",productsNeeded:"Productos necesarios:",markAsDone:"Marcar como completado",title:"Ttulo *",titlePlaceholder:"ej., Arreglar el aire acondicionado, Comprar suministros de limpieza",assignToListing:"Asignar a Propiedad (Opcional)",loadingListings:"Cargando propiedades...",products:"Productos (Opcional)",searchProductsPlaceholder:"Buscar productos para agregar...",selectedProducts:"Productos Seleccionados:",remove:"Quitar",detailsPlaceholder:"Detalles adicionales o notas...",cancel:"Cancelar"},gC={title:"Propiedades",details:"Detalles de la Propiedad",totalListings:"Total de propiedades: {{count}}",loadingListings:"Cargando propiedades...",loadingDetails:"Cargando detalles de la propiedad...",address:"Direccin",basicInformation:"Informacin Bsica",dates:"Fechas",amenities:"Amenidades",listingTodos:"Tareas de la Propiedad",listingChat:"Chat de la Propiedad",notFound:"Propiedad no encontrada",notFoundWithId:'La propiedad con ID "{{id}}" no fue encontrada.',failedToLoad:"Error al cargar propiedad",listingId:"ID de Propiedad",airbnbId:"ID de Airbnb",propertyType:"Tipo de Propiedad",roomType:"Tipo de Habitacin",bedrooms:"Habitaciones",bathrooms:"Baos",maxGuests:"Mximo de Huspedes",created:"Creado",updated:"Actualizado"},pC={accessRequired:"Acceso Requerido"},mC={title:"Notas",unknownUser:"Usuario Desconocido",send:"Enviar",sending:"...",deleteNote:"Eliminar nota",deleteConfirm:"Ests seguro de que quieres eliminar esta nota?",loadingNotes:"Cargando notas...",noNotesYet:"An no hay notas. Comienza la conversacin!",attachedToLabel:"Adjuntado a: ",typePlaceholder:"Escribe una nota... (Presiona Enter para enviar, Shift+Enter para nueva lnea)",noteLabel:"Nota:",notePlaceholder:"Ingresa tu nota...",errorOccurred:"Ocurri un error"},vC={noAddress:"Sin direccin"},yC={collapseAudit:"Contraer historial de auditora",expandAudit:"Expandir historial de auditora",titleLabel:"Ttulo:",statusLabel:"Estado:",scheduledLabel:"Fecha Programada:",listingIdLabel:"ID de Propiedad:",assignedToLabel:"Asignado A:",startedAtLabel:"Iniciado En:",finishedAtLabel:"Finalizado En:",productHelper:"Asistente de Reposicin de Productos",taskTab:"Tarea",listingTab:"Propiedad"},wC={overallStatus:"Estado General:",authenticatedUser:"Usuario Autenticado:",database:"Base de Datos:",version:"Versin: ",supabaseApi:"API de Supabase:",environment:"Entorno:",lastChecked:"ltima verificacin: ",systemLabel:"Sistema",null:"nulo"},SC={english:"English",spanish:"Espaol"},_C={navigation:Zk,threads:eC,auth:tC,dashboard:nC,tasks:rC,dataTable:sC,columns:iC,statuses:oC,reservations:aC,admin:lC,assignment:uC,common:cC,audit:dC,healthCheck:hC,todos:fC,listings:gC,cleaner:pC,notes:mC,forms:vC,taskDetail:yC,system:wC,language:SC},xC={en:{translation:Xk},es:{translation:_C}};be.use(Pp).use(u_).init({resources:xC,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"preferred-language",caches:["localStorage"]},supportedLngs:["en","es"],lng:"en",ns:["translation"],defaultNS:"translation"});function kC(){return c.jsx("div",{className:"app",children:c.jsx(g_,{children:c.jsx(YS,{children:c.jsx(xw,{children:c.jsxs(Zy,{children:[c.jsx(Ze,{path:"/auth/callback",element:c.jsx(Gx,{})}),c.jsx(Ze,{path:"/",element:c.jsx(wa,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx(Kx,{})})]})})}),c.jsx(Ze,{path:"/healthcheck",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(qx,{})})})]})})}),c.jsx(Ze,{path:"/admin",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(kx,{})})})]})})}),c.jsx(Ze,{path:"/admin/tasks",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Rx,{})})})]})})}),c.jsx(Ze,{path:"/admin/todos",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Px,{})})})]})})}),c.jsx(Ze,{path:"/admin/threads",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content threads-main-content",children:c.jsx("div",{className:"content-container threads-content-container",children:c.jsx(Ox,{})})})]})})}),c.jsx(Ze,{path:"/listings",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Dx,{})})})]})})}),c.jsx(Ze,{path:"/cleaner/tasks",element:c.jsx(wa,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Fx,{})})})]})})}),c.jsx(Ze,{path:"/tasks/:id",element:c.jsx(wa,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Bx,{})})})]})})}),c.jsx(Ze,{path:"/listing/:id",element:c.jsx(Rn,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(_t,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Hx,{})})})]})})})]})})})})})}const Lp=document.getElementById("root");if(!Lp)throw new Error("Root element not found");Na.createRoot(Lp).render(c.jsx(kC,{}));
