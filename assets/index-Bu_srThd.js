var wp=Object.defineProperty;var Sp=(e,t,n)=>t in e?wp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var jo=(e,t,n)=>Sp(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var We=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Gd={exports:{}},Xi={},qd={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Es=Symbol.for("react.element"),xp=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),Cp=Symbol.for("react.strict_mode"),Ep=Symbol.for("react.profiler"),jp=Symbol.for("react.provider"),Rp=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),Np=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),Bu=Symbol.iterator;function Lp(e){return e===null||typeof e!="object"?null:(e=Bu&&e[Bu]||e["@@iterator"],typeof e=="function"?e:null)}var Kd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wd=Object.assign,Qd={};function _r(e,t,n){this.props=e,this.context=t,this.refs=Qd,this.updater=n||Kd}_r.prototype.isReactComponent={};_r.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jd(){}Jd.prototype=_r.prototype;function Ol(e,t,n){this.props=e,this.context=t,this.refs=Qd,this.updater=n||Kd}var Al=Ol.prototype=new Jd;Al.constructor=Ol;Wd(Al,_r.prototype);Al.isPureReactComponent=!0;var Hu=Array.isArray,Yd=Object.prototype.hasOwnProperty,Il={current:null},Xd={key:!0,ref:!0,__self:!0,__source:!0};function Zd(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Yd.call(t,r)&&!Xd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Es,type:e,key:i,ref:o,props:s,_owner:Il.current}}function $p(e,t){return{$$typeof:Es,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Es}function Op(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gu=/\/+/g;function Ro(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Op(""+e.key):t.toString(36)}function li(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Es:case xp:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ro(o,0):r,Hu(s)?(n="",e!=null&&(n=e.replace(Gu,"$&/")+"/"),li(s,t,n,"",function(u){return u})):s!=null&&(Dl(s)&&(s=$p(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Hu(e))for(var a=0;a<e.length;a++){i=e[a];var l=r+Ro(i,a);o+=li(i,t,n,l,s)}else if(l=Lp(e),typeof l=="function")for(e=l.call(e),a=0;!(i=e.next()).done;)i=i.value,l=r+Ro(i,a++),o+=li(i,t,n,l,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ds(e,t,n){if(e==null)return e;var r=[],s=0;return li(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Ap(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Re={current:null},ui={transition:null},Ip={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ui,ReactCurrentOwner:Il};function ef(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:Ds,forEach:function(e,t,n){Ds(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ds(e,function(){t++}),t},toArray:function(e){return Ds(e,function(t){return t})||[]},only:function(e){if(!Dl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};H.Component=_r;H.Fragment=kp;H.Profiler=Ep;H.PureComponent=Ol;H.StrictMode=Cp;H.Suspense=Tp;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ip;H.act=ef;H.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Wd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Il.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Yd.call(t,l)&&!Xd.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Es,type:e.type,key:s,ref:i,props:r,_owner:o}};H.createContext=function(e){return e={$$typeof:Rp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jp,_context:e},e.Consumer=e};H.createElement=Zd;H.createFactory=function(e){var t=Zd.bind(null,e);return t.type=e,t};H.createRef=function(){return{current:null}};H.forwardRef=function(e){return{$$typeof:Pp,render:e}};H.isValidElement=Dl;H.lazy=function(e){return{$$typeof:bp,_payload:{_status:-1,_result:e},_init:Ap}};H.memo=function(e,t){return{$$typeof:Np,type:e,compare:t===void 0?null:t}};H.startTransition=function(e){var t=ui.transition;ui.transition={};try{e()}finally{ui.transition=t}};H.unstable_act=ef;H.useCallback=function(e,t){return Re.current.useCallback(e,t)};H.useContext=function(e){return Re.current.useContext(e)};H.useDebugValue=function(){};H.useDeferredValue=function(e){return Re.current.useDeferredValue(e)};H.useEffect=function(e,t){return Re.current.useEffect(e,t)};H.useId=function(){return Re.current.useId()};H.useImperativeHandle=function(e,t,n){return Re.current.useImperativeHandle(e,t,n)};H.useInsertionEffect=function(e,t){return Re.current.useInsertionEffect(e,t)};H.useLayoutEffect=function(e,t){return Re.current.useLayoutEffect(e,t)};H.useMemo=function(e,t){return Re.current.useMemo(e,t)};H.useReducer=function(e,t,n){return Re.current.useReducer(e,t,n)};H.useRef=function(e){return Re.current.useRef(e)};H.useState=function(e){return Re.current.useState(e)};H.useSyncExternalStore=function(e,t,n){return Re.current.useSyncExternalStore(e,t,n)};H.useTransition=function(){return Re.current.useTransition()};H.version="18.3.1";qd.exports=H;var S=qd.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=S,Fp=Symbol.for("react.element"),Mp=Symbol.for("react.fragment"),Up=Object.prototype.hasOwnProperty,zp=Dp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vp={key:!0,ref:!0,__self:!0,__source:!0};function tf(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Up.call(t,r)&&!Vp.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Fp,type:e,key:i,ref:o,props:s,_owner:zp.current}}Xi.Fragment=Mp;Xi.jsx=tf;Xi.jsxs=tf;Gd.exports=Xi;var d=Gd.exports,wa={},nf={exports:{}},ze={},rf={exports:{}},sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,$){var b=P.length;P.push($);e:for(;0<b;){var D=b-1>>>1,G=P[D];if(0<s(G,$))P[D]=$,P[b]=G,b=D;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var $=P[0],b=P.pop();if(b!==$){P[0]=b;e:for(var D=0,G=P.length,Be=G>>>1;D<Be;){var Ye=2*(D+1)-1,Mt=P[Ye],St=Ye+1,An=P[St];if(0>s(Mt,b))St<G&&0>s(An,Mt)?(P[D]=An,P[St]=b,D=St):(P[D]=Mt,P[Ye]=b,D=Ye);else if(St<G&&0>s(An,b))P[D]=An,P[St]=b,D=St;else break e}}return $}function s(P,$){var b=P.sortIndex-$.sortIndex;return b!==0?b:P.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,g=!1,p=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=P)r(u),$.sortIndex=$.expirationTime,t(l,$);else break;$=n(u)}}function k(P){if(w=!1,y(P),!p)if(n(l)!==null)p=!0,I(x);else{var $=n(u);$!==null&&V(k,$.startTime-P)}}function x(P,$){p=!1,w&&(w=!1,v(j),j=-1),g=!0;var b=h;try{for(y($),f=n(l);f!==null&&(!(f.expirationTime>$)||P&&!M());){var D=f.callback;if(typeof D=="function"){f.callback=null,h=f.priorityLevel;var G=D(f.expirationTime<=$);$=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),y($)}else r(l);f=n(l)}if(f!==null)var Be=!0;else{var Ye=n(u);Ye!==null&&V(k,Ye.startTime-$),Be=!1}return Be}finally{f=null,h=b,g=!1}}var C=!1,E=null,j=-1,R=5,N=-1;function M(){return!(e.unstable_now()-N<R)}function F(){if(E!==null){var P=e.unstable_now();N=P;var $=!0;try{$=E(!0,P)}finally{$?q():(C=!1,E=null)}}else C=!1}var q;if(typeof m=="function")q=function(){m(F)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,wt=ie.port2;ie.port1.onmessage=F,q=function(){wt.postMessage(null)}}else q=function(){_(F,0)};function I(P){E=P,C||(C=!0,q())}function V(P,$){j=_(function(){P(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,I(x))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(P){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var b=h;h=$;try{return P()}finally{h=b}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var b=h;h=P;try{return $()}finally{h=b}},e.unstable_scheduleCallback=function(P,$,b){var D=e.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?D+b:D):b=D,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=b+G,P={id:c++,callback:$,priorityLevel:P,startTime:b,expirationTime:G,sortIndex:-1},b>D?(P.sortIndex=b,t(u,P),n(l)===null&&P===n(u)&&(w?(v(j),j=-1):w=!0,V(k,b-D))):(P.sortIndex=G,t(l,P),p||g||(p=!0,I(x))),P},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(P){var $=h;return function(){var b=h;h=$;try{return P.apply(this,arguments)}finally{h=b}}}})(sf);rf.exports=sf;var Bp=rf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=S,Me=Bp;function T(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var of=new Set,ss={};function Ln(e,t){hr(e,t),hr(e+"Capture",t)}function hr(e,t){for(ss[e]=t,e=0;e<t.length;e++)of.add(t[e])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=Object.prototype.hasOwnProperty,Gp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qu={},Ku={};function qp(e){return Sa.call(Ku,e)?!0:Sa.call(qu,e)?!1:Gp.test(e)?Ku[e]=!0:(qu[e]=!0,!1)}function Kp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wp(e,t,n,r){if(t===null||typeof t>"u"||Kp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pe(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new Pe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new Pe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new Pe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new Pe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new Pe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new Pe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ve[e]=new Pe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ve[e]=new Pe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ve[e]=new Pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fl=/[\-:]([a-z])/g;function Ml(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fl,Ml);ve[t]=new Pe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fl,Ml);ve[t]=new Pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fl,Ml);ve[t]=new Pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new Pe(e,1,!1,e.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ve[e]=new Pe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ul(e,t,n,r){var s=ve.hasOwnProperty(t)?ve[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wp(t,n,s,r)&&(n=null),r||s===null?qp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ft=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fs=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),zl=Symbol.for("react.strict_mode"),_a=Symbol.for("react.profiler"),af=Symbol.for("react.provider"),lf=Symbol.for("react.context"),Vl=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Bl=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),uf=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function Pr(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var re=Object.assign,Po;function Ur(e){if(Po===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Po=t&&t[1]||""}return`
`+Po+e}var To=!1;function No(e,t){if(!e||To)return"";To=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{To=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ur(e):""}function Qp(e){switch(e.tag){case 5:return Ur(e.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return e=No(e.type,!1),e;case 11:return e=No(e.type.render,!1),e;case 1:return e=No(e.type,!0),e;default:return""}}function Ca(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jn:return"Fragment";case Qn:return"Portal";case _a:return"Profiler";case zl:return"StrictMode";case xa:return"Suspense";case ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lf:return(e.displayName||"Context")+".Consumer";case af:return(e._context.displayName||"Context")+".Provider";case Vl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bl:return t=e.displayName||null,t!==null?t:Ca(e.type)||"Memo";case Bt:t=e._payload,e=e._init;try{return Ca(e(t))}catch{}}return null}function Jp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ca(t);case 8:return t===zl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function an(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yp(e){var t=cf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ms(e){e._valueTracker||(e._valueTracker=Yp(e))}function df(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var n=t.checked;return re({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=an(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ff(e,t){t=t.checked,t!=null&&Ul(e,"checked",t,!1)}function ja(e,t){ff(e,t);var n=an(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ra(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ra(e,t.type,an(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ju(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ra(e,t,n){(t!=="number"||xi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zr=Array.isArray;function ar(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+an(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(T(91));return re({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(T(92));if(zr(n)){if(1<n.length)throw Error(T(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:an(n)}}function hf(e,t){var n=an(t.value),r=an(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ta(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Us,pf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Us=Us||document.createElement("div"),Us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xp=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(e){Xp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gr[t]=Gr[e]})});function mf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Gr.hasOwnProperty(e)&&Gr[e]?(""+t).trim():t+"px"}function vf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Zp=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Na(e,t){if(t){if(Zp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(T(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(T(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(T(61))}if(t.style!=null&&typeof t.style!="object")throw Error(T(62))}}function ba(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function Hl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $a=null,lr=null,ur=null;function Zu(e){if(e=Ps(e)){if(typeof $a!="function")throw Error(T(280));var t=e.stateNode;t&&(t=ro(t),$a(e.stateNode,e.type,t))}}function yf(e){lr?ur?ur.push(e):ur=[e]:lr=e}function wf(){if(lr){var e=lr,t=ur;if(ur=lr=null,Zu(e),t)for(e=0;e<t.length;e++)Zu(t[e])}}function Sf(e,t){return e(t)}function _f(){}var bo=!1;function xf(e,t,n){if(bo)return e(t,n);bo=!0;try{return Sf(e,t,n)}finally{bo=!1,(lr!==null||ur!==null)&&(_f(),wf())}}function os(e,t){var n=e.stateNode;if(n===null)return null;var r=ro(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(T(231,t,typeof n));return n}var Oa=!1;if($t)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{Oa=!1}function em(e,t,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var qr=!1,ki=null,Ci=!1,Aa=null,tm={onError:function(e){qr=!0,ki=e}};function nm(e,t,n,r,s,i,o,a,l){qr=!1,ki=null,em.apply(tm,arguments)}function rm(e,t,n,r,s,i,o,a,l){if(nm.apply(this,arguments),qr){if(qr){var u=ki;qr=!1,ki=null}else throw Error(T(198));Ci||(Ci=!0,Aa=u)}}function $n(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function kf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ec(e){if($n(e)!==e)throw Error(T(188))}function sm(e){var t=e.alternate;if(!t){if(t=$n(e),t===null)throw Error(T(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ec(s),e;if(i===r)return ec(s),t;i=i.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?e:t}function Cf(e){return e=sm(e),e!==null?Ef(e):null}function Ef(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ef(e);if(t!==null)return t;e=e.sibling}return null}var jf=Me.unstable_scheduleCallback,tc=Me.unstable_cancelCallback,im=Me.unstable_shouldYield,om=Me.unstable_requestPaint,oe=Me.unstable_now,am=Me.unstable_getCurrentPriorityLevel,Gl=Me.unstable_ImmediatePriority,Rf=Me.unstable_UserBlockingPriority,Ei=Me.unstable_NormalPriority,lm=Me.unstable_LowPriority,Pf=Me.unstable_IdlePriority,Zi=null,gt=null;function um(e){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Zi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:fm,cm=Math.log,dm=Math.LN2;function fm(e){return e>>>=0,e===0?32:31-(cm(e)/dm|0)|0}var zs=64,Vs=4194304;function Vr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ji(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Vr(a):(i&=o,i!==0&&(r=Vr(i)))}else o=n&~s,o!==0?r=Vr(o):i!==0&&(r=Vr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ot(t),s=1<<n,r|=e[n],t&=~s;return r}function hm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=hm(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}function Ia(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tf(){var e=zs;return zs<<=1,!(zs&4194240)&&(zs=64),e}function Lo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function js(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=n}function pm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function ql(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var W=0;function Nf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bf,Kl,Lf,$f,Of,Da=!1,Bs=[],Xt=null,Zt=null,en=null,as=new Map,ls=new Map,Gt=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nc(e,t){switch(e){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":as.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(t.pointerId)}}function Nr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ps(t),t!==null&&Kl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vm(e,t,n,r,s){switch(t){case"focusin":return Xt=Nr(Xt,e,t,n,r,s),!0;case"dragenter":return Zt=Nr(Zt,e,t,n,r,s),!0;case"mouseover":return en=Nr(en,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return as.set(i,Nr(as.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ls.set(i,Nr(ls.get(i)||null,e,t,n,r,s)),!0}return!1}function Af(e){var t=_n(e.target);if(t!==null){var n=$n(t);if(n!==null){if(t=n.tag,t===13){if(t=kf(n),t!==null){e.blockedOn=t,Of(e.priority,function(){Lf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ci(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);La=r,n.target.dispatchEvent(r),La=null}else return t=Ps(n),t!==null&&Kl(t),e.blockedOn=n,!1;t.shift()}return!0}function rc(e,t,n){ci(e)&&n.delete(t)}function ym(){Da=!1,Xt!==null&&ci(Xt)&&(Xt=null),Zt!==null&&ci(Zt)&&(Zt=null),en!==null&&ci(en)&&(en=null),as.forEach(rc),ls.forEach(rc)}function br(e,t){e.blockedOn===t&&(e.blockedOn=null,Da||(Da=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,ym)))}function us(e){function t(s){return br(s,e)}if(0<Bs.length){br(Bs[0],e);for(var n=1;n<Bs.length;n++){var r=Bs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Xt!==null&&br(Xt,e),Zt!==null&&br(Zt,e),en!==null&&br(en,e),as.forEach(t),ls.forEach(t),n=0;n<Gt.length;n++)r=Gt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Gt.length&&(n=Gt[0],n.blockedOn===null);)Af(n),n.blockedOn===null&&Gt.shift()}var cr=Ft.ReactCurrentBatchConfig,Ri=!0;function wm(e,t,n,r){var s=W,i=cr.transition;cr.transition=null;try{W=1,Wl(e,t,n,r)}finally{W=s,cr.transition=i}}function Sm(e,t,n,r){var s=W,i=cr.transition;cr.transition=null;try{W=4,Wl(e,t,n,r)}finally{W=s,cr.transition=i}}function Wl(e,t,n,r){if(Ri){var s=Fa(e,t,n,r);if(s===null)Vo(e,t,r,Pi,n),nc(e,r);else if(vm(s,e,t,n,r))r.stopPropagation();else if(nc(e,r),t&4&&-1<mm.indexOf(e)){for(;s!==null;){var i=Ps(s);if(i!==null&&bf(i),i=Fa(e,t,n,r),i===null&&Vo(e,t,r,Pi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vo(e,t,r,null,n)}}var Pi=null;function Fa(e,t,n,r){if(Pi=null,e=Hl(r),e=_n(e),e!==null)if(t=$n(e),t===null)e=null;else if(n=t.tag,n===13){if(e=kf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pi=e,null}function If(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(am()){case Gl:return 1;case Rf:return 4;case Ei:case lm:return 16;case Pf:return 536870912;default:return 16}default:return 16}}var Wt=null,Ql=null,di=null;function Df(){if(di)return di;var e,t=Ql,n=t.length,r,s="value"in Wt?Wt.value:Wt.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return di=s.slice(e,1<r?1-r:void 0)}function fi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hs(){return!0}function sc(){return!1}function Ve(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hs:sc,this.isPropagationStopped=sc,this}return re(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),t}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=Ve(xr),Rs=re({},xr,{view:0,detail:0}),_m=Ve(Rs),$o,Oo,Lr,eo=re({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lr&&(Lr&&e.type==="mousemove"?($o=e.screenX-Lr.screenX,Oo=e.screenY-Lr.screenY):Oo=$o=0,Lr=e),$o)},movementY:function(e){return"movementY"in e?e.movementY:Oo}}),ic=Ve(eo),xm=re({},eo,{dataTransfer:0}),km=Ve(xm),Cm=re({},Rs,{relatedTarget:0}),Ao=Ve(Cm),Em=re({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),jm=Ve(Em),Rm=re({},xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pm=Ve(Rm),Tm=re({},xr,{data:0}),oc=Ve(Tm),Nm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $m(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lm[e])?!!t[e]:!1}function Yl(){return $m}var Om=re({},Rs,{key:function(e){if(e.key){var t=Nm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(e){return e.type==="keypress"?fi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Am=Ve(Om),Im=re({},eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ac=Ve(Im),Dm=re({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),Fm=Ve(Dm),Mm=re({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Um=Ve(Mm),zm=re({},eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vm=Ve(zm),Bm=[9,13,27,32],Xl=$t&&"CompositionEvent"in window,Kr=null;$t&&"documentMode"in document&&(Kr=document.documentMode);var Hm=$t&&"TextEvent"in window&&!Kr,Ff=$t&&(!Xl||Kr&&8<Kr&&11>=Kr),lc=" ",uc=!1;function Mf(e,t){switch(e){case"keyup":return Bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Gm(e,t){switch(e){case"compositionend":return Uf(t);case"keypress":return t.which!==32?null:(uc=!0,lc);case"textInput":return e=t.data,e===lc&&uc?null:e;default:return null}}function qm(e,t){if(Yn)return e==="compositionend"||!Xl&&Mf(e,t)?(e=Df(),di=Ql=Wt=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ff&&t.locale!=="ko"?null:t.data;default:return null}}var Km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Km[e.type]:t==="textarea"}function zf(e,t,n,r){yf(r),t=Ti(t,"onChange"),0<t.length&&(n=new Jl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wr=null,cs=null;function Wm(e){Xf(e,0)}function to(e){var t=er(e);if(df(t))return e}function Qm(e,t){if(e==="change")return t}var Vf=!1;if($t){var Io;if($t){var Do="oninput"in document;if(!Do){var dc=document.createElement("div");dc.setAttribute("oninput","return;"),Do=typeof dc.oninput=="function"}Io=Do}else Io=!1;Vf=Io&&(!document.documentMode||9<document.documentMode)}function fc(){Wr&&(Wr.detachEvent("onpropertychange",Bf),cs=Wr=null)}function Bf(e){if(e.propertyName==="value"&&to(cs)){var t=[];zf(t,cs,e,Hl(e)),xf(Wm,t)}}function Jm(e,t,n){e==="focusin"?(fc(),Wr=t,cs=n,Wr.attachEvent("onpropertychange",Bf)):e==="focusout"&&fc()}function Ym(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return to(cs)}function Xm(e,t){if(e==="click")return to(t)}function Zm(e,t){if(e==="input"||e==="change")return to(t)}function ev(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ut=typeof Object.is=="function"?Object.is:ev;function ds(e,t){if(ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sa.call(t,s)||!ut(e[s],t[s]))return!1}return!0}function hc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var n=hc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hc(n)}}function Hf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gf(){for(var e=window,t=xi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xi(e.document)}return t}function Zl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tv(e){var t=Gf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Hf(n.ownerDocument.documentElement,n)){if(r!==null&&Zl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=gc(n,i);var o=gc(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nv=$t&&"documentMode"in document&&11>=document.documentMode,Xn=null,Ma=null,Qr=null,Ua=!1;function pc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ua||Xn==null||Xn!==xi(r)||(r=Xn,"selectionStart"in r&&Zl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qr&&ds(Qr,r)||(Qr=r,r=Ti(Ma,"onSelect"),0<r.length&&(t=new Jl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xn)))}function Gs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zn={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},Fo={},qf={};$t&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function no(e){if(Fo[e])return Fo[e];if(!Zn[e])return e;var t=Zn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qf)return Fo[e]=t[n];return e}var Kf=no("animationend"),Wf=no("animationiteration"),Qf=no("animationstart"),Jf=no("transitionend"),Yf=new Map,mc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cn(e,t){Yf.set(e,t),Ln(t,[e])}for(var Mo=0;Mo<mc.length;Mo++){var Uo=mc[Mo],rv=Uo.toLowerCase(),sv=Uo[0].toUpperCase()+Uo.slice(1);cn(rv,"on"+sv)}cn(Kf,"onAnimationEnd");cn(Wf,"onAnimationIteration");cn(Qf,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(Jf,"onTransitionEnd");hr("onMouseEnter",["mouseout","mouseover"]);hr("onMouseLeave",["mouseout","mouseover"]);hr("onPointerEnter",["pointerout","pointerover"]);hr("onPointerLeave",["pointerout","pointerover"]);Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Br));function vc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rm(r,t,void 0,e),e.currentTarget=null}function Xf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;vc(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;vc(s,a,u),i=l}}}if(Ci)throw e=Aa,Ci=!1,Aa=null,e}function Y(e,t){var n=t[Ga];n===void 0&&(n=t[Ga]=new Set);var r=e+"__bubble";n.has(r)||(Zf(t,e,2,!1),n.add(r))}function zo(e,t,n){var r=0;t&&(r|=4),Zf(n,e,r,t)}var qs="_reactListening"+Math.random().toString(36).slice(2);function fs(e){if(!e[qs]){e[qs]=!0,of.forEach(function(n){n!=="selectionchange"&&(iv.has(n)||zo(n,!1,e),zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qs]||(t[qs]=!0,zo("selectionchange",!1,t))}}function Zf(e,t,n,r){switch(If(t)){case 1:var s=wm;break;case 4:s=Sm;break;default:s=Wl}n=s.bind(null,t,n,e),s=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_n(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}xf(function(){var u=i,c=Hl(n),f=[];e:{var h=Yf.get(e);if(h!==void 0){var g=Jl,p=e;switch(e){case"keypress":if(fi(n)===0)break e;case"keydown":case"keyup":g=Am;break;case"focusin":p="focus",g=Ao;break;case"focusout":p="blur",g=Ao;break;case"beforeblur":case"afterblur":g=Ao;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Fm;break;case Kf:case Wf:case Qf:g=jm;break;case Jf:g=Um;break;case"scroll":g=_m;break;case"wheel":g=Vm;break;case"copy":case"cut":case"paste":g=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ac}var w=(t&4)!==0,_=!w&&e==="scroll",v=w?h!==null?h+"Capture":null:h;w=[];for(var m=u,y;m!==null;){y=m;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,v!==null&&(k=os(m,v),k!=null&&w.push(hs(m,k,y)))),_)break;m=m.return}0<w.length&&(h=new g(h,p,null,n,c),f.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==La&&(p=n.relatedTarget||n.fromElement)&&(_n(p)||p[Ot]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=u,p=p?_n(p):null,p!==null&&(_=$n(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=u),g!==p)){if(w=ic,k="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=ac,k="onPointerLeave",v="onPointerEnter",m="pointer"),_=g==null?h:er(g),y=p==null?h:er(p),h=new w(k,m+"leave",g,n,c),h.target=_,h.relatedTarget=y,k=null,_n(c)===u&&(w=new w(v,m+"enter",p,n,c),w.target=y,w.relatedTarget=_,k=w),_=k,g&&p)t:{for(w=g,v=p,m=0,y=w;y;y=In(y))m++;for(y=0,k=v;k;k=In(k))y++;for(;0<m-y;)w=In(w),m--;for(;0<y-m;)v=In(v),y--;for(;m--;){if(w===v||v!==null&&w===v.alternate)break t;w=In(w),v=In(v)}w=null}else w=null;g!==null&&yc(f,h,g,w,!1),p!==null&&_!==null&&yc(f,_,p,w,!0)}}e:{if(h=u?er(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var x=Qm;else if(cc(h))if(Vf)x=Zm;else{x=Ym;var C=Jm}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Xm);if(x&&(x=x(e,u))){zf(f,x,n,c);break e}C&&C(e,h,u),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Ra(h,"number",h.value)}switch(C=u?er(u):window,e){case"focusin":(cc(C)||C.contentEditable==="true")&&(Xn=C,Ma=u,Qr=null);break;case"focusout":Qr=Ma=Xn=null;break;case"mousedown":Ua=!0;break;case"contextmenu":case"mouseup":case"dragend":Ua=!1,pc(f,n,c);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":pc(f,n,c)}var E;if(Xl)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Yn?Mf(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Ff&&n.locale!=="ko"&&(Yn||j!=="onCompositionStart"?j==="onCompositionEnd"&&Yn&&(E=Df()):(Wt=c,Ql="value"in Wt?Wt.value:Wt.textContent,Yn=!0)),C=Ti(u,j),0<C.length&&(j=new oc(j,e,null,n,c),f.push({event:j,listeners:C}),E?j.data=E:(E=Uf(n),E!==null&&(j.data=E)))),(E=Hm?Gm(e,n):qm(e,n))&&(u=Ti(u,"onBeforeInput"),0<u.length&&(c=new oc("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=E))}Xf(f,t)})}function hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ti(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=os(e,n),i!=null&&r.unshift(hs(e,i,s)),i=os(e,t),i!=null&&r.push(hs(e,i,s))),e=e.return}return r}function In(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yc(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=os(n,i),l!=null&&o.unshift(hs(n,l,a))):s||(l=os(n,i),l!=null&&o.push(hs(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ov=/\r\n?/g,av=/\u0000|\uFFFD/g;function wc(e){return(typeof e=="string"?e:""+e).replace(ov,`
`).replace(av,"")}function Ks(e,t,n){if(t=wc(t),wc(e)!==t&&n)throw Error(T(425))}function Ni(){}var za=null,Va=null;function Ba(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,lv=typeof clearTimeout=="function"?clearTimeout:void 0,Sc=typeof Promise=="function"?Promise:void 0,uv=typeof queueMicrotask=="function"?queueMicrotask:typeof Sc<"u"?function(e){return Sc.resolve(null).then(e).catch(cv)}:Ha;function cv(e){setTimeout(function(){throw e})}function Bo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),us(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);us(t)}function tn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _c(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var kr=Math.random().toString(36).slice(2),ft="__reactFiber$"+kr,gs="__reactProps$"+kr,Ot="__reactContainer$"+kr,Ga="__reactEvents$"+kr,dv="__reactListeners$"+kr,fv="__reactHandles$"+kr;function _n(e){var t=e[ft];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ot]||n[ft]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_c(e);e!==null;){if(n=e[ft])return n;e=_c(e)}return t}e=n,n=e.parentNode}return null}function Ps(e){return e=e[ft]||e[Ot],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(T(33))}function ro(e){return e[gs]||null}var qa=[],tr=-1;function dn(e){return{current:e}}function X(e){0>tr||(e.current=qa[tr],qa[tr]=null,tr--)}function J(e,t){tr++,qa[tr]=e.current,e.current=t}var ln={},ke=dn(ln),$e=dn(!1),Rn=ln;function gr(e,t){var n=e.type.contextTypes;if(!n)return ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oe(e){return e=e.childContextTypes,e!=null}function bi(){X($e),X(ke)}function xc(e,t,n){if(ke.current!==ln)throw Error(T(168));J(ke,t),J($e,n)}function eh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(T(108,Jp(e)||"Unknown",s));return re({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ln,Rn=ke.current,J(ke,e),J($e,$e.current),!0}function kc(e,t,n){var r=e.stateNode;if(!r)throw Error(T(169));n?(e=eh(e,t,Rn),r.__reactInternalMemoizedMergedChildContext=e,X($e),X(ke),J(ke,e)):X($e),J($e,n)}var Pt=null,so=!1,Ho=!1;function th(e){Pt===null?Pt=[e]:Pt.push(e)}function hv(e){so=!0,th(e)}function fn(){if(!Ho&&Pt!==null){Ho=!0;var e=0,t=W;try{var n=Pt;for(W=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Pt=null,so=!1}catch(s){throw Pt!==null&&(Pt=Pt.slice(e+1)),jf(Gl,fn),s}finally{W=t,Ho=!1}}return null}var nr=[],rr=0,$i=null,Oi=0,He=[],Ge=0,Pn=null,Tt=1,Nt="";function vn(e,t){nr[rr++]=Oi,nr[rr++]=$i,$i=e,Oi=t}function nh(e,t,n){He[Ge++]=Tt,He[Ge++]=Nt,He[Ge++]=Pn,Pn=e;var r=Tt;e=Nt;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Tt=1<<32-ot(t)+s|n<<s|r,Nt=i+e}else Tt=1<<i|n<<s|r,Nt=e}function eu(e){e.return!==null&&(vn(e,1),nh(e,1,0))}function tu(e){for(;e===$i;)$i=nr[--rr],nr[rr]=null,Oi=nr[--rr],nr[rr]=null;for(;e===Pn;)Pn=He[--Ge],He[Ge]=null,Nt=He[--Ge],He[Ge]=null,Tt=He[--Ge],He[Ge]=null}var Fe=null,De=null,Z=!1,it=null;function rh(e,t){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fe=e,De=tn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fe=e,De=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pn!==null?{id:Tt,overflow:Nt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Fe=e,De=null,!0):!1;default:return!1}}function Ka(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wa(e){if(Z){var t=De;if(t){var n=t;if(!Cc(e,t)){if(Ka(e))throw Error(T(418));t=tn(n.nextSibling);var r=Fe;t&&Cc(e,t)?rh(r,n):(e.flags=e.flags&-4097|2,Z=!1,Fe=e)}}else{if(Ka(e))throw Error(T(418));e.flags=e.flags&-4097|2,Z=!1,Fe=e}}}function Ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fe=e}function Ws(e){if(e!==Fe)return!1;if(!Z)return Ec(e),Z=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ba(e.type,e.memoizedProps)),t&&(t=De)){if(Ka(e))throw sh(),Error(T(418));for(;t;)rh(e,t),t=tn(t.nextSibling)}if(Ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(T(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){De=tn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}De=null}}else De=Fe?tn(e.stateNode.nextSibling):null;return!0}function sh(){for(var e=De;e;)e=tn(e.nextSibling)}function pr(){De=Fe=null,Z=!1}function nu(e){it===null?it=[e]:it.push(e)}var gv=Ft.ReactCurrentBatchConfig;function $r(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(T(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jc(e){var t=e._init;return t(e._payload)}function ih(e){function t(v,m){if(e){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function s(v,m){return v=on(v,m),v.index=0,v.sibling=null,v}function i(v,m,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,m,y,k){return m===null||m.tag!==6?(m=Yo(y,v.mode,k),m.return=v,m):(m=s(m,y),m.return=v,m)}function l(v,m,y,k){var x=y.type;return x===Jn?c(v,m,y.props.children,k,y.key):m!==null&&(m.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Bt&&jc(x)===m.type)?(k=s(m,y.props),k.ref=$r(v,m,y),k.return=v,k):(k=wi(y.type,y.key,y.props,null,v.mode,k),k.ref=$r(v,m,y),k.return=v,k)}function u(v,m,y,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Xo(y,v.mode,k),m.return=v,m):(m=s(m,y.children||[]),m.return=v,m)}function c(v,m,y,k,x){return m===null||m.tag!==7?(m=En(y,v.mode,k,x),m.return=v,m):(m=s(m,y),m.return=v,m)}function f(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Yo(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Fs:return y=wi(m.type,m.key,m.props,null,v.mode,y),y.ref=$r(v,null,m),y.return=v,y;case Qn:return m=Xo(m,v.mode,y),m.return=v,m;case Bt:var k=m._init;return f(v,k(m._payload),y)}if(zr(m)||Pr(m))return m=En(m,v.mode,y,null),m.return=v,m;Qs(v,m)}return null}function h(v,m,y,k){var x=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:a(v,m,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fs:return y.key===x?l(v,m,y,k):null;case Qn:return y.key===x?u(v,m,y,k):null;case Bt:return x=y._init,h(v,m,x(y._payload),k)}if(zr(y)||Pr(y))return x!==null?null:c(v,m,y,k,null);Qs(v,y)}return null}function g(v,m,y,k,x){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(y)||null,a(m,v,""+k,x);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Fs:return v=v.get(k.key===null?y:k.key)||null,l(m,v,k,x);case Qn:return v=v.get(k.key===null?y:k.key)||null,u(m,v,k,x);case Bt:var C=k._init;return g(v,m,y,C(k._payload),x)}if(zr(k)||Pr(k))return v=v.get(y)||null,c(m,v,k,x,null);Qs(m,k)}return null}function p(v,m,y,k){for(var x=null,C=null,E=m,j=m=0,R=null;E!==null&&j<y.length;j++){E.index>j?(R=E,E=null):R=E.sibling;var N=h(v,E,y[j],k);if(N===null){E===null&&(E=R);break}e&&E&&N.alternate===null&&t(v,E),m=i(N,m,j),C===null?x=N:C.sibling=N,C=N,E=R}if(j===y.length)return n(v,E),Z&&vn(v,j),x;if(E===null){for(;j<y.length;j++)E=f(v,y[j],k),E!==null&&(m=i(E,m,j),C===null?x=E:C.sibling=E,C=E);return Z&&vn(v,j),x}for(E=r(v,E);j<y.length;j++)R=g(E,v,j,y[j],k),R!==null&&(e&&R.alternate!==null&&E.delete(R.key===null?j:R.key),m=i(R,m,j),C===null?x=R:C.sibling=R,C=R);return e&&E.forEach(function(M){return t(v,M)}),Z&&vn(v,j),x}function w(v,m,y,k){var x=Pr(y);if(typeof x!="function")throw Error(T(150));if(y=x.call(y),y==null)throw Error(T(151));for(var C=x=null,E=m,j=m=0,R=null,N=y.next();E!==null&&!N.done;j++,N=y.next()){E.index>j?(R=E,E=null):R=E.sibling;var M=h(v,E,N.value,k);if(M===null){E===null&&(E=R);break}e&&E&&M.alternate===null&&t(v,E),m=i(M,m,j),C===null?x=M:C.sibling=M,C=M,E=R}if(N.done)return n(v,E),Z&&vn(v,j),x;if(E===null){for(;!N.done;j++,N=y.next())N=f(v,N.value,k),N!==null&&(m=i(N,m,j),C===null?x=N:C.sibling=N,C=N);return Z&&vn(v,j),x}for(E=r(v,E);!N.done;j++,N=y.next())N=g(E,v,j,N.value,k),N!==null&&(e&&N.alternate!==null&&E.delete(N.key===null?j:N.key),m=i(N,m,j),C===null?x=N:C.sibling=N,C=N);return e&&E.forEach(function(F){return t(v,F)}),Z&&vn(v,j),x}function _(v,m,y,k){if(typeof y=="object"&&y!==null&&y.type===Jn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Fs:e:{for(var x=y.key,C=m;C!==null;){if(C.key===x){if(x=y.type,x===Jn){if(C.tag===7){n(v,C.sibling),m=s(C,y.props.children),m.return=v,v=m;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Bt&&jc(x)===C.type){n(v,C.sibling),m=s(C,y.props),m.ref=$r(v,C,y),m.return=v,v=m;break e}n(v,C);break}else t(v,C);C=C.sibling}y.type===Jn?(m=En(y.props.children,v.mode,k,y.key),m.return=v,v=m):(k=wi(y.type,y.key,y.props,null,v.mode,k),k.ref=$r(v,m,y),k.return=v,v=k)}return o(v);case Qn:e:{for(C=y.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=s(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else t(v,m);m=m.sibling}m=Xo(y,v.mode,k),m.return=v,v=m}return o(v);case Bt:return C=y._init,_(v,m,C(y._payload),k)}if(zr(y))return p(v,m,y,k);if(Pr(y))return w(v,m,y,k);Qs(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=s(m,y),m.return=v,v=m):(n(v,m),m=Yo(y,v.mode,k),m.return=v,v=m),o(v)):n(v,m)}return _}var mr=ih(!0),oh=ih(!1),Ai=dn(null),Ii=null,sr=null,ru=null;function su(){ru=sr=Ii=null}function iu(e){var t=Ai.current;X(Ai),e._currentValue=t}function Qa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dr(e,t){Ii=e,ru=sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function Qe(e){var t=e._currentValue;if(ru!==e)if(e={context:e,memoizedValue:t,next:null},sr===null){if(Ii===null)throw Error(T(308));sr=e,Ii.dependencies={lanes:0,firstContext:e}}else sr=sr.next=e;return t}var xn=null;function ou(e){xn===null?xn=[e]:xn.push(e)}function ah(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ou(t)):(n.next=s.next,s.next=n),t.interleaved=n,At(e,r)}function At(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ht=!1;function au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,At(e,n)}return s=r.interleaved,s===null?(t.next=t,ou(r)):(t.next=s.next,s.next=t),r.interleaved=t,At(e,n)}function hi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ql(e,n)}}function Rc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Di(e,t,n,r){var s=e.updateQueue;Ht=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,c=u=l=null,a=i;do{var h=a.lane,g=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,w=a;switch(h=t,g=n,w.tag){case 1:if(p=w.payload,typeof p=="function"){f=p.call(g,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=w.payload,h=typeof p=="function"?p.call(g,f,h):p,h==null)break e;f=re({},f,h);break e;case 2:Ht=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=f):c=c.next=g,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(c===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Nn|=o,e.lanes=o,e.memoizedState=f}}function Pc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var Ts={},pt=dn(Ts),ps=dn(Ts),ms=dn(Ts);function kn(e){if(e===Ts)throw Error(T(174));return e}function lu(e,t){switch(J(ms,t),J(ps,e),J(pt,Ts),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ta(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ta(t,e)}X(pt),J(pt,t)}function vr(){X(pt),X(ps),X(ms)}function uh(e){kn(ms.current);var t=kn(pt.current),n=Ta(t,e.type);t!==n&&(J(ps,e),J(pt,n))}function uu(e){ps.current===e&&(X(pt),X(ps))}var ee=dn(0);function Fi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Go=[];function cu(){for(var e=0;e<Go.length;e++)Go[e]._workInProgressVersionPrimary=null;Go.length=0}var gi=Ft.ReactCurrentDispatcher,qo=Ft.ReactCurrentBatchConfig,Tn=0,te=null,ue=null,fe=null,Mi=!1,Jr=!1,vs=0,pv=0;function ye(){throw Error(T(321))}function du(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ut(e[n],t[n]))return!1;return!0}function fu(e,t,n,r,s,i){if(Tn=i,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gi.current=e===null||e.memoizedState===null?wv:Sv,e=n(r,s),Jr){i=0;do{if(Jr=!1,vs=0,25<=i)throw Error(T(301));i+=1,fe=ue=null,t.updateQueue=null,gi.current=_v,e=n(r,s)}while(Jr)}if(gi.current=Ui,t=ue!==null&&ue.next!==null,Tn=0,fe=ue=te=null,Mi=!1,t)throw Error(T(300));return e}function hu(){var e=vs!==0;return vs=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?te.memoizedState=fe=e:fe=fe.next=e,fe}function Je(){if(ue===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=ue.next;var t=fe===null?te.memoizedState:fe.next;if(t!==null)fe=t,ue=e;else{if(e===null)throw Error(T(310));ue=e,e={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?te.memoizedState=fe=e:fe=fe.next=e}return fe}function ys(e,t){return typeof t=="function"?t(e):t}function Ko(e){var t=Je(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Tn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,te.lanes|=c,Nn|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,ut(r,t.memoizedState)||(Le=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,te.lanes|=i,Nn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wo(e){var t=Je(),n=t.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ut(i,t.memoizedState)||(Le=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ch(){}function dh(e,t){var n=te,r=Je(),s=t(),i=!ut(r.memoizedState,s);if(i&&(r.memoizedState=s,Le=!0),r=r.queue,gu(gh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,ws(9,hh.bind(null,n,r,s,t),void 0,null),he===null)throw Error(T(349));Tn&30||fh(n,t,s)}return s}function fh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hh(e,t,n,r){t.value=n,t.getSnapshot=r,ph(t)&&mh(e)}function gh(e,t,n){return n(function(){ph(t)&&mh(e)})}function ph(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ut(e,n)}catch{return!0}}function mh(e){var t=At(e,1);t!==null&&at(t,e,1,-1)}function Tc(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:e},t.queue=e,e=e.dispatch=yv.bind(null,te,e),[t.memoizedState,e]}function ws(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vh(){return Je().memoizedState}function pi(e,t,n,r){var s=dt();te.flags|=e,s.memoizedState=ws(1|t,n,void 0,r===void 0?null:r)}function io(e,t,n,r){var s=Je();r=r===void 0?null:r;var i=void 0;if(ue!==null){var o=ue.memoizedState;if(i=o.destroy,r!==null&&du(r,o.deps)){s.memoizedState=ws(t,n,i,r);return}}te.flags|=e,s.memoizedState=ws(1|t,n,i,r)}function Nc(e,t){return pi(8390656,8,e,t)}function gu(e,t){return io(2048,8,e,t)}function yh(e,t){return io(4,2,e,t)}function wh(e,t){return io(4,4,e,t)}function Sh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _h(e,t,n){return n=n!=null?n.concat([e]):null,io(4,4,Sh.bind(null,t,e),n)}function pu(){}function xh(e,t){var n=Je();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&du(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function kh(e,t){var n=Je();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&du(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ch(e,t,n){return Tn&21?(ut(n,t)||(n=Tf(),te.lanes|=n,Nn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=n)}function mv(e,t){var n=W;W=n!==0&&4>n?n:4,e(!0);var r=qo.transition;qo.transition={};try{e(!1),t()}finally{W=n,qo.transition=r}}function Eh(){return Je().memoizedState}function vv(e,t,n){var r=sn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jh(e))Rh(t,n);else if(n=ah(e,t,n,r),n!==null){var s=je();at(n,e,r,s),Ph(n,t,r)}}function yv(e,t,n){var r=sn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jh(e))Rh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ut(a,o)){var l=t.interleaved;l===null?(s.next=s,ou(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}n=ah(e,t,s,r),n!==null&&(s=je(),at(n,e,r,s),Ph(n,t,r))}}function jh(e){var t=e.alternate;return e===te||t!==null&&t===te}function Rh(e,t){Jr=Mi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ph(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ql(e,n)}}var Ui={readContext:Qe,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useInsertionEffect:ye,useLayoutEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useMutableSource:ye,useSyncExternalStore:ye,useId:ye,unstable_isNewReconciler:!1},wv={readContext:Qe,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Qe,useEffect:Nc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,pi(4194308,4,Sh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return pi(4,2,e,t)},useMemo:function(e,t){var n=dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vv.bind(null,te,e),[r.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:Tc,useDebugValue:pu,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=Tc(!1),t=e[0];return e=mv.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=te,s=dt();if(Z){if(n===void 0)throw Error(T(407));n=n()}else{if(n=t(),he===null)throw Error(T(349));Tn&30||fh(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Nc(gh.bind(null,r,i,e),[e]),r.flags|=2048,ws(9,hh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=dt(),t=he.identifierPrefix;if(Z){var n=Nt,r=Tt;n=(r&~(1<<32-ot(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=vs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Sv={readContext:Qe,useCallback:xh,useContext:Qe,useEffect:gu,useImperativeHandle:_h,useInsertionEffect:yh,useLayoutEffect:wh,useMemo:kh,useReducer:Ko,useRef:vh,useState:function(){return Ko(ys)},useDebugValue:pu,useDeferredValue:function(e){var t=Je();return Ch(t,ue.memoizedState,e)},useTransition:function(){var e=Ko(ys)[0],t=Je().memoizedState;return[e,t]},useMutableSource:ch,useSyncExternalStore:dh,useId:Eh,unstable_isNewReconciler:!1},_v={readContext:Qe,useCallback:xh,useContext:Qe,useEffect:gu,useImperativeHandle:_h,useInsertionEffect:yh,useLayoutEffect:wh,useMemo:kh,useReducer:Wo,useRef:vh,useState:function(){return Wo(ys)},useDebugValue:pu,useDeferredValue:function(e){var t=Je();return ue===null?t.memoizedState=e:Ch(t,ue.memoizedState,e)},useTransition:function(){var e=Wo(ys)[0],t=Je().memoizedState;return[e,t]},useMutableSource:ch,useSyncExternalStore:dh,useId:Eh,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=re({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ja(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:re({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oo={isMounted:function(e){return(e=e._reactInternals)?$n(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=je(),s=sn(e),i=bt(r,s);i.payload=t,n!=null&&(i.callback=n),t=nn(e,i,s),t!==null&&(at(t,e,s,r),hi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=je(),s=sn(e),i=bt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=nn(e,i,s),t!==null&&(at(t,e,s,r),hi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=je(),r=sn(e),s=bt(n,r);s.tag=2,t!=null&&(s.callback=t),t=nn(e,s,r),t!==null&&(at(t,e,r,n),hi(t,e,r))}};function bc(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ds(n,r)||!ds(s,i):!0}function Th(e,t,n){var r=!1,s=ln,i=t.contextType;return typeof i=="object"&&i!==null?i=Qe(i):(s=Oe(t)?Rn:ke.current,r=t.contextTypes,i=(r=r!=null)?gr(e,s):ln),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Lc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function Ya(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},au(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qe(i):(i=Oe(t)?Rn:ke.current,s.context=gr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ja(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&oo.enqueueReplaceState(s,s.state,null),Di(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=Qp(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function Nh(e,t,n){n=bt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vi||(Vi=!0,ll=r),Xa(e,t)},n}function bh(e,t,n){n=bt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Xa(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xa(e,t),typeof r!="function"&&(rn===null?rn=new Set([this]):rn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function $c(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new xv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Iv.bind(null,e,t,n),t.then(e,e))}function Oc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ac(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bt(-1,1),t.tag=2,nn(n,t,1))),n.lanes|=1),e)}var kv=Ft.ReactCurrentOwner,Le=!1;function Ee(e,t,n,r){t.child=e===null?oh(t,null,n,r):mr(t,e.child,n,r)}function Ic(e,t,n,r,s){n=n.render;var i=t.ref;return dr(t,s),r=fu(e,t,n,r,i,s),n=hu(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,It(e,t,s)):(Z&&n&&eu(t),t.flags|=1,Ee(e,t,r,s),t.child)}function Dc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ku(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Lh(e,t,i,r,s)):(e=wi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ds,n(o,r)&&e.ref===t.ref)return It(e,t,s)}return t.flags|=1,e=on(i,r),e.ref=t.ref,e.return=t,t.child=e}function Lh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(ds(i,r)&&e.ref===t.ref)if(Le=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,It(e,t,s)}return Za(e,t,n,r,s)}function $h(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(or,Ie),Ie|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(or,Ie),Ie|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,J(or,Ie),Ie|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,J(or,Ie),Ie|=r;return Ee(e,t,s,n),t.child}function Oh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Za(e,t,n,r,s){var i=Oe(n)?Rn:ke.current;return i=gr(t,i),dr(t,s),n=fu(e,t,n,r,i,s),r=hu(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,It(e,t,s)):(Z&&r&&eu(t),t.flags|=1,Ee(e,t,n,s),t.child)}function Fc(e,t,n,r,s){if(Oe(n)){var i=!0;Li(t)}else i=!1;if(dr(t,s),t.stateNode===null)mi(e,t),Th(t,n,r),Ya(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qe(u):(u=Oe(n)?Rn:ke.current,u=gr(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Lc(t,o,r,u),Ht=!1;var h=t.memoizedState;o.state=h,Di(t,r,o,s),l=t.memoizedState,a!==r||h!==l||$e.current||Ht?(typeof c=="function"&&(Ja(t,n,c,r),l=t.memoizedState),(a=Ht||bc(t,n,a,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,lh(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:tt(t.type,a),o.props=u,f=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qe(l):(l=Oe(n)?Rn:ke.current,l=gr(t,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&Lc(t,o,r,l),Ht=!1,h=t.memoizedState,o.state=h,Di(t,r,o,s);var p=t.memoizedState;a!==f||h!==p||$e.current||Ht?(typeof g=="function"&&(Ja(t,n,g,r),p=t.memoizedState),(u=Ht||bc(t,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return el(e,t,n,r,i,s)}function el(e,t,n,r,s,i){Oh(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&kc(t,n,!1),It(e,t,i);r=t.stateNode,kv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=mr(t,e.child,null,i),t.child=mr(t,null,a,i)):Ee(e,t,a,i),t.memoizedState=r.state,s&&kc(t,n,!0),t.child}function Ah(e){var t=e.stateNode;t.pendingContext?xc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xc(e,t.context,!1),lu(e,t.containerInfo)}function Mc(e,t,n,r,s){return pr(),nu(s),t.flags|=256,Ee(e,t,n,r),t.child}var tl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ih(e,t,n){var r=t.pendingProps,s=ee.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),J(ee,s&1),e===null)return Wa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=uo(o,r,0,null),e=En(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=nl(n),t.memoizedState=tl,e):mu(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Cv(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=on(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=on(a,i):(i=En(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?nl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=tl,r}return i=e.child,e=i.sibling,r=on(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function mu(e,t){return t=uo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,n,r){return r!==null&&nu(r),mr(t,e.child,null,n),e=mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cv(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Qo(Error(T(422))),Js(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=uo({mode:"visible",children:r.children},s,0,null),i=En(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&mr(t,e.child,null,o),t.child.memoizedState=nl(o),t.memoizedState=tl,i);if(!(t.mode&1))return Js(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(T(419)),r=Qo(i,r,void 0),Js(e,t,o,r)}if(a=(o&e.childLanes)!==0,Le||a){if(r=he,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,At(e,s),at(r,e,s,-1))}return xu(),r=Qo(Error(T(421))),Js(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Dv.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,De=tn(s.nextSibling),Fe=t,Z=!0,it=null,e!==null&&(He[Ge++]=Tt,He[Ge++]=Nt,He[Ge++]=Pn,Tt=e.id,Nt=e.overflow,Pn=t),t=mu(t,r.children),t.flags|=4096,t)}function Uc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qa(e.return,t,n)}function Jo(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Dh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ee(e,t,r.children,n),r=ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uc(e,n,t);else if(e.tag===19)Uc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(J(ee,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Fi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Jo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Fi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Jo(t,!0,n,null,i);break;case"together":Jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function It(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Nn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(T(153));if(t.child!==null){for(e=t.child,n=on(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=on(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ev(e,t,n){switch(t.tag){case 3:Ah(t),pr();break;case 5:uh(t);break;case 1:Oe(t.type)&&Li(t);break;case 4:lu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;J(Ai,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(J(ee,ee.current&1),t.flags|=128,null):n&t.child.childLanes?Ih(e,t,n):(J(ee,ee.current&1),e=It(e,t,n),e!==null?e.sibling:null);J(ee,ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Dh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(ee,ee.current),r)break;return null;case 22:case 23:return t.lanes=0,$h(e,t,n)}return It(e,t,n)}var Fh,rl,Mh,Uh;Fh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rl=function(){};Mh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,kn(pt.current);var i=null;switch(n){case"input":s=Ea(e,s),r=Ea(e,r),i=[];break;case"select":s=re({},s,{value:void 0}),r=re({},r,{value:void 0}),i=[];break;case"textarea":s=Pa(e,s),r=Pa(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ni)}Na(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ss.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ss.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Y("scroll",e),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Uh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Or(e,t){if(!Z)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function we(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jv(e,t,n){var r=t.pendingProps;switch(tu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(t),null;case 1:return Oe(t.type)&&bi(),we(t),null;case 3:return r=t.stateNode,vr(),X($e),X(ke),cu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ws(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(dl(it),it=null))),rl(e,t),we(t),null;case 5:uu(t);var s=kn(ms.current);if(n=t.type,e!==null&&t.stateNode!=null)Mh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(T(166));return we(t),null}if(e=kn(pt.current),Ws(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ft]=t,r[gs]=i,e=(t.mode&1)!==0,n){case"dialog":Y("cancel",r),Y("close",r);break;case"iframe":case"object":case"embed":Y("load",r);break;case"video":case"audio":for(s=0;s<Br.length;s++)Y(Br[s],r);break;case"source":Y("error",r);break;case"img":case"image":case"link":Y("error",r),Y("load",r);break;case"details":Y("toggle",r);break;case"input":Qu(r,i),Y("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Y("invalid",r);break;case"textarea":Yu(r,i),Y("invalid",r)}Na(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ks(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ks(r.textContent,a,e),s=["children",""+a]):ss.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Y("scroll",r)}switch(n){case"input":Ms(r),Ju(r,i,!0);break;case"textarea":Ms(r),Xu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ni)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ft]=t,e[gs]=r,Fh(e,t,!1,!1),t.stateNode=e;e:{switch(o=ba(n,r),n){case"dialog":Y("cancel",e),Y("close",e),s=r;break;case"iframe":case"object":case"embed":Y("load",e),s=r;break;case"video":case"audio":for(s=0;s<Br.length;s++)Y(Br[s],e);s=r;break;case"source":Y("error",e),s=r;break;case"img":case"image":case"link":Y("error",e),Y("load",e),s=r;break;case"details":Y("toggle",e),s=r;break;case"input":Qu(e,r),s=Ea(e,r),Y("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=re({},r,{value:void 0}),Y("invalid",e);break;case"textarea":Yu(e,r),s=Pa(e,r),Y("invalid",e);break;default:s=r}Na(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?vf(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pf(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&is(e,l):typeof l=="number"&&is(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ss.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Y("scroll",e):l!=null&&Ul(e,i,l,o))}switch(n){case"input":Ms(e),Ju(e,r,!1);break;case"textarea":Ms(e),Xu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+an(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ar(e,!!r.multiple,i,!1):r.defaultValue!=null&&ar(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ni)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return we(t),null;case 6:if(e&&t.stateNode!=null)Uh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(T(166));if(n=kn(ms.current),kn(pt.current),Ws(t)){if(r=t.stateNode,n=t.memoizedProps,r[ft]=t,(i=r.nodeValue!==n)&&(e=Fe,e!==null))switch(e.tag){case 3:Ks(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ks(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ft]=t,t.stateNode=r}return we(t),null;case 13:if(X(ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Z&&De!==null&&t.mode&1&&!(t.flags&128))sh(),pr(),t.flags|=98560,i=!1;else if(i=Ws(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(T(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[ft]=t}else pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;we(t),i=!1}else it!==null&&(dl(it),it=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?ce===0&&(ce=3):xu())),t.updateQueue!==null&&(t.flags|=4),we(t),null);case 4:return vr(),rl(e,t),e===null&&fs(t.stateNode.containerInfo),we(t),null;case 10:return iu(t.type._context),we(t),null;case 17:return Oe(t.type)&&bi(),we(t),null;case 19:if(X(ee),i=t.memoizedState,i===null)return we(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Or(i,!1);else{if(ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Fi(e),o!==null){for(t.flags|=128,Or(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return J(ee,ee.current&1|2),t.child}e=e.sibling}i.tail!==null&&oe()>wr&&(t.flags|=128,r=!0,Or(i,!1),t.lanes=4194304)}else{if(!r)if(e=Fi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Or(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Z)return we(t),null}else 2*oe()-i.renderingStartTime>wr&&n!==1073741824&&(t.flags|=128,r=!0,Or(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=oe(),t.sibling=null,n=ee.current,J(ee,r?n&1|2:n&1),t):(we(t),null);case 22:case 23:return _u(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ie&1073741824&&(we(t),t.subtreeFlags&6&&(t.flags|=8192)):we(t),null;case 24:return null;case 25:return null}throw Error(T(156,t.tag))}function Rv(e,t){switch(tu(t),t.tag){case 1:return Oe(t.type)&&bi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vr(),X($e),X(ke),cu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uu(t),null;case 13:if(X(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(T(340));pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(ee),null;case 4:return vr(),null;case 10:return iu(t.type._context),null;case 22:case 23:return _u(),null;case 24:return null;default:return null}}var Ys=!1,xe=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,L=null;function ir(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){se(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){se(e,t,r)}}var zc=!1;function Tv(e,t){if(za=Ri,e=Gf(),Zl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===e)break t;if(h===n&&++u===s&&(a=o),h===i&&++c===r&&(l=o),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:e,selectionRange:n},Ri=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var w=p.memoizedProps,_=p.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?w:tt(t.type,w),_);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(k){se(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return p=zc,zc=!1,p}function Yr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&sl(t,n,i)}s=s.next}while(s!==r)}}function ao(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zh(e){var t=e.alternate;t!==null&&(e.alternate=null,zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ft],delete t[gs],delete t[Ga],delete t[dv],delete t[fv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vh(e){return e.tag===5||e.tag===3||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ni));else if(r!==4&&(e=e.child,e!==null))for(ol(e,t,n),e=e.sibling;e!==null;)ol(e,t,n),e=e.sibling}function al(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(al(e,t,n),e=e.sibling;e!==null;)al(e,t,n),e=e.sibling}var pe=null,rt=!1;function Ut(e,t,n){for(n=n.child;n!==null;)Bh(e,t,n),n=n.sibling}function Bh(e,t,n){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Zi,n)}catch{}switch(n.tag){case 5:xe||ir(n,t);case 6:var r=pe,s=rt;pe=null,Ut(e,t,n),pe=r,rt=s,pe!==null&&(rt?(e=pe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pe.removeChild(n.stateNode));break;case 18:pe!==null&&(rt?(e=pe,n=n.stateNode,e.nodeType===8?Bo(e.parentNode,n):e.nodeType===1&&Bo(e,n),us(e)):Bo(pe,n.stateNode));break;case 4:r=pe,s=rt,pe=n.stateNode.containerInfo,rt=!0,Ut(e,t,n),pe=r,rt=s;break;case 0:case 11:case 14:case 15:if(!xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sl(n,t,o),s=s.next}while(s!==r)}Ut(e,t,n);break;case 1:if(!xe&&(ir(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){se(n,t,a)}Ut(e,t,n);break;case 21:Ut(e,t,n);break;case 22:n.mode&1?(xe=(r=xe)||n.memoizedState!==null,Ut(e,t,n),xe=r):Ut(e,t,n);break;default:Ut(e,t,n)}}function Bc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Pv),t.forEach(function(r){var s=Fv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xe(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:pe=a.stateNode,rt=!1;break e;case 3:pe=a.stateNode.containerInfo,rt=!0;break e;case 4:pe=a.stateNode.containerInfo,rt=!0;break e}a=a.return}if(pe===null)throw Error(T(160));Bh(i,o,s),pe=null,rt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hh(t,e),t=t.sibling}function Hh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xe(t,e),ct(e),r&4){try{Yr(3,e,e.return),ao(3,e)}catch(w){se(e,e.return,w)}try{Yr(5,e,e.return)}catch(w){se(e,e.return,w)}}break;case 1:Xe(t,e),ct(e),r&512&&n!==null&&ir(n,n.return);break;case 5:if(Xe(t,e),ct(e),r&512&&n!==null&&ir(n,n.return),e.flags&32){var s=e.stateNode;try{is(s,"")}catch(w){se(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ff(s,i),ba(a,o);var u=ba(a,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?vf(s,f):c==="dangerouslySetInnerHTML"?pf(s,f):c==="children"?is(s,f):Ul(s,c,f,u)}switch(a){case"input":ja(s,i);break;case"textarea":hf(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ar(s,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?ar(s,!!i.multiple,i.defaultValue,!0):ar(s,!!i.multiple,i.multiple?[]:"",!1))}s[gs]=i}catch(w){se(e,e.return,w)}}break;case 6:if(Xe(t,e),ct(e),r&4){if(e.stateNode===null)throw Error(T(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){se(e,e.return,w)}}break;case 3:if(Xe(t,e),ct(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(w){se(e,e.return,w)}break;case 4:Xe(t,e),ct(e);break;case 13:Xe(t,e),ct(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wu=oe())),r&4&&Bc(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(xe=(u=xe)||c,Xe(t,e),xe=u):Xe(t,e),ct(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(L=e,c=e.child;c!==null;){for(f=L=c;L!==null;){switch(h=L,g=h.child,h.tag){case 0:case 11:case 14:case 15:Yr(4,h,h.return);break;case 1:ir(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(w){se(r,n,w)}}break;case 5:ir(h,h.return);break;case 22:if(h.memoizedState!==null){Gc(f);continue}}g!==null?(g.return=h,L=g):Gc(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mf("display",o))}catch(w){se(e,e.return,w)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){se(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xe(t,e),ct(e),r&4&&Bc(e);break;case 21:break;default:Xe(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vh(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(is(s,""),r.flags&=-33);var i=Vc(e);al(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Vc(e);ol(e,a,o);break;default:throw Error(T(161))}}catch(l){se(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Nv(e,t,n){L=e,Gh(e)}function Gh(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ys;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||xe;a=Ys;var u=xe;if(Ys=o,(xe=l)&&!u)for(L=s;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?qc(s):l!==null?(l.return=o,L=l):qc(s);for(;i!==null;)L=i,Gh(i),i=i.sibling;L=s,Ys=a,xe=u}Hc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):Hc(e)}}function Hc(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xe||ao(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:tt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Pc(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pc(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&us(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}xe||t.flags&512&&il(t)}catch(h){se(t,t.return,h)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function Gc(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function qc(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ao(4,t)}catch(l){se(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(l){se(t,s,l)}}var i=t.return;try{il(t)}catch(l){se(t,i,l)}break;case 5:var o=t.return;try{il(t)}catch(l){se(t,o,l)}}}catch(l){se(t,t.return,l)}if(t===e){L=null;break}var a=t.sibling;if(a!==null){a.return=t.return,L=a;break}L=t.return}}var bv=Math.ceil,zi=Ft.ReactCurrentDispatcher,vu=Ft.ReactCurrentOwner,Ke=Ft.ReactCurrentBatchConfig,K=0,he=null,le=null,me=0,Ie=0,or=dn(0),ce=0,Ss=null,Nn=0,lo=0,yu=0,Xr=null,Ne=null,wu=0,wr=1/0,Ct=null,Vi=!1,ll=null,rn=null,Xs=!1,Qt=null,Bi=0,Zr=0,ul=null,vi=-1,yi=0;function je(){return K&6?oe():vi!==-1?vi:vi=oe()}function sn(e){return e.mode&1?K&2&&me!==0?me&-me:gv.transition!==null?(yi===0&&(yi=Tf()),yi):(e=W,e!==0||(e=window.event,e=e===void 0?16:If(e.type)),e):1}function at(e,t,n,r){if(50<Zr)throw Zr=0,ul=null,Error(T(185));js(e,n,r),(!(K&2)||e!==he)&&(e===he&&(!(K&2)&&(lo|=n),ce===4&&qt(e,me)),Ae(e,r),n===1&&K===0&&!(t.mode&1)&&(wr=oe()+500,so&&fn()))}function Ae(e,t){var n=e.callbackNode;gm(e,t);var r=ji(e,e===he?me:0);if(r===0)n!==null&&tc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tc(n),t===1)e.tag===0?hv(Kc.bind(null,e)):th(Kc.bind(null,e)),uv(function(){!(K&6)&&fn()}),n=null;else{switch(Nf(r)){case 1:n=Gl;break;case 4:n=Rf;break;case 16:n=Ei;break;case 536870912:n=Pf;break;default:n=Ei}n=Zh(n,qh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qh(e,t){if(vi=-1,yi=0,K&6)throw Error(T(327));var n=e.callbackNode;if(fr()&&e.callbackNode!==n)return null;var r=ji(e,e===he?me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Hi(e,r);else{t=r;var s=K;K|=2;var i=Wh();(he!==e||me!==t)&&(Ct=null,wr=oe()+500,Cn(e,t));do try{Ov();break}catch(a){Kh(e,a)}while(!0);su(),zi.current=i,K=s,le!==null?t=0:(he=null,me=0,t=ce)}if(t!==0){if(t===2&&(s=Ia(e),s!==0&&(r=s,t=cl(e,s))),t===1)throw n=Ss,Cn(e,0),qt(e,r),Ae(e,oe()),n;if(t===6)qt(e,r);else{if(s=e.current.alternate,!(r&30)&&!Lv(s)&&(t=Hi(e,r),t===2&&(i=Ia(e),i!==0&&(r=i,t=cl(e,i))),t===1))throw n=Ss,Cn(e,0),qt(e,r),Ae(e,oe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(T(345));case 2:yn(e,Ne,Ct);break;case 3:if(qt(e,r),(r&130023424)===r&&(t=wu+500-oe(),10<t)){if(ji(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){je(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ha(yn.bind(null,e,Ne,Ct),t);break}yn(e,Ne,Ct);break;case 4:if(qt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-ot(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bv(r/1960))-r,10<r){e.timeoutHandle=Ha(yn.bind(null,e,Ne,Ct),r);break}yn(e,Ne,Ct);break;case 5:yn(e,Ne,Ct);break;default:throw Error(T(329))}}}return Ae(e,oe()),e.callbackNode===n?qh.bind(null,e):null}function cl(e,t){var n=Xr;return e.current.memoizedState.isDehydrated&&(Cn(e,t).flags|=256),e=Hi(e,t),e!==2&&(t=Ne,Ne=n,t!==null&&dl(t)),e}function dl(e){Ne===null?Ne=e:Ne.push.apply(Ne,e)}function Lv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ut(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qt(e,t){for(t&=~yu,t&=~lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Kc(e){if(K&6)throw Error(T(327));fr();var t=ji(e,0);if(!(t&1))return Ae(e,oe()),null;var n=Hi(e,t);if(e.tag!==0&&n===2){var r=Ia(e);r!==0&&(t=r,n=cl(e,r))}if(n===1)throw n=Ss,Cn(e,0),qt(e,t),Ae(e,oe()),n;if(n===6)throw Error(T(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yn(e,Ne,Ct),Ae(e,oe()),null}function Su(e,t){var n=K;K|=1;try{return e(t)}finally{K=n,K===0&&(wr=oe()+500,so&&fn())}}function bn(e){Qt!==null&&Qt.tag===0&&!(K&6)&&fr();var t=K;K|=1;var n=Ke.transition,r=W;try{if(Ke.transition=null,W=1,e)return e()}finally{W=r,Ke.transition=n,K=t,!(K&6)&&fn()}}function _u(){Ie=or.current,X(or)}function Cn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lv(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(tu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bi();break;case 3:vr(),X($e),X(ke),cu();break;case 5:uu(r);break;case 4:vr();break;case 13:X(ee);break;case 19:X(ee);break;case 10:iu(r.type._context);break;case 22:case 23:_u()}n=n.return}if(he=e,le=e=on(e.current,null),me=Ie=t,ce=0,Ss=null,yu=lo=Nn=0,Ne=Xr=null,xn!==null){for(t=0;t<xn.length;t++)if(n=xn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}xn=null}return e}function Kh(e,t){do{var n=le;try{if(su(),gi.current=Ui,Mi){for(var r=te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mi=!1}if(Tn=0,fe=ue=te=null,Jr=!1,vs=0,vu.current=null,n===null||n.return===null){ce=1,Ss=t,le=null;break}e:{var i=e,o=n.return,a=n,l=t;if(t=me,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Oc(o);if(g!==null){g.flags&=-257,Ac(g,o,a,i,t),g.mode&1&&$c(i,u,t),t=g,l=u;var p=t.updateQueue;if(p===null){var w=new Set;w.add(l),t.updateQueue=w}else p.add(l);break e}else{if(!(t&1)){$c(i,u,t),xu();break e}l=Error(T(426))}}else if(Z&&a.mode&1){var _=Oc(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Ac(_,o,a,i,t),nu(yr(l,a));break e}}i=l=yr(l,a),ce!==4&&(ce=2),Xr===null?Xr=[i]:Xr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Nh(i,l,t);Rc(i,v);break e;case 1:a=l;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rn===null||!rn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=bh(i,a,t);Rc(i,k);break e}}i=i.return}while(i!==null)}Jh(n)}catch(x){t=x,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function Wh(){var e=zi.current;return zi.current=Ui,e===null?Ui:e}function xu(){(ce===0||ce===3||ce===2)&&(ce=4),he===null||!(Nn&268435455)&&!(lo&268435455)||qt(he,me)}function Hi(e,t){var n=K;K|=2;var r=Wh();(he!==e||me!==t)&&(Ct=null,Cn(e,t));do try{$v();break}catch(s){Kh(e,s)}while(!0);if(su(),K=n,zi.current=r,le!==null)throw Error(T(261));return he=null,me=0,ce}function $v(){for(;le!==null;)Qh(le)}function Ov(){for(;le!==null&&!im();)Qh(le)}function Qh(e){var t=Xh(e.alternate,e,Ie);e.memoizedProps=e.pendingProps,t===null?Jh(e):le=t,vu.current=null}function Jh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Rv(n,t),n!==null){n.flags&=32767,le=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ce=6,le=null;return}}else if(n=jv(n,t,Ie),n!==null){le=n;return}if(t=t.sibling,t!==null){le=t;return}le=t=e}while(t!==null);ce===0&&(ce=5)}function yn(e,t,n){var r=W,s=Ke.transition;try{Ke.transition=null,W=1,Av(e,t,n,r)}finally{Ke.transition=s,W=r}return null}function Av(e,t,n,r){do fr();while(Qt!==null);if(K&6)throw Error(T(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(T(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(pm(e,i),e===he&&(le=he=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xs||(Xs=!0,Zh(Ei,function(){return fr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ke.transition,Ke.transition=null;var o=W;W=1;var a=K;K|=4,vu.current=null,Tv(e,n),Hh(n,e),tv(Va),Ri=!!za,Va=za=null,e.current=n,Nv(n),om(),K=a,W=o,Ke.transition=i}else e.current=n;if(Xs&&(Xs=!1,Qt=e,Bi=s),i=e.pendingLanes,i===0&&(rn=null),um(n.stateNode),Ae(e,oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vi)throw Vi=!1,e=ll,ll=null,e;return Bi&1&&e.tag!==0&&fr(),i=e.pendingLanes,i&1?e===ul?Zr++:(Zr=0,ul=e):Zr=0,fn(),null}function fr(){if(Qt!==null){var e=Nf(Bi),t=Ke.transition,n=W;try{if(Ke.transition=null,W=16>e?16:e,Qt===null)var r=!1;else{if(e=Qt,Qt=null,Bi=0,K&6)throw Error(T(331));var s=K;for(K|=4,L=e.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(L=u;L!==null;){var c=L;switch(c.tag){case 0:case 11:case 15:Yr(8,c,i)}var f=c.child;if(f!==null)f.return=c,L=f;else for(;L!==null;){c=L;var h=c.sibling,g=c.return;if(zh(c),c===u){L=null;break}if(h!==null){h.return=g,L=h;break}L=g}}}var p=i.alternate;if(p!==null){var w=p.child;if(w!==null){p.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Yr(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,L=v;break e}L=i.return}}var m=e.current;for(L=m;L!==null;){o=L;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,L=y;else e:for(o=m;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ao(9,a)}}catch(x){se(a,a.return,x)}if(a===o){L=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,L=k;break e}L=a.return}}if(K=s,fn(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Zi,e)}catch{}r=!0}return r}finally{W=n,Ke.transition=t}}return!1}function Wc(e,t,n){t=yr(n,t),t=Nh(e,t,1),e=nn(e,t,1),t=je(),e!==null&&(js(e,1,t),Ae(e,t))}function se(e,t,n){if(e.tag===3)Wc(e,e,n);else for(;t!==null;){if(t.tag===3){Wc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rn===null||!rn.has(r))){e=yr(n,e),e=bh(t,e,1),t=nn(t,e,1),e=je(),t!==null&&(js(t,1,e),Ae(t,e));break}}t=t.return}}function Iv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=je(),e.pingedLanes|=e.suspendedLanes&n,he===e&&(me&n)===n&&(ce===4||ce===3&&(me&130023424)===me&&500>oe()-wu?Cn(e,0):yu|=n),Ae(e,t)}function Yh(e,t){t===0&&(e.mode&1?(t=Vs,Vs<<=1,!(Vs&130023424)&&(Vs=4194304)):t=1);var n=je();e=At(e,t),e!==null&&(js(e,t,n),Ae(e,n))}function Dv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yh(e,n)}function Fv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(t),Yh(e,n)}var Xh;Xh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Le=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Le=!1,Ev(e,t,n);Le=!!(e.flags&131072)}else Le=!1,Z&&t.flags&1048576&&nh(t,Oi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;mi(e,t),e=t.pendingProps;var s=gr(t,ke.current);dr(t,n),s=fu(null,t,r,e,s,n);var i=hu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oe(r)?(i=!0,Li(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,au(t),s.updater=oo,t.stateNode=s,s._reactInternals=t,Ya(t,r,e,n),t=el(null,t,r,!0,i,n)):(t.tag=0,Z&&i&&eu(t),Ee(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(mi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Uv(r),e=tt(r,e),s){case 0:t=Za(null,t,r,e,n);break e;case 1:t=Fc(null,t,r,e,n);break e;case 11:t=Ic(null,t,r,e,n);break e;case 14:t=Dc(null,t,r,tt(r.type,e),n);break e}throw Error(T(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tt(r,s),Za(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tt(r,s),Fc(e,t,r,s,n);case 3:e:{if(Ah(t),e===null)throw Error(T(387));r=t.pendingProps,i=t.memoizedState,s=i.element,lh(e,t),Di(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=yr(Error(T(423)),t),t=Mc(e,t,r,n,s);break e}else if(r!==s){s=yr(Error(T(424)),t),t=Mc(e,t,r,n,s);break e}else for(De=tn(t.stateNode.containerInfo.firstChild),Fe=t,Z=!0,it=null,n=oh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pr(),r===s){t=It(e,t,n);break e}Ee(e,t,r,n)}t=t.child}return t;case 5:return uh(t),e===null&&Wa(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ba(r,s)?o=null:i!==null&&Ba(r,i)&&(t.flags|=32),Oh(e,t),Ee(e,t,o,n),t.child;case 6:return e===null&&Wa(t),null;case 13:return Ih(e,t,n);case 4:return lu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=mr(t,null,r,n):Ee(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tt(r,s),Ic(e,t,r,s,n);case 7:return Ee(e,t,t.pendingProps,n),t.child;case 8:return Ee(e,t,t.pendingProps.children,n),t.child;case 12:return Ee(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,J(Ai,r._currentValue),r._currentValue=o,i!==null)if(ut(i.value,o)){if(i.children===s.children&&!$e.current){t=It(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=bt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Qa(i.return,n,t),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qa(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ee(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,dr(t,n),s=Qe(s),r=r(s),t.flags|=1,Ee(e,t,r,n),t.child;case 14:return r=t.type,s=tt(r,t.pendingProps),s=tt(r.type,s),Dc(e,t,r,s,n);case 15:return Lh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:tt(r,s),mi(e,t),t.tag=1,Oe(r)?(e=!0,Li(t)):e=!1,dr(t,n),Th(t,r,s),Ya(t,r,s,n),el(null,t,r,!0,e,n);case 19:return Dh(e,t,n);case 22:return $h(e,t,n)}throw Error(T(156,t.tag))};function Zh(e,t){return jf(e,t)}function Mv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(e,t,n,r){return new Mv(e,t,n,r)}function ku(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uv(e){if(typeof e=="function")return ku(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vl)return 11;if(e===Bl)return 14}return 2}function on(e,t){var n=e.alternate;return n===null?(n=qe(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function wi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")ku(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Jn:return En(n.children,s,i,t);case zl:o=8,s|=8;break;case _a:return e=qe(12,n,t,s|2),e.elementType=_a,e.lanes=i,e;case xa:return e=qe(13,n,t,s),e.elementType=xa,e.lanes=i,e;case ka:return e=qe(19,n,t,s),e.elementType=ka,e.lanes=i,e;case uf:return uo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case af:o=10;break e;case lf:o=9;break e;case Vl:o=11;break e;case Bl:o=14;break e;case Bt:o=16,r=null;break e}throw Error(T(130,e==null?e:typeof e,""))}return t=qe(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function En(e,t,n,r){return e=qe(7,e,r,t),e.lanes=n,e}function uo(e,t,n,r){return e=qe(22,e,r,t),e.elementType=uf,e.lanes=n,e.stateNode={isHidden:!1},e}function Yo(e,t,n){return e=qe(6,e,null,t),e.lanes=n,e}function Xo(e,t,n){return t=qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cu(e,t,n,r,s,i,o,a,l){return e=new zv(e,t,n,a,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=qe(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},au(i),e}function Vv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function eg(e){if(!e)return ln;e=e._reactInternals;e:{if($n(e)!==e||e.tag!==1)throw Error(T(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(T(171))}if(e.tag===1){var n=e.type;if(Oe(n))return eh(e,n,t)}return t}function tg(e,t,n,r,s,i,o,a,l){return e=Cu(n,r,!0,e,s,i,o,a,l),e.context=eg(null),n=e.current,r=je(),s=sn(n),i=bt(r,s),i.callback=t??null,nn(n,i,s),e.current.lanes=s,js(e,s,r),Ae(e,r),e}function co(e,t,n,r){var s=t.current,i=je(),o=sn(s);return n=eg(n),t.context===null?t.context=n:t.pendingContext=n,t=bt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nn(s,t,o),e!==null&&(at(e,s,o,i),hi(e,s,o)),o}function Gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Eu(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}function Bv(){return null}var ng=typeof reportError=="function"?reportError:function(e){console.error(e)};function ju(e){this._internalRoot=e}fo.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(T(409));co(e,t,null,null)};fo.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bn(function(){co(null,e,null,null)}),t[Ot]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=$f();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gt.length&&t!==0&&t<Gt[n].priority;n++);Gt.splice(n,0,e),n===0&&Af(e)}};function Ru(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ho(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jc(){}function Hv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Gi(o);i.call(u)}}var o=tg(t,r,e,0,null,!1,!1,"",Jc);return e._reactRootContainer=o,e[Ot]=o.current,fs(e.nodeType===8?e.parentNode:e),bn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Gi(l);a.call(u)}}var l=Cu(e,0,!1,null,null,!1,!1,"",Jc);return e._reactRootContainer=l,e[Ot]=l.current,fs(e.nodeType===8?e.parentNode:e),bn(function(){co(t,l,n,r)}),l}function go(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Gi(o);a.call(l)}}co(t,o,e,s)}else o=Hv(n,t,e,s,r);return Gi(o)}bf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vr(t.pendingLanes);n!==0&&(ql(t,n|1),Ae(t,oe()),!(K&6)&&(wr=oe()+500,fn()))}break;case 13:bn(function(){var r=At(e,1);if(r!==null){var s=je();at(r,e,1,s)}}),Eu(e,1)}};Kl=function(e){if(e.tag===13){var t=At(e,134217728);if(t!==null){var n=je();at(t,e,134217728,n)}Eu(e,134217728)}};Lf=function(e){if(e.tag===13){var t=sn(e),n=At(e,t);if(n!==null){var r=je();at(n,e,t,r)}Eu(e,t)}};$f=function(){return W};Of=function(e,t){var n=W;try{return W=e,t()}finally{W=n}};$a=function(e,t,n){switch(t){case"input":if(ja(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ro(r);if(!s)throw Error(T(90));df(r),ja(r,s)}}}break;case"textarea":hf(e,n);break;case"select":t=n.value,t!=null&&ar(e,!!n.multiple,t,!1)}};Sf=Su;_f=bn;var Gv={usingClientEntryPoint:!1,Events:[Ps,er,ro,yf,wf,Su]},Ar={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qv={bundleType:Ar.bundleType,version:Ar.version,rendererPackageName:Ar.rendererPackageName,rendererConfig:Ar.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Cf(e),e===null?null:e.stateNode},findFiberByHostInstance:Ar.findFiberByHostInstance||Bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zs.isDisabled&&Zs.supportsFiber)try{Zi=Zs.inject(qv),gt=Zs}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gv;ze.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ru(t))throw Error(T(200));return Vv(e,t,null,n)};ze.createRoot=function(e,t){if(!Ru(e))throw Error(T(299));var n=!1,r="",s=ng;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Cu(e,1,!1,null,null,n,!1,r,s),e[Ot]=t.current,fs(e.nodeType===8?e.parentNode:e),new ju(t)};ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(T(188)):(e=Object.keys(e).join(","),Error(T(268,e)));return e=Cf(t),e=e===null?null:e.stateNode,e};ze.flushSync=function(e){return bn(e)};ze.hydrate=function(e,t,n){if(!ho(t))throw Error(T(200));return go(null,e,t,!0,n)};ze.hydrateRoot=function(e,t,n){if(!Ru(e))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ng;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=tg(t,null,e,1,n??null,s,!1,i,o),e[Ot]=t.current,fs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new fo(t)};ze.render=function(e,t,n){if(!ho(t))throw Error(T(200));return go(null,e,t,!1,n)};ze.unmountComponentAtNode=function(e){if(!ho(e))throw Error(T(40));return e._reactRootContainer?(bn(function(){go(null,null,e,!1,function(){e._reactRootContainer=null,e[Ot]=null})}),!0):!1};ze.unstable_batchedUpdates=Su;ze.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ho(n))throw Error(T(200));if(e==null||e._reactInternals===void 0)throw Error(T(38));return go(e,t,n,!1,r)};ze.version="18.3.1-next-f1338f8080-20240426";function rg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rg)}catch(e){console.error(e)}}rg(),nf.exports=ze;var Kv=nf.exports,Yc=Kv;wa.createRoot=Yc.createRoot,wa.hydrateRoot=Yc.hydrateRoot;/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xc="popstate";function Wv(e={}){function t(r,s){let{pathname:i,search:o,hash:a}=r.location;return fl("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_s(s)}return Jv(t,n,null,e)}function ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qv(){return Math.random().toString(36).substring(2,10)}function Zc(e,t){return{usr:e.state,key:e.key,idx:t}}function fl(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Cr(t):t,state:n,key:t&&t.key||r||Qv()}}function _s({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Cr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Jv(e,t,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let _=c(),v=_==null?null:_-u;u=_,l&&l({action:a,location:w.location,delta:v})}function h(_,v){a="PUSH";let m=fl(w.location,_,v);u=c()+1;let y=Zc(m,u),k=w.createHref(m);try{o.pushState(y,"",k)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(k)}i&&l&&l({action:a,location:w.location,delta:1})}function g(_,v){a="REPLACE";let m=fl(w.location,_,v);u=c();let y=Zc(m,u),k=w.createHref(m);o.replaceState(y,"",k),i&&l&&l({action:a,location:w.location,delta:0})}function p(_){return Yv(_)}let w={get action(){return a},get location(){return e(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Xc,f),l=_,()=>{s.removeEventListener(Xc,f),l=null}},createHref(_){return t(s,_)},createURL:p,encodeLocation(_){let v=p(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:g,go(_){return o.go(_)}};return w}function Yv(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ne(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:_s(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function sg(e,t,n="/"){return Xv(e,t,n,!1)}function Xv(e,t,n,r){let s=typeof t=="string"?Cr(t):t,i=Dt(s.pathname||"/",n);if(i==null)return null;let o=ig(e);Zv(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=cy(i);a=ly(o[l],u,r)}return a}function ig(e,t=[],n=[],r=""){let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ne(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Lt([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(ne(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),ig(i.children,t,c,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:oy(u,i.index),routesMeta:c})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of og(i.path))s(i,o,l)}),t}function og(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=og(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Zv(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ay(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ey=/^:[\w-]+$/,ty=3,ny=2,ry=1,sy=10,iy=-2,ed=e=>e==="*";function oy(e,t){let n=e.split("/"),r=n.length;return n.some(ed)&&(r+=iy),t&&(r+=ny),n.filter(s=>!ed(s)).reduce((s,i)=>s+(ey.test(i)?ty:i===""?ry:sy),r)}function ay(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function ly(e,t,n=!1){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",f=qi({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=qi({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Lt([i,f.pathname]),pathnameBase:gy(Lt([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Lt([i,f.pathnameBase]))}return o}function qi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=uy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},h)=>{if(c==="*"){let p=a[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[h];return f&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function uy(e,t=!1,n=!0){mt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function cy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Dt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function dy(e,t="/"){let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Cr(e):e;return{pathname:n?n.startsWith("/")?n:fy(n,t):t,search:py(r),hash:my(s)}}function fy(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zo(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ag(e){let t=hy(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function lg(e,t,n,r=!1){let s;typeof e=="string"?s=Cr(e):(s={...e},ne(!s.pathname||!s.pathname.includes("?"),Zo("?","pathname","search",s)),ne(!s.pathname||!s.pathname.includes("#"),Zo("#","pathname","hash",s)),ne(!s.search||!s.search.includes("#"),Zo("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=dy(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Lt=e=>e.join("/").replace(/\/\/+/g,"/"),gy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),py=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,my=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var ug=["POST","PUT","PATCH","DELETE"];new Set(ug);var yy=["GET",...ug];new Set(yy);var Er=S.createContext(null);Er.displayName="DataRouter";var po=S.createContext(null);po.displayName="DataRouterState";S.createContext(!1);var cg=S.createContext({isTransitioning:!1});cg.displayName="ViewTransition";var wy=S.createContext(new Map);wy.displayName="Fetchers";var Sy=S.createContext(null);Sy.displayName="Await";var vt=S.createContext(null);vt.displayName="Navigation";var Ns=S.createContext(null);Ns.displayName="Location";var yt=S.createContext({outlet:null,matches:[],isDataRoute:!1});yt.displayName="Route";var Pu=S.createContext(null);Pu.displayName="RouteError";function _y(e,{relative:t}={}){ne(bs(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(vt),{hash:s,pathname:i,search:o}=Ls(e,{relative:t}),a=i;return n!=="/"&&(a=i==="/"?n:Lt([n,i])),r.createHref({pathname:a,search:o,hash:s})}function bs(){return S.useContext(Ns)!=null}function hn(){return ne(bs(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Ns).location}var dg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fg(e){S.useContext(vt).static||S.useLayoutEffect(e)}function Tu(){let{isDataRoute:e}=S.useContext(yt);return e?Oy():xy()}function xy(){ne(bs(),"useNavigate() may be used only in the context of a <Router> component.");let e=S.useContext(Er),{basename:t,navigator:n}=S.useContext(vt),{matches:r}=S.useContext(yt),{pathname:s}=hn(),i=JSON.stringify(ag(r)),o=S.useRef(!1);return fg(()=>{o.current=!0}),S.useCallback((l,u={})=>{if(mt(o.current,dg),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=lg(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Lt([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,i,s,e])}S.createContext(null);function hg(){let{matches:e}=S.useContext(yt),t=e[e.length-1];return t?t.params:{}}function Ls(e,{relative:t}={}){let{matches:n}=S.useContext(yt),{pathname:r}=hn(),s=JSON.stringify(ag(n));return S.useMemo(()=>lg(e,JSON.parse(s),r,t==="path"),[e,s,r,t])}function ky(e,t){return gg(e,t)}function gg(e,t,n,r){var v;ne(bs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=S.useContext(vt),{matches:i}=S.useContext(yt),o=i[i.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let m=c&&c.path||"";pg(l,!c||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=hn(),h;if(t){let m=typeof t=="string"?Cr(t):t;ne(u==="/"||((v=m.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),h=m}else h=f;let g=h.pathname||"/",p=g;if(u!=="/"){let m=u.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=sg(e,{pathname:p});mt(c||w!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),mt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Py(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:Lt([u,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:Lt([u,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,n,r);return t&&_?S.createElement(Ns.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},_):_}function Cy(){let e=$y(),t=vy(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),n?S.createElement("pre",{style:s},n):null,o)}var Ey=S.createElement(Cy,null),jy=class extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?S.createElement(yt.Provider,{value:this.props.routeContext},S.createElement(Pu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ry({routeContext:e,match:t,children:n}){let r=S.useContext(Er);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(yt.Provider,{value:e},n)}function Py(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,i=n==null?void 0:n.errors;if(i!=null){let l=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);ne(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:f}=n,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,c)=>{let f,h=!1,g=null,p=null;n&&(f=i&&u.route.id?i[u.route.id]:void 0,g=u.route.errorElement||Ey,o&&(a<0&&c===0?(pg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===c&&(h=!0,p=u.route.hydrateFallbackElement||null)));let w=t.concat(s.slice(0,c+1)),_=()=>{let v;return f?v=g:h?v=p:u.route.Component?v=S.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=l,S.createElement(Ry,{match:u,routeContext:{outlet:l,matches:w,isDataRoute:n!=null},children:v})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?S.createElement(jy,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}function Nu(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ty(e){let t=S.useContext(Er);return ne(t,Nu(e)),t}function Ny(e){let t=S.useContext(po);return ne(t,Nu(e)),t}function by(e){let t=S.useContext(yt);return ne(t,Nu(e)),t}function bu(e){let t=by(e),n=t.matches[t.matches.length-1];return ne(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Ly(){return bu("useRouteId")}function $y(){var r;let e=S.useContext(Pu),t=Ny("useRouteError"),n=bu("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Oy(){let{router:e}=Ty("useNavigate"),t=bu("useNavigate"),n=S.useRef(!1);return fg(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{mt(n.current,dg),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var td={};function pg(e,t,n){!t&&!td[e]&&(td[e]=!0,mt(!1,n))}S.memo(Ay);function Ay({routes:e,future:t,state:n}){return gg(e,void 0,n,t)}function Ze(e){ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Iy({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){ne(!bs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=S.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Cr(n));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:h="default"}=n,g=S.useMemo(()=>{let p=Dt(l,o);return p==null?null:{location:{pathname:p,search:u,hash:c,state:f,key:h},navigationType:r}},[o,l,u,c,f,h,r]);return mt(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:S.createElement(vt.Provider,{value:a},S.createElement(Ns.Provider,{children:t,value:g}))}function Dy({children:e,location:t}){return ky(hl(e),t)}function hl(e,t=[]){let n=[];return S.Children.forEach(e,(r,s)=>{if(!S.isValidElement(r))return;let i=[...t,s];if(r.type===S.Fragment){n.push.apply(n,hl(r.props.children,i));return}ne(r.type===Ze,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ne(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=hl(r.props.children,i)),n.push(o)}),n}var Si="get",_i="application/x-www-form-urlencoded";function mo(e){return e!=null&&typeof e.tagName=="string"}function Fy(e){return mo(e)&&e.tagName.toLowerCase()==="button"}function My(e){return mo(e)&&e.tagName.toLowerCase()==="form"}function Uy(e){return mo(e)&&e.tagName.toLowerCase()==="input"}function zy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vy(e,t){return e.button===0&&(!t||t==="_self")&&!zy(e)}var ei=null;function By(){if(ei===null)try{new FormData(document.createElement("form"),0),ei=!1}catch{ei=!0}return ei}var Hy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ea(e){return e!=null&&!Hy.has(e)?(mt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_i}"`),null):e}function Gy(e,t){let n,r,s,i,o;if(My(e)){let a=e.getAttribute("action");r=a?Dt(a,t):null,n=e.getAttribute("method")||Si,s=ea(e.getAttribute("enctype"))||_i,i=new FormData(e)}else if(Fy(e)||Uy(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Dt(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Si,s=ea(e.getAttribute("formenctype"))||ea(a.getAttribute("enctype"))||_i,i=new FormData(a,e),!By()){let{name:u,type:c,value:f}=e;if(c==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,f)}}else{if(mo(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Si,r=null,s=_i,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lu(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qy(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Dt(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Ky(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wy(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Qy(e,t,n){let r=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await Ky(i,n);return o.links?o.links():[]}return[]}));return Zy(r.flat(1).filter(Wy).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function nd(e,t,n,r,s,i){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?t.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Jy(e,t,{includeHydrateFallback:n}={}){return Yy(e.map(r=>{let s=t.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Yy(e){return[...new Set(e)]}function Xy(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Zy(e,t){let n=new Set;return new Set(t),e.reduce((r,s)=>{let i=JSON.stringify(Xy(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function mg(){let e=S.useContext(Er);return Lu(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ew(){let e=S.useContext(po);return Lu(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $u=S.createContext(void 0);$u.displayName="FrameworkContext";function vg(){let e=S.useContext($u);return Lu(e,"You must render this element inside a <HydratedRouter> element"),e}function tw(e,t){let n=S.useContext($u),[r,s]=S.useState(!1),[i,o]=S.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=t,h=S.useRef(null);S.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=v=>{v.forEach(m=>{o(m.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return h.current&&_.observe(h.current),()=>{_.disconnect()}}},[e]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{s(!0)},p=()=>{s(!1),o(!1)};return n?e!=="intent"?[i,h,{}]:[i,h,{onFocus:Ir(a,g),onBlur:Ir(l,p),onMouseEnter:Ir(u,g),onMouseLeave:Ir(c,p),onTouchStart:Ir(f,g)}]:[!1,h,{}]}function Ir(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function nw({page:e,...t}){let{router:n}=mg(),r=S.useMemo(()=>sg(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?S.createElement(sw,{page:e,matches:r,...t}):null}function rw(e){let{manifest:t,routeModules:n}=vg(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return Qy(e,t,n).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,n]),r}function sw({page:e,matches:t,...n}){let r=hn(),{manifest:s,routeModules:i}=vg(),{basename:o}=mg(),{loaderData:a,matches:l}=ew(),u=S.useMemo(()=>nd(e,t,l,s,r,"data"),[e,t,l,s,r]),c=S.useMemo(()=>nd(e,t,l,s,r,"assets"),[e,t,l,s,r]),f=S.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,w=!1;if(t.forEach(v=>{var y;let m=s.routes[v.route.id];!m||!m.hasLoader||(!u.some(k=>k.route.id===v.route.id)&&v.route.id in a&&((y=i[v.route.id])!=null&&y.shouldRevalidate)||m.hasClientLoader?w=!0:p.add(v.route.id))}),p.size===0)return[];let _=qy(e,o,"data");return w&&p.size>0&&_.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[_.pathname+_.search]},[o,a,r,s,u,t,e,i]),h=S.useMemo(()=>Jy(c,s),[c,s]),g=rw(c);return S.createElement(S.Fragment,null,f.map(p=>S.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),h.map(p=>S.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),g.map(({key:p,link:w})=>S.createElement("link",{key:p,...w})))}function iw(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yg&&(window.__reactRouterVersion="7.7.1")}catch{}function ow({basename:e,children:t,window:n}){let r=S.useRef();r.current==null&&(r.current=Wv({window:n,v5Compat:!0}));let s=r.current,[i,o]=S.useState({action:s.action,location:s.location}),a=S.useCallback(l=>{S.startTransition(()=>o(l))},[o]);return S.useLayoutEffect(()=>s.listen(a),[s,a]),S.createElement(Iy,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var wg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=S.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...h},g){let{basename:p}=S.useContext(vt),w=typeof u=="string"&&wg.test(u),_,v=!1;if(typeof u=="string"&&w&&(_=u,yg))try{let R=new URL(window.location.href),N=u.startsWith("//")?new URL(R.protocol+u):new URL(u),M=Dt(N.pathname,p);N.origin===R.origin&&M!=null?u=M+N.search+N.hash:v=!0}catch{mt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=_y(u,{relative:s}),[y,k,x]=tw(r,h),C=cw(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:f});function E(R){t&&t(R),R.defaultPrevented||C(R)}let j=S.createElement("a",{...h,...x,href:_||m,onClick:v||i?t:E,ref:iw(g,k),target:l,"data-discover":!w&&n==="render"?"true":void 0});return y&&!w?S.createElement(S.Fragment,null,j,S.createElement(nw,{page:m})):j});nt.displayName="Link";var aw=S.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let f=Ls(o,{relative:u.relative}),h=hn(),g=S.useContext(po),{navigator:p,basename:w}=S.useContext(vt),_=g!=null&&pw(f)&&a===!0,v=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,m=h.pathname,y=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(m=m.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&w&&(y=Dt(y,w)||y);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let x=m===v||!s&&m.startsWith(v)&&m.charAt(k)==="/",C=y!=null&&(y===v||!s&&y.startsWith(v)&&y.charAt(v.length)==="/"),E={isActive:x,isPending:C,isTransitioning:_},j=x?t:void 0,R;typeof r=="function"?R=r(E):R=[r,x?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let N=typeof i=="function"?i(E):i;return S.createElement(nt,{...u,"aria-current":j,className:R,ref:c,style:N,to:o,viewTransition:a},typeof l=="function"?l(E):l)});aw.displayName="NavLink";var lw=S.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:s,state:i,method:o=Si,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...h},g)=>{let p=hw(),w=gw(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&wg.test(a),m=y=>{if(l&&l(y),y.defaultPrevented)return;y.preventDefault();let k=y.nativeEvent.submitter,x=(k==null?void 0:k.getAttribute("formmethod"))||o;p(k||y.currentTarget,{fetcherKey:t,method:x,navigate:n,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:f})};return S.createElement("form",{ref:g,method:_,action:w,onSubmit:r?l:m,...h,"data-discover":!v&&e==="render"?"true":void 0})});lw.displayName="Form";function uw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sg(e){let t=S.useContext(Er);return ne(t,uw(e)),t}function cw(e,{target:t,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Tu(),l=hn(),u=Ls(e,{relative:i});return S.useCallback(c=>{if(Vy(c,t)){c.preventDefault();let f=n!==void 0?n:_s(l)===_s(u);a(e,{replace:f,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[l,a,u,n,r,t,e,s,i,o])}var dw=0,fw=()=>`__${String(++dw)}__`;function hw(){let{router:e}=Sg("useSubmit"),{basename:t}=S.useContext(vt),n=Ly();return S.useCallback(async(r,s={})=>{let{action:i,method:o,encType:a,formData:l,body:u}=Gy(r,t);if(s.navigate===!1){let c=s.fetcherKey||fw();await e.fetch(c,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function gw(e,{relative:t}={}){let{basename:n}=S.useContext(vt),r=S.useContext(yt);ne(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ls(e||".",{relative:t})},o=hn();if(e==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();i.search=c?`?${c}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Lt([n,i.pathname])),_s(i)}function pw(e,{relative:t}={}){let n=S.useContext(cg);ne(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Sg("useViewTransitionState"),s=Ls(e,{relative:t});if(!n.isTransitioning)return!1;let i=Dt(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Dt(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qi(s.pathname,o)!=null||qi(s.pathname,i)!=null}const mw="modulepreload",vw=function(e){return"/"+e},rd={},$s=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=vw(l),l in rd)return;rd[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":mw,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,g)=>{f.addEventListener("load",h),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},yw=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$s(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Ou extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class ww extends Ou{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sd extends Ou{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class id extends Ou{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gl||(gl={}));var Sw=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class _w{constructor(t,{headers:n={},customFetch:r,region:s=gl.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=yw(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Sw(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(w=>{throw new ww(w)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new sd(f);if(!f.ok)throw new id(f);let g=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield f.json():g==="application/octet-stream"?p=yield f.blob():g==="text/event-stream"?p=f:g==="multipart/form-data"?p=yield f.formData():p=yield f.text(),{data:p,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof id||s instanceof sd?s.context:void 0}}})}}var be={},Au={},vo={},Os={},yo={},wo={},xw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sr=xw();const kw=Sr.fetch,_g=Sr.fetch.bind(Sr),xg=Sr.Headers,Cw=Sr.Request,Ew=Sr.Response,jr=Object.freeze(Object.defineProperty({__proto__:null,Headers:xg,Request:Cw,Response:Ew,default:_g,fetch:kw},Symbol.toStringTag,{value:"Module"})),jw=_p(jr);var So={};Object.defineProperty(So,"__esModule",{value:!0});let Rw=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};So.default=Rw;var kg=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wo,"__esModule",{value:!0});const Pw=kg(jw),Tw=kg(So);let Nw=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Pw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,c=null,f=null,h=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=v:c=JSON.parse(v))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");w&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,f=null,h=406,g="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const w=await i.text();try{u=JSON.parse(w),Array.isArray(u)&&i.status===404&&(c=[],u=null,h=200,g="OK")}catch{i.status===404&&w===""?(h=204,g="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,g="OK"),u&&this.shouldThrowOnError)throw new Tw.default(u)}return{error:u,data:c,count:f,status:h,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};wo.default=Nw;var bw=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yo,"__esModule",{value:!0});const Lw=bw(wo);let $w=class extends Lw.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};yo.default=$w;var Ow=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Os,"__esModule",{value:!0});const Aw=Ow(yo);let Iw=class extends Aw.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Os.default=Iw;var Dw=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vo,"__esModule",{value:!0});const Dr=Dw(Os);let Fw=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Dr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Dr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Dr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Dr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Dr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vo.default=Fw;var _o={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.version=void 0;xo.version="0.0.0-automated";Object.defineProperty(_o,"__esModule",{value:!0});_o.DEFAULT_HEADERS=void 0;const Mw=xo;_o.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Mw.version}`};var Cg=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Au,"__esModule",{value:!0});const Uw=Cg(vo),zw=Cg(Os),Vw=_o;let Bw=class Eg{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Vw.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new Uw.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Eg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${t}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([c,f])=>f!==void 0).map(([c,f])=>[c,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([c,f])=>{a.searchParams.append(c,f)})):(o="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new zw.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Au.default=Bw;var Rr=We&&We.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(be,"__esModule",{value:!0});be.PostgrestError=be.PostgrestBuilder=be.PostgrestTransformBuilder=be.PostgrestFilterBuilder=be.PostgrestQueryBuilder=be.PostgrestClient=void 0;const jg=Rr(Au);be.PostgrestClient=jg.default;const Rg=Rr(vo);be.PostgrestQueryBuilder=Rg.default;const Pg=Rr(Os);be.PostgrestFilterBuilder=Pg.default;const Tg=Rr(yo);be.PostgrestTransformBuilder=Tg.default;const Ng=Rr(wo);be.PostgrestBuilder=Ng.default;const bg=Rr(So);be.PostgrestError=bg.default;var Hw=be.default={PostgrestClient:jg.default,PostgrestQueryBuilder:Rg.default,PostgrestFilterBuilder:Pg.default,PostgrestTransformBuilder:Tg.default,PostgrestBuilder:Ng.default,PostgrestError:bg.default};const{PostgrestClient:Gw,PostgrestQueryBuilder:Zk,PostgrestFilterBuilder:eC,PostgrestTransformBuilder:tC,PostgrestBuilder:nC,PostgrestError:rC}=Hw;function qw(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Kw=qw(),Ww="2.11.15",Qw=`realtime-js/${Ww}`,Jw="1.0.0",Lg=1e4,Yw=1e3;var es;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(es||(es={}));var _e;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_e||(_e={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var pl;(function(e){e.websocket="websocket"})(pl||(pl={}));var Sn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Sn||(Sn={}));class Xw{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class $g{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Q||(Q={}));const od=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=Zw(o,e,t,s),i),{})},Zw=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Og(i,o):ml(o)},Og=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return r0(t,n)}switch(e){case Q.bool:return e0(t);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return t0(t);case Q.json:case Q.jsonb:return n0(t);case Q.timestamp:return s0(t);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return ml(t);default:return ml(t)}},ml=e=>e,e0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},t0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},n0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},r0=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Og(t,a))}return e},s0=e=>typeof e=="string"?e.replace(" ","T"):e,Ag=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ta{constructor(t,n,r={},s=Lg){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ad;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ad||(ad={}));class ts{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ts.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ts.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ts.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const h=c.map(_=>_.presence_ref),g=f.map(_=>_.presence_ref),p=c.filter(_=>g.indexOf(_.presence_ref)<0),w=f.filter(_=>h.indexOf(_.presence_ref)<0);p.length>0&&(a[u]=p),w.length>0&&(l[u]=w)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const f=t[a].map(g=>g.presence_ref),h=c.filter(g=>f.indexOf(g.presence_ref)<0);t[a].unshift(...h)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ld;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ld||(ld={}));var ud;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ud||(ud={}));var Et;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Et||(Et={}));class Iu{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ta(this,st.join,this.params,this.timeout),this.rejoinTimer=new $g(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ts(this),this.broadcastEndpointURL=Ag(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==_e.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>t==null?void 0:t(Et.CHANNEL_ERROR,c)),this._onClose(()=>t==null?void 0:t(Et.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:c})=>{var f;if(this.socket.setAuth(),c===void 0){t==null||t(Et.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,g=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,p=[];for(let w=0;w<g;w++){const _=h[w],{filter:{event:v,schema:m,table:y,filter:k}}=_,x=c&&c[w];if(x&&x.event===v&&x.schema===m&&x.table===y&&x.filter===k)p.push(Object.assign(Object.assign({},_),{id:x.id}));else{this.unsubscribe(),this.state=_e.errored,t==null||t(Et.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Et.SUBSCRIBED);return}}).receive("error",c=>{this.state=_e.errored,t==null||t(Et.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Et.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_e.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ta(this,st.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ta(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=st;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,w,_;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((_=(w=g.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(g=>g.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var p,w,_,v,m,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const k=g.id,x=(p=g.filter)===null||p===void 0?void 0:p.event;return k&&((w=n.ids)===null||w===void 0?void 0:w.includes(k))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const k=(m=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:w,table:_,commit_timestamp:v,type:m,errors:y}=p;h=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:v,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(p))}g.callback(h,r)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Iu.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=od(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=od(t.columns,t.old_record)),n}}const cd=()=>{},i0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o0{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cd,this.ref=0,this.logger=cd,this.conn=null,this.sendBuffer=[],this.serializer=new Xw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>$s(async()=>{const{default:l}=await Promise.resolve().then(()=>jr);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${pl.websocket}`,this.httpEndpoint=Ag(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $g(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Kw),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jw}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return Sn.Connecting;case es.open:return Sn.Open;case es.closing:return Sn.Closing;default:return Sn.Closed}}isConnected(){return this.connectionState()===Sn.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Iu(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:Qw};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(st.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Yw,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([i0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Du extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function de(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class a0 extends Du{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vl extends Du{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var l0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Ig=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$s(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},u0=()=>l0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $s(()=>Promise.resolve().then(()=>jr),void 0)).Response:Response}),yl=e=>{if(Array.isArray(e))return e.map(n=>yl(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=yl(r)}),t},c0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var On=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const na=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),d0=(e,t,n)=>On(void 0,void 0,void 0,function*(){const r=yield u0();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new a0(na(s),i,o))}).catch(s=>{t(new vl(na(s),s))}):t(new vl(na(e),e))}),f0=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(c0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n))};function As(e,t,n,r,s,i){return On(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,f0(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>d0(l,a,r))})})}function Ki(e,t,n,r){return On(this,void 0,void 0,function*(){return As(e,"GET",t,n,r)})}function jt(e,t,n,r,s){return On(this,void 0,void 0,function*(){return As(e,"POST",t,r,s,n)})}function wl(e,t,n,r,s){return On(this,void 0,void 0,function*(){return As(e,"PUT",t,r,s,n)})}function h0(e,t,n,r){return On(this,void 0,void 0,function*(){return As(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Dg(e,t,n,r,s){return On(this,void 0,void 0,function*(){return As(e,"DELETE",t,r,s,n)})}var Te=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const g0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class p0{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Ig(s)}uploadOrUpdate(t,n,r,s){return Te(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},dd),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),f=yield(t=="PUT"?wl:jt)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(de(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Te(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:dd.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield wl(this.fetch,a.toString(),l,{headers:c});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(de(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Te(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield jt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Du("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}update(t,n,r){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Te(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield jt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Te(this,void 0,void 0,function*(){try{const s=yield jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}download(t,n){return Te(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Ki(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}})}info(t){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ki(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:yl(r),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}exists(t){return Te(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield h0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(de(r)&&r instanceof vl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Te(this,void 0,void 0,function*(){try{return{data:yield Dg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}list(t,n,r){return Te(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},g0),n),{prefix:t||""});return{data:yield jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const m0="2.10.4",v0={"X-Client-Info":`storage-js/${m0}`};var Dn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class y0{constructor(t,n={},r,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},v0),n),this.fetch=Ig(r)}listBuckets(){return Dn(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}})}getBucket(t){return Dn(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Dn(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Dn(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Dn(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Dn(this,void 0,void 0,function*(){try{return{data:yield Dg(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}})}}class w0 extends y0{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new p0(this.url,this.headers,t,this.fetch)}}const S0="2.53.0";let Hr="";typeof Deno<"u"?Hr="deno":typeof document<"u"?Hr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hr="react-native":Hr="node";const _0={"X-Client-Info":`supabase-js-${Hr}/${S0}`},x0={headers:_0},k0={schema:"public"},C0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},E0={};var j0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const R0=e=>{let t;return e?t=e:typeof fetch>"u"?t=_g:t=fetch,(...n)=>t(...n)},P0=()=>typeof Headers>"u"?xg:Headers,T0=(e,t,n)=>{const r=R0(n),s=P0();return(i,o)=>j0(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var N0=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function b0(e){return e.endsWith("/")?e:e+"/"}function L0(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:f}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>N0(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const Fg="2.71.1",qn=30*1e3,Sl=3,ra=Sl*qn,$0="http://localhost:9999",O0="supabase.auth.token",A0={"X-Client-Info":`gotrue-js/${Fg}`},_l="X-Supabase-Api-Version",Mg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},I0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,D0=10*60*1e3;class Fu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class F0 extends Fu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function M0(e){return z(e)&&e.name==="AuthApiError"}class Ug extends Fu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class gn extends Fu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class Vt extends gn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function U0(e){return z(e)&&e.name==="AuthSessionMissingError"}class ti extends gn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ni extends gn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ri extends gn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z0(e){return z(e)&&e.name==="AuthImplicitGrantRedirectError"}class fd extends gn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xl extends gn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function sa(e){return z(e)&&e.name==="AuthRetryableFetchError"}class hd extends gn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class kl extends gn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gd=` 	
\r=`.split(""),V0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gd.length;t+=1)e[gd[t].charCodeAt(0)]=-2;for(let t=0;t<Wi.length;t+=1)e[Wi[t].charCodeAt(0)]=t;return e})();function pd(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wi[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wi[r]),t.queuedBits-=6}}function zg(e,t,n){const r=V0[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function md(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{G0(o,r,n)};for(let o=0;o<e.length;o+=1)zg(e.charCodeAt(o),s,i);return t.join("")}function B0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function H0(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}B0(r,t)}}function G0(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function q0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)zg(e.charCodeAt(s),n,r);return new Uint8Array(t)}function K0(e){const t=[];return H0(e,n=>t.push(n)),new Uint8Array(t)}function W0(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>pd(s,n,r)),pd(null,n,r),t.join("")}function Q0(e){return Math.round(Date.now()/1e3)+e}function J0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const et=()=>typeof window<"u"&&typeof document<"u",pn={tested:!1,writable:!1},Vg=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pn.tested)return pn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),pn.tested=!0,pn.writable=!0}catch{pn.tested=!0,pn.writable=!1}return pn.writable};function Y0(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Bg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>$s(async()=>{const{default:r}=await Promise.resolve().then(()=>jr);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},X0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Kn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},mn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zt=async(e,t)=>{await e.removeItem(t)};class ko{constructor(){this.promise=new ko.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}ko.promiseConstructor=Promise;function ia(e){const t=e.split(".");if(t.length!==3)throw new kl("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!I0.test(t[r]))throw new kl("JWT not in base64url format");return{header:JSON.parse(md(t[0])),payload:JSON.parse(md(t[1])),signature:q0(t[2]),raw:{header:t[0],payload:t[1]}}}async function Z0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eS(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function tS(e){return("0"+e.toString(16)).substr(-2)}function nS(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,tS).join("")}async function rS(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function sS(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await rS(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fn(e,t,n=!1){const r=nS();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Kn(e,`${t}-code-verifier`,s);const i=await sS(r);return[i,r===i?"plain":"s256"]}const iS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oS(e){const t=e.headers.get(_l);if(!t||!t.match(iS))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function aS(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lS(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mn(e){if(!uS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oa(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vd(e){return JSON.parse(JSON.stringify(e))}var cS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const wn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dS=[502,503,504];async function yd(e){var t;if(!X0(e))throw new xl(wn(e),0);if(dS.includes(e.status))throw new xl(wn(e),e.status);let n;try{n=await e.json()}catch(i){throw new Ug(wn(i),i)}let r;const s=oS(e);if(s&&s.getTime()>=Mg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new hd(wn(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Vt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new hd(wn(n),e.status,n.weak_password.reasons);throw new F0(wn(n),e.status||500,r)}const fS=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function B(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[_l]||(i[_l]=Mg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await hS(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function hS(e,t,n,r,s,i){const o=fS(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new xl(wn(l),0)}if(a.ok||await yd(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await yd(l)}}function xt(e){var t;let n=null;vS(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Q0(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function wd(e){const t=xt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Kt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function gS(e){return{data:e,error:null}}function pS(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=cS(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function mS(e){return e}function vS(e){return e.access_token&&e.refresh_token&&e.expires_in}const aa=["global","local","others"];var yS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class wS{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Bg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=aa[0]){if(aa.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${aa.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=yS(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:pS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Kt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:mS});if(c.error)throw c.error;const f=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(p=>{const w=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Mn(t);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Kt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Mn(t);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Kt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Mn(t);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Mn(t.userId);try{const{data:n,error:r}=await B(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Mn(t.userId),Mn(t.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}}function Sd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function SS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Un={debug:!!(globalThis&&Vg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _S extends Hg{}async function xS(e,t,n){Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Un.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Un.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _S(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Un.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}SS();const kS={url:$0,storageKey:O0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function _d(e,t,n){return await n()}const zn={};class xs{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xs.nextInstanceID,xs.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},kS),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new wS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Bg(s.fetch),this.lock=s.lock||_d,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:et()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=xS:this.lock=_d,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Vg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Sd(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=zn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=zn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zn[this.storageKey]=Object.assign(Object.assign({},zn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Y0(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),et()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),z0(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return z(n)?{error:n}:{error:new Ug("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:xt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:f,options:h}=t;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Fn(this.storage,this.storageKey)),i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:p},xform:xt})}else if("phone"in t){const{phone:c,password:f,options:h}=t;i=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:xt})}else throw new ni("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:wd})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:wd})}else throw new ni("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ti}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,f,h,g;let p,w;if("message"in t)p=t.message,w=t.signature;else{const{chain:_,wallet:v,statement:m,options:y}=t;let k;if(et())if(typeof v=="object")k=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const x=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),m?{statement:m}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:_,error:v}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:W0(w)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:xt});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new ti}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(z(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const n=await mn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:xt});if(await zt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ti}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ti}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Fn(this.storage,this.storageKey));const{error:f}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new ni("You must provide either an email or phone number.")}catch(a){if(z(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Fn(this.storage,this.storageKey)),await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:gS})}catch(i){if(z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Vt;const{error:s}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await B(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await B(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ni("You must provide either an email or phone number and a type")}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await mn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<ra:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await mn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=oa()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Kt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Kt})})}catch(n){if(z(n))return U0(n)&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Vt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Fn(this.storage,this.storageKey));const{data:u,error:c}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Kt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=ia(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(z(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Vt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!et())throw new ri("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ri(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new fd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ri("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fd("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new ri("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let h=c+f;l&&(h=parseInt(l));const g=h-c;g*1e3<=qn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const p=h-f;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(r){if(z(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await mn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(M0(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=J0(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Fn(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:f,error:h}=i;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return et()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(z(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await eS(async s=>(s>0&&await Z0(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&sa(i)&&Date.now()+o-r<qn})}catch(r){if(this._debug(n,"error",r),z(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),et()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await mn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await mn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Kn(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:oa()}else if(s&&!s.user&&!s.user){const o=await mn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await zt(this.storage,this.storageKey+"-user"),await Kn(this.storage,this.storageKey,s)):s.user=oa()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ra;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${ra}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),sa(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ko;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Vt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),z(i)){const o={session:null,error:i};return sa(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Kn(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=vd(s);await Kn(this.storage,this.storageKey,i)}else{const s=vd(n);await Kn(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await zt(this.storage,this.storageKey),await zt(this.storage,this.storageKey+"-code-verifier"),await zt(this.storage,this.storageKey+"-user"),this.userStorage&&await zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),qn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/qn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qn}ms, refresh threshold is ${Sl} ticks`),s<=Sl&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Hg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Fn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await B(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(z(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await B(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(z(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ia(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+D0>s)return r;const{data:i,error:o}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:g,error:p}=await this.getSession();if(p||!g.session)return{data:null,error:p};r=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=ia(r);n!=null&&n.allowExpired||aS(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const c=lS(s.alg),f=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,K0(`${a}.${l}`)))throw new kl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}}xs.nextInstanceID=0;const CS=xs;class ES extends CS{constructor(t){super(t)}}var jS=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class RS{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=b0(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:k0,realtime:E0,auth:Object.assign(Object.assign({},C0),{storageKey:u}),global:x0},f=L0(r??{},c);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=T0(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Gw(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new w0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new _w(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return jS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,c){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ES({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new o0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const PS=(e,t,n)=>new RS(e,t,n);function TS(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const e=process.version.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}TS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const NS={BASE_URL:"/",DEV:!1,MODE:"production",NODE_ENV:"production",PROD:!0,SSR:!1,SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZGhlZ2N6d3djZm5yYW5reWRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNTY2NDIsImV4cCI6MjA2OTYzMjY0Mn0.7BisAmVNNmsr-zdqrrJoILPnW0sQ6DfSfH0IEsjLoOI",SUPABASE_URL:"https://sqdhegczwwcfnrankyde.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"},Gg=e=>NS[e],qg=()=>Gg("SUPABASE_URL"),bS=()=>Gg("SUPABASE_ANON_KEY");class LS{constructor(t,n){this.supabase=t,this.role=n}async fetchTodos(t={}){const{attachedToType:n,attachedToId:r,isDone:s,titlePattern:i}=t,o=this.role==="cleaner"?"id, title, description, products, done, completed_at, completed_by, created_at, updated_at, attached_to_type, attached_to_id":"*";let a=this.supabase.from("todos").select(o);n&&r?a=a.eq("attached_to_type",n).eq("attached_to_id",r):n===null&&r===null&&(a=a.is("attached_to_type",null)),s!==void 0&&(a=a.eq("done",s)),i&&(a=a.ilike("title",`%${i}%`));const{data:l,error:u}=await a.order("created_at",{ascending:!1}).overrideTypes();if(u)throw u;return l||[]}async fetchNotes(t){const{attachedToType:n,attachedToId:r}=t,s=this.role==="cleaner"?"id, content, created_at, attached_to_type, attached_to_id":"id, content, created_by, created_at, attached_to_type, attached_to_id";let i=this.supabase.from("notes").select(s);n&&r?i=i.eq("attached_to_type",n).eq("attached_to_id",r):n===null&&r===null&&(i=i.is("attached_to_type",null));const{data:o,error:a}=await i.order("created_at",{ascending:!0}).overrideTypes();if(a)throw a;const l=o||[];if(l.length>0&&this.role==="admin"){const u=[...new Set(l.map(c=>c.created_by).filter(Boolean))];if(u.length>0){const{data:c,error:f}=await this.supabase.from("user_profiles").select("id, email, name").in("id",u);if(f)throw f;if(c){const h=new Map(c.map(g=>[g.id,g]));l.forEach(g=>{const p=h.get(g.created_by);p&&(g.user_email=p.email,g.user_name=p.name)})}}}return l}async updateTodoStatus(t,n,r){const s={done:n,updated_at:new Date().toISOString()};n?(s.completed_at=new Date().toISOString(),s.completed_by=r||null):(s.completed_at=null,s.completed_by=null);const{error:i}=await this.supabase.from("todos").update(s).eq("id",t);if(i)throw i}async updateTodo(t,n){const{data:r,error:s}=await this.supabase.from("todos").update({...n,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return r}async deleteTodo(t){const{error:n}=await this.supabase.from("todos").delete().eq("id",t);if(n)throw n}async deleteNote(t){const{error:n}=await this.supabase.from("notes").delete().eq("id",t);if(n)throw n}async createTodo(t){const{data:n,error:r}=await this.supabase.from("todos").insert(t).select().single();if(r)throw r;return n}async createNote(t){const{data:n,error:r}=await this.supabase.from("notes").insert(t).select().single();if(r)throw r;return n}async getCurrentUser(){const{data:t,error:n}=await this.supabase.auth.getUser();if(n)throw n;return t}async fetchListings(){const{data:t,error:n}=await this.supabase.from("listings").select("id, airbnb_id, airbnb_payload, created_at, updated_at").order("id");if(n)throw n;return t||[]}async fetchListing(t){const{data:n,error:r}=await this.supabase.from("listings").select("*").eq("id",t).single();if(r)throw r;return n}}const $S=qg(),OS=bS(),kt=PS($S,OS);typeof window<"u"&&(window.supabase=kt);const Kg=S.createContext(void 0),ge=()=>{const e=S.useContext(Kg);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},AS=({children:e})=>{console.log("AuthProvider rendering...");const[t,n]=S.useState(null),[r,s]=S.useState(!0),[i,o]=S.useState(null),[a,l]=S.useState("unassigned"),u=a==="admin",c=a==="cleaner",f=S.useMemo(()=>new LS(kt,a),[]),h=async()=>{try{const{data:{session:m}}=await kt.auth.getSession();return(m==null?void 0:m.access_token)||null}catch(m){return console.error("Error getting access token:",m),null}},g=async m=>{try{console.log("checkUserRoles: Starting role check for userId:",m),s(!0);const y=await h();if(console.log("checkUserRoles: Got access token:",!!y),!y){console.log("checkUserRoles: No access token, setting role to unassigned"),l("unassigned");return}console.log("checkUserRoles: Querying roles table");const{data:k,error:x}=await kt.from("roles").select("role").eq("user_id",m);if(console.log("checkUserRoles: Query result:",{data:k,error:x}),x){console.error("Role check error:",x),l("unassigned");return}const C=(k==null?void 0:k.map(j=>j.role))||[];let E="unassigned";C.includes("admin")?E="admin":C.includes("cleaner")&&(E="cleaner"),console.log("checkUserRoles: Setting role to:",E),l(E)}catch(y){console.error("Error checking user roles:",y),l("unassigned")}finally{console.log("checkUserRoles: Finished, setting loading to false"),s(!1)}},p=async(m,y)=>{var k;y?console.log("Auth state changed:",y,(k=m==null?void 0:m.user)==null?void 0:k.email):console.log("Initial session:",m),o(m),n((m==null?void 0:m.user)??null),s(!1),m!=null&&m.user?(console.log("Starting role check for user:",m.user.id),g(m.user.id).catch(x=>{console.error("Role check failed:",x),l("unassigned")})):l("unassigned")};S.useEffect(()=>{console.log("AuthProvider useEffect running..."),(async()=>{try{console.log("Getting initial session...");const{data:{session:k}}=await kt.auth.getSession();await p(k)}catch(k){console.error("Error getting initial session:",k),s(!1)}})();const{data:{subscription:y}}=kt.auth.onAuthStateChange(async(k,x)=>{await p(x,k)});return()=>y.unsubscribe()},[]),console.log("AuthProvider state:",{user:t,loading:r,session:i});const v={user:t,session:i,loading:r,role:a,setRole:l,isAdmin:u,isCleaner:c,signInWithGoogle:async()=>{try{const m=`${window.location.origin}/auth/callback`;console.log("Starting Google OAuth sign in...",m);const{error:y}=await kt.auth.signInWithOAuth({provider:"google",options:{redirectTo:m}});if(y)throw y}catch(m){throw console.error("Error signing in with Google:",m),m}},signOut:async()=>{try{const{error:m}=await kt.auth.signOut();if(m)throw m}catch(m){throw console.error("Error signing out:",m),m}},getAccessToken:h,checkUserRoles:g,supabase:kt,supabaseService:f};return d.jsx(Kg.Provider,{value:v,children:e})},IS=(e,t,n,r)=>{var i,o,a,l;const s=[n,{code:t,...r||{}}];if((o=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&o.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);jn(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(l=(a=e==null?void 0:e.services)==null?void 0:a.logger)!=null&&l.warn?e.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},xd={},Cl=(e,t,n,r)=>{jn(n)&&xd[n]||(jn(n)&&(xd[n]=new Date),IS(e,t,n,r))},Wg=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},El=(e,t,n)=>{e.loadNamespaces(t,Wg(e,n))},kd=(e,t,n,r)=>{if(jn(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return El(e,n,r);n.forEach(s=>{e.options.ns.indexOf(s)<0&&e.options.ns.push(s)}),e.loadLanguages(t,Wg(e,r))},DS=(e,t,n={})=>!t.languages||!t.languages.length?(Cl(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,e))return!1}}),jn=e=>typeof e=="string",FS=e=>typeof e=="object"&&e!==null,MS=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,US={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},zS=e=>US[e],VS=e=>e.replace(MS,zS);let jl={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:VS};const BS=(e={})=>{jl={...jl,...e}},HS=()=>jl;let Qg;const GS=e=>{Qg=e},qS=()=>Qg,KS={type:"3rdParty",init(e){BS(e.options.react),GS(e)}},WS=S.createContext();class QS{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const JS=(e,t)=>{const n=S.useRef();return S.useEffect(()=>{n.current=e},[e,t]),n.current},Jg=(e,t,n,r)=>e.getFixedT(t,n,r),YS=(e,t,n,r)=>S.useCallback(Jg(e,t,n,r),[e,t,n,r]),ae=(e,t={})=>{var k,x,C,E;const{i18n:n}=t,{i18n:r,defaultNS:s}=S.useContext(WS)||{},i=n||r||qS();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new QS),!i){Cl(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const j=(N,M)=>jn(M)?M:FS(M)&&jn(M.defaultValue)?M.defaultValue:Array.isArray(N)?N[N.length-1]:N,R=[j,{},!1];return R.t=j,R.i18n={},R.ready=!1,R}(k=i.options.react)!=null&&k.wait&&Cl(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...HS(),...i.options.react,...t},{useSuspense:a,keyPrefix:l}=o;let u=s||((x=i.options)==null?void 0:x.defaultNS);u=jn(u)?[u]:u||["translation"],(E=(C=i.reportNamespaces).addUsedNamespaces)==null||E.call(C,u);const c=(i.isInitialized||i.initializedStoreOnce)&&u.every(j=>DS(j,i,o)),f=YS(i,t.lng||null,o.nsMode==="fallback"?u:u[0],l),h=()=>f,g=()=>Jg(i,t.lng||null,o.nsMode==="fallback"?u:u[0],l),[p,w]=S.useState(h);let _=u.join();t.lng&&(_=`${t.lng}${_}`);const v=JS(_),m=S.useRef(!0);S.useEffect(()=>{const{bindI18n:j,bindI18nStore:R}=o;m.current=!0,!c&&!a&&(t.lng?kd(i,t.lng,u,()=>{m.current&&w(g)}):El(i,u,()=>{m.current&&w(g)})),c&&v&&v!==_&&m.current&&w(g);const N=()=>{m.current&&w(g)};return j&&(i==null||i.on(j,N)),R&&(i==null||i.store.on(R,N)),()=>{m.current=!1,i&&j&&(j==null||j.split(" ").forEach(M=>i.off(M,N))),R&&i&&R.split(" ").forEach(M=>i.store.off(M,N))}},[i,_]),S.useEffect(()=>{m.current&&c&&w(h)},[i,l,c]);const y=[p,i,c];if(y.t=p,y.i18n=i,y.ready=c,c||!c&&!a)return y;throw new Promise(j=>{t.lng?kd(i,t.lng,u,()=>j()):El(i,u,()=>j())})},Yg=S.createContext(void 0),XS=({children:e})=>{const{i18n:t}=ae(),[n,r]=S.useState("en");S.useEffect(()=>{const o=localStorage.getItem("preferred-language")||"en";r(o),t.changeLanguage(o)},[t]);const i={currentLanguage:n,changeLanguage:o=>{r(o),t.changeLanguage(o),localStorage.setItem("preferred-language",o)}};return d.jsx(Yg.Provider,{value:i,children:e})},ZS=()=>{const e=S.useContext(Yg);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},e_=()=>{const{signInWithGoogle:e,loading:t}=ge(),{t:n}=ae(),r=async()=>{try{await e()}catch(s){console.error("Sign in error:",s)}};return d.jsx("div",{className:"auth-container",children:d.jsxs("div",{className:"auth-card",children:[d.jsx("h1",{className:"auth-title",children:n("auth.welcome")}),d.jsx("p",{className:"auth-description",children:n("auth.signInDescription")}),d.jsx("button",{onClick:r,disabled:t,className:"google-signin-btn",children:t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"loading-spinner",style:{width:"20px",height:"20px",margin:0}}),n("auth.signingIn")]}):d.jsxs(d.Fragment,{children:[d.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n("auth.signInWithGoogle")]})})]})})},la=({children:e})=>{console.log("ProtectedRoute rendering...");const{user:t,loading:n}=ge(),{t:r}=ae();return console.log("ProtectedRoute state:",{user:t,loading:n}),n?(console.log("ProtectedRoute: showing loading state"),d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"loading",children:[d.jsx("div",{className:"loading-spinner"}),r("common.loading")]})})})):t?(console.log("ProtectedRoute: showing protected content"),e):(console.log("ProtectedRoute: showing login component"),d.jsx(e_,{}))},Vn=({children:e})=>{const{user:t,loading:n,isAdmin:r}=ge(),{t:s}=ae();return n?d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"loading",children:[d.jsx("div",{className:"loading-spinner"}),s("admin.checkingAccess")]})})}):t?r?e:d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"access-denied",children:[d.jsx("div",{className:"access-denied-icon",children:""}),d.jsx("h2",{className:"access-denied-title",children:s("admin.adminAccessRequired")}),d.jsx("p",{className:"access-denied-description",children:s("admin.noAdminPrivileges")})]})})}):d.jsx("div",{className:"auth-container",children:d.jsx("div",{className:"auth-card",children:d.jsxs("div",{className:"access-denied",children:[d.jsx("div",{className:"access-denied-icon",children:""}),d.jsx("h2",{className:"access-denied-title",children:s("admin.authenticationRequired")}),d.jsx("p",{className:"access-denied-description",children:s("admin.signInToAccess")})]})})})};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Jt(e,t){return typeof e=="function"?e(t):e}function Ue(e,t){return n=>{t.setState(r=>({...r,[e]:Jt(n,r[e])}))}}function Co(e){return e instanceof Function}function t_(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function n_(e,t){const n=[],r=s=>{s.forEach(i=>{n.push(i);const o=t(i);o!=null&&o.length&&r(o)})};return r(e),n}function O(e,t,n){let r=[],s;return i=>{let o;n.key&&n.debug&&(o=Date.now());const a=e(i);if(!(a.length!==r.length||a.some((c,f)=>r[f]!==c)))return s;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),s=t(...a),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-u)*100)/100,h=f/16,g=(p,w)=>{for(p=String(p);p.length<w;)p=" "+p;return p};console.info(`%c ${g(f,5)} /${g(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function A(e,t,n,r){return{debug:()=>{var s;return(s=e==null?void 0:e.debugAll)!=null?s:e[t]},key:!1,onChange:r}}function r_(e,t,n,r){const s=()=>{var o;return(o=i.getValue())!=null?o:e.options.renderFallbackValue},i={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:s,getContext:O(()=>[e,n,t,i],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),A(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(i,n,t,e)},{}),i}function s_(e,t,n,r){var s,i;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let u=(s=(i=a.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=h=>{let g=h;for(const w of l.split(".")){var p;g=(p=g)==null?void 0:p[w]}return g}:c=h=>h[a.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:O(()=>[!0],()=>{var h;return[f,...(h=f.columns)==null?void 0:h.flatMap(g=>g.getFlatColumns())]},A(e.options,"debugColumns")),getLeafColumns:O(()=>[e._getOrderColumnsFn()],h=>{var g;if((g=f.columns)!=null&&g.length){let p=f.columns.flatMap(w=>w.getLeafColumns());return h(p)}return[f]},A(e.options,"debugColumns"))};for(const h of e._features)h.createColumn==null||h.createColumn(f,e);return f}const Se="debugHeaders";function Cd(e,t,n){var r;let i={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(i),o},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(i,e)}),i}const i_={createTable:e=>{e.getHeaderGroups=O(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>{var i,o;const a=(i=r==null?void 0:r.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?i:[],l=(o=s==null?void 0:s.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?o:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(s!=null&&s.includes(f.id)));return si(t,[...a,...u,...l],e)},A(e.options,Se)),e.getCenterHeaderGroups=O(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,s)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),si(t,n,e,"center")),A(e.options,Se)),e.getLeftHeaderGroups=O(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var s;const i=(s=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return si(t,i,e,"left")},A(e.options,Se)),e.getRightHeaderGroups=O(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var s;const i=(s=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?s:[];return si(t,i,e,"right")},A(e.options,Se)),e.getFooterGroups=O(()=>[e.getHeaderGroups()],t=>[...t].reverse(),A(e.options,Se)),e.getLeftFooterGroups=O(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),A(e.options,Se)),e.getCenterFooterGroups=O(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),A(e.options,Se)),e.getRightFooterGroups=O(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),A(e.options,Se)),e.getFlatHeaders=O(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),A(e.options,Se)),e.getLeftFlatHeaders=O(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),A(e.options,Se)),e.getCenterFlatHeaders=O(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),A(e.options,Se)),e.getRightFlatHeaders=O(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),A(e.options,Se)),e.getCenterLeafHeaders=O(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),A(e.options,Se)),e.getLeftLeafHeaders=O(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),A(e.options,Se)),e.getRightLeafHeaders=O(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),A(e.options,Se)),e.getLeafHeaders=O(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var s,i,o,a,l,u;return[...(s=(i=t[0])==null?void 0:i.headers)!=null?s:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},A(e.options,Se))}};function si(e,t,n,r){var s,i;let o=0;const a=function(h,g){g===void 0&&(g=1),o=Math.max(o,g),h.filter(p=>p.getIsVisible()).forEach(p=>{var w;(w=p.columns)!=null&&w.length&&a(p.columns,g+1)},0)};a(e);let l=[];const u=(h,g)=>{const p={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},w=[];h.forEach(_=>{const v=[...w].reverse()[0],m=_.column.depth===p.depth;let y,k=!1;if(m&&_.column.parent?y=_.column.parent:(y=_.column,k=!0),v&&(v==null?void 0:v.column)===y)v.subHeaders.push(_);else{const x=Cd(n,y,{id:[r,g,y.id,_==null?void 0:_.id].filter(Boolean).join("_"),isPlaceholder:k,placeholderId:k?`${w.filter(C=>C.column===y).length}`:void 0,depth:g,index:w.length});x.subHeaders.push(_),w.push(x)}p.headers.push(_),_.headerGroup=p}),l.push(p),g>0&&u(w,g-1)},c=t.map((h,g)=>Cd(n,h,{depth:o,index:g}));u(c,o-1),l.reverse();const f=h=>h.filter(p=>p.column.getIsVisible()).map(p=>{let w=0,_=0,v=[0];p.subHeaders&&p.subHeaders.length?(v=[],f(p.subHeaders).forEach(y=>{let{colSpan:k,rowSpan:x}=y;w+=k,v.push(x)})):w=1;const m=Math.min(...v);return _=_+m,p.colSpan=w,p.rowSpan=_,{colSpan:w,rowSpan:_}});return f((s=(i=l[0])==null?void 0:i.headers)!=null?s:[]),l}const Mu=(e,t,n,r,s,i,o)=>{let a={id:t,index:r,original:n,depth:s,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>n_(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:O(()=>[e.getAllLeafColumns()],l=>l.map(u=>r_(e,a,u,u.id)),A(e.options,"debugRows")),_getAllCellsByColumnId:O(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),A(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const u=e._features[l];u==null||u.createRow==null||u.createRow(a,e)}return a},o_={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},Xg=(e,t,n)=>{var r,s;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=e.getValue(t))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};Xg.autoRemove=e=>lt(e);const Zg=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};Zg.autoRemove=e=>lt(e);const ep=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};ep.autoRemove=e=>lt(e);const tp=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};tp.autoRemove=e=>lt(e);const np=(e,t,n)=>!n.some(r=>{var s;return!((s=e.getValue(t))!=null&&s.includes(r))});np.autoRemove=e=>lt(e)||!(e!=null&&e.length);const rp=(e,t,n)=>n.some(r=>{var s;return(s=e.getValue(t))==null?void 0:s.includes(r)});rp.autoRemove=e=>lt(e)||!(e!=null&&e.length);const sp=(e,t,n)=>e.getValue(t)===n;sp.autoRemove=e=>lt(e);const ip=(e,t,n)=>e.getValue(t)==n;ip.autoRemove=e=>lt(e);const Uu=(e,t,n)=>{let[r,s]=n;const i=e.getValue(t);return i>=r&&i<=s};Uu.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,s=typeof n!="number"?parseFloat(n):n,i=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(s)?1/0:s;if(i>o){const a=i;i=o,o=a}return[i,o]};Uu.autoRemove=e=>lt(e)||lt(e[0])&&lt(e[1]);const Rt={includesString:Xg,includesStringSensitive:Zg,equalsString:ep,arrIncludes:tp,arrIncludesAll:np,arrIncludesSome:rp,equals:sp,weakEquals:ip,inNumberRange:Uu};function lt(e){return e==null||e===""}const a_={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:Ue("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?Rt.includesString:typeof r=="number"?Rt.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Rt.equals:Array.isArray(r)?Rt.arrIncludes:Rt.weakEquals},e.getFilterFn=()=>{var n,r;return Co(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:Rt[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,s;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const s=e.getFilterFn(),i=r==null?void 0:r.find(c=>c.id===e.id),o=Jt(n,i?i.value:void 0);if(Ed(s,o,e)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==e.id))!=null?a:[]}const l={id:e.id,value:o};if(i){var u;return(u=r==null?void 0:r.map(c=>c.id===e.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=s=>{var i;return(i=Jt(t,s))==null?void 0:i.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(Ed(l,o.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Ed(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const l_=(e,t,n)=>n.reduce((r,s)=>{const i=s.getValue(e);return r+(typeof i=="number"?i:0)},0),u_=(e,t,n)=>{let r;return n.forEach(s=>{const i=s.getValue(e);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},c_=(e,t,n)=>{let r;return n.forEach(s=>{const i=s.getValue(e);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},d_=(e,t,n)=>{let r,s;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(r===void 0?o>=o&&(r=s=o):(r>o&&(r=o),s<o&&(s=o)))}),[r,s]},f_=(e,t)=>{let n=0,r=0;if(t.forEach(s=>{let i=s.getValue(e);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},h_=(e,t)=>{if(!t.length)return;const n=t.map(i=>i.getValue(e));if(!t_(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((i,o)=>i-o);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},g_=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),p_=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,m_=(e,t)=>t.length,ua={sum:l_,min:u_,max:c_,extent:d_,mean:f_,median:h_,unique:g_,uniqueCount:p_,count:m_},v_={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Ue("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return ua.sum;if(Object.prototype.toString.call(r)==="[object Date]")return ua.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Co(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:ua[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var s;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function y_(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(i=>!t.includes(i.id));return n==="remove"?r:[...t.map(i=>e.find(o=>o.id===i)).filter(Boolean),...r]}const w_={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Ue("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=O(n=>[ns(t,n)],n=>n.findIndex(r=>r.id===e.id),A(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=ns(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const s=ns(t,n);return((r=s[s.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=O(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>s=>{let i=[];if(!(t!=null&&t.length))i=s;else{const o=[...t],a=[...s];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(c=>c.id===l);u>-1&&i.push(a.splice(u,1)[0])}i=[...i,...a]}return y_(i,n,r)},A(e.options,"debugTable"))}},ca=()=>({left:[],right:[]}),S_={getInitialState:e=>({columnPinning:ca(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Ue("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(s=>s.id).filter(Boolean);t.setColumnPinning(s=>{var i,o;if(n==="right"){var a,l;return{left:((a=s==null?void 0:s.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,c;return{left:[...((u=s==null?void 0:s.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((c=s==null?void 0:s.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((i=s==null?void 0:s.left)!=null?i:[]).filter(f=>!(r!=null&&r.includes(f))),right:((o=s==null?void 0:s.right)!=null?o:[]).filter(f=>!(r!=null&&r.includes(f)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var s,i,o;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:s}=t.getState().columnPinning,i=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>s==null?void 0:s.includes(a));return i?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();return s?(n=(r=t.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=O(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,s)=>{const i=[...r??[],...s??[]];return n.filter(o=>!i.includes(o.column.id))},A(t.options,"debugRows")),e.getLeftVisibleCells=O(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),A(t.options,"debugRows")),e.getRightVisibleCells=O(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),A(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?ca():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:ca())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=O(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(s=>s.id===r)).filter(Boolean),A(e.options,"debugColumns")),e.getRightLeafColumns=O(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(s=>s.id===r)).filter(Boolean),A(e.options,"debugColumns")),e.getCenterLeafColumns=O(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const s=[...n??[],...r??[]];return t.filter(i=>!s.includes(i.id))},A(e.options,"debugColumns"))}};function __(e){return e||(typeof document<"u"?document:null)}const ii={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},da=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),x_={getDefaultColumnDef:()=>ii,getInitialState:e=>({columnSizing:{},columnSizingInfo:da(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ue("columnSizing",e),onColumnSizingInfoChange:Ue("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,s;const i=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:ii.minSize,(r=i??e.columnDef.size)!=null?r:ii.size),(s=e.columnDef.maxSize)!=null?s:ii.maxSize)},e.getStart=O(n=>[n,ns(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((s,i)=>s+i.getSize(),0),A(t.options,"debugColumns")),e.getAfter=O(n=>[n,ns(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((s,i)=>s+i.getSize(),0),A(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...s}=n;return s})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;n+=(i=s.column.getSize())!=null?i:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),s=r==null?void 0:r.getCanResize();return i=>{if(!r||!s||(i.persist==null||i.persist(),fa(i)&&i.touches&&i.touches.length>1))return;const o=e.getSize(),a=e?e.getLeafHeaders().map(v=>[v.column.id,v.column.getSize()]):[[r.id,r.getSize()]],l=fa(i)?Math.round(i.touches[0].clientX):i.clientX,u={},c=(v,m)=>{typeof m=="number"&&(t.setColumnSizingInfo(y=>{var k,x;const C=t.options.columnResizeDirection==="rtl"?-1:1,E=(m-((k=y==null?void 0:y.startOffset)!=null?k:0))*C,j=Math.max(E/((x=y==null?void 0:y.startSize)!=null?x:0),-.999999);return y.columnSizingStart.forEach(R=>{let[N,M]=R;u[N]=Math.round(Math.max(M+M*j,0)*100)/100}),{...y,deltaOffset:E,deltaPercentage:j}}),(t.options.columnResizeMode==="onChange"||v==="end")&&t.setColumnSizing(y=>({...y,...u})))},f=v=>c("move",v),h=v=>{c("end",v),t.setColumnSizingInfo(m=>({...m,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=__(n),p={moveHandler:v=>f(v.clientX),upHandler:v=>{g==null||g.removeEventListener("mousemove",p.moveHandler),g==null||g.removeEventListener("mouseup",p.upHandler),h(v.clientX)}},w={moveHandler:v=>(v.cancelable&&(v.preventDefault(),v.stopPropagation()),f(v.touches[0].clientX),!1),upHandler:v=>{var m;g==null||g.removeEventListener("touchmove",w.moveHandler),g==null||g.removeEventListener("touchend",w.upHandler),v.cancelable&&(v.preventDefault(),v.stopPropagation()),h((m=v.touches[0])==null?void 0:m.clientX)}},_=k_()?{passive:!1}:!1;fa(i)?(g==null||g.addEventListener("touchmove",w.moveHandler,_),g==null||g.addEventListener("touchend",w.upHandler,_)):(g==null||g.addEventListener("mousemove",p.moveHandler,_),g==null||g.addEventListener("mouseup",p.upHandler,_)),t.setColumnSizingInfo(v=>({...v,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?da():(n=e.initialState.columnSizingInfo)!=null?n:da())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?t:0}}};let oi=null;function k_(){if(typeof oi=="boolean")return oi;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return oi=e,oi}function fa(e){return e.type==="touchstart"}const C_={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Ue("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const s=e.columns;return(n=s.length?s.some(i=>i.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=O(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),A(t.options,"debugRows")),e.getVisibleCells=O(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],A(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>O(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),A(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function ns(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const E_={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},j_={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:Ue("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,s,i;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((s=t.options.enableFilters)!=null?s:!0)&&((i=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Rt.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Co(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:Rt[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},R_={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Ue("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,s;if(!t){e._queue(()=>{t=!0});return}if((r=(s=e.options.autoResetAll)!=null?s:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var s,i;e.setExpanded(r?{}:(s=(i=e.initialState)==null?void 0:i.expanded)!=null?s:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const o=i.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(s=n)!=null?s:!i,!i&&n)return{...o,[e.id]:!0};if(i&&!n){const{[e.id]:a,...l}=o;return l}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,s;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((s=e.subRows)!=null&&s.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Rl=0,Pl=10,ha=()=>({pageIndex:Rl,pageSize:Pl}),P_={getInitialState:e=>({...e,pagination:{...ha(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Ue("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,s;if(!t){e._queue(()=>{t=!0});return}if((r=(s=e.options.autoResetAll)!=null?s:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const s=i=>Jt(r,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(s)},e.resetPagination=r=>{var s;e.setPagination(r?ha():(s=e.initialState.pagination)!=null?s:ha())},e.setPageIndex=r=>{e.setPagination(s=>{let i=Jt(r,s.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...s,pageIndex:i}})},e.resetPageIndex=r=>{var s,i;e.setPageIndex(r?Rl:(s=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:Rl)},e.resetPageSize=r=>{var s,i;e.setPageSize(r?Pl:(s=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:Pl)},e.setPageSize=r=>{e.setPagination(s=>{const i=Math.max(1,Jt(r,s.pageSize)),o=s.pageSize*s.pageIndex,a=Math.floor(o/i);return{...s,pageIndex:a,pageSize:i}})},e.setPageCount=r=>e.setPagination(s=>{var i;let o=Jt(r,(i=e.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...s,pageCount:o}}),e.getPageOptions=O(()=>[e.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,o)=>o)),s},A(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,s=e.getPageCount();return s===-1?!0:s===0?!1:r<s-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},ga=()=>({top:[],bottom:[]}),T_={getInitialState:e=>({rowPinning:ga(),...e}),getDefaultOptions:e=>({onRowPinningChange:Ue("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,s)=>{const i=r?e.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=s?e.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,e.id,...i]);t.setRowPinning(l=>{var u,c;if(n==="bottom"){var f,h;return{top:((f=l==null?void 0:l.top)!=null?f:[]).filter(w=>!(a!=null&&a.has(w))),bottom:[...((h=l==null?void 0:l.bottom)!=null?h:[]).filter(w=>!(a!=null&&a.has(w))),...Array.from(a)]}}if(n==="top"){var g,p;return{top:[...((g=l==null?void 0:l.top)!=null?g:[]).filter(w=>!(a!=null&&a.has(w))),...Array.from(a)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(w=>!(a!=null&&a.has(w)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(w=>!(a!=null&&a.has(w))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(w=>!(a!=null&&a.has(w)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=t.options;return typeof r=="function"?r(e):(n=r??s)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:s}=t.getState().rowPinning,i=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>s==null?void 0:s.includes(a));return i?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const s=e.getIsPinned();if(!s)return-1;const i=(n=s==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=i==null?void 0:i.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?ga():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:ga())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var s;return((s=e.options.keepPinnedRows)==null||s?(n??[]).map(o=>{const a=e.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=O(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),A(e.options,"debugRows")),e.getBottomRows=O(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),A(e.options,"debugRows")),e.getCenterRows=O(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const s=new Set([...n??[],...r??[]]);return t.filter(i=>!s.has(i.id))},A(e.options,"debugRows"))}},N_={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Ue("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},s=e.getPreGroupedRowModel().flatRows;return t?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),s={...n};return e.getRowModel().rows.forEach(i=>{Tl(s,i.id,r,!0,e)}),s}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=O(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?pa(e,n):{rows:[],flatRows:[],rowsById:{}},A(e.options,"debugTable")),e.getFilteredSelectedRowModel=O(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?pa(e,n):{rows:[],flatRows:[],rowsById:{}},A(e.options,"debugTable")),e.getGroupedSelectedRowModel=O(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?pa(e,n):{rows:[],flatRows:[],rowsById:{}},A(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(s=>!n[s.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const s=e.getIsSelected();t.setRowSelection(i=>{var o;if(n=typeof n<"u"?n:!s,e.getCanSelect()&&s===n)return i;const a={...i};return Tl(a,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return zu(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Nl(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Nl(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var s;n&&e.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Tl=(e,t,n,r,s)=>{var i;const o=s.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>Tl(e,a.id,n,r,s))};function pa(e,t){const n=e.getState().rowSelection,r=[],s={},i=function(o,a){return o.map(l=>{var u;const c=zu(l,n);if(c&&(r.push(l),s[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:i(l.subRows)}),c)return l}).filter(Boolean)};return{rows:i(t.rows),flatRows:r,rowsById:s}}function zu(e,t){var n;return(n=t[e.id])!=null?n:!1}function Nl(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return e.subRows.forEach(o=>{if(!(i&&!s)&&(o.getCanSelect()&&(zu(o,t)?i=!0:s=!1),o.subRows&&o.subRows.length)){const a=Nl(o,t);a==="all"?i=!0:(a==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const bl=/([0-9]+)/gm,b_=(e,t,n)=>op(un(e.getValue(n)).toLowerCase(),un(t.getValue(n)).toLowerCase()),L_=(e,t,n)=>op(un(e.getValue(n)),un(t.getValue(n))),$_=(e,t,n)=>Vu(un(e.getValue(n)).toLowerCase(),un(t.getValue(n)).toLowerCase()),O_=(e,t,n)=>Vu(un(e.getValue(n)),un(t.getValue(n))),A_=(e,t,n)=>{const r=e.getValue(n),s=t.getValue(n);return r>s?1:r<s?-1:0},I_=(e,t,n)=>Vu(e.getValue(n),t.getValue(n));function Vu(e,t){return e===t?0:e>t?1:-1}function un(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function op(e,t){const n=e.split(bl).filter(Boolean),r=t.split(bl).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),i=r.shift(),o=parseInt(s,10),a=parseInt(i,10),l=[o,a].sort();if(isNaN(l[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const Fr={alphanumeric:b_,alphanumericCaseSensitive:L_,text:$_,textCaseSensitive:O_,datetime:A_,basic:I_},D_={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Ue("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const i=s==null?void 0:s.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return Fr.datetime;if(typeof i=="string"&&(r=!0,i.split(bl).length>1))return Fr.alphanumeric}return r?Fr.text:Fr.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Co(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:Fr[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const s=e.getNextSortingOrder(),i=typeof n<"u"&&n!==null;t.setSorting(o=>{const a=o==null?void 0:o.find(g=>g.id===e.id),l=o==null?void 0:o.findIndex(g=>g.id===e.id);let u=[],c,f=i?n:s==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(i||s||(c="remove")),c==="add"){var h;u=[...o,{id:e.id,desc:f}],u.splice(0,u.length-((h=t.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(g=>g.id===e.id?{...g,desc:f}:g):c==="remove"?u=o.filter(g=>g.id!==e.id):u=[{id:e.id,desc:f}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,s;const i=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==i&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(s=t.options.enableMultiRemove)!=null)||s)?!1:o==="desc"?"asc":"desc":i},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(s=>s.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(s=>s.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},F_=[i_,C_,w_,S_,o_,a_,E_,j_,D_,v_,R_,P_,T_,N_,x_];function M_(e){var t,n;const r=[...F_,...(t=e._features)!=null?t:[]];let s={_features:r};const i=s._features.reduce((h,g)=>Object.assign(h,g.getDefaultOptions==null?void 0:g.getDefaultOptions(s)),{}),o=h=>s.options.mergeOptions?s.options.mergeOptions(i,h):{...i,...h};let l={...{},...(n=e.initialState)!=null?n:{}};s._features.forEach(h=>{var g;l=(g=h.getInitialState==null?void 0:h.getInitialState(l))!=null?g:l});const u=[];let c=!1;const f={_features:r,options:{...i,...e},initialState:l,_queue:h=>{u.push(h),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{s.setState(s.initialState)},setOptions:h=>{const g=Jt(h,s.options);s.options=o(g)},getState:()=>s.options.state,setState:h=>{s.options.onStateChange==null||s.options.onStateChange(h)},_getRowId:(h,g,p)=>{var w;return(w=s.options.getRowId==null?void 0:s.options.getRowId(h,g,p))!=null?w:`${p?[p.id,g].join("."):g}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(h,g)=>{let p=(g?s.getPrePaginationRowModel():s.getRowModel()).rowsById[h];if(!p&&(p=s.getCoreRowModel().rowsById[h],!p))throw new Error;return p},_getDefaultColumnDef:O(()=>[s.options.defaultColumn],h=>{var g;return h=(g=h)!=null?g:{},{header:p=>{const w=p.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:p=>{var w,_;return(w=(_=p.renderValue())==null||_.toString==null?void 0:_.toString())!=null?w:null},...s._features.reduce((p,w)=>Object.assign(p,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...h}},A(e,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:O(()=>[s._getColumnDefs()],h=>{const g=function(p,w,_){return _===void 0&&(_=0),p.map(v=>{const m=s_(s,v,_,w),y=v;return m.columns=y.columns?g(y.columns,m,_+1):[],m})};return g(h)},A(e,"debugColumns")),getAllFlatColumns:O(()=>[s.getAllColumns()],h=>h.flatMap(g=>g.getFlatColumns()),A(e,"debugColumns")),_getAllFlatColumnsById:O(()=>[s.getAllFlatColumns()],h=>h.reduce((g,p)=>(g[p.id]=p,g),{}),A(e,"debugColumns")),getAllLeafColumns:O(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(h,g)=>{let p=h.flatMap(w=>w.getLeafColumns());return g(p)},A(e,"debugColumns")),getColumn:h=>s._getAllFlatColumnsById()[h]};Object.assign(s,f);for(let h=0;h<s._features.length;h++){const g=s._features[h];g==null||g.createTable==null||g.createTable(s)}return s}function U_(){return e=>O(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,i,o){i===void 0&&(i=0);const a=[];for(let u=0;u<s.length;u++){const c=Mu(e,e._getRowId(s[u],u,o),s[u],u,i,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var l;c.originalSubRows=e.options.getSubRows(s[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,i+1,c))}}return a};return n.rows=r(t),n},A(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function z_(e){const t=[],n=r=>{var s;t.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function V_(e,t,n){return n.options.filterFromLeafRows?B_(e,t,n):H_(e,t,n)}function B_(e,t,n){var r;const s=[],i={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let h=0;h<l.length;h++){var f;let g=l[h];const p=Mu(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(p.columnFilters=g.columnFilters,(f=g.subRows)!=null&&f.length&&u<o){if(p.subRows=a(g.subRows,u+1),g=p,t(g)&&!p.subRows.length){c.push(g),i[g.id]=g,s.push(g);continue}if(t(g)||p.subRows.length){c.push(g),i[g.id]=g,s.push(g);continue}}else g=p,t(g)&&(c.push(g),i[g.id]=g,s.push(g))}return c};return{rows:a(e),flatRows:s,rowsById:i}}function H_(e,t,n){var r;const s=[],i={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let h=0;h<l.length;h++){let g=l[h];if(t(g)){var f;if((f=g.subRows)!=null&&f.length&&u<o){const w=Mu(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);w.subRows=a(g.subRows,u+1),g=w}c.push(g),s.push(g),i[g.id]=g}}return c};return{rows:a(e),flatRows:s,rowsById:i}}function G_(){return e=>O(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let h=0;h<t.flatRows.length;h++)t.flatRows[h].columnFilters={},t.flatRows[h].columnFiltersMeta={};return t}const s=[],i=[];(n??[]).forEach(h=>{var g;const p=e.getColumn(h.id);if(!p)return;const w=p.getFilterFn();w&&s.push({id:h.id,filterFn:w,resolvedValue:(g=w.resolveFilterValue==null?void 0:w.resolveFilterValue(h.value))!=null?g:h.value})});const o=(n??[]).map(h=>h.id),a=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(h=>{var g;i.push({id:h.id,filterFn:a,resolvedValue:(g=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?g:r})}));let u,c;for(let h=0;h<t.flatRows.length;h++){const g=t.flatRows[h];if(g.columnFilters={},s.length)for(let p=0;p<s.length;p++){u=s[p];const w=u.id;g.columnFilters[w]=u.filterFn(g,w,u.resolvedValue,_=>{g.columnFiltersMeta[w]=_})}if(i.length){for(let p=0;p<i.length;p++){c=i[p];const w=c.id;if(c.filterFn(g,w,c.resolvedValue,_=>{g.columnFiltersMeta[w]=_})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const f=h=>{for(let g=0;g<o.length;g++)if(h.columnFilters[o[g]]===!1)return!1;return!0};return V_(t.rows,f,e)},A(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function q_(e){return t=>O(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:i}=n;let{rows:o,flatRows:a,rowsById:l}=r;const u=s*i,c=u+s;o=o.slice(u,c);let f;t.options.paginateExpandedRows?f={rows:o,flatRows:a,rowsById:l}:f=z_({rows:o,flatRows:a,rowsById:l}),f.flatRows=[];const h=g=>{f.flatRows.push(g),g.subRows.length&&g.subRows.forEach(h)};return f.rows.forEach(h),f},A(t.options,"debugTable"))}function K_(){return e=>O(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,s=[],i=r.filter(l=>{var u;return(u=e.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};i.forEach(l=>{const u=e.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(c=>({...c}));return u.sort((c,f)=>{for(let g=0;g<i.length;g+=1){var h;const p=i[g],w=o[p.id],_=w.sortUndefined,v=(h=p==null?void 0:p.desc)!=null?h:!1;let m=0;if(_){const y=c.getValue(p.id),k=f.getValue(p.id),x=y===void 0,C=k===void 0;if(x||C){if(_==="first")return x?-1:1;if(_==="last")return x?1:-1;m=x&&C?0:x?_:-_}}if(m===0&&(m=w.sortingFn(c,f,p.id)),m!==0)return v&&(m*=-1),w.invertSorting&&(m*=-1),m}return c.index-f.index}),u.forEach(c=>{var f;s.push(c),(f=c.subRows)!=null&&f.length&&(c.subRows=a(c.subRows))}),u};return{rows:a(n.rows),flatRows:s,rowsById:n.rowsById}},A(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function jd(e,t){return e?W_(e)?S.createElement(e,t):e:null}function W_(e){return Q_(e)||typeof e=="function"||J_(e)}function Q_(e){return typeof e=="function"&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}function J_(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function Y_(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=S.useState(()=>({current:M_(t)})),[r,s]=S.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...e,state:{...r,...e.state},onStateChange:o=>{s(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}const Is=({data:e=[],columns:t=[],loading:n=!1,error:r=null,enablePagination:s=!0,serverSide:i=!1,onServerSideChange:o,totalCount:a=0,pageSize:l=10,pageIndex:u=0,sorting:c=[],globalFilter:f="",className:h=""})=>{const{t:g}=ae(),[p,w]=S.useState(c),[_,v]=S.useState(f),[m,y]=S.useState({pageIndex:u,pageSize:l}),k=C=>{i&&o&&o(C)},x=Y_({data:e,columns:t,getCoreRowModel:U_(),getSortedRowModel:K_(),getPaginationRowModel:q_(),getFilteredRowModel:G_(),state:{sorting:p,globalFilter:_,pagination:m},onSortingChange:C=>{const E=typeof C=="function"?C(p):C;w(E),i&&k({sorting:E,pagination:m,globalFilter:_})},onGlobalFilterChange:C=>{if(v(C),i){const E={...m,pageIndex:0};y(E),k({sorting:p,pagination:E,globalFilter:C})}},onPaginationChange:C=>{const E=typeof C=="function"?C(m):C;y(E),i&&k({sorting:p,pagination:E,globalFilter:_})},manualSorting:i,manualFiltering:i,manualPagination:i,...i&&{rowCount:a}});return n?d.jsxs("div",{className:"data-table-loading",children:[d.jsx("div",{className:"loading-spinner"}),g("dataTable.loadingData")]}):r?d.jsxs("div",{className:"error",children:[d.jsx("h3",{className:"error-title",children:g("dataTable.failedToLoad")}),d.jsx("p",{className:"error-message",children:r})]}):d.jsxs("div",{className:`data-table ${h}`,children:[d.jsxs("div",{className:"data-table-controls",children:[d.jsx("div",{className:"search-container",children:d.jsx("input",{type:"text",placeholder:g("dataTable.searchPlaceholder"),value:_??"",onChange:C=>x.setGlobalFilter(C.target.value),className:"search-input"})}),d.jsx("div",{className:"table-info",children:i?d.jsx("span",{className:"table-stats",children:g("dataTable.showingEntries",{start:Math.min(m.pageIndex*m.pageSize+1,a),end:Math.min((m.pageIndex+1)*m.pageSize,a),total:a})}):d.jsx("span",{className:"table-stats",children:g("dataTable.showingCount",{count:x.getRowModel().rows.length,total:e.length})})})]}),d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"data-table-element",children:[d.jsx("thead",{children:x.getHeaderGroups().map(C=>d.jsx("tr",{children:C.headers.map(E=>d.jsx("th",{className:"data-table-header",children:E.isPlaceholder?null:d.jsxs("div",{className:`header-content ${E.column.getCanSort()?"sortable":""}`,onClick:E.column.getToggleSortingHandler(),children:[jd(E.column.columnDef.header,E.getContext()),E.column.getCanSort()&&d.jsx("span",{className:"sort-indicator",children:{asc:" ",desc:" "}[E.column.getIsSorted()]??" "})]})},E.id))},C.id))}),d.jsx("tbody",{children:x.getRowModel().rows.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:t.length,className:"empty-row",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-state-icon",children:""}),d.jsx("h3",{className:"empty-state-title",children:g("dataTable.noData")}),d.jsx("p",{className:"empty-state-description",children:g(_?"dataTable.noResults":"dataTable.noDataAvailable")})]})})}):x.getRowModel().rows.map(C=>d.jsx("tr",{className:"data-table-row",children:C.getVisibleCells().map(E=>d.jsx("td",{className:"data-table-cell",children:jd(E.column.columnDef.cell,E.getContext())},E.id))},C.id))})]})}),s&&d.jsxs("div",{className:"pagination-controls",children:[d.jsx("div",{className:"pagination-info",children:d.jsx("span",{children:g("dataTable.pageInfo",{current:x.getState().pagination.pageIndex+1,total:x.getPageCount()})})}),d.jsxs("div",{className:"pagination-buttons",children:[d.jsx("button",{onClick:()=>x.setPageIndex(0),disabled:!x.getCanPreviousPage(),className:"pagination-btn",children:""}),d.jsx("button",{onClick:()=>x.previousPage(),disabled:!x.getCanPreviousPage(),className:"pagination-btn",children:""}),d.jsx("button",{onClick:()=>x.nextPage(),disabled:!x.getCanNextPage(),className:"pagination-btn",children:""}),d.jsx("button",{onClick:()=>x.setPageIndex(x.getPageCount()-1),disabled:!x.getCanNextPage(),className:"pagination-btn",children:""})]}),d.jsx("div",{className:"page-size-selector",children:d.jsx("select",{value:x.getState().pagination.pageSize,onChange:C=>{x.setPageSize(Number(C.target.value))},className:"page-size-select",children:[10,25,50,100].map(C=>d.jsx("option",{value:C,children:g("dataTable.showSize",{size:C})},C))})})]})]})};function X_(){const{supabase:e}=ge(),{t}=ae(),[n,r]=S.useState([]),[s,i]=S.useState(!0),[o,a]=S.useState(null),[l,u]=S.useState(0),[c,f]=S.useState({pageIndex:0,pageSize:10}),[h,g]=S.useState([{id:"check_in",desc:!0}]),[p,w]=S.useState("");S.useEffect(()=>{_()},[c,h,p]);const _=async()=>{try{i(!0),a(null);let x=e.from("reservations").select("*",{count:"exact"});if(p&&(x=x.or(`guest_name.ilike.%${p}%,listing_id.ilike.%${p}%,status.ilike.%${p}%`)),h.length>0){const M=h[0];M&&(x=x.order(M.id,{ascending:!M.desc}))}const C=c.pageIndex*c.pageSize,E=C+c.pageSize-1;x=x.range(C,E);const{data:j,error:R,count:N}=await x.overrideTypes();if(R)throw R;r(j||[]),u(N||0)}catch(x){a(x instanceof Error?x.message:String(x)),console.error("Error fetching reservations:",x)}finally{i(!1)}},v=x=>{x.pagination&&f(x.pagination),x.sorting!==void 0&&g(x.sorting),x.globalFilter!==void 0&&w(x.globalFilter)},m=x=>x?new Date(x).toLocaleDateString():t("columns.na"),y=x=>x?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x):t("columns.na"),k=S.useMemo(()=>[{accessorKey:"id",header:t("columns.id"),cell:({getValue:x})=>{const C=x();return d.jsxs("span",{className:"reservation-id",title:C,children:[C.substring(0,8),"..."]})},enableSorting:!1},{accessorKey:"guest_name",header:t("reservations.guest"),cell:({getValue:x})=>x()||t("columns.na")},{accessorKey:"listing_id",header:t("reservations.property"),cell:({getValue:x})=>x()||t("columns.na")},{accessorKey:"check_in",header:t("reservations.checkIn"),cell:({getValue:x})=>m(x())},{accessorKey:"check_out",header:t("reservations.checkOut"),cell:({getValue:x})=>m(x())},{accessorKey:"nights",header:t("reservations.nights"),cell:({getValue:x})=>x()||t("columns.na")},{accessorKey:"party_size",header:t("reservations.guests"),cell:({getValue:x})=>x()||t("columns.na")},{accessorKey:"status",header:t("columns.status"),cell:({getValue:x})=>{const C=x();return d.jsx("span",{className:`status-badge status-${C}`,children:C})}},{accessorKey:"pricing_guest_total",header:t("reservations.total"),cell:({getValue:x})=>d.jsx("span",{className:"currency",children:y(x())})},{accessorKey:"pricing_host_payout",header:t("reservations.hostPayout"),cell:({getValue:x})=>d.jsx("span",{className:"currency",children:y(x())})}],[m,y,t]);return d.jsx("div",{className:"admin-reservations",children:d.jsx(Is,{data:n,columns:k,loading:s,error:o,serverSide:!0,onServerSideChange:v,totalCount:l,pageSize:c.pageSize,pageIndex:c.pageIndex,sorting:h,globalFilter:p,className:"reservations-data-table"})})}const ma=["unassigned","assigned","accepted","in_progress","completed","admin_accepted","cancelled"],Z_={unassigned:["assigned"],assigned:["accepted","in_progress","unassigned"],accepted:["assigned","in_progress"],in_progress:["completed","assigned"],completed:["admin_accepted"],admin_accepted:[],cancelled:["assigned"]};class ex{constructor(t,n){jo(this,"supabase");jo(this,"user");this.supabase=t,this.user=n}validateTaskUpdate(t){const n=[];t.status&&!ma.includes(t.status)&&n.push(`Invalid status: ${t.status}`),["started_at","finished_at","accepted_at","completed_at","assigned_at","admin_accepted_at","scheduled_datetime"].forEach(o=>{if(t[o]&&t[o]!==null){const a=new Date(t[o]);isNaN(a.getTime())&&n.push(`Invalid date format for ${o}: ${t[o]}`)}});const s=["assigned_to","assigned_by"],i=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(s.forEach(o=>{t[o]&&t[o]!==null&&(i.test(t[o])?typeof t[o]!="string"&&n.push(`Invalid ID format for ${o}: ${t[o]}`):n.push(`Invalid UUID format for ${o}: ${t[o]}`))}),n.length>0)throw new Error(`Validation errors: ${n.join(", ")}`)}validateStatusTransition(t,n){var r;if(!((r=Z_[t])!=null&&r.includes(n)))throw new Error(`Invalid status transition from ${t} to ${n}`)}async getTask(t){try{const{data:n,error:r}=await this.supabase.from("tasks").select("*").eq("id",t).single();if(r)throw r.code==="PGRST116"?new Error("Task not found"):r;return n}catch(n){throw console.error("Error fetching task:",n),n}}async updateTaskField(t,n,r,s={}){const i={[n]:r};try{this.validateTaskUpdate(i)}catch(o){throw new Error(`Invalid update: ${o instanceof Error?o.message:String(o)}`)}try{const{error:o}=await this.supabase.from("tasks").update(i).eq("id",t);if(o)throw o;return{success:!0}}catch(o){throw console.error(`Error updating task ${n}:`,o),o}}async updateTaskFields(t,n){try{this.validateTaskUpdate(n)}catch(r){throw new Error(`Invalid updates: ${r instanceof Error?r.message:String(r)}`)}try{const{error:r}=await this.supabase.from("tasks").update(n).eq("id",t);if(r)throw r;return{success:!0}}catch(r){throw console.error("Error updating task fields:",r),r}}async updateTaskStatus(t,n,r={}){const s={status:n,...r};switch(n){case"accepted":s.accepted_at=new Date().toISOString();break;case"completed":s.completed_at=new Date().toISOString();break;case"admin_accepted":s.admin_accepted_at=new Date().toISOString();break;case"assigned":r.clearAccepted&&(s.accepted_at=null);break}return this.updateTaskFields(t,s)}async updateTaskTimes(t,{started_at:n,finished_at:r}){const s={};if(n!==void 0&&(s.started_at=n),r!==void 0&&(s.finished_at=r),n&&r&&new Date(r)<=new Date(n))throw new Error("Finish time must be after start time");return this.updateTaskFields(t,s)}async updateTaskAssignment(t,n,r=null){const s={assigned_to:n,assigned_at:n?new Date().toISOString():null};return r&&(s.assigned_by=r),this.updateTaskFields(t,s)}async queryTasks(t={}){var a;const{filterByUser:n=!1,pagination:r={pageIndex:0,pageSize:10},sorting:s=[{id:"scheduled_datetime",desc:!1}],globalFilter:i="",additionalFilters:o={}}=t;try{let l=this.supabase.from("tasks").select("*",{count:"exact"});if(n&&((a=this.user)!=null&&a.id)&&(l=l.eq("assigned_to",this.user.id)),Object.entries(o).forEach(([p,w])=>{w!=null&&(l=l.eq(p,w))}),i&&(l=l.or(`title.ilike.%${i}%,description.ilike.%${i}%,task_type.ilike.%${i}%,status.ilike.%${i}%`)),s.length>0){const p=s[0];p&&(l=l.order(p.id,{ascending:!p.desc}))}const u=r.pageIndex*r.pageSize,c=u+r.pageSize-1;l=l.range(u,c);const{data:f,error:h,count:g}=await l;if(h)throw h;return{tasks:f||[],totalCount:g||0}}catch(l){throw console.error("Error querying tasks:",l),l}}async createTask(t){try{this.validateTaskUpdate(t)}catch(n){throw new Error(`Invalid task data: ${n instanceof Error?n.message:String(n)}`)}try{const{data:n,error:r}=await this.supabase.from("tasks").insert([t]).select().single();if(r)throw r;return n}catch(n){throw console.error("Error creating task:",n),n}}async deleteTask(t){try{const{error:n}=await this.supabase.from("tasks").delete().eq("id",t);if(n)throw n;return{success:!0}}catch(n){throw console.error("Error deleting task:",n),n}}async getTasksCountByStatus(t=!1){var n;try{let r=this.supabase.from("tasks").select("status",{count:"exact"});t&&((n=this.user)!=null&&n.id)&&(r=r.eq("assigned_to",this.user.id));const{data:s,error:i}=await r;if(i)throw i;const o={};return ma.forEach(a=>{o[a]=0}),s==null||s.forEach(a=>{o.hasOwnProperty(a.status)&&ma.includes(a.status)&&o[a.status]++}),o}catch(r){throw console.error("Error getting task counts:",r),r}}async getOverdueTasks(t=!1){var n;try{let r=this.supabase.from("tasks").select("*").lt("scheduled_datetime",new Date().toISOString()).not("status","eq","completed").not("status","eq","admin_accepted").not("status","eq","cancelled");t&&((n=this.user)!=null&&n.id)&&(r=r.eq("assigned_to",this.user.id));const{data:s,error:i}=await r;if(i)throw i;return s||[]}catch(r){throw console.error("Error getting overdue tasks:",r),r}}async getUpcomingTasks(t=!1){var n;try{const r=new Date,s=new Date(r.getTime()+24*60*60*1e3);let i=this.supabase.from("tasks").select("*").gte("scheduled_datetime",r.toISOString()).lt("scheduled_datetime",s.toISOString()).not("status","eq","completed").not("status","eq","admin_accepted").not("status","eq","cancelled");t&&((n=this.user)!=null&&n.id)&&(i=i.eq("assigned_to",this.user.id));const{data:o,error:a}=await i;if(a)throw a;return o||[]}catch(r){throw console.error("Error getting upcoming tasks:",r),r}}async getTaskAuditTrail(t){try{const{data:n,error:r}=await this.supabase.from("audit_log").select("*").eq("table_name","tasks").eq("record_id",t).order("changed_at",{ascending:!1});if(r)throw r;if(!n||n.length===0)return[];const s=[...new Set(n.map(a=>a.changed_by).filter(Boolean))];let i={};if(s.length>0){const{data:a,error:l}=await this.supabase.from("user_profiles").select("id, name, email").in("id",s);l?console.warn("Error fetching user profiles:",l):i=(a||[]).reduce((u,c)=>(u[c.id]=c,u),{})}return n.map(a=>{var l,u;return{...a,changed_by_name:(l=i[a.changed_by])==null?void 0:l.name,changed_by_email:(u=i[a.changed_by])==null?void 0:u.email}})}catch(n){throw console.error("Error fetching task audit trail:",n),n}}}const ap=(e,t)=>new ex(e,t),lp=(e=!1)=>{const{supabase:t,user:n}=ge(),r=S.useMemo(()=>ap(t,n),[t,n]),[s,i]=S.useState([]),[o,a]=S.useState(!0),[l,u]=S.useState(null),[c,f]=S.useState(0),[h,g]=S.useState({pageIndex:0,pageSize:10}),[p,w]=S.useState([{id:"scheduled_datetime",desc:!1}]),[_,v]=S.useState(""),m=S.useCallback(async()=>{if(!(e&&!(n!=null&&n.id)))try{a(!0),u(null);const E=await r.queryTasks({filterByUser:e,pagination:h,sorting:p,globalFilter:_});i(E.tasks),f(E.totalCount)}catch(E){const j=E instanceof Error?E.message:String(E);u(j),console.error("Error fetching tasks:",E)}finally{a(!1)}},[r,e,h,p,_,n==null?void 0:n.id]);S.useEffect(()=>{m()},[m]);const y=S.useCallback(E=>{E.pagination&&g(E.pagination),E.sorting!==void 0&&w(E.sorting),E.globalFilter!==void 0&&v(E.globalFilter)},[]),k=S.useCallback(async(E,j)=>{try{await r.updateTaskStatus(E,j),await m()}catch(R){console.error("Error updating task status:",R);const N=R instanceof Error?R.message:String(R);throw u(N),R}},[r,m]),x=S.useCallback(async(E,j)=>{try{await r.updateTaskAssignment(E,j,n==null?void 0:n.id),await m()}catch(R){console.error("Error updating task assignment:",R);const N=R instanceof Error?R.message:String(R);throw u(N),R}},[r,m,n==null?void 0:n.id]),C=S.useCallback(async(E,j)=>{try{await r.updateTaskTimes(E,j),await m()}catch(R){console.error("Error updating task times:",R);const N=R instanceof Error?R.message:String(R);throw u(N),R}},[r,m]);return{tasks:s,loading:o,error:l,totalCount:c,pagination:h,sorting:p,globalFilter:_,handleServerSideChange:y,updateTaskStatus:k,updateTaskAssignment:x,updateTaskTimes:C,refetchTasks:m}},Yt=e=>e?new Date(e).toLocaleString():"N/A",tx=e=>e?new Date(e).toLocaleDateString():"N/A",nx=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"N/A",va=(e,t=8)=>e?`${e.substring(0,t)}...`:"N/A",rx=(e,t=100)=>e?e.length>t?`${e.substring(0,t)}...`:e:"N/A",sx=()=>{const{supabase:e}=ge(),[t,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null);S.useEffect(()=>{a()},[]);const a=async()=>{try{s(!0),o(null);const{data:l,error:u}=await e.from("roles").select("user_id").eq("role","cleaner").order("created_at");if(u)throw u;if(!l||l.length===0){n([]);return}const{data:c,error:f}=await e.from("user_profiles").select("id, name, email").in("id",l.map(g=>g.user_id));if(f)throw f;const h=(c==null?void 0:c.map(g=>({id:g.id,name:g.name||g.email||`User ${g.id.substring(0,8)}...`,email:g.email})))||[];n(h)}catch(l){console.error("Error fetching cleaners:",l),o(l.message),n([])}finally{s(!1)}};return{cleaners:t,loading:r,error:i,refetch:a}};function up({currentAssignedTo:e,taskId:t,onAssignmentChange:n,disabled:r=!1}){const{t:s}=ae(),{cleaners:i,loading:o}=sx(),[a,l]=S.useState(!1),u=async f=>{const h=f.target.value||null;if(h!==e){l(!0);try{await n(t,h)}catch(g){console.error("Assignment change failed:",g),f.target.value=e||""}finally{l(!1)}}},c=()=>{if(!e)return s("assignment.unassigned");const f=i.find(h=>h.id===e);return f?f.name:`${s("assignment.unknown")} (${e.substring(0,8)}...)`};return o?d.jsx("span",{className:"loading-text",children:s("assignment.loading")}):d.jsxs("select",{value:e||"",onChange:u,disabled:r||a,className:`assignment-dropdown ${a?"updating":""}`,title:`Currently assigned to: ${c()}`,children:[d.jsx("option",{value:"",children:s("assignment.unassigned")}),i.map(f=>d.jsx("option",{value:f.id,children:f.name},f.id))]})}const cp=()=>{const{t:e}=ae(),t=S.useMemo(()=>({id:{accessorKey:"id",header:e("columns.id"),cell:({getValue:a})=>{const l=a();return d.jsx("span",{className:"reservation-id",title:l,children:va(l)})},enableSorting:!1},title:{accessorKey:"title",header:e("columns.title"),cell:({getValue:a})=>a()||e("columns.na")},taskTitle:{accessorKey:"title",header:e("columns.task"),cell:({getValue:a})=>a()||e("columns.na")},taskType:{accessorKey:"task_type",header:e("columns.type"),cell:({getValue:a})=>nx(a())},status:{accessorKey:"status",header:e("columns.status"),cell:({getValue:a})=>{const l=a();return d.jsx("span",{className:`status-badge status-${l}`,children:e(`statuses.${l}`)})}},description:{accessorKey:"description",header:e("columns.description"),cell:({getValue:a})=>rx(a())},listingId:{accessorKey:"listing_id",header:e("columns.listing"),cell:({getValue:a})=>a()||e("columns.na")},reservationId:{accessorKey:"reservation_id",header:e("columns.reservation"),cell:({getValue:a})=>{const l=a();return l?d.jsx("span",{className:"reservation-id",title:l,children:va(l)}):e("columns.na")}},scheduledDateTime:{accessorKey:"scheduled_datetime",header:e("columns.scheduled"),cell:({getValue:a})=>Yt(a())},assignedTo:{accessorKey:"assigned_to",header:e("columns.assignedTo"),cell:({getValue:a})=>{const l=a();return l?d.jsx("span",{className:"reservation-id",title:l,children:va(l)}):e("statuses.unassigned")}},assignedAt:{accessorKey:"assigned_at",header:e("columns.assignedAt"),cell:({getValue:a})=>Yt(a())},acceptedAt:{accessorKey:"accepted_at",header:e("columns.acceptedAt"),cell:({getValue:a})=>Yt(a())},completedAt:{accessorKey:"completed_at",header:e("columns.completedAt"),cell:({getValue:a})=>Yt(a())},createdAt:{accessorKey:"created_at",header:e("columns.created"),cell:({getValue:a})=>tx(a())}}),[e]),n=S.useMemo(()=>a=>({accessorKey:"assigned_to",header:e("columns.assignedTo"),cell:({getValue:l,row:u})=>{const c=l(),f=u.original;return d.jsx(up,{currentAssignedTo:c,taskId:f.id,onAssignmentChange:a})},enableSorting:!1}),[e]),r=S.useMemo(()=>()=>({accessorKey:"actions",header:e("tasks.actions"),cell:({row:a})=>{const l=a.original,u=()=>{window.location.href=`/tasks/${l.id}`};return d.jsx("div",{className:"task-actions",children:d.jsx("button",{className:"btn-view",onClick:u,children:e("columns.view")})})},enableSorting:!1}),[e]),s=S.useMemo(()=>(a,l)=>({accessorKey:"actions",header:e("tasks.actions"),cell:({row:u})=>{const c=u.original,f=c.status==="assigned",h=c.status==="accepted",g=c.status==="in_progress",p=c.status==="accepted",w=()=>{window.location.href=`/tasks/${c.id}`},_=async()=>{l?await l(c.id,{started_at:new Date().toISOString()}):a(c.id,"in_progress")},v=async()=>{l?await l(c.id,{finished_at:new Date().toISOString()}):a(c.id,"completed")};return d.jsxs("div",{className:"task-actions",children:[d.jsx("button",{className:"btn-view",onClick:w,children:e("columns.view")}),f&&d.jsx("button",{className:"btn-accept",onClick:()=>a(c.id,"accepted"),children:e("columns.accept")}),h&&d.jsx("button",{className:"btn-start",onClick:_,children:e("columns.start")}),g&&d.jsx("button",{className:"btn-complete",onClick:v,children:e("columns.complete")}),p&&d.jsx("button",{className:"btn-cancel",onClick:()=>a(c.id,"assigned"),children:e("columns.cancel")})]})},enableSorting:!1}),[e]),i=S.useMemo(()=>a=>{const l=t;return[l.id,l.title,l.taskType,l.status,l.listingId,l.reservationId,l.scheduledDateTime,n(a),l.assignedAt,l.acceptedAt,l.completedAt,l.createdAt,r()]},[t,n,r]),o=S.useMemo(()=>(a,l)=>{const u=t;return[u.scheduledDateTime,u.listingId,u.taskType,u.status,s(a,l)]},[t,s]);return{getAdminColumns:i,getCleanerColumns:o}};function ix(){const{t:e}=ae(),{tasks:t,loading:n,error:r,totalCount:s,pagination:i,sorting:o,globalFilter:a,handleServerSideChange:l,updateTaskAssignment:u}=lp(!1),{getAdminColumns:c}=cp(),f=S.useMemo(()=>c(u),[c,u]);return d.jsxs("div",{className:"admin-reservations",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{className:"admin-title",children:e("tasks.management")}),d.jsx("p",{className:"admin-stats",children:n?e("tasks.loading"):e("tasks.totalTasks",{count:s})})]}),d.jsx(Is,{data:t,columns:f,loading:n,error:r,serverSide:!0,onServerSideChange:l,totalCount:s,pageSize:i.pageSize,pageIndex:i.pageIndex,sorting:o,globalFilter:a,className:"tasks-data-table"})]})}const ox=["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina","Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)","Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas","Jabon de manos recargable","Bolsas basura bao","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador","Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa","Fibrn Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas","Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequea","Funda Edredon Pequea","Manta playa","Felpudo bao","Mantel","Repasadores (toalla cocina)"],ax=(e,t=10)=>{if(!e||e.length<2)return[];const n=e.toLowerCase();return ox.filter(r=>r.toLowerCase().includes(n)).slice(0,t)},Wn={general:{name:"General",products:["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina"]},lavado_ropa:{name:"Lavado Ropa",products:["Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)"]},reposicion:{name:"Reposicin",products:["Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas"]},reposicion_bano:{name:"Reposicin Bao",products:["Jabon de manos recargable","Bolsas basura bao","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador"]},materiales_limpieza:{name:"Materiales Limpieza",products:["Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa"]},otros:{name:"Otros",products:["Fibrn Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas"]},sabanas:{name:"Sbanas",products:["Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequea","Funda Edredon Pequea","Manta playa","Felpudo bao","Mantel","Repasadores (toalla cocina)"]}};function dp({onTodoCreated:e,onCancel:t,attachedToType:n=null,attachedToId:r=null,title:s="Create New TODO"}){const{t:i}=ae(),{supabase:o,user:a}=ge(),[l,u]=S.useState({title:"",description:""}),[c,f]=S.useState(""),[h,g]=S.useState([]),[p,w]=S.useState([]),[_,v]=S.useState([]),[m,y]=S.useState(r||""),[k,x]=S.useState(!1),[C,E]=S.useState(!1),[j,R]=S.useState(null);S.useEffect(()=>{(async()=>{try{x(!0);const{data:V,error:P}=await o.from("listings").select("id, airbnb_payload").order("id");if(P)throw P;v(V||[])}catch(V){console.error("Error fetching listings:",V),R(i("todos.failedToLoad"))}finally{x(!1)}})()},[o]),S.useEffect(()=>{if(c.length>=2){const I=ax(c,8);g(I)}else g([])},[c]);const N=I=>{const{name:V,value:P}=I.target;u($=>({...$,[V]:P}))},M=I=>{y(I.target.value)},F=I=>{const V=p.find(P=>P.product_name===I);w(V?P=>P.map($=>$.product_name===I?{...$,quantity:$.quantity+1}:$):P=>[...P,{product_name:I,quantity:1}]),f(""),g([])},q=(I,V)=>{const P=parseInt(V);P<=0?ie(I):w($=>$.map(b=>b.product_name===I?{...b,quantity:P}:b))},ie=I=>{w(V=>V.filter(P=>P.product_name!==I))},wt=async I=>{if(I.preventDefault(),!!a){E(!0),R(null);try{const V={created_by:a.id,title:l.title,description:l.description||null,products:p.length>0?p:null,attached_to_type:m?"listing":n,attached_to_id:m||r},{error:P}=await o.from("todos").insert([V]);if(P)throw P;e==null||e()}catch(V){console.error("Error creating todo:",V),R(V instanceof Error?V.message:i("notes.errorOccurred"))}finally{E(!1)}}};return d.jsxs("div",{className:"todo-form",children:[d.jsxs("div",{className:"todo-form-header",children:[d.jsx("h3",{children:s}),d.jsx("button",{type:"button",onClick:t,className:"btn-close",children:""})]}),j&&d.jsx("div",{className:"error-message",children:j}),d.jsxs("form",{onSubmit:wt,className:"todo-form-content",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"title",children:i("todos.title")}),d.jsx("input",{type:"text",id:"title",name:"title",value:l.title,onChange:N,required:!0,placeholder:i("todos.titlePlaceholder"),className:"form-input"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"listing",children:i("todos.assignToListing")}),d.jsxs("select",{id:"listing",name:"listing",value:m,onChange:M,className:"form-select",disabled:k,children:[d.jsx("option",{value:"",children:i("todos.noListingAssignment")}),_.map(I=>{var V;return d.jsxs("option",{value:I.id,children:[I.id," -"," ",((V=I.airbnb_payload)==null?void 0:V.formattedAddress)||i("forms.noAddress")]},I.id)})]}),k&&d.jsx("small",{children:i("todos.loadingListings")})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"product_search",children:i("todos.products")}),d.jsxs("div",{className:"product-search-container",children:[d.jsx("input",{type:"text",id:"product_search",value:c,onChange:I=>f(I.target.value),placeholder:i("todos.searchProductsPlaceholder"),className:"form-input"}),h.length>0&&d.jsx("div",{className:"search-results",children:h.map((I,V)=>d.jsx("button",{type:"button",onClick:()=>F(I),className:"search-result-item",children:I},V))})]}),p.length>0&&d.jsxs("div",{className:"selected-products",children:[d.jsx("h4",{children:i("todos.selectedProducts")}),p.map((I,V)=>d.jsxs("div",{className:"selected-product",children:[d.jsx("span",{className:"product-name",children:I.product_name}),d.jsxs("div",{className:"product-controls",children:[d.jsx("input",{type:"number",min:"1",value:I.quantity,onChange:P=>q(I.product_name,P.target.value),className:"quantity-input"}),d.jsx("button",{type:"button",onClick:()=>ie(I.product_name),className:"btn-remove",children:i("todos.remove")})]})]},V))]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"description",children:i("todos.description")}),d.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:N,rows:3,placeholder:i("todos.detailsPlaceholder"),className:"form-textarea"})]}),d.jsxs("div",{className:"form-actions",children:[d.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:i("todos.cancel")}),d.jsx("button",{type:"submit",disabled:C,className:"btn-primary",children:C?i("todos.creating"):s})]})]})]})}function lx(){const{t:e}=ae(),{isAdmin:t,supabaseService:n}=ge(),[r,s]=S.useState([]),[i,o]=S.useState(!0),[a,l]=S.useState(null),[u,c]=S.useState(!1),[f,h]=S.useState("all"),g=async()=>{try{o(!0),l(null);let k=await n.fetchTodos()||[];f==="done"?k=k.filter(x=>x.done):f==="pending"&&(k=k.filter(x=>!x.done)),s(k)}catch(y){console.error("Error fetching todos:",y),l(y instanceof Error?y.message:String(y))}finally{o(!1)}};S.useEffect(()=>{g()},[f]);const p=()=>{c(!1),g()},w=async(y,k)=>{var x;try{const C=await n.getCurrentUser(),E=(x=C==null?void 0:C.user)==null?void 0:x.id;await n.updateTodoStatus(y,k,E),g()}catch(C){console.error("Error updating todo status:",C),l(C instanceof Error?C.message:String(C))}},_=async y=>{if(confirm(e("todos.deleteConfirm")))try{await n.deleteTodo(y),g()}catch(k){console.error("Error deleting todo:",k),l(k instanceof Error?k.message:String(k))}},v=y=>y?"#10b981":"#6b7280",m=[{accessorKey:"title",header:e("columns.title"),cell:({getValue:y})=>d.jsx("span",{className:"font-medium",children:y()})},{accessorKey:"done",header:e("columns.status"),cell:({getValue:y,row:k})=>{const x=y();return d.jsxs("label",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",checked:x,onChange:C=>w(k.original.id,C.target.checked),className:"rounded"}),d.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold text-white",style:{backgroundColor:v(x)},children:e(x?"todos.done":"todos.pending")})]})}},{accessorKey:"attached_to_type",header:e("todos.attachedTo"),cell:({getValue:y,row:k})=>{const x=y(),C=k.original.attached_to_id;return x?d.jsxs("span",{className:"text-sm",children:[x,": ",C]}):d.jsx("span",{className:"text-gray-500",children:e("todos.unattached")})}},{accessorKey:"created_at",header:e("columns.created"),cell:({getValue:y})=>d.jsx("span",{className:"text-sm",children:new Date(y()).toLocaleDateString()})},{id:"actions",header:e("columns.actions"),cell:({row:y})=>d.jsx("button",{onClick:()=>_(y.original.id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:e("todos.delete")})}];return t?d.jsxs("div",{className:"admin-todos",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{className:"admin-title",children:e("todos.allTodos")}),d.jsx("p",{className:"admin-stats",children:i?e("todos.loadingTodos"):e("todos.totalTodos",{count:r.length})})]}),d.jsxs("div",{className:"admin-controls",children:[d.jsxs("div",{className:"filter-controls",children:[d.jsx("label",{htmlFor:"status-filter",children:e("todos.filterByStatus")}),d.jsxs("select",{id:"status-filter",value:f,onChange:y=>h(y.target.value),className:"form-select",children:[d.jsx("option",{value:"all",children:e("todos.all")}),d.jsx("option",{value:"pending",children:e("todos.pending")}),d.jsx("option",{value:"done",children:e("todos.done")})]})]}),d.jsx("button",{onClick:()=>c(!0),className:"btn-primary",children:e("todos.createGeneral")})]}),a&&d.jsx("div",{className:"error-message",children:a}),u&&d.jsx("div",{className:"todo-form-overlay",children:d.jsx(dp,{title:e("todos.createGeneral"),onTodoCreated:p,onCancel:()=>c(!1)})}),d.jsx(Is,{data:r,columns:m,loading:i,error:a,enablePagination:!0,className:"todos-data-table"})]}):d.jsx("div",{className:"admin-todos",children:d.jsx("div",{className:"error-message",children:e("todos.adminAccessRequired")})})}function ux(){const{t:e}=ae(),[t,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState(null),{supabaseService:a}=ge();S.useEffect(()=>{(async()=>{try{s(!0),o(null);const c=await a.fetchListings();n(c||[])}catch(c){console.error("Error fetching listings:",c),o(c.message)}finally{s(!1)}})()},[a]);const l=S.useMemo(()=>[{accessorKey:"id",header:e("columns.id"),cell:({getValue:u})=>{const c=u();return d.jsx(nt,{to:`/listing/${c}`,className:"listing-id-link",children:c})}},{accessorKey:"airbnb_payload.formattedAddress",header:e("listings.address"),cell:({getValue:u})=>u()||e("columns.na")}],[e]);return d.jsxs("div",{className:"listings",children:[d.jsxs("div",{className:"listings-header",children:[d.jsx("h1",{className:"listings-title",children:e("listings.title")}),d.jsx("p",{className:"listings-stats",children:r?e("listings.loadingListings"):e("listings.totalListings",{count:t.length})})]}),d.jsx(Is,{data:t,columns:l,loading:r,error:i,enablePagination:!0,className:"listings-data-table"})]})}function cx(){const{user:e}=ge(),{t}=ae(),{tasks:n,loading:r,error:s,totalCount:i,pagination:o,sorting:a,globalFilter:l,handleServerSideChange:u,updateTaskStatus:c,updateTaskTimes:f}=lp(!0),{getCleanerColumns:h}=cp(),g=S.useMemo(()=>h(c,f),[h,c,f]);return e?d.jsxs("div",{className:"cleaner-tasks",children:[d.jsxs("div",{className:"cleaner-header",children:[d.jsx("h1",{className:"cleaner-title",children:t("tasks.myTasks")}),d.jsx("p",{className:"cleaner-stats",children:r?t("tasks.loading"):t("tasks.totalTasks",{count:i})})]}),d.jsx(Is,{data:n,columns:g,loading:r,error:s,serverSide:!0,onServerSideChange:u,totalCount:i,pageSize:o.pageSize,pageIndex:o.pageIndex,sorting:a,globalFilter:l,className:"cleaner-tasks-data-table"})]}):d.jsx("div",{className:"cleaner-tasks",children:d.jsx("div",{className:"error-message",children:t("tasks.loginRequired")})})}function dx({taskId:e,taskService:t}){const{t:n}=ae(),[r,s]=S.useState([]),[i,o]=S.useState(!0),[a,l]=S.useState(null);S.useEffect(()=>{e&&t&&(async()=>{try{o(!0);const w=await t.getTaskAuditTrail(e);s(w)}catch(w){const _=w instanceof Error?w.message:String(w);l(_)}finally{o(!1)}})()},[e,t]);const u=p=>{switch(p){case"INSERT":return"";case"UPDATE":return"";case"DELETE":return"";default:return""}},c=p=>{switch(p){case"INSERT":return"audit-insert";case"UPDATE":return"audit-update";case"DELETE":return"audit-delete";default:return"audit-default"}},f=(p,w,_)=>!_||_.length===0?null:_.map(v=>{const m=p==null?void 0:p[v],y=w==null?void 0:w[v];return{field:v,oldValue:m!==void 0?m:null,newValue:y!==void 0?y:null}}).filter(v=>v.oldValue!==v.newValue),h=p=>{if(p==null)return"null";if(typeof p=="string"&&p.includes("T"))try{return Yt(p)}catch{return p}return String(p)},g=p=>{var w;return p.changed_by?p.changed_by_name?p.changed_by_name:p.changed_by_email?((w=p.changed_by_email)==null?void 0:w.split("@")[0])||"":n("audit.unknownUser"):n("audit.system")};return i?d.jsxs("div",{className:"audit-trail-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:n("audit.loading")})]}):a?d.jsx("div",{className:"audit-trail-error",children:d.jsx("p",{className:"error-message",children:a})}):r.length===0?d.jsx("div",{className:"audit-trail-empty",children:d.jsx("p",{children:n("audit.noHistory")})}):d.jsx("div",{className:"audit-trail-list",children:r.map((p,w)=>{var _;return d.jsxs("div",{className:`audit-entry ${c(p.action_type||"UPDATE")}`,children:[d.jsxs("div",{className:"audit-entry-header",children:[d.jsx("div",{className:"audit-entry-icon",children:u(p.action_type||"UPDATE")}),d.jsxs("div",{className:"audit-entry-info",children:[d.jsxs("div",{className:"audit-entry-action",children:[d.jsx("span",{className:"action-type",children:p.action_type}),d.jsx("span",{className:"action-time",children:Yt(p.changed_at)})]}),d.jsxs("div",{className:"audit-entry-user",children:[n("audit.by")," ",g(p)]})]})]}),d.jsxs("div",{className:"audit-entry-content",children:[p.action_type==="UPDATE"&&p.old_values&&p.new_values&&d.jsxs("div",{className:"audit-entry-values",children:[d.jsxs("span",{className:"values-label",children:[n("audit.valuesChanged"),":"]}),d.jsx("div",{className:"values-list",children:(_=f(p.old_values,p.new_values,p.changed_fields))==null?void 0:_.map((v,m)=>d.jsxs("div",{className:"value-item",children:[d.jsxs("span",{className:"field-name",children:[v.field,":"]}),d.jsxs("span",{className:"value-change",children:[d.jsx("span",{className:"old-value",children:h(v.oldValue)}),d.jsx("span",{className:"arrow",children:""}),d.jsx("span",{className:"new-value",children:h(v.newValue)})]})]},m))})]}),p.context&&Object.keys(p.context).length>0&&d.jsxs("div",{className:"audit-entry-context",children:[d.jsxs("span",{className:"context-label",children:[n("audit.context"),":"]}),d.jsx("pre",{className:"context-data",children:JSON.stringify(p.context,null,2)})]})]}),w<r.length-1&&d.jsx("div",{className:"audit-entry-connector"})]},p.id)})})}function fp({attachedToType:e=null,attachedToId:t=null,title:n="TODOs",showCreateButton:r=!0,showAttachmentInfo:s=!1}){const{isAdmin:i,isCleaner:o,supabaseService:a}=ge(),[l,u]=S.useState([]),[c,f]=S.useState(!0),[h,g]=S.useState(null),[p,w]=S.useState(!1),_=async()=>{try{f(!0),g(null);const C=await a.fetchTodos({attachedToType:e,attachedToId:t,isDone:!1});u(C||[])}catch(C){console.error("Error fetching todos:",C);const E=C instanceof Error?C.message:String(C);g(E)}finally{f(!1)}};S.useEffect(()=>{_()},[e,t]);const v=()=>{w(!1),_()},m=async(C,E)=>{var j;try{const R=await a.getCurrentUser(),N=(j=R==null?void 0:R.user)==null?void 0:j.id;await a.updateTodoStatus(C,E,N),_()}catch(R){console.error("Error updating todo status:",R),g(R instanceof Error?R.message:String(R))}},y=async C=>{if(i&&confirm("Are you sure you want to delete this TODO?"))try{await a.deleteTodo(C),_()}catch(E){console.error("Error deleting todo:",E),g(E instanceof Error?E.message:String(E))}},k=C=>C?"status-completed":"status-pending",x=C=>C.attached_to_type?`${C.attached_to_type}: ${C.attached_to_id}`:"Unattached";return c?d.jsx("div",{className:"todo-list",children:d.jsx("div",{className:"loading",children:"Loading TODOs..."})}):d.jsxs("div",{className:"todo-list",children:[d.jsxs("div",{className:"todos-header",children:[d.jsx("h3",{children:n}),r&&(i||o)&&!p&&d.jsx("button",{onClick:()=>w(!0),className:"btn-primary btn-sm",children:"Add TODO"})]}),h&&d.jsx("div",{className:"error-message",children:h}),p&&d.jsx("div",{className:"todo-form-overlay",children:d.jsx(dp,{attachedToType:e,attachedToId:t,onTodoCreated:v,onCancel:()=>w(!1)})}),l.length===0?d.jsx("div",{className:"empty-state",children:d.jsx("p",{children:"No TODOs found."})}):d.jsx("div",{className:"todos-list",children:l.map(C=>d.jsxs("div",{className:`todo-item ${k(C.done)}`,children:[d.jsxs("div",{className:"todo-header",children:[d.jsxs("div",{className:"todo-title-row",children:[d.jsx("h4",{className:"todo-title",children:C.title}),d.jsx("div",{className:"todo-badges",children:d.jsx("span",{className:`status-badge ${k(C.done)}`,children:C.done?"Done":"Pending"})})]}),d.jsxs("div",{className:"todo-meta",children:[d.jsxs("span",{className:"todo-date",children:["Created: ",new Date(C.created_at).toLocaleDateString()]}),C.completed_at&&d.jsxs("span",{className:"todo-completed-date",children:["Completed:"," ",new Date(C.completed_at).toLocaleDateString()]}),s&&d.jsxs("span",{className:"todo-attachment",children:["Attached to: ",x(C)]})]})]}),C.description&&d.jsx("p",{className:"todo-description",children:C.description}),C.products&&C.products.length>0&&d.jsxs("div",{className:"todo-products",children:[d.jsx("h5",{children:"Products needed:"}),d.jsx("ul",{className:"products-list",children:C.products.map((E,j)=>d.jsxs("li",{className:"product-item",children:[d.jsx("span",{className:"product-name",children:E.product_name}),d.jsxs("span",{className:"product-quantity",children:["",E.quantity]})]},j))})]}),d.jsxs("div",{className:"todo-actions",children:[i&&d.jsxs("label",{className:"todo-checkbox",children:[d.jsx("input",{type:"checkbox",checked:C.done,onChange:E=>m(C.id,E.target.checked)}),"Mark as done"]}),i&&d.jsx("button",{onClick:()=>y(C.id),className:"btn-danger btn-sm",children:"Delete"})]})]},C.id))})]})}function fx({listingId:e,onTodoUpdated:t}){const{user:n,supabaseService:r}=ge(),[s,i]=S.useState(null),[o,a]=S.useState(!1),[l,u]=S.useState(null),c=S.useCallback(async()=>{try{a(!0),u(null);const p=await r.fetchTodos({attachedToType:"listing",attachedToId:e,titlePattern:"[AUTO]",isDone:!1}),w=(p==null?void 0:p[0])||null;i(w)}catch(p){console.error("Error fetching auto-generated todo:",p),u(p instanceof Error?p.message:String(p))}finally{a(!1)}},[e,r]);S.useEffect(()=>{c()},[c]);const f=S.useCallback(async p=>{if(!s)return;const w=await r.updateTodo(s.id,{products:p});i(w)},[s,r]),h=S.useCallback(async p=>{if(!(n!=null&&n.id))return;const w=await r.createTodo({created_by:n.id,title:`[AUTO] Product Replenishment ${new Date().toLocaleDateString()}`,description:"Auto-generated todo for product replenishment",products:p,attached_to_type:"listing",attached_to_id:e});i(w),t==null||t(w)},[n==null?void 0:n.id,r,e,t]),g=S.useCallback(async p=>{if(n!=null&&n.id)try{u(null),s?await f(p):p.length>0&&await h(p)}catch(w){const _=w instanceof Error?w.message:String(w);throw console.error("Error saving auto-generated todo:",_),u(_),w}},[n==null?void 0:n.id,s,f,h]);return{existingTodo:s,loading:o,error:l,saveAutoTodo:g,refetchAutoTodo:c}}function hx({existingTodo:e,onQuantitiesChange:t}){const[n,r]=S.useState({}),[s,i]=S.useState(new Set);S.useEffect(()=>{const c={};Object.values(Wn).forEach(f=>{f.products.forEach(h=>{c[h]=0})}),r(c)},[]),S.useEffect(()=>{e!=null&&e.products&&r(c=>{const f={...c};return e.products.forEach(h=>{f[h.product_name]=h.quantity}),f})},[e]);const o=S.useCallback(c=>Object.entries(c).filter(([,f])=>f>0).map(([f,h])=>({product_name:f,quantity:h})),[]),a=S.useCallback(async(c,f)=>{const h=o(c);try{await t(h)}catch(g){console.error("Error saving quantities:",g)}finally{f&&i(g=>{const p=new Set(g);return p.delete(f),p})}},[t,o]),l=S.useCallback(c=>{const f=window.scrollY;i(h=>new Set(h).add(c)),r(h=>{const g={...h,[c]:(h[c]||0)+1};return a(g,c),g}),setTimeout(()=>window.scrollTo(0,f),0)},[a]),u=S.useCallback(c=>{const f=window.scrollY;i(h=>new Set(h).add(c)),r(h=>{const g=Math.max(0,(h[c]||0)-1),p={...h,[c]:g};return a(p,c),p}),setTimeout(()=>window.scrollTo(0,f),0)},[a]);return{quantities:n,updatingProducts:s,incrementQuantity:l,decrementQuantity:u}}function gx({listingId:e,onTodoUpdated:t}){const{existingTodo:n,loading:r,error:s,saveAutoTodo:i}=fx({listingId:e,onTodoUpdated:t}),{quantities:o,updatingProducts:a,incrementQuantity:l,decrementQuantity:u}=hx({existingTodo:n,onQuantitiesChange:i}),[c,f]=S.useState(new Set(Object.keys(Wn))),h=S.useMemo(()=>{const _=[];return Object.entries(Wn).forEach(([v,m])=>{m.products.forEach(y=>{_.push({name:y,category:v})})}),_},[]),g=_=>{f(v=>{const m=new Set(v);return m.has(_)?m.delete(_):m.add(_),m})},p=S.useMemo(()=>h.filter(_=>c.has(_.category)),[h,c]),w=S.useMemo(()=>{const _={};return Object.keys(Wn).forEach(v=>{_[v]=[]}),p.forEach(v=>{const m=v.category;_[m]||(_[m]=[]),_[m].push(v)}),_},[p]);return r?d.jsx("div",{className:"todo-creation-helper",children:d.jsx("div",{className:"loading",children:"Loading products..."})}):d.jsxs("div",{className:"todo-creation-helper",children:[s&&d.jsx("div",{className:"error-message",children:s}),d.jsx("div",{className:"category-toggles",children:d.jsx("div",{className:"category-checkboxes",children:Object.entries(Wn).map(([_,v])=>d.jsxs("label",{className:"category-checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:c.has(_),onChange:()=>g(_),className:"category-checkbox"}),d.jsx("span",{className:"category-checkbox-text",children:v.name})]},_))})}),d.jsx("div",{className:"products-by-category",children:Object.entries(w).map(([_,v])=>d.jsxs("div",{className:"category-section",children:[d.jsx("h4",{className:"category-title",children:(()=>{const m=Wn[_];return m?m.name:_})()}),d.jsx("div",{className:"products-grid",children:v.map(m=>d.jsxs("div",{className:`product-block ${(o[m.name]||0)>0?"has-quantity":""} ${a.has(m.name)?"updating":""}`,children:[a.has(m.name)&&d.jsx("div",{className:"product-loading-overlay",children:d.jsx("div",{className:"spinner"})}),d.jsx("div",{className:"product-name",children:m.name}),d.jsxs("div",{className:"product-controls",children:[d.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),u(m.name)},className:"quantity-btn quantity-btn-minus",disabled:(o[m.name]||0)===0||a.has(m.name),children:"-"}),d.jsx("span",{className:"quantity-display",children:o[m.name]||0}),d.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),l(m.name)},className:"quantity-btn quantity-btn-plus",disabled:a.has(m.name),children:"+"})]})]},m.name))})]},_))}),n&&d.jsx("div",{className:"existing-todo-info",children:d.jsx("span",{className:"info-text",children:"Auto-generated todo exists for this listing"})})]})}function Ll({attachedToType:e=null,attachedToId:t=null,title:n="Notes",showAttachmentInfo:r=!1}){const{t:s}=ae(),{user:i,isAdmin:o,isCleaner:a,supabaseService:l}=ge(),[u,c]=S.useState([]),[f,h]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(""),[v,m]=S.useState(!1),y=S.useRef(null),k=S.useRef(null),x=async()=>{try{h(!0),p(null);const F=await l.fetchNotes({attachedToType:e,attachedToId:t});c(F||[])}catch(F){console.error("Error fetching notes:",F);const q=F instanceof Error?F.message:String(F);p(q)}finally{h(!1)}},C=()=>{var F;(F=y.current)==null||F.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{x()},[e,t]);const E=async F=>{if(!(!i||!F.trim())){m(!0),p(null);try{const q={content:F.trim(),attached_to_type:e,attached_to_id:t};await l.createNote(q),_(""),x(),setTimeout(()=>C(),100)}catch(q){console.error("Error creating note:",q),p(q instanceof Error?q.message:String(q))}finally{m(!1)}}},j=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),w.trim()&&!v&&E(w))},R=F=>{F.preventDefault(),w.trim()&&!v&&E(w)},N=async F=>{if(o&&confirm(s("notes.deleteConfirm")))try{await l.deleteNote(F),x()}catch(q){console.error("Error deleting note:",q),p(q instanceof Error?q.message:String(q))}},M=F=>F.attached_to_type?`${F.attached_to_type}: ${F.attached_to_id}`:s("todos.unattached");return f?d.jsx("div",{className:"note-list",children:d.jsx("div",{className:"loading",children:s("notes.loadingNotes")})}):d.jsxs("div",{className:"chat-container",children:[n&&d.jsx("div",{className:"chat-header",children:d.jsx("h3",{children:n})}),d.jsxs("div",{className:"chat-messages",children:[f&&d.jsx("div",{className:"chat-loading",children:s("notes.loadingNotes")}),!f&&u.length===0&&d.jsx("div",{className:"chat-empty",children:d.jsx("p",{children:s("notes.noNotesYet")})}),u.map(F=>d.jsxs("div",{className:"chat-message",children:[d.jsxs("div",{className:"message-header",children:[d.jsx("span",{className:"message-author",children:F.user_name||F.user_email||s("notes.unknownUser")}),d.jsx("span",{className:"message-time",children:new Date(F.created_at).toLocaleString()}),o&&d.jsx("button",{onClick:()=>N(F.id),className:"message-delete",title:s("notes.deleteNote"),children:""})]}),d.jsx("div",{className:"message-content",children:F.content}),r&&d.jsxs("div",{className:"message-attachment",children:[s("notes.attachedToLabel"),M(F)]})]},F.id)),d.jsx("div",{ref:y})]}),(o||a)&&d.jsxs("div",{className:"chat-input-container",children:[g&&d.jsx("div",{className:"chat-error",children:g}),d.jsxs("form",{onSubmit:R,className:"chat-input-form",children:[d.jsx("textarea",{ref:k,value:w,onChange:F=>_(F.target.value),onKeyPress:j,placeholder:s("notes.typePlaceholder"),className:"chat-input",rows:1,disabled:v}),d.jsx("button",{type:"submit",disabled:!w.trim()||v,className:"chat-send-btn",children:s(v?"notes.sending":"notes.send")})]})]})]})}function px(){const{id:e}=hg(),t=Tu(),{supabase:n,user:r,isAdmin:s}=ge(),{t:i}=ae(),o=S.useMemo(()=>ap(n,r),[n,r]),[a,l]=S.useState(null),[u,c]=S.useState(!0),[f,h]=S.useState(null),[g,p]=S.useState(null),[w,_]=S.useState(""),[v,m]=S.useState(!1),[y,k]=S.useState("chat"),[x,C]=S.useState(!0),[E,j]=S.useState(!0),[R,N]=S.useState(!0),M=S.useCallback(async()=>{try{if(!e)return;c(!0);const b=await o.getTask(e);l(b)}catch(b){h(b.message)}finally{c(!1)}},[o,e]);S.useEffect(()=>{r&&e&&M()},[M,r,e]);const F=()=>{t(-1)},q=b=>`status-badge status-${b}`,ie=S.useCallback(async(b,D)=>{if(a)try{if(c(!0),b==="started_at"||b==="finished_at"){const G={[b]:D};await o.updateTaskTimes(a.id,G)}else await o.updateTaskField(a.id,b,D);await M(),p(null)}catch(G){h(G.message)}finally{c(!1)}},[o,a==null?void 0:a.id,M]),wt=S.useCallback(async b=>{if(a)try{c(!0),await o.updateTaskStatus(a.id,b),await M()}catch(D){h(D.message)}finally{c(!1)}},[o,a==null?void 0:a.id,M]),I=S.useCallback(async(b,D)=>{try{c(!0),await o.updateTaskAssignment(b,D,r==null?void 0:r.id),await M()}catch(G){throw h(G.message),G}finally{c(!1)}},[o,r==null?void 0:r.id,M]),V=S.useCallback((b,D)=>{p(b),_(D||"")},[]),P=S.useCallback(()=>{p(null),_("")},[]),$=({field:b,value:D,type:G="text"})=>{if(!a)return null;const Be=g===b,Mt=!(b==="started_at"||b==="finished_at")||a.status!=="assigned"&&a.status!=="unassigned",St=a.status!=="admin_accepted"||s;return Be?d.jsxs("div",{className:"time-edit-container",children:[d.jsx("input",{type:G,value:w,onChange:An=>_(An.target.value),className:"time-input"}),d.jsx("button",{onClick:()=>ie(b,w),className:"btn-save",disabled:u,children:i("columns.save")}),d.jsx("button",{onClick:P,className:"btn-cancel",disabled:u,children:i("columns.cancel")})]}):d.jsxs("div",{className:"time-display-container",children:[d.jsx("span",{children:D?Yt(D):i("tasks.notSet")}),Mt&&St&&d.jsx("button",{onClick:()=>V(b,D?D.slice(0,16):""),className:"btn-edit",disabled:u,children:i("columns.edit")})]})};return u?d.jsx("div",{className:"task-detail",children:d.jsxs("div",{className:"task-detail-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:i("tasks.loadingDetails")})]})}):f?d.jsx("div",{className:"task-detail",children:d.jsxs("div",{className:"task-detail-error",children:[d.jsx("h2",{children:i("tasks.errorLoading")}),d.jsx("p",{children:f}),d.jsx("button",{onClick:F,className:"btn-primary",children:i("tasks.goBack")})]})}):a?d.jsxs("div",{className:"task-detail",children:[d.jsxs("div",{className:"task-detail-header",children:[d.jsxs("button",{onClick:F,className:"btn-back",children:[" ",i("tasks.back")]}),d.jsx("h1",{className:"task-detail-title",children:i("tasks.details")})]}),d.jsxs("div",{className:"task-detail-content",children:[d.jsxs("div",{className:"task-detail-section",children:[d.jsx("h2",{className:"section-title",children:i("tasks.information")}),d.jsxs("div",{className:"task-info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.titleLabel")}),d.jsx("span",{children:a.title||i("columns.na")})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.statusLabel")}),d.jsx("span",{className:q(a.status),children:a.status})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.scheduledLabel")}),d.jsx("span",{children:Yt(a.scheduled_datetime)})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.listingIdLabel")}),d.jsx("span",{children:a.listing_id||i("columns.na")})]}),s&&d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.assignedToLabel")}),d.jsx(up,{currentAssignedTo:a.assigned_to,taskId:a.id,onAssignmentChange:I,disabled:u})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.startedAtLabel")}),d.jsx($,{field:"started_at",value:a.started_at,type:"datetime-local"})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("label",{children:i("taskDetail.finishedAtLabel")}),d.jsx($,{field:"finished_at",value:a.finished_at,type:"datetime-local"})]})]})]}),d.jsx("div",{className:"task-detail-section",children:d.jsxs("div",{className:"section-header",children:[d.jsx("h2",{className:"section-title",children:i("tasks.actions")}),d.jsxs("div",{className:"section-actions",children:[a.status==="admin_accepted"&&d.jsxs("div",{className:"admin-accepted-notice",children:[d.jsx("span",{className:"status-badge status-admin_accepted",children:i("tasks.acceptedByAdmin")}),d.jsx("p",{children:i("tasks.noFurtherEdits")})]}),a.status==="assigned"&&d.jsx("button",{onClick:()=>wt("accepted"),className:"btn-start",disabled:u,children:i("tasks.acceptTask")}),a.status==="accepted"&&d.jsx("button",{onClick:()=>ie("started_at",new Date().toISOString()),className:"btn-start",disabled:u,children:i("tasks.startTask")}),a.status==="in_progress"&&!a.finished_at&&d.jsx("button",{onClick:()=>ie("finished_at",new Date().toISOString()),className:"btn-end",disabled:u,children:i("tasks.completeTask")}),s&&a.status==="completed"&&d.jsx("div",{className:"admin-review-actions",children:d.jsx("button",{onClick:()=>wt("admin_accepted"),className:"btn-accept",disabled:u,children:i("tasks.acceptCompletion")})})]})]})}),d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>N(!R),className:"section-toggle","aria-label":i(R?"collapse_section":"expand_section"),children:[d.jsx("span",{className:`expand-icon ${R?"expanded":""}`,children:""}),d.jsx("span",{className:"section-title",children:"Product Replenishment Helper"})]})}),R&&a.listing_id&&d.jsx(gx,{listingId:a.listing_id})]}),a.listing_id&&d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>j(!E),className:"section-toggle","aria-label":i(E?"collapse_section":"expand_section"),children:[d.jsx("span",{className:`expand-icon ${E?"expanded":""}`,children:""}),d.jsx("span",{className:"section-title",children:i("listings.listingTodos")})]})}),E&&d.jsx(fp,{attachedToType:"listing",attachedToId:a.listing_id,title:""})]}),d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>C(!x),className:"section-toggle","aria-label":i(x?"collapse_section":"expand_section"),children:[d.jsx("span",{className:`expand-icon ${x?"expanded":""}`,children:""}),d.jsx("span",{className:"section-title",children:i("listings.listingChat")})]})}),x&&d.jsxs("div",{className:"tabbed-container",children:[d.jsx("div",{className:"tab-header",children:d.jsxs("div",{className:"tab-nav",children:[d.jsx("button",{className:`tab-button ${y==="chat"?"active":""}`,onClick:()=>k("chat"),children:i("taskDetail.taskTab")}),d.jsx("button",{className:`tab-button ${y==="listing"?"active":""}`,onClick:()=>k("listing"),children:i("taskDetail.listingTab")})]})}),d.jsx("div",{className:"tab-content",children:y==="chat"?d.jsx(Ll,{attachedToType:"task",attachedToId:a.id,title:""}):a.listing_id&&d.jsx(Ll,{attachedToType:"listing",attachedToId:a.listing_id,title:""})})]})]}),s&&d.jsxs("div",{className:"task-detail-section",children:[d.jsx("div",{className:"section-header",children:d.jsxs("button",{onClick:()=>m(!v),className:"section-toggle","aria-label":i(v?"taskDetail.collapseAudit":"taskDetail.expandAudit"),children:[d.jsx("span",{className:`toggle-icon ${v?"expanded":"collapsed"}`,children:""}),d.jsx("h2",{className:"section-title",children:i("audit.history")})]})}),v&&d.jsx("div",{className:"audit-trail-container",children:d.jsx(dx,{taskId:a.id,taskService:o})})]})]})]}):d.jsx("div",{className:"task-detail",children:d.jsxs("div",{className:"task-detail-not-found",children:[d.jsx("h2",{children:i("tasks.notFound")}),d.jsx("p",{children:i("tasks.notFoundDescription")}),d.jsx("button",{onClick:F,className:"btn-primary",children:i("tasks.goBack")})]})})}function mx(){const{t:e}=ae(),{id:t}=hg(),{supabaseService:n}=ge(),[r,s]=S.useState(null),[i,o]=S.useState(!0),[a,l]=S.useState(null);if(S.useEffect(()=>{(async()=>{if(t)try{o(!0),l(null);const f=await n.fetchListing(t);s(f)}catch(f){console.error("Error fetching listing:",f),l(f instanceof Error?f.message:String(f))}finally{o(!1)}})()},[t,n]),i)return d.jsxs("div",{className:"listing-detail-loading",children:[d.jsx("div",{className:"loading-spinner","data-testid":"loading-spinner"}),e("listings.loadingDetails")]});if(a)return d.jsxs("div",{className:"error",children:[d.jsx("h3",{className:"error-title",children:e("listings.failedToLoad")}),d.jsx("p",{className:"error-message",children:a})]});if(!r)return d.jsxs("div",{className:"error",children:[d.jsx("h3",{className:"error-title",children:e("listings.notFound")}),d.jsxs("p",{className:"error-message",children:['The listing with ID "',t,'" was not found.']})]});const u=r.airbnb_payload||{};return d.jsxs("div",{className:"listing-detail",children:[d.jsxs("div",{className:"listing-detail-header",children:[d.jsx("h1",{className:"listing-detail-title",children:e("listings.details")}),d.jsxs("div",{className:"listing-detail-subtitle",children:["ID: ",r.id]})]}),d.jsxs("div",{className:"listing-detail-content",children:[d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:e("listings.basicInformation")}),d.jsxs("div",{className:"listing-detail-grid",children:[d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.listingId"),":"]}),d.jsx("span",{children:r.id})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.airbnbId"),":"]}),d.jsx("span",{children:r.airbnb_id})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.address"),":"]}),d.jsx("span",{children:u.formattedAddress||e("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.propertyType"),":"]}),d.jsx("span",{children:u.propertyType||e("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.roomType"),":"]}),d.jsx("span",{children:u.roomType||e("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.bedrooms"),":"]}),d.jsx("span",{children:u.bedrooms||e("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.bathrooms"),":"]}),d.jsx("span",{children:u.bathrooms||e("columns.na")})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.maxGuests"),":"]}),d.jsx("span",{children:u.maxGuests||e("columns.na")})]})]})]}),d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:e("listings.dates")}),d.jsxs("div",{className:"listing-detail-grid",children:[d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.created"),":"]}),d.jsx("span",{children:new Date(r.created_at).toLocaleString()})]}),d.jsxs("div",{className:"listing-detail-item",children:[d.jsxs("label",{children:[e("listings.updated"),":"]}),d.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]})]})]}),u.amenities&&u.amenities.length>0&&d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:e("listings.amenities")}),d.jsx("div",{className:"amenities-list",children:u.amenities.map((c,f)=>d.jsx("span",{className:"amenity-tag",children:c},f))})]}),d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:e("listings.listingTodos")}),d.jsx(fp,{attachedToType:"listing",attachedToId:r.id,title:""})]}),d.jsxs("div",{className:"listing-detail-section",children:[d.jsx("h2",{children:e("listings.listingChat")}),d.jsx(Ll,{attachedToType:"listing",attachedToId:r.id,title:""})]})]})]})}const vx=()=>{var u,c,f;const{t:e}=ae(),[t,n]=S.useState(null),[r,s]=S.useState(!0),[i,o]=S.useState(null),{user:a,getAccessToken:l}=ge();return S.useEffect(()=>{a&&(async()=>{try{s(!0),o(null);const g=await l();if(!g)throw new Error(e("auth.noAccessToken"));const p=qg(),w={Authorization:`Bearer ${g}`,"Content-Type":"application/json"},_=`${p}/functions/v1/health`,v=await fetch(_,{headers:w});if(!v.ok)throw v.status===401?new Error(e("auth.authenticationFailed")):new Error(`HTTP error! status: ${v.status}`);const m=await v.json();n(m)}catch(g){o(g instanceof Error?g.message:"An error occurred"),console.error("Health check error:",g)}finally{s(!1)}})()},[a,l]),r?d.jsxs("div",{className:"loading",children:[d.jsx("div",{className:"loading-spinner"}),e("healthCheck.loading")]}):i?d.jsxs("div",{className:"error",children:[d.jsx("h2",{className:"error-title",children:e("healthCheck.failed")}),d.jsx("p",{className:"error-message",children:i}),i.includes("Authentication failed")&&d.jsx("button",{onClick:()=>window.location.reload(),className:"google-signin-btn",style:{marginTop:"var(--space-4)"},children:e("healthCheck.reloadPage")})]}):d.jsxs("div",{className:"admin-reservations",children:[d.jsxs("div",{className:"admin-header",children:[d.jsx("h1",{className:"admin-title",children:e("healthCheck.title")}),d.jsx("p",{className:"admin-stats",children:e("healthCheck.monitoring")})]}),t&&d.jsxs("div",{style:{padding:"var(--space-6)"},children:[d.jsxs("div",{style:{display:"grid",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:e("system.overallStatus")}),d.jsx("span",{className:`status-badge status-${t.status==="ok"?"confirmed":"cancelled"}`,children:t.status==="ok"?e("healthCheck.healthy"):e("healthCheck.error")})]}),t.user&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:e("system.authenticatedUser")}),d.jsx("span",{style:{color:"var(--graphite-900)"},children:t.user.email})]}),((u=t.checks)==null?void 0:u.database)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:e("system.database")}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsx("span",{className:`status-badge status-${t.checks.database.status==="ok"?"confirmed":"cancelled"}`,children:t.checks.database.status==="ok"?e("healthCheck.connected"):e("healthCheck.error")}),t.checks.database.version&&d.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--graphite-500)",marginTop:"var(--space-1)"},children:[e("system.version"),t.checks.database.version]})]})]}),((c=t.checks)==null?void 0:c.supabase)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:e("system.supabaseApi")}),d.jsx("span",{className:`status-badge status-${t.checks.supabase.status==="ok"?"confirmed":"cancelled"}`,children:t.checks.supabase.status==="ok"?e("healthCheck.connected"):e("healthCheck.error")})]}),((f=t.checks)==null?void 0:f.environment)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[d.jsx("strong",{style:{color:"var(--graphite-700)"},children:e("system.environment")}),d.jsx("span",{className:`status-badge status-${t.checks.environment.status==="ok"?"confirmed":"cancelled"}`,children:t.checks.environment.status==="ok"?e("healthCheck.configured"):e("healthCheck.error")})]})]}),d.jsxs("div",{style:{textAlign:"center",color:"var(--graphite-500)",fontSize:"0.875rem",fontStyle:"italic",paddingTop:"var(--space-4)",borderTop:"1px solid var(--graphite-200)"},children:[e("system.lastChecked"),new Date(t.timestamp).toLocaleString()]})]})]})},yx=()=>{const{currentLanguage:e,changeLanguage:t}=ZS(),n=[{code:"en",name:"English",flag:""},{code:"es",name:"Espaol",flag:""}];return d.jsx("div",{className:"language-selector",children:d.jsx("select",{value:e,onChange:r=>t(r.target.value),className:"language-select",children:n.map(r=>d.jsxs("option",{value:r.code,children:[r.flag," ",r.name]},r.code))})})},_t=()=>{const e=hn(),{user:t,signOut:n,isAdmin:r,isCleaner:s}=ge(),{t:i}=ae(),o=async()=>{try{await n()}catch(a){console.error("Sign out error:",a)}};return d.jsx("nav",{className:"navigation",children:d.jsxs("div",{className:"nav-content",children:[d.jsx(nt,{to:"/",className:"nav-brand",children:i("navigation.brand")}),d.jsxs("div",{className:"nav-links",children:[d.jsx(nt,{to:"/",className:`nav-link ${e.pathname==="/"?"active":""}`,children:i("navigation.dashboard")}),r&&d.jsx(nt,{to:"/healthcheck",className:`nav-link ${e.pathname==="/healthcheck"?"active":""}`,children:i("navigation.healthCheck")}),r&&d.jsx(nt,{to:"/listings",className:`nav-link ${e.pathname==="/listings"?"active":""}`,children:i("navigation.listings")}),r&&d.jsxs(d.Fragment,{children:[d.jsx(nt,{to:"/admin",className:`nav-link ${e.pathname==="/admin"?"active":""}`,children:i("navigation.reservations")}),d.jsx(nt,{to:"/admin/tasks",className:`nav-link ${e.pathname==="/admin/tasks"?"active":""}`,children:i("navigation.tasks")}),d.jsx(nt,{to:"/admin/todos",className:`nav-link ${e.pathname==="/admin/todos"?"active":""}`,children:i("navigation.todos")})]}),s&&d.jsx(nt,{to:"/cleaner/tasks",className:`nav-link ${e.pathname==="/cleaner/tasks"?"active":""}`,children:i("navigation.myTasks")})]}),d.jsxs("div",{className:"nav-user",children:[d.jsx("span",{className:"user-email",children:t==null?void 0:t.email}),r&&d.jsx("span",{className:"admin-badge",children:i("navigation.adminBadge")}),s&&d.jsx("span",{className:"cleaner-badge",children:i("navigation.cleanerBadge")}),d.jsx(yx,{}),d.jsx("button",{onClick:o,className:"signout-btn",children:i("navigation.signOut")})]})]})})},wx=()=>{const{t:e}=ae(),[t,n]=S.useState(!0),[r,s]=S.useState(null),i=Tu(),{supabase:o}=ge();return S.useEffect(()=>{(async()=>{try{console.log("Handling auth callbackz..."),console.log("URL:",window.location.href);const l=new URLSearchParams(window.location.hash.substring(1));if(l.has("access_token")||l.has("error")){console.log("Auth parameters found in URL, processing...");const{data:c,error:f}=await o.auth.getSession();if(f){console.error("Auth callback error:",f),s(f.message),n(!1);return}c.session?(console.log("Auth successful, redirecting to home..."),i("/",{replace:!0})):(console.log("Session not ready, waiting..."),setTimeout(()=>{i("/",{replace:!0})},1e3))}else{console.log("No auth parameters, checking existing session...");const{data:c,error:f}=await o.auth.getSession();if(f){console.error("Auth callback error:",f),s(f.message),n(!1);return}c.session?(console.log("Existing session found, redirecting to home..."),i("/",{replace:!0})):(console.log("No session found, redirecting to login..."),i("/",{replace:!0}))}}catch(l){console.error("Unexpected error in auth callback:",l),s(e("auth.unexpectedError")),n(!1)}})()},[o,i,e]),t?d.jsx("div",{className:"container",children:d.jsx("div",{className:"card",children:d.jsxs("div",{className:"loading",children:[d.jsx("h2",{children:e("auth.authenticating")}),d.jsx("p",{children:e("auth.pleaseWait")})]})})}):r?d.jsx("div",{className:"container",children:d.jsx("div",{className:"card",children:d.jsxs("div",{className:"error",children:[d.jsx("h2",{children:e("auth.authenticationError")}),d.jsx("p",{children:r}),d.jsx("button",{onClick:()=>i("/",{replace:!0}),children:e("auth.returnToLogin")})]})})}):null},Sx=()=>{const{t:e}=ae();return d.jsxs("div",{className:"content-container",children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h1",{className:"page-title",children:e("dashboard.title")}),d.jsx("p",{className:"page-subtitle",children:e("dashboard.welcome")})]}),d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-state-icon",children:""}),d.jsx("h2",{className:"empty-state-title",children:e("dashboard.comingSoon")}),d.jsx("p",{className:"empty-state-description",children:e("dashboard.comingSoonDescription")})]})]})},U=e=>typeof e=="string",Mr=()=>{let e,t;const n=new Promise((r,s)=>{e=r,t=s});return n.resolve=e,n.reject=t,n},Rd=e=>e==null?"":""+e,_x=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},xx=/###/g,Pd=e=>e&&e.indexOf("###")>-1?e.replace(xx,"."):e,Td=e=>!e||U(e),rs=(e,t,n)=>{const r=U(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(Td(e))return{};const i=Pd(r[s]);!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++s}return Td(e)?{}:{obj:e,k:Pd(r[s])}},Nd=(e,t,n)=>{const{obj:r,k:s}=rs(e,t,Object);if(r!==void 0||t.length===1){r[s]=n;return}let i=t[t.length-1],o=t.slice(0,t.length-1),a=rs(e,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=rs(e,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},kx=(e,t,n,r)=>{const{obj:s,k:i}=rs(e,t,Object);s[i]=s[i]||[],s[i].push(n)},Qi=(e,t)=>{const{obj:n,k:r}=rs(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Cx=(e,t,n)=>{const r=Qi(e,n);return r!==void 0?r:Qi(t,n)},hp=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?U(e[r])||e[r]instanceof String||U(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):hp(e[r],t[r],n):e[r]=t[r]);return e},Bn=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ex={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jx=e=>U(e)?e.replace(/[&<>"'\/]/g,t=>Ex[t]):e;class Rx{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Px=[" ",",","?","!",";"],Tx=new Rx(20),Nx=(e,t,n)=>{t=t||"",n=n||"";const r=Px.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=Tx.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(e);if(!i){const o=e.indexOf(n);o>0&&!s.test(e.substring(0,o))&&(i=!0)}return i},$l=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let s=e;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=i;l<r.length;++l)if(l!==i&&(a+=n),a+=r[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=o}return s},ks=e=>e==null?void 0:e.replace("_","-"),bx={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;(r=(n=console==null?void 0:console[e])==null?void 0:n.apply)==null||r.call(n,console,t)}};class Ji{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||bx,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,s){return s&&!this.debug?null:(U(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Ji(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Ji(this.logger,t)}}var ht=new Ji;class Eo{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s.apply(s,[t,...n])})}}class bd extends Eo{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r,s={}){var u,c;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):U(r)&&i?a.push(...r.split(i)):a.push(r)));const l=Qi(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!U(r)?l:$l((c=(u=this.data)==null?void 0:u[t])==null?void 0:c[n],r,i)}addResource(t,n,r,s,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(a=t.split("."),s=n,n=a[1]),this.addNamespaces(n),Nd(this.data,a,s),i.silent||this.emit("added",t,n,r,s)}addResources(t,n,r,s={silent:!1}){for(const i in r)(U(r[i])||Array.isArray(r[i]))&&this.addResource(t,n,i,r[i],{silent:!0});s.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,s,i,o={silent:!1,skipCopy:!1}){let a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let l=Qi(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?hp(l,r,i):l={...l,...r},Nd(this.data,a,l),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var gp={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(i=>{var o;t=((o=this.processors[i])==null?void 0:o.process(t,n,r,s))??t}),t}};const Ld={},$d=e=>!U(e)&&typeof e!="boolean"&&typeof e!="number";class Yi extends Eo{constructor(t,n={}){super(),_x(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ht.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const r={...n};if(t==null)return!1;const s=this.resolve(t,r);return(s==null?void 0:s.res)!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Nx(t,r,s);if(o&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:U(i)?[i]:i};const u=t.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),t=u.join(s)}return{key:t,namespaces:U(i)?[i]:i}}translate(t,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(s={...s}),s||(s={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(t[t.length-1],s),u=l[l.length-1];let c=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const f=s.lng||this.language,h=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode")return h?i?{res:`${u}${c}${a}`,usedKey:a,exactUsedKey:a,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${c}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:f,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:a;const g=this.resolve(t,s);let p=g==null?void 0:g.res;const w=(g==null?void 0:g.usedKey)||a,_=(g==null?void 0:g.exactUsedKey)||a,v=["[object Number]","[object Function]","[object RegExp]"],m=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,k=s.count!==void 0&&!U(s.count),x=Yi.hasDefaultValue(s),C=k?this.pluralResolver.getSuffix(f,s.count,s):"",E=s.ordinal&&k?this.pluralResolver.getSuffix(f,s.count,{ordinal:!1}):"",j=k&&!s.ordinal&&s.count===0,R=j&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${C}`]||s[`defaultValue${E}`]||s.defaultValue;let N=p;y&&!p&&x&&(N=R);const M=$d(N),F=Object.prototype.toString.apply(N);if(y&&N&&M&&v.indexOf(F)<0&&!(U(m)&&Array.isArray(N))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,N,{...s,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(g.res=q,g.usedParams=this.getUsedParamsDetails(s),g):q}if(o){const q=Array.isArray(N),ie=q?[]:{},wt=q?_:w;for(const I in N)if(Object.prototype.hasOwnProperty.call(N,I)){const V=`${wt}${o}${I}`;x&&!p?ie[I]=this.translate(V,{...s,defaultValue:$d(R)?R[I]:void 0,joinArrays:!1,ns:l}):ie[I]=this.translate(V,{...s,joinArrays:!1,ns:l}),ie[I]===V&&(ie[I]=N[I])}p=ie}}else if(y&&U(m)&&Array.isArray(p))p=p.join(m),p&&(p=this.extendTranslation(p,t,s,r));else{let q=!1,ie=!1;!this.isValidLookup(p)&&x&&(q=!0,p=R),this.isValidLookup(p)||(ie=!0,p=a);const I=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ie?void 0:p,V=x&&R!==p&&this.options.updateMissing;if(ie||q||V){if(this.logger.log(V?"updateKey":"missingKey",f,u,a,V?R:p),o){const D=this.resolve(a,{...s,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let P=[];const $=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$&&$[0])for(let D=0;D<$.length;D++)P.push($[D]);else this.options.saveMissingTo==="all"?P=this.languageUtils.toResolveHierarchy(s.lng||this.language):P.push(s.lng||this.language);const b=(D,G,Be)=>{var Mt;const Ye=x&&Be!==p?Be:I;this.options.missingKeyHandler?this.options.missingKeyHandler(D,u,G,Ye,V,s):(Mt=this.backendConnector)!=null&&Mt.saveMissing&&this.backendConnector.saveMissing(D,u,G,Ye,V,s),this.emit("missingKey",D,u,G,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?P.forEach(D=>{const G=this.pluralResolver.getSuffixes(D,s);j&&s[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(Be=>{b([D],a+Be,s[`defaultValue${Be}`]||R)})}):b(P,a,R))}p=this.extendTranslation(p,t,s,g,r),ie&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${u}${c}${a}`),(ie||q)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${c}${a}`:a,q?p:void 0,s))}return i?(g.res=p,g.usedParams=this.getUsedParamsDetails(s),g):p}extendTranslation(t,n,r,s,i){var l,u;if((l=this.i18nFormat)!=null&&l.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=U(t)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(c){const g=t.match(this.interpolator.nestingRegexp);f=g&&g.length}let h=r.replace&&!U(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,r.lng||this.language||s.usedLng,r),c){const g=t.match(this.interpolator.nestingRegexp),p=g&&g.length;f<p&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(...g)=>(i==null?void 0:i[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=U(o)?[o]:o;return t!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(t=gp.handle(a,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,n={}){let r,s,i,o,a;return U(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;s=c;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=n.count!==void 0&&!U(n.count),g=h&&!n.ordinal&&n.count===0,p=n.context!==void 0&&(U(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(_=>{var v,m;this.isValidLookup(r)||(a=_,!Ld[`${w[0]}-${_}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((m=this.utils)!=null&&m.hasLoadedNamespace(a))&&(Ld[`${w[0]}-${_}`]=!0,this.logger.warn(`key "${s}" for languages "${w.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(y=>{var C;if(this.isValidLookup(r))return;o=y;const k=[c];if((C=this.i18nFormat)!=null&&C.addLookupKeys)this.i18nFormat.addLookupKeys(k,c,y,_,n);else{let E;h&&(E=this.pluralResolver.getSuffix(y,n.count,n));const j=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(n.ordinal&&E.indexOf(R)===0&&k.push(c+E.replace(R,this.options.pluralSeparator)),k.push(c+E),g&&k.push(c+j)),p){const N=`${c}${this.options.contextSeparator||"_"}${n.context}`;k.push(N),h&&(n.ordinal&&E.indexOf(R)===0&&k.push(N+E.replace(R,this.options.pluralSeparator)),k.push(N+E),g&&k.push(N+j))}}let x;for(;x=k.pop();)this.isValidLookup(r)||(i=x,r=this.getResource(y,_,x,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(t,n,r,s):this.resourceStore.getResource(t,n,r,s)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!U(t.replace);let s=r?t.replace:t;if(r&&typeof t.count<"u"&&(s.count=t.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Od{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ht.create("languageUtils")}getScriptPartFromCode(t){if(t=ks(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=ks(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(U(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),U(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return U(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):U(t)&&i(this.formatLanguageCode(t)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const Ad={zero:0,one:1,two:2,few:3,many:4,other:5},Id={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Lx{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=ht.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const r=ks(t==="dev"?"en":t),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Id;if(!t.match(/-|_/))return Id;const l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,n)}return this.pluralRulesCache[i]=o,o}needsPlural(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,n,r={}){return this.getSuffixes(t,r).map(s=>`${n}${s}`)}getSuffixes(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>Ad[s]-Ad[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(t,n,r={}){const s=this.getRule(t,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const Dd=(e,t,n,r=".",s=!0)=>{let i=Cx(e,t,n);return!i&&s&&U(n)&&(i=$l(e,n,r),i===void 0&&(i=$l(t,n,r))),i},ya=e=>e.replace(/\$/g,"$$$$");class $x{constructor(t={}){var n;this.logger=ht.create("interpolator"),this.options=t,this.format=((n=t==null?void 0:t.interpolation)==null?void 0:n.format)||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:f,nestingPrefix:h,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:w,nestingOptionsSeparator:_,maxReplaces:v,alwaysFormat:m}=t.interpolation;this.escape=n!==void 0?n:jx,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Bn(i):o||"{{",this.suffix=a?Bn(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?Bn(h):g||Bn("$t("),this.nestingSuffix=p?Bn(p):w||Bn(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=v||1e3,this.alwaysFormat=m!==void 0?m:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,r,s){var g;let i,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const m=Dd(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(m,void 0,r,{...s,...n,interpolationkey:p}):m}const w=p.split(this.formatSeparator),_=w.shift().trim(),v=w.join(this.formatSeparator).trim();return this.format(Dd(n,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...s,...n,interpolationkey:_})};this.resetRegExp();const c=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((g=s==null?void 0:s.interpolation)==null?void 0:g.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>ya(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?ya(this.escape(p)):ya(p)}].forEach(p=>{for(a=0;i=p.regex.exec(t);){const w=i[1].trim();if(o=u(w),o===void 0)if(typeof c=="function"){const v=c(t,i,s);o=U(v)?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,w))o="";else if(f){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${t}`),o="";else!U(o)&&!this.useRawValueToEscape&&(o=Rd(o));const _=p.safeValue(o);if(t=t.replace(i[0],_),f?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n,r={}){let s,i,o;const a=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const f=l.split(new RegExp(`${c}[ ]*{`));let h=`{${f[1]}`;l=f[0],h=this.interpolate(h,o);const g=h.match(/'/g),p=h.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${c}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(t);){let l=[];o={...r},o=o.replace&&!U(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(l=s[1].slice(u).split(this.formatSeparator).map(c=>c.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===t&&!U(i))return i;U(i)||(i=Rd(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${t}`),i=""),l.length&&(i=l.reduce((c,f)=>this.format(c,f,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),t=t.replace(s[0],i),this.regexp.lastIndex=0}return t}}const Ox=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);t==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):t==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},Fd=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=t[o];return a||(a=e(ks(r),s),t[o]=a),a(n)}},Ax=e=>(t,n,r)=>e(ks(n),r)(t);class Ix{constructor(t={}){this.logger=ht.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?Fd:Ax;this.formats={number:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i});return a=>o.format(a)}),currency:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i,style:"currency"});return a=>o.format(a)}),datetime:r((s,i)=>{const o=new Intl.DateTimeFormat(s,{...i});return a=>o.format(a)}),relativetime:r((s,i)=>{const o=new Intl.RelativeTimeFormat(s,{...i});return a=>o.format(a,i.range||"day")}),list:r((s,i)=>{const o=new Intl.ListFormat(s,{...i});return a=>o.format(a)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Fd(n)}format(t,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,l)=>{var f;const{formatName:u,formatOptions:c}=Ox(l);if(this.formats[u]){let h=a;try{const g=((f=s==null?void 0:s.formatParams)==null?void 0:f[s.interpolationkey])||{},p=g.locale||g.lng||s.locale||s.lng||r;h=this.formats[u](a,p,{...c,...s,...g})}catch(g){this.logger.warn(g)}return h}else this.logger.warn(`there was no format function for ${u}`);return a},t)}}const Dx=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Fx extends Eo{constructor(t,n,r,s={}){var i,o;super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=ht.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,s.backend,s)}queueLoad(t,n,r,s){const i={},o={},a={},l={};return t.forEach(u=>{let c=!0;n.forEach(f=>{const h=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,c=!1,o[h]===void 0&&(o[h]=!0),i[h]===void 0&&(i[h]=!0),l[f]===void 0&&(l[f]=!0)))}),c||(a[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const s=t.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{kx(l.loaded,[i],o),Dx(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const c=l.loaded[u];c.length&&c.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r,s=0,i=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&c&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,s+1,i*2,o)},i);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(c=>a(null,c)).catch(a):a(null,u)}catch(u){a(u)}return}return l(t,n,a)}prepareLoading(t,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();U(t)&&(t=this.languageUtils.toResolveHierarchy(t)),U(n)&&(n=[n]);const i=this.queueLoad(t,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t,n=""){const r=t.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(t,o,a)})}saveMissing(t,n,r,s,i,o={},a=()=>{}){var l,u,c,f,h;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((f=(c=this.services)==null?void 0:c.utils)!=null&&f.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((h=this.backend)!=null&&h.create){const g={...o,isUpdate:i},p=this.backend.create.bind(this.backend);if(p.length<6)try{let w;p.length===5?w=p(t,n,r,s,g):w=p(t,n,r,s),w&&typeof w.then=="function"?w.then(_=>a(null,_)).catch(a):a(null,w)}catch(w){a(w)}else p(t,n,r,s,a,g)}!t||!t[0]||this.store.addResource(t[0],n,r,s)}}}const Md=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),U(e[1])&&(t.defaultValue=e[1]),U(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Ud=e=>{var t,n;return U(e.ns)&&(e.ns=[e.ns]),U(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),U(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((n=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},ai=()=>{},Mx=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Cs extends Eo{constructor(t={},n){if(super(),this.options=Ud(t),this.services={},this.logger=ht,this.modules={external:[]},Mx(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(U(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=Md();this.options={...r,...this.options,...Ud(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?ht.init(s(this.modules.logger),this.options):ht.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Ix;const c=new Od(this.options);this.store=new bd(this.options.resources,this.options);const f=this.services;f.logger=ht,f.resourceStore=this.store,f.languageUtils=c,f.pluralResolver=new Lx(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=s(u),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new $x(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Fx(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Yi(this.services,this.options),this.translator.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ai),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...c)=>this.store[u](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...c)=>(this.store[u](...c),this)});const a=Mr(),l=()=>{const u=(c,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(f),n(c,f)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(t,n=ai){var i,o;let r=n;const s=U(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&a.indexOf(f)<0&&a.push(f)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,u=>l(u)),this.services.backendConnector.load(a,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(t,n,r){const s=Mr();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=ai),this.services.backendConnector.reload(t,n,i=>{s.resolve(),r(i)}),s}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&gp.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const r=Mr();this.emit("languageChanging",t);const s=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,l)=>{l?this.isLanguageChangingTo===t&&(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(a,(...u)=>this.t(...u))},o=a=>{var c,f;!t&&!a&&this.services.languageDetector&&(a=[]);const l=U(a)?a:a&&a[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(U(a)?[a]:a);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(f=(c=this.services.languageDetector)==null?void 0:c.cacheUserLanguage)==null||f.call(c,u)),this.loadResources(u,h=>{i(h,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,n,r){const s=(i,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([i,o].concat(a)):l={...o},l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const u=this.options.keySeparator||".";let c;return l.keyPrefix&&Array.isArray(i)?c=i.map(f=>`${l.keyPrefix}${u}${f}`):c=l.keyPrefix?`${l.keyPrefix}${u}${i}`:i,this.t(c,l)};return U(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(...t){var n;return(n=this.translator)==null?void 0:n.translate(...t)}exists(...t){var n;return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))}loadNamespaces(t,n){const r=Mr();return this.options.ns?(U(t)&&(t=[t]),t.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Mr();U(t)&&(t=[t]);const s=this.options.preload||[],i=t.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){var s,i;if(t||(t=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new Od(Md());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){return new Cs(t,n)}cloneInstance(t={},n=ai){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const s={...this.options,...t,isClone:!0},i=new Cs(s);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((c,f)=>(c[f]={...l[u][f]},c),l[u]),l),{});i.store=new bd(a,s),i.services.resourceStore=i.store}return i.translator=new Yi(i.services,s),i.translator.on("*",(a,...l)=>{i.emit(a,...l)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ce=Cs.createInstance();Ce.createInstance=Cs.createInstance;Ce.createInstance;Ce.dir;Ce.init;Ce.loadResources;Ce.reloadResources;Ce.use;Ce.changeLanguage;Ce.getFixedT;Ce.t;Ce.exists;Ce.setDefaultNamespace;Ce.hasLoadedNamespace;Ce.loadNamespaces;Ce.loadLanguages;const{slice:Ux,forEach:zx}=[];function Vx(e){return zx.call(Ux.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function Bx(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const zd=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Hx=function(e,t){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(t);let i=`${e}=${s}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!zd.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!zd.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},Vd={create(e,t,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=Hx(e,t,s)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var Gx={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return Vd.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=t;n&&typeof document<"u"&&Vd.create(n,e,r,s,i)}},qx={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===t&&(n=o[a].substring(l+1))}}return n}},Kx={name:"hash",lookup(e){var s;let{lookupHash:t,lookupFromHashIndex:n}=e,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const o=i.substring(1);if(t){const a=o.split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===t&&(r=a[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const a=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(s=a[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let Hn=null;const Bd=()=>{if(Hn!==null)return Hn;try{if(Hn=typeof window<"u"&&window.localStorage!==null,!Hn)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Hn=!1}return Hn};var Wx={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Bd())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Bd()&&window.localStorage.setItem(n,e)}};let Gn=null;const Hd=()=>{if(Gn!==null)return Gn;try{if(Gn=typeof window<"u"&&window.sessionStorage!==null,!Gn)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Gn=!1}return Gn};var Qx={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Hd())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&Hd()&&window.sessionStorage.setItem(n,e)}},Jx={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let i=0;i<n.length;i++)t.push(n[i]);r&&t.push(r),s&&t.push(s)}return t.length>0?t:void 0}},Yx={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Xx={name:"path",lookup(e){var s;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof t=="number"?t:0])==null?void 0:s.replace("/",""):void 0}},Zx={name:"subdomain",lookup(e){var s,i;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let pp=!1;try{document.cookie,pp=!0}catch{}const mp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];pp||mp.splice(1,1);const ek=()=>({order:mp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class vp{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=Vx(n,this.options||{},ek()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Gx),this.addDetector(qx),this.addDetector(Wx),this.addDetector(Qx),this.addDetector(Jx),this.addDetector(Yx),this.addDetector(Xx),this.addDetector(Zx),this.addDetector(Kx)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!Bx(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}vp.type="languageDetector";const tk={brand:"Sonsoles Stays",dashboard:"Dashboard",healthCheck:"Health Check",listings:"Listings",reservations:"Reservations",tasks:"Tasks",todos:"TODOs",myTasks:"My Tasks",adminBadge:"Admin",cleanerBadge:"Cleaner",signOut:"Sign Out"},nk={welcome:"Welcome to Sonsoles Stays!",signInDescription:"Please sign in to access your stay management system.",signingIn:"Signing in...",signInWithGoogle:"Sign in with Google",authenticating:" Authenticating...",pleaseWait:"Please wait while we complete your sign-in.",authenticationError:" Authentication Error",returnToLogin:"Return to Login",unexpectedError:"An unexpected error occurred during authentication.",noAccessToken:"No access token available",authenticationFailed:"Authentication failed. Please sign in again."},rk={title:"Dashboard",welcome:"Welcome to your stay management system",comingSoon:"Dashboard Coming Soon",comingSoonDescription:"Your main dashboard will be available here."},sk={management:"Task Management",myTasks:"My Tasks",totalTasks:"Total Tasks: {{count}}",loading:"Loading...",loginRequired:"Please log in to view your tasks.",details:"Task Details",information:"Task Information",actions:"Actions",acceptTask:"Accept Task",startTask:"Start Task",completeTask:"Complete Task",acceptCompletion:"Accept Completion",acceptedByAdmin:"Accepted by Admin",noFurtherEdits:"No further edits allowed",loadingDetails:"Loading task details...",errorLoading:"Error Loading Task",goBack:"Go Back",notFound:"Task Not Found",notFoundDescription:"The requested task could not be found.",back:"Back",notSet:"Not set"},ik={searchPlaceholder:"Search all columns...",showingEntries:"Showing {{start}} to {{end}} of {{total}} entries",showingCount:"Showing {{count}} of {{total}} entries",noData:"No Data Found",noResults:"No results match your search criteria.",noDataAvailable:"No data available.",pageInfo:"Page {{current}} of {{total}}",showSize:"Show {{size}}",loadingData:"Loading data...",failedToLoad:"Failed to Load Data"},ok={id:"ID",title:"Title",task:"Task",type:"Type",status:"Status",description:"Description",listing:"Listing",reservation:"Reservation",scheduled:"Scheduled",assignedTo:"Assigned To",assignedAt:"Assigned At",acceptedAt:"Accepted At",completedAt:"Completed At",created:"Created",na:"N/A",view:"View",accept:"Accept",start:"Start",complete:"Complete",cancel:"Cancel",edit:"Edit",save:"Save"},ak={unassigned:"Unassigned",assigned:"Assigned",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",admin_accepted:"Admin Accepted"},lk={guest:"Guest",property:"Property",checkIn:"Check-in",checkOut:"Check-out",nights:"Nights",guests:"Guests",total:"Total",hostPayout:"Host Payout"},uk={checkingAccess:"Checking admin access...",authenticationRequired:"Authentication Required",signInToAccess:"Please sign in to access this page.",adminAccessRequired:"Admin Access Required",noAdminPrivileges:"You do not have admin privileges to access this page."},ck={unassigned:"Unassigned",loading:"Loading...",unknown:"Unknown"},dk={loading:"Loading..."},fk={history:"Audit History",entries:"entries",loading:"Loading audit history...",noHistory:"No audit history available for this task.",by:"by",noDescription:"No description available",fieldsChanged:"Fields changed",valuesChanged:"Values changed",context:"Context",system:"System",unknownUser:"Unknown User"},hk={title:"System Health Check",monitoring:"Monitoring system status and connectivity",failed:"Health Check Failed",loading:"Loading health status...",reloadPage:"Reload Page",healthy:"Healthy",error:"Error",connected:"Connected",configured:"Configured"},gk={allTodos:"All TODOs",totalTodos:"Total TODOs: {{count}}",loadingTodos:"Loading TODOs...",filterByStatus:"Filter by Status:",all:"All",pending:"Pending",done:"Done",createGeneral:"Create General TODO",createNew:"Create New TODO",adminAccessRequired:"Admin access required to view all TODOs.",attachedTo:"Attached To",unattached:"Unattached",delete:"Delete",deleteConfirm:"Are you sure you want to delete this TODO?",creating:"Creating...",addNote:"Add Note",adding:"Adding...",noListingAssignment:"No listing assignment",description:"Description",failedToLoad:"Failed to load listings",addTodo:"Add TODO",noTodosFound:"No TODOs found.",createdLabel:"Created: ",completedLabel:"Completed: ",attachedToLabel:"Attached to: ",productsNeeded:"Products needed:",markAsDone:"Mark as done",title:"Title *",titlePlaceholder:"e.g., Fix the AC, Buy cleaning supplies",assignToListing:"Assign to Listing (Optional)",loadingListings:"Loading listings...",products:"Products (Optional)",searchProductsPlaceholder:"Search for products to add...",selectedProducts:"Selected Products:",remove:"Remove",detailsPlaceholder:"Additional details or notes...",cancel:"Cancel"},pk={title:"Listings",details:"Listing Details",totalListings:"Total listings: {{count}}",loadingListings:"Loading listings...",loadingDetails:"Loading listing details...",address:"Address",basicInformation:"Basic Information",dates:"Dates",amenities:"Amenities",listingTodos:"Listing TODOs",listingChat:"Listing Chat",notFound:"Listing not found",notFoundWithId:'The listing with ID "{{id}}" was not found.',failedToLoad:"Failed to load listing",listingId:"Listing ID",airbnbId:"Airbnb ID",propertyType:"Property Type",roomType:"Room Type",bedrooms:"Bedrooms",bathrooms:"Bathrooms",maxGuests:"Max Guests",created:"Created",updated:"Updated"},mk={accessRequired:"Access Required"},vk={title:"Notes",unknownUser:"Unknown User",send:"Send",sending:"...",deleteNote:"Delete note",deleteConfirm:"Are you sure you want to delete this note?",loadingNotes:"Loading notes...",noNotesYet:"No notes yet. Start the conversation!",attachedToLabel:"Attached to: ",typePlaceholder:"Type a note... (Press Enter to send, Shift+Enter for new line)",noteLabel:"Note:",notePlaceholder:"Enter your note...",errorOccurred:"An error occurred"},yk={noAddress:"No address"},wk={collapseAudit:"Collapse audit history",expandAudit:"Expand audit history",titleLabel:"Title:",statusLabel:"Status:",scheduledLabel:"Scheduled Date:",listingIdLabel:"Listing ID:",assignedToLabel:"Assigned To:",startedAtLabel:"Started At:",finishedAtLabel:"Finished At:",productHelper:"Product Replenishment Helper",taskTab:"Task",listingTab:"Listing"},Sk={overallStatus:"Overall Status:",authenticatedUser:"Authenticated User:",database:"Database:",version:"Version: ",supabaseApi:"Supabase API:",environment:"Environment:",lastChecked:"Last checked: ",systemLabel:"System",null:"null"},_k={english:"English",spanish:"Espaol"},xk={navigation:tk,auth:nk,dashboard:rk,tasks:sk,dataTable:ik,columns:ok,statuses:ak,reservations:lk,admin:uk,assignment:ck,common:dk,audit:fk,healthCheck:hk,todos:gk,listings:pk,cleaner:mk,notes:vk,forms:yk,taskDetail:wk,system:Sk,language:_k},kk={brand:"Sonsoles Stays",dashboard:"Panel de Control",healthCheck:"Verificacin de Estado",listings:"Propiedades",reservations:"Reservas",tasks:"Tareas",todos:"Tareas Pendientes",myTasks:"Mis Tareas",adminBadge:"Administrador",cleanerBadge:"Limpiador",signOut:"Cerrar Sesin"},Ck={welcome:"Bienvenido a Sonsoles Stays",signInDescription:"Por favor, inicia sesin para acceder a tu sistema de gestin de estancias.",signingIn:"Iniciando sesin...",signInWithGoogle:"Iniciar sesin con Google",authenticating:" Autenticando...",pleaseWait:"Por favor, espera mientras completamos tu inicio de sesin.",authenticationError:" Error de Autenticacin",returnToLogin:"Volver al Inicio de Sesin",unexpectedError:"Ocurri un error inesperado durante la autenticacin.",noAccessToken:"No hay token de acceso disponible",authenticationFailed:"La autenticacin fall. Por favor, inicia sesin nuevamente."},Ek={title:"Panel de Control",welcome:"Bienvenido a tu sistema de gestin de estancias",comingSoon:"Panel de Control Prximamente",comingSoonDescription:"Tu panel de control principal estar disponible aqu."},jk={management:"Gestin de Tareas",myTasks:"Mis Tareas",totalTasks:"Total de Tareas: {{count}}",loading:"Cargando...",loginRequired:"Por favor, inicia sesin para ver tus tareas.",details:"Detalles de la Tarea",information:"Informacin de la Tarea",actions:"Acciones",acceptTask:"Aceptar Tarea",startTask:"Iniciar Tarea",completeTask:"Completar Tarea",acceptCompletion:"Aceptar Finalizacin",acceptedByAdmin:"Aceptado por Administrador",noFurtherEdits:"No se permiten ms ediciones",loadingDetails:"Cargando detalles de la tarea...",errorLoading:"Error al Cargar la Tarea",goBack:"Volver",notFound:"Tarea No Encontrada",notFoundDescription:"La tarea solicitada no pudo ser encontrada.",back:"Atrs",notSet:"No establecido"},Rk={searchPlaceholder:"Buscar en todas las columnas...",showingEntries:"Mostrando {{start}} a {{end}} de {{total}} entradas",showingCount:"Mostrando {{count}} de {{total}} entradas",noData:"No Se Encontraron Datos",noResults:"No hay resultados que coincidan con tus criterios de bsqueda.",noDataAvailable:"No hay datos disponibles.",pageInfo:"Pgina {{current}} de {{total}}",showSize:"Mostrar {{size}}",loadingData:"Cargando datos...",failedToLoad:"Error al Cargar Datos"},Pk={id:"ID",title:"Ttulo",task:"Tarea",type:"Tipo",status:"Estado",description:"Descripcin",listing:"Propiedad",reservation:"Reserva",scheduled:"Programado",assignedTo:"Asignado A",assignedAt:"Asignado En",acceptedAt:"Aceptado En",completedAt:"Completado En",created:"Creado",na:"N/A",view:"Ver",accept:"Aceptar",start:"Iniciar",complete:"Completar",cancel:"Cancelar",edit:"Editar",save:"Guardar"},Tk={unassigned:"Sin Asignar",assigned:"Asignada",accepted:"Aceptada",in_progress:"En Progreso",completed:"Completada",admin_accepted:"Aceptada por Administrador"},Nk={guest:"Husped",property:"Propiedad",checkIn:"Llegada",checkOut:"Salida",nights:"Noches",guests:"Huspedes",total:"Total",hostPayout:"Pago al Anfitrin"},bk={checkingAccess:"Verificando acceso de administrador...",authenticationRequired:"Autenticacin Requerida",signInToAccess:"Por favor, inicia sesin para acceder a esta pgina.",adminAccessRequired:"Acceso de Administrador Requerido",noAdminPrivileges:"No tienes privilegios de administrador para acceder a esta pgina."},Lk={unassigned:"Sin Asignar",loading:"Cargando...",unknown:"Desconocido"},$k={loading:"Cargando..."},Ok={history:"Historial de Auditora",entries:"entradas",loading:"Cargando historial de auditora...",noHistory:"No hay historial de auditora disponible para esta tarea.",by:"por",noDescription:"No hay descripcin disponible",fieldsChanged:"Campos modificados",valuesChanged:"Valores modificados",context:"Contexto",system:"Sistema",unknownUser:"Usuario Desconocido"},Ak={title:"Verificacin de Estado del Sistema",monitoring:"Monitoreando estado del sistema y conectividad",failed:"Verificacin de Estado Fall",loading:"Cargando estado de salud...",reloadPage:"Recargar Pgina",healthy:"Saludable",error:"Error",connected:"Conectado",configured:"Configurado"},Ik={allTodos:"Todas las Tareas",totalTodos:"Total de Tareas: {{count}}",loadingTodos:"Cargando tareas...",filterByStatus:"Filtrar por Estado:",all:"Todas",pending:"Pendientes",done:"Completadas",createGeneral:"Crear Tarea General",createNew:"Crear Nueva Tarea",adminAccessRequired:"Se requiere acceso de administrador para ver todas las tareas.",attachedTo:"Adjuntado A",unattached:"Sin Adjuntar",delete:"Eliminar",deleteConfirm:"Ests seguro de que quieres eliminar esta tarea?",creating:"Creando...",addNote:"Agregar Nota",adding:"Agregando...",noListingAssignment:"Sin asignacin de propiedad",description:"Descripcin",failedToLoad:"Error al cargar propiedades",addTodo:"Agregar Tarea",noTodosFound:"No se encontraron tareas.",createdLabel:"Creado: ",completedLabel:"Completado: ",attachedToLabel:"Adjuntado a: ",productsNeeded:"Productos necesarios:",markAsDone:"Marcar como completado",title:"Ttulo *",titlePlaceholder:"ej., Arreglar el aire acondicionado, Comprar suministros de limpieza",assignToListing:"Asignar a Propiedad (Opcional)",loadingListings:"Cargando propiedades...",products:"Productos (Opcional)",searchProductsPlaceholder:"Buscar productos para agregar...",selectedProducts:"Productos Seleccionados:",remove:"Quitar",detailsPlaceholder:"Detalles adicionales o notas...",cancel:"Cancelar"},Dk={title:"Propiedades",details:"Detalles de la Propiedad",totalListings:"Total de propiedades: {{count}}",loadingListings:"Cargando propiedades...",loadingDetails:"Cargando detalles de la propiedad...",address:"Direccin",basicInformation:"Informacin Bsica",dates:"Fechas",amenities:"Amenidades",listingTodos:"Tareas de la Propiedad",listingChat:"Chat de la Propiedad",notFound:"Propiedad no encontrada",notFoundWithId:'La propiedad con ID "{{id}}" no fue encontrada.',failedToLoad:"Error al cargar propiedad",listingId:"ID de Propiedad",airbnbId:"ID de Airbnb",propertyType:"Tipo de Propiedad",roomType:"Tipo de Habitacin",bedrooms:"Habitaciones",bathrooms:"Baos",maxGuests:"Mximo de Huspedes",created:"Creado",updated:"Actualizado"},Fk={accessRequired:"Acceso Requerido"},Mk={title:"Notas",unknownUser:"Usuario Desconocido",send:"Enviar",sending:"...",deleteNote:"Eliminar nota",deleteConfirm:"Ests seguro de que quieres eliminar esta nota?",loadingNotes:"Cargando notas...",noNotesYet:"An no hay notas. Comienza la conversacin!",attachedToLabel:"Adjuntado a: ",typePlaceholder:"Escribe una nota... (Presiona Enter para enviar, Shift+Enter para nueva lnea)",noteLabel:"Nota:",notePlaceholder:"Ingresa tu nota...",errorOccurred:"Ocurri un error"},Uk={noAddress:"Sin direccin"},zk={collapseAudit:"Contraer historial de auditora",expandAudit:"Expandir historial de auditora",titleLabel:"Ttulo:",statusLabel:"Estado:",scheduledLabel:"Fecha Programada:",listingIdLabel:"ID de Propiedad:",assignedToLabel:"Asignado A:",startedAtLabel:"Iniciado En:",finishedAtLabel:"Finalizado En:",productHelper:"Asistente de Reposicin de Productos",taskTab:"Tarea",listingTab:"Propiedad"},Vk={overallStatus:"Estado General:",authenticatedUser:"Usuario Autenticado:",database:"Base de Datos:",version:"Versin: ",supabaseApi:"API de Supabase:",environment:"Entorno:",lastChecked:"ltima verificacin: ",systemLabel:"Sistema",null:"nulo"},Bk={english:"English",spanish:"Espaol"},Hk={navigation:kk,auth:Ck,dashboard:Ek,tasks:jk,dataTable:Rk,columns:Pk,statuses:Tk,reservations:Nk,admin:bk,assignment:Lk,common:$k,audit:Ok,healthCheck:Ak,todos:Ik,listings:Dk,cleaner:Fk,notes:Mk,forms:Uk,taskDetail:zk,system:Vk,language:Bk},Gk={en:{translation:xk},es:{translation:Hk}};Ce.use(vp).use(KS).init({resources:Gk,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"preferred-language",caches:["localStorage"]},supportedLngs:["en","es"],lng:"en",ns:["translation"],defaultNS:"translation"});function qk(){return d.jsx("div",{className:"app",children:d.jsx(XS,{children:d.jsx(AS,{children:d.jsx(ow,{children:d.jsxs(Dy,{children:[d.jsx(Ze,{path:"/auth/callback",element:d.jsx(wx,{})}),d.jsx(Ze,{path:"/",element:d.jsx(la,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx(Sx,{})})]})})}),d.jsx(Ze,{path:"/healthcheck",element:d.jsx(Vn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(vx,{})})})]})})}),d.jsx(Ze,{path:"/admin",element:d.jsx(Vn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(X_,{})})})]})})}),d.jsx(Ze,{path:"/admin/tasks",element:d.jsx(Vn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(ix,{})})})]})})}),d.jsx(Ze,{path:"/admin/todos",element:d.jsx(Vn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(lx,{})})})]})})}),d.jsx(Ze,{path:"/listings",element:d.jsx(Vn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(ux,{})})})]})})}),d.jsx(Ze,{path:"/cleaner/tasks",element:d.jsx(la,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(cx,{})})})]})})}),d.jsx(Ze,{path:"/tasks/:id",element:d.jsx(la,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(px,{})})})]})})}),d.jsx(Ze,{path:"/listing/:id",element:d.jsx(Vn,{children:d.jsxs("div",{className:"app-content",children:[d.jsx(_t,{}),d.jsx("main",{className:"main-content",children:d.jsx("div",{className:"content-container",children:d.jsx(mx,{})})})]})})})]})})})})})}const yp=document.getElementById("root");if(!yp)throw new Error("Root element not found");wa.createRoot(yp).render(d.jsx(qk,{}));
