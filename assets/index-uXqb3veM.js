(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var hh={exports:{}},ha={},fh={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),Gp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),Qp=Symbol.for("react.profiler"),Jp=Symbol.for("react.provider"),Yp=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),Zp=Symbol.for("react.suspense"),em=Symbol.for("react.memo"),tm=Symbol.for("react.lazy"),oc=Symbol.iterator;function nm(t){return t===null||typeof t!="object"?null:(t=oc&&t[oc]||t["@@iterator"],typeof t=="function"?t:null)}var gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ph=Object.assign,mh={};function Pr(t,e,n){this.props=t,this.context=e,this.refs=mh,this.updater=n||gh}Pr.prototype.isReactComponent={};Pr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vh(){}vh.prototype=Pr.prototype;function Ql(t,e,n){this.props=t,this.context=e,this.refs=mh,this.updater=n||gh}var Jl=Ql.prototype=new vh;Jl.constructor=Ql;ph(Jl,Pr.prototype);Jl.isPureReactComponent=!0;var lc=Array.isArray,yh=Object.prototype.hasOwnProperty,Yl={current:null},wh={key:!0,ref:!0,__self:!0,__source:!0};function Sh(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)yh.call(e,r)&&!wh.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Ds,type:t,key:i,ref:a,props:s,_owner:Yl.current}}function rm(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function sm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uc=/\/+/g;function Fa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sm(""+t.key):e.toString(36)}function xi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ds:case Gp:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Fa(a,0):r,lc(s)?(n="",t!=null&&(n=t.replace(uc,"$&/")+"/"),xi(s,e,n,"",function(u){return u})):s!=null&&(Xl(s)&&(s=rm(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(uc,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",lc(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+Fa(i,o);a+=xi(i,e,n,l,s)}else if(l=nm(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+Fa(i,o++),a+=xi(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Js(t,e,n){if(t==null)return t;var r=[],s=0;return xi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function im(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},ki={transition:null},am={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ki,ReactCurrentOwner:Yl};function _h(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Js,forEach:function(t,e,n){Js(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Js(t,function(){e++}),e},toArray:function(t){return Js(t,function(e){return e})||[]},only:function(t){if(!Xl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=Pr;q.Fragment=Wp;q.Profiler=Qp;q.PureComponent=Ql;q.StrictMode=Kp;q.Suspense=Zp;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=am;q.act=_h;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ph({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Yl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)yh.call(e,l)&&!wh.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Ds,type:t.type,key:s,ref:i,props:r,_owner:a}};q.createContext=function(t){return t={$$typeof:Yp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jp,_context:t},t.Consumer=t};q.createElement=Sh;q.createFactory=function(t){var e=Sh.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:Xp,render:t}};q.isValidElement=Xl;q.lazy=function(t){return{$$typeof:tm,_payload:{_status:-1,_result:t},_init:im}};q.memo=function(t,e){return{$$typeof:em,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=ki.transition;ki.transition={};try{t()}finally{ki.transition=e}};q.unstable_act=_h;q.useCallback=function(t,e){return Pe.current.useCallback(t,e)};q.useContext=function(t){return Pe.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};q.useEffect=function(t,e){return Pe.current.useEffect(t,e)};q.useId=function(){return Pe.current.useId()};q.useImperativeHandle=function(t,e,n){return Pe.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Pe.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Pe.current.useReducer(t,e,n)};q.useRef=function(t){return Pe.current.useRef(t)};q.useState=function(t){return Pe.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Pe.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Pe.current.useTransition()};q.version="18.3.1";fh.exports=q;var S=fh.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=S,lm=Symbol.for("react.element"),um=Symbol.for("react.fragment"),cm=Object.prototype.hasOwnProperty,dm=om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hm={key:!0,ref:!0,__self:!0,__source:!0};function xh(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)cm.call(e,r)&&!hm.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lm,type:t,key:i,ref:a,props:s,_owner:dm.current}}ha.Fragment=um;ha.jsx=xh;ha.jsxs=xh;hh.exports=ha;var c=hh.exports,Po={},kh={exports:{}},Je={},Ch={exports:{}},Eh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,N){var L=b.length;b.push(N);e:for(;0<L;){var A=L-1>>>1,W=b[A];if(0<s(W,N))b[A]=N,b[L]=W,L=A;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var N=b[0],L=b.pop();if(L!==N){b[0]=L;e:for(var A=0,W=b.length,Ie=W>>>1;A<Ie;){var Ae=2*(A+1)-1,et=b[Ae],tt=Ae+1,Gn=b[tt];if(0>s(et,L))tt<W&&0>s(Gn,et)?(b[A]=Gn,b[tt]=L,A=tt):(b[A]=et,b[Ae]=L,A=Ae);else if(tt<W&&0>s(Gn,L))b[A]=Gn,b[tt]=L,A=tt;else break e}}return N}function s(b,N){var L=b.sortIndex-N.sortIndex;return L!==0?L:b.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,f=3,g=!1,p=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=b)r(u),N.sortIndex=N.expirationTime,e(l,N);else break;N=n(u)}}function x(b){if(w=!1,y(b),!p)if(n(l)!==null)p=!0,oe(k);else{var N=n(u);N!==null&&I(x,N.startTime-b)}}function k(b,N){p=!1,w&&(w=!1,m(j),j=-1),g=!0;var L=f;try{for(y(N),h=n(l);h!==null&&(!(h.expirationTime>N)||b&&!V());){var A=h.callback;if(typeof A=="function"){h.callback=null,f=h.priorityLevel;var W=A(h.expirationTime<=N);N=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),y(N)}else r(l);h=n(l)}if(h!==null)var Ie=!0;else{var Ae=n(u);Ae!==null&&I(x,Ae.startTime-N),Ie=!1}return Ie}finally{h=null,f=L,g=!1}}var C=!1,E=null,j=-1,P=5,T=-1;function V(){return!(t.unstable_now()-T<P)}function F(){if(E!==null){var b=t.unstable_now();T=b;var N=!0;try{N=E(!0,b)}finally{N?B():(C=!1,E=null)}}else C=!1}var B;if(typeof v=="function")B=function(){v(F)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ze=ie.port2;ie.port1.onmessage=F,B=function(){Ze.postMessage(null)}}else B=function(){_(F,0)};function oe(b){E=b,C||(C=!0,B())}function I(b,N){j=_(function(){b(t.unstable_now())},N)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,oe(k))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var N=3;break;default:N=f}var L=f;f=N;try{return b()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,N){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var L=f;f=b;try{return N()}finally{f=L}},t.unstable_scheduleCallback=function(b,N,L){var A=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?A+L:A):L=A,b){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,b={id:d++,callback:N,priorityLevel:b,startTime:L,expirationTime:W,sortIndex:-1},L>A?(b.sortIndex=L,e(u,b),n(l)===null&&b===n(u)&&(w?(m(j),j=-1):w=!0,I(x,L-A))):(b.sortIndex=W,e(l,b),p||g||(p=!0,oe(k))),b},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(b){var N=f;return function(){var L=f;f=N;try{return b.apply(this,arguments)}finally{f=L}}}})(Eh);Ch.exports=Eh;var fm=Ch.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm=S,Ke=fm;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jh=new Set,ms={};function Bn(t,e){kr(t,e),kr(t+"Capture",e)}function kr(t,e){for(ms[t]=e,t=0;t<e.length;t++)jh.add(e[t])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lo=Object.prototype.hasOwnProperty,pm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cc={},dc={};function mm(t){return Lo.call(dc,t)?!0:Lo.call(cc,t)?!1:pm.test(t)?dc[t]=!0:(cc[t]=!0,!1)}function vm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ym(t,e,n,r){if(e===null||typeof e>"u"||vm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Le(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Se[t]=new Le(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Se[e]=new Le(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Se[t]=new Le(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Se[t]=new Le(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Se[t]=new Le(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Se[t]=new Le(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Se[t]=new Le(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Se[t]=new Le(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Se[t]=new Le(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zl=/[\-:]([a-z])/g;function eu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zl,eu);Se[e]=new Le(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zl,eu);Se[e]=new Le(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zl,eu);Se[e]=new Le(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Se[t]=new Le(t,1,!1,t.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Se[t]=new Le(t,1,!1,t.toLowerCase(),null,!0,!0)});function tu(t,e,n,r){var s=Se.hasOwnProperty(e)?Se[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ym(e,n,s,r)&&(n=null),r||s===null?mm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gt=gm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=Symbol.for("react.element"),ir=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),nu=Symbol.for("react.strict_mode"),$o=Symbol.for("react.profiler"),bh=Symbol.for("react.provider"),Rh=Symbol.for("react.context"),ru=Symbol.for("react.forward_ref"),Io=Symbol.for("react.suspense"),Ao=Symbol.for("react.suspense_list"),su=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),Th=Symbol.for("react.offscreen"),hc=Symbol.iterator;function Mr(t){return t===null||typeof t!="object"?null:(t=hc&&t[hc]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,Ma;function Yr(t){if(Ma===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ma=e&&e[1]||""}return`
`+Ma+t}var Ua=!1;function za(t,e){if(!t||Ua)return"";Ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ua=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yr(t):""}function wm(t){switch(t.tag){case 5:return Yr(t.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 2:case 15:return t=za(t.type,!1),t;case 11:return t=za(t.type.render,!1),t;case 1:return t=za(t.type,!0),t;default:return""}}function Oo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ar:return"Fragment";case ir:return"Portal";case $o:return"Profiler";case nu:return"StrictMode";case Io:return"Suspense";case Ao:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rh:return(t.displayName||"Context")+".Consumer";case bh:return(t._context.displayName||"Context")+".Provider";case ru:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case su:return e=t.displayName||null,e!==null?e:Oo(t.type)||"Memo";case Zt:e=t._payload,t=t._init;try{return Oo(t(e))}catch{}}return null}function Sm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oo(e);case 8:return e===nu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _m(t){var e=Nh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xs(t){t._valueTracker||(t._valueTracker=_m(t))}function Ph(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Do(t,e){var n=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lh(t,e){e=e.checked,e!=null&&tu(t,"checked",e,!1)}function Fo(t,e){Lh(t,e);var n=yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mo(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mo(t,e.type,yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mo(t,e,n){(e!=="number"||Oi(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xr=Array.isArray;function vr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Uo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Xr(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yn(n)}}function $h(t,e){var n=yn(e.value),r=yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ih(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ih(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zs,Ah=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xm=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(t){xm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ns[e]=ns[t]})});function Oh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ns.hasOwnProperty(t)&&ns[t]?(""+e).trim():e+"px"}function Dh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Oh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var km=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vo(t,e){if(e){if(km[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Bo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ho=null;function iu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qo=null,yr=null,wr=null;function vc(t){if(t=Us(t)){if(typeof qo!="function")throw Error(R(280));var e=t.stateNode;e&&(e=va(e),qo(t.stateNode,t.type,e))}}function Fh(t){yr?wr?wr.push(t):wr=[t]:yr=t}function Mh(){if(yr){var t=yr,e=wr;if(wr=yr=null,vc(t),e)for(t=0;t<e.length;t++)vc(e[t])}}function Uh(t,e){return t(e)}function zh(){}var Va=!1;function Vh(t,e,n){if(Va)return t(e,n);Va=!0;try{return Uh(t,e,n)}finally{Va=!1,(yr!==null||wr!==null)&&(zh(),Mh())}}function ys(t,e){var n=t.stateNode;if(n===null)return null;var r=va(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Go=!1;if(zt)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){Go=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{Go=!1}function Cm(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var rs=!1,Di=null,Fi=!1,Wo=null,Em={onError:function(t){rs=!0,Di=t}};function jm(t,e,n,r,s,i,a,o,l){rs=!1,Di=null,Cm.apply(Em,arguments)}function bm(t,e,n,r,s,i,a,o,l){if(jm.apply(this,arguments),rs){if(rs){var u=Di;rs=!1,Di=null}else throw Error(R(198));Fi||(Fi=!0,Wo=u)}}function Hn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yc(t){if(Hn(t)!==t)throw Error(R(188))}function Rm(t){var e=t.alternate;if(!e){if(e=Hn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return yc(s),t;if(i===r)return yc(s),e;i=i.sibling}throw Error(R(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function Hh(t){return t=Rm(t),t!==null?qh(t):null}function qh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qh(t);if(e!==null)return e;t=t.sibling}return null}var Gh=Ke.unstable_scheduleCallback,wc=Ke.unstable_cancelCallback,Tm=Ke.unstable_shouldYield,Nm=Ke.unstable_requestPaint,le=Ke.unstable_now,Pm=Ke.unstable_getCurrentPriorityLevel,au=Ke.unstable_ImmediatePriority,Wh=Ke.unstable_UserBlockingPriority,Mi=Ke.unstable_NormalPriority,Lm=Ke.unstable_LowPriority,Kh=Ke.unstable_IdlePriority,fa=null,jt=null;function $m(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(fa,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Om,Im=Math.log,Am=Math.LN2;function Om(t){return t>>>=0,t===0?32:31-(Im(t)/Am|0)|0}var ei=64,ti=4194304;function Zr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ui(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=Zr(o):(i&=a,i!==0&&(r=Zr(i)))}else a=n&~s,a!==0?r=Zr(a):i!==0&&(r=Zr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),s=1<<n,r|=t[n],e&=~s;return r}function Dm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-vt(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=Dm(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Ko(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qh(){var t=ei;return ei<<=1,!(ei&4194240)&&(ei=64),t}function Ba(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function Mm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ou(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var K=0;function Jh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yh,lu,Xh,Zh,ef,Qo=!1,ni=[],cn=null,dn=null,hn=null,ws=new Map,Ss=new Map,tn=[],Um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(t,e){switch(t){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":ws.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(e.pointerId)}}function zr(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Us(e),e!==null&&lu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zm(t,e,n,r,s){switch(e){case"focusin":return cn=zr(cn,t,e,n,r,s),!0;case"dragenter":return dn=zr(dn,t,e,n,r,s),!0;case"mouseover":return hn=zr(hn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ws.set(i,zr(ws.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ss.set(i,zr(Ss.get(i)||null,t,e,n,r,s)),!0}return!1}function tf(t){var e=Ln(t.target);if(e!==null){var n=Hn(e);if(n!==null){if(e=n.tag,e===13){if(e=Bh(n),e!==null){t.blockedOn=e,ef(t.priority,function(){Xh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ci(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ho=r,n.target.dispatchEvent(r),Ho=null}else return e=Us(n),e!==null&&lu(e),t.blockedOn=n,!1;e.shift()}return!0}function _c(t,e,n){Ci(t)&&n.delete(e)}function Vm(){Qo=!1,cn!==null&&Ci(cn)&&(cn=null),dn!==null&&Ci(dn)&&(dn=null),hn!==null&&Ci(hn)&&(hn=null),ws.forEach(_c),Ss.forEach(_c)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,Qo||(Qo=!0,Ke.unstable_scheduleCallback(Ke.unstable_NormalPriority,Vm)))}function _s(t){function e(s){return Vr(s,t)}if(0<ni.length){Vr(ni[0],t);for(var n=1;n<ni.length;n++){var r=ni[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cn!==null&&Vr(cn,t),dn!==null&&Vr(dn,t),hn!==null&&Vr(hn,t),ws.forEach(e),Ss.forEach(e),n=0;n<tn.length;n++)r=tn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<tn.length&&(n=tn[0],n.blockedOn===null);)tf(n),n.blockedOn===null&&tn.shift()}var Sr=Gt.ReactCurrentBatchConfig,zi=!0;function Bm(t,e,n,r){var s=K,i=Sr.transition;Sr.transition=null;try{K=1,uu(t,e,n,r)}finally{K=s,Sr.transition=i}}function Hm(t,e,n,r){var s=K,i=Sr.transition;Sr.transition=null;try{K=4,uu(t,e,n,r)}finally{K=s,Sr.transition=i}}function uu(t,e,n,r){if(zi){var s=Jo(t,e,n,r);if(s===null)Za(t,e,r,Vi,n),Sc(t,r);else if(zm(s,t,e,n,r))r.stopPropagation();else if(Sc(t,r),e&4&&-1<Um.indexOf(t)){for(;s!==null;){var i=Us(s);if(i!==null&&Yh(i),i=Jo(t,e,n,r),i===null&&Za(t,e,r,Vi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Za(t,e,r,null,n)}}var Vi=null;function Jo(t,e,n,r){if(Vi=null,t=iu(r),t=Ln(t),t!==null)if(e=Hn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vi=t,null}function nf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pm()){case au:return 1;case Wh:return 4;case Mi:case Lm:return 16;case Kh:return 536870912;default:return 16}default:return 16}}var sn=null,cu=null,Ei=null;function rf(){if(Ei)return Ei;var t,e=cu,n=e.length,r,s="value"in sn?sn.value:sn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Ei=s.slice(t,1<r?1-r:void 0)}function ji(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ri(){return!0}function xc(){return!1}function Ye(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ri:xc,this.isPropagationStopped=xc,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),e}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=Ye(Lr),Ms=se({},Lr,{view:0,detail:0}),qm=Ye(Ms),Ha,qa,Br,ga=se({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Br&&(Br&&t.type==="mousemove"?(Ha=t.screenX-Br.screenX,qa=t.screenY-Br.screenY):qa=Ha=0,Br=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:qa}}),kc=Ye(ga),Gm=se({},ga,{dataTransfer:0}),Wm=Ye(Gm),Km=se({},Ms,{relatedTarget:0}),Ga=Ye(Km),Qm=se({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Jm=Ye(Qm),Ym=se({},Lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xm=Ye(Ym),Zm=se({},Lr,{data:0}),Cc=Ye(Zm),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nv[t])?!!e[t]:!1}function hu(){return rv}var sv=se({},Ms,{key:function(t){if(t.key){var e=ev[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ji(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(t){return t.type==="keypress"?ji(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ji(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iv=Ye(sv),av=se({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=Ye(av),ov=se({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),lv=Ye(ov),uv=se({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cv=Ye(uv),dv=se({},ga,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hv=Ye(dv),fv=[9,13,27,32],fu=zt&&"CompositionEvent"in window,ss=null;zt&&"documentMode"in document&&(ss=document.documentMode);var gv=zt&&"TextEvent"in window&&!ss,sf=zt&&(!fu||ss&&8<ss&&11>=ss),jc=" ",bc=!1;function af(t,e){switch(t){case"keyup":return fv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var or=!1;function pv(t,e){switch(t){case"compositionend":return of(e);case"keypress":return e.which!==32?null:(bc=!0,jc);case"textInput":return t=e.data,t===jc&&bc?null:t;default:return null}}function mv(t,e){if(or)return t==="compositionend"||!fu&&af(t,e)?(t=rf(),Ei=cu=sn=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sf&&e.locale!=="ko"?null:e.data;default:return null}}var vv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vv[t.type]:e==="textarea"}function lf(t,e,n,r){Fh(r),e=Bi(e,"onChange"),0<e.length&&(n=new du("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var is=null,xs=null;function yv(t){wf(t,0)}function pa(t){var e=cr(t);if(Ph(e))return t}function wv(t,e){if(t==="change")return e}var uf=!1;if(zt){var Wa;if(zt){var Ka="oninput"in document;if(!Ka){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),Ka=typeof Tc.oninput=="function"}Wa=Ka}else Wa=!1;uf=Wa&&(!document.documentMode||9<document.documentMode)}function Nc(){is&&(is.detachEvent("onpropertychange",cf),xs=is=null)}function cf(t){if(t.propertyName==="value"&&pa(xs)){var e=[];lf(e,xs,t,iu(t)),Vh(yv,e)}}function Sv(t,e,n){t==="focusin"?(Nc(),is=e,xs=n,is.attachEvent("onpropertychange",cf)):t==="focusout"&&Nc()}function _v(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pa(xs)}function xv(t,e){if(t==="click")return pa(e)}function kv(t,e){if(t==="input"||t==="change")return pa(e)}function Cv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var St=typeof Object.is=="function"?Object.is:Cv;function ks(t,e){if(St(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lo.call(e,s)||!St(t[s],e[s]))return!1}return!0}function Pc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lc(t,e){var n=Pc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pc(n)}}function df(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?df(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hf(){for(var t=window,e=Oi();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oi(t.document)}return e}function gu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ev(t){var e=hf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&df(n.ownerDocument.documentElement,n)){if(r!==null&&gu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Lc(n,i);var a=Lc(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jv=zt&&"documentMode"in document&&11>=document.documentMode,lr=null,Yo=null,as=null,Xo=!1;function $c(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xo||lr==null||lr!==Oi(r)||(r=lr,"selectionStart"in r&&gu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),as&&ks(as,r)||(as=r,r=Bi(Yo,"onSelect"),0<r.length&&(e=new du("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lr)))}function si(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ur={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionend:si("Transition","TransitionEnd")},Qa={},ff={};zt&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function ma(t){if(Qa[t])return Qa[t];if(!ur[t])return t;var e=ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ff)return Qa[t]=e[n];return t}var gf=ma("animationend"),pf=ma("animationiteration"),mf=ma("animationstart"),vf=ma("transitionend"),yf=new Map,Ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(t,e){yf.set(t,e),Bn(e,[t])}for(var Ja=0;Ja<Ic.length;Ja++){var Ya=Ic[Ja],bv=Ya.toLowerCase(),Rv=Ya[0].toUpperCase()+Ya.slice(1);_n(bv,"on"+Rv)}_n(gf,"onAnimationEnd");_n(pf,"onAnimationIteration");_n(mf,"onAnimationStart");_n("dblclick","onDoubleClick");_n("focusin","onFocus");_n("focusout","onBlur");_n(vf,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tv=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function Ac(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bm(r,e,void 0,t),t.currentTarget=null}function wf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ac(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ac(s,o,u),i=l}}}if(Fi)throw t=Wo,Fi=!1,Wo=null,t}function X(t,e){var n=e[rl];n===void 0&&(n=e[rl]=new Set);var r=t+"__bubble";n.has(r)||(Sf(e,t,2,!1),n.add(r))}function Xa(t,e,n){var r=0;e&&(r|=4),Sf(n,t,r,e)}var ii="_reactListening"+Math.random().toString(36).slice(2);function Cs(t){if(!t[ii]){t[ii]=!0,jh.forEach(function(n){n!=="selectionchange"&&(Tv.has(n)||Xa(n,!1,t),Xa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ii]||(e[ii]=!0,Xa("selectionchange",!1,e))}}function Sf(t,e,n,r){switch(nf(e)){case 1:var s=Bm;break;case 4:s=Hm;break;default:s=uu}n=s.bind(null,e,n,t),s=void 0,!Go||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Za(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ln(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}Vh(function(){var u=i,d=iu(n),h=[];e:{var f=yf.get(t);if(f!==void 0){var g=du,p=t;switch(t){case"keypress":if(ji(n)===0)break e;case"keydown":case"keyup":g=iv;break;case"focusin":p="focus",g=Ga;break;case"focusout":p="blur",g=Ga;break;case"beforeblur":case"afterblur":g=Ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=lv;break;case gf:case pf:case mf:g=Jm;break;case vf:g=cv;break;case"scroll":g=qm;break;case"wheel":g=hv;break;case"copy":case"cut":case"paste":g=Xm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ec}var w=(e&4)!==0,_=!w&&t==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var v=u,y;v!==null;){y=v;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,m!==null&&(x=ys(v,m),x!=null&&w.push(Es(v,x,y)))),_)break;v=v.return}0<w.length&&(f=new g(f,p,null,n,d),h.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ho&&(p=n.relatedTarget||n.fromElement)&&(Ln(p)||p[Vt]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=u,p=p?Ln(p):null,p!==null&&(_=Hn(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=u),g!==p)){if(w=kc,x="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=Ec,x="onPointerLeave",m="onPointerEnter",v="pointer"),_=g==null?f:cr(g),y=p==null?f:cr(p),f=new w(x,v+"leave",g,n,d),f.target=_,f.relatedTarget=y,x=null,Ln(d)===u&&(w=new w(m,v+"enter",p,n,d),w.target=y,w.relatedTarget=_,x=w),_=x,g&&p)t:{for(w=g,m=p,v=0,y=w;y;y=Wn(y))v++;for(y=0,x=m;x;x=Wn(x))y++;for(;0<v-y;)w=Wn(w),v--;for(;0<y-v;)m=Wn(m),y--;for(;v--;){if(w===m||m!==null&&w===m.alternate)break t;w=Wn(w),m=Wn(m)}w=null}else w=null;g!==null&&Oc(h,f,g,w,!1),p!==null&&_!==null&&Oc(h,_,p,w,!0)}}e:{if(f=u?cr(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=wv;else if(Rc(f))if(uf)k=kv;else{k=_v;var C=Sv}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=xv);if(k&&(k=k(t,u))){lf(h,k,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Mo(f,"number",f.value)}switch(C=u?cr(u):window,t){case"focusin":(Rc(C)||C.contentEditable==="true")&&(lr=C,Yo=u,as=null);break;case"focusout":as=Yo=lr=null;break;case"mousedown":Xo=!0;break;case"contextmenu":case"mouseup":case"dragend":Xo=!1,$c(h,n,d);break;case"selectionchange":if(jv)break;case"keydown":case"keyup":$c(h,n,d)}var E;if(fu)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else or?af(t,n)&&(j="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(sf&&n.locale!=="ko"&&(or||j!=="onCompositionStart"?j==="onCompositionEnd"&&or&&(E=rf()):(sn=d,cu="value"in sn?sn.value:sn.textContent,or=!0)),C=Bi(u,j),0<C.length&&(j=new Cc(j,t,null,n,d),h.push({event:j,listeners:C}),E?j.data=E:(E=of(n),E!==null&&(j.data=E)))),(E=gv?pv(t,n):mv(t,n))&&(u=Bi(u,"onBeforeInput"),0<u.length&&(d=new Cc("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}wf(h,e)})}function Es(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bi(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ys(t,n),i!=null&&r.unshift(Es(t,i,s)),i=ys(t,e),i!=null&&r.push(Es(t,i,s))),t=t.return}return r}function Wn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Oc(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=ys(n,i),l!=null&&a.unshift(Es(n,l,o))):s||(l=ys(n,i),l!=null&&a.push(Es(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Nv=/\r\n?/g,Pv=/\u0000|\uFFFD/g;function Dc(t){return(typeof t=="string"?t:""+t).replace(Nv,`
`).replace(Pv,"")}function ai(t,e,n){if(e=Dc(e),Dc(t)!==e&&n)throw Error(R(425))}function Hi(){}var Zo=null,el=null;function tl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nl=typeof setTimeout=="function"?setTimeout:void 0,Lv=typeof clearTimeout=="function"?clearTimeout:void 0,Fc=typeof Promise=="function"?Promise:void 0,$v=typeof queueMicrotask=="function"?queueMicrotask:typeof Fc<"u"?function(t){return Fc.resolve(null).then(t).catch(Iv)}:nl;function Iv(t){setTimeout(function(){throw t})}function eo(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_s(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_s(e)}function fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Ct="__reactFiber$"+$r,js="__reactProps$"+$r,Vt="__reactContainer$"+$r,rl="__reactEvents$"+$r,Av="__reactListeners$"+$r,Ov="__reactHandles$"+$r;function Ln(t){var e=t[Ct];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vt]||n[Ct]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mc(t);t!==null;){if(n=t[Ct])return n;t=Mc(t)}return e}t=n,n=t.parentNode}return null}function Us(t){return t=t[Ct]||t[Vt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function va(t){return t[js]||null}var sl=[],dr=-1;function xn(t){return{current:t}}function Z(t){0>dr||(t.current=sl[dr],sl[dr]=null,dr--)}function J(t,e){dr++,sl[dr]=t.current,t.current=e}var wn={},je=xn(wn),Me=xn(!1),Fn=wn;function Cr(t,e){var n=t.type.contextTypes;if(!n)return wn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(t){return t=t.childContextTypes,t!=null}function qi(){Z(Me),Z(je)}function Uc(t,e,n){if(je.current!==wn)throw Error(R(168));J(je,e),J(Me,n)}function _f(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(R(108,Sm(t)||"Unknown",s));return se({},n,r)}function Gi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wn,Fn=je.current,J(je,t),J(Me,Me.current),!0}function zc(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=_f(t,e,Fn),r.__reactInternalMemoizedMergedChildContext=t,Z(Me),Z(je),J(je,t)):Z(Me),J(Me,n)}var Ot=null,ya=!1,to=!1;function xf(t){Ot===null?Ot=[t]:Ot.push(t)}function Dv(t){ya=!0,xf(t)}function kn(){if(!to&&Ot!==null){to=!0;var t=0,e=K;try{var n=Ot;for(K=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ot=null,ya=!1}catch(s){throw Ot!==null&&(Ot=Ot.slice(t+1)),Gh(au,kn),s}finally{K=e,to=!1}}return null}var hr=[],fr=0,Wi=null,Ki=0,rt=[],st=0,Mn=null,Dt=1,Ft="";function Rn(t,e){hr[fr++]=Ki,hr[fr++]=Wi,Wi=t,Ki=e}function kf(t,e,n){rt[st++]=Dt,rt[st++]=Ft,rt[st++]=Mn,Mn=t;var r=Dt;t=Ft;var s=32-vt(r)-1;r&=~(1<<s),n+=1;var i=32-vt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Dt=1<<32-vt(e)+s|n<<s|r,Ft=i+t}else Dt=1<<i|n<<s|r,Ft=t}function pu(t){t.return!==null&&(Rn(t,1),kf(t,1,0))}function mu(t){for(;t===Wi;)Wi=hr[--fr],hr[fr]=null,Ki=hr[--fr],hr[fr]=null;for(;t===Mn;)Mn=rt[--st],rt[st]=null,Ft=rt[--st],rt[st]=null,Dt=rt[--st],rt[st]=null}var We=null,Ge=null,ee=!1,mt=null;function Cf(t,e){var n=it(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,We=t,Ge=fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,We=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mn!==null?{id:Dt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=it(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,We=t,Ge=null,!0):!1;default:return!1}}function il(t){return(t.mode&1)!==0&&(t.flags&128)===0}function al(t){if(ee){var e=Ge;if(e){var n=e;if(!Vc(t,e)){if(il(t))throw Error(R(418));e=fn(n.nextSibling);var r=We;e&&Vc(t,e)?Cf(r,n):(t.flags=t.flags&-4097|2,ee=!1,We=t)}}else{if(il(t))throw Error(R(418));t.flags=t.flags&-4097|2,ee=!1,We=t}}}function Bc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;We=t}function oi(t){if(t!==We)return!1;if(!ee)return Bc(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tl(t.type,t.memoizedProps)),e&&(e=Ge)){if(il(t))throw Ef(),Error(R(418));for(;e;)Cf(t,e),e=fn(e.nextSibling)}if(Bc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=We?fn(t.stateNode.nextSibling):null;return!0}function Ef(){for(var t=Ge;t;)t=fn(t.nextSibling)}function Er(){Ge=We=null,ee=!1}function vu(t){mt===null?mt=[t]:mt.push(t)}var Fv=Gt.ReactCurrentBatchConfig;function Hr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function li(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hc(t){var e=t._init;return e(t._payload)}function jf(t){function e(m,v){if(t){var y=m.deletions;y===null?(m.deletions=[v],m.flags|=16):y.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=vn(m,v),m.index=0,m.sibling=null,m}function i(m,v,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<v?(m.flags|=2,v):y):(m.flags|=2,v)):(m.flags|=1048576,v)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,v,y,x){return v===null||v.tag!==6?(v=lo(y,m.mode,x),v.return=m,v):(v=s(v,y),v.return=m,v)}function l(m,v,y,x){var k=y.type;return k===ar?d(m,v,y.props.children,x,y.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zt&&Hc(k)===v.type)?(x=s(v,y.props),x.ref=Hr(m,v,y),x.return=m,x):(x=$i(y.type,y.key,y.props,null,m.mode,x),x.ref=Hr(m,v,y),x.return=m,x)}function u(m,v,y,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=uo(y,m.mode,x),v.return=m,v):(v=s(v,y.children||[]),v.return=m,v)}function d(m,v,y,x,k){return v===null||v.tag!==7?(v=On(y,m.mode,x,k),v.return=m,v):(v=s(v,y),v.return=m,v)}function h(m,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=lo(""+v,m.mode,y),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ys:return y=$i(v.type,v.key,v.props,null,m.mode,y),y.ref=Hr(m,null,v),y.return=m,y;case ir:return v=uo(v,m.mode,y),v.return=m,v;case Zt:var x=v._init;return h(m,x(v._payload),y)}if(Xr(v)||Mr(v))return v=On(v,m.mode,y,null),v.return=m,v;li(m,v)}return null}function f(m,v,y,x){var k=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:o(m,v,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ys:return y.key===k?l(m,v,y,x):null;case ir:return y.key===k?u(m,v,y,x):null;case Zt:return k=y._init,f(m,v,k(y._payload),x)}if(Xr(y)||Mr(y))return k!==null?null:d(m,v,y,x,null);li(m,y)}return null}function g(m,v,y,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(y)||null,o(v,m,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ys:return m=m.get(x.key===null?y:x.key)||null,l(v,m,x,k);case ir:return m=m.get(x.key===null?y:x.key)||null,u(v,m,x,k);case Zt:var C=x._init;return g(m,v,y,C(x._payload),k)}if(Xr(x)||Mr(x))return m=m.get(y)||null,d(v,m,x,k,null);li(v,x)}return null}function p(m,v,y,x){for(var k=null,C=null,E=v,j=v=0,P=null;E!==null&&j<y.length;j++){E.index>j?(P=E,E=null):P=E.sibling;var T=f(m,E,y[j],x);if(T===null){E===null&&(E=P);break}t&&E&&T.alternate===null&&e(m,E),v=i(T,v,j),C===null?k=T:C.sibling=T,C=T,E=P}if(j===y.length)return n(m,E),ee&&Rn(m,j),k;if(E===null){for(;j<y.length;j++)E=h(m,y[j],x),E!==null&&(v=i(E,v,j),C===null?k=E:C.sibling=E,C=E);return ee&&Rn(m,j),k}for(E=r(m,E);j<y.length;j++)P=g(E,m,j,y[j],x),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?j:P.key),v=i(P,v,j),C===null?k=P:C.sibling=P,C=P);return t&&E.forEach(function(V){return e(m,V)}),ee&&Rn(m,j),k}function w(m,v,y,x){var k=Mr(y);if(typeof k!="function")throw Error(R(150));if(y=k.call(y),y==null)throw Error(R(151));for(var C=k=null,E=v,j=v=0,P=null,T=y.next();E!==null&&!T.done;j++,T=y.next()){E.index>j?(P=E,E=null):P=E.sibling;var V=f(m,E,T.value,x);if(V===null){E===null&&(E=P);break}t&&E&&V.alternate===null&&e(m,E),v=i(V,v,j),C===null?k=V:C.sibling=V,C=V,E=P}if(T.done)return n(m,E),ee&&Rn(m,j),k;if(E===null){for(;!T.done;j++,T=y.next())T=h(m,T.value,x),T!==null&&(v=i(T,v,j),C===null?k=T:C.sibling=T,C=T);return ee&&Rn(m,j),k}for(E=r(m,E);!T.done;j++,T=y.next())T=g(E,m,j,T.value,x),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?j:T.key),v=i(T,v,j),C===null?k=T:C.sibling=T,C=T);return t&&E.forEach(function(F){return e(m,F)}),ee&&Rn(m,j),k}function _(m,v,y,x){if(typeof y=="object"&&y!==null&&y.type===ar&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ys:e:{for(var k=y.key,C=v;C!==null;){if(C.key===k){if(k=y.type,k===ar){if(C.tag===7){n(m,C.sibling),v=s(C,y.props.children),v.return=m,m=v;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zt&&Hc(k)===C.type){n(m,C.sibling),v=s(C,y.props),v.ref=Hr(m,C,y),v.return=m,m=v;break e}n(m,C);break}else e(m,C);C=C.sibling}y.type===ar?(v=On(y.props.children,m.mode,x,y.key),v.return=m,m=v):(x=$i(y.type,y.key,y.props,null,m.mode,x),x.ref=Hr(m,v,y),x.return=m,m=x)}return a(m);case ir:e:{for(C=y.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(m,v.sibling),v=s(v,y.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=uo(y,m.mode,x),v.return=m,m=v}return a(m);case Zt:return C=y._init,_(m,v,C(y._payload),x)}if(Xr(y))return p(m,v,y,x);if(Mr(y))return w(m,v,y,x);li(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(m,v.sibling),v=s(v,y),v.return=m,m=v):(n(m,v),v=lo(y,m.mode,x),v.return=m,m=v),a(m)):n(m,v)}return _}var jr=jf(!0),bf=jf(!1),Qi=xn(null),Ji=null,gr=null,yu=null;function wu(){yu=gr=Ji=null}function Su(t){var e=Qi.current;Z(Qi),t._currentValue=e}function ol(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _r(t,e){Ji=t,yu=gr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fe=!0),t.firstContext=null)}function lt(t){var e=t._currentValue;if(yu!==t)if(t={context:t,memoizedValue:e,next:null},gr===null){if(Ji===null)throw Error(R(308));gr=t,Ji.dependencies={lanes:0,firstContext:t}}else gr=gr.next=t;return e}var $n=null;function _u(t){$n===null?$n=[t]:$n.push(t)}function Rf(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_u(e)):(n.next=s.next,s.next=n),e.interleaved=n,Bt(t,r)}function Bt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var en=!1;function xu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,G&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Bt(t,n)}return s=r.interleaved,s===null?(e.next=e,_u(r)):(e.next=s.next,s.next=e),r.interleaved=e,Bt(t,n)}function bi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}function qc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yi(t,e,n,r){var s=t.updateQueue;en=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,d=u=l=null,o=i;do{var f=o.lane,g=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,w=o;switch(f=e,g=n,w.tag){case 1:if(p=w.payload,typeof p=="function"){h=p.call(g,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=w.payload,f=typeof p=="function"?p.call(g,h,f):p,f==null)break e;h=se({},h,f);break e;case 2:en=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else g={eventTime:g,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);zn|=a,t.lanes=a,t.memoizedState=h}}function Gc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(R(191,s));s.call(r)}}}var zs={},bt=xn(zs),bs=xn(zs),Rs=xn(zs);function In(t){if(t===zs)throw Error(R(174));return t}function ku(t,e){switch(J(Rs,e),J(bs,t),J(bt,zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zo(e,t)}Z(bt),J(bt,e)}function br(){Z(bt),Z(bs),Z(Rs)}function Nf(t){In(Rs.current);var e=In(bt.current),n=zo(e,t.type);e!==n&&(J(bs,t),J(bt,n))}function Cu(t){bs.current===t&&(Z(bt),Z(bs))}var te=xn(0);function Xi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var no=[];function Eu(){for(var t=0;t<no.length;t++)no[t]._workInProgressVersionPrimary=null;no.length=0}var Ri=Gt.ReactCurrentDispatcher,ro=Gt.ReactCurrentBatchConfig,Un=0,ne=null,fe=null,pe=null,Zi=!1,os=!1,Ts=0,Mv=0;function xe(){throw Error(R(321))}function ju(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!St(t[n],e[n]))return!1;return!0}function bu(t,e,n,r,s,i){if(Un=i,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ri.current=t===null||t.memoizedState===null?Bv:Hv,t=n(r,s),os){i=0;do{if(os=!1,Ts=0,25<=i)throw Error(R(301));i+=1,pe=fe=null,e.updateQueue=null,Ri.current=qv,t=n(r,s)}while(os)}if(Ri.current=ea,e=fe!==null&&fe.next!==null,Un=0,pe=fe=ne=null,Zi=!1,e)throw Error(R(300));return t}function Ru(){var t=Ts!==0;return Ts=0,t}function xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?ne.memoizedState=pe=t:pe=pe.next=t,pe}function ut(){if(fe===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=fe.next;var e=pe===null?ne.memoizedState:pe.next;if(e!==null)pe=e,fe=t;else{if(t===null)throw Error(R(310));fe=t,t={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},pe===null?ne.memoizedState=pe=t:pe=pe.next=t}return pe}function Ns(t,e){return typeof e=="function"?e(t):e}function so(t){var e=ut(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var d=u.lane;if((Un&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,ne.lanes|=d,zn|=d}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,St(r,e.memoizedState)||(Fe=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ne.lanes|=i,zn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function io(t){var e=ut(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);St(i,e.memoizedState)||(Fe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Pf(){}function Lf(t,e){var n=ne,r=ut(),s=e(),i=!St(r.memoizedState,s);if(i&&(r.memoizedState=s,Fe=!0),r=r.queue,Tu(Af.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,Ps(9,If.bind(null,n,r,s,e),void 0,null),me===null)throw Error(R(349));Un&30||$f(n,e,s)}return s}function $f(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function If(t,e,n,r){e.value=n,e.getSnapshot=r,Of(e)&&Df(t)}function Af(t,e,n){return n(function(){Of(e)&&Df(t)})}function Of(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!St(t,n)}catch{return!0}}function Df(t){var e=Bt(t,1);e!==null&&yt(e,t,1,-1)}function Wc(t){var e=xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},e.queue=t,t=t.dispatch=Vv.bind(null,ne,t),[e.memoizedState,t]}function Ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ne.updateQueue,e===null?(e={lastEffect:null,stores:null},ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ff(){return ut().memoizedState}function Ti(t,e,n,r){var s=xt();ne.flags|=t,s.memoizedState=Ps(1|e,n,void 0,r===void 0?null:r)}function wa(t,e,n,r){var s=ut();r=r===void 0?null:r;var i=void 0;if(fe!==null){var a=fe.memoizedState;if(i=a.destroy,r!==null&&ju(r,a.deps)){s.memoizedState=Ps(e,n,i,r);return}}ne.flags|=t,s.memoizedState=Ps(1|e,n,i,r)}function Kc(t,e){return Ti(8390656,8,t,e)}function Tu(t,e){return wa(2048,8,t,e)}function Mf(t,e){return wa(4,2,t,e)}function Uf(t,e){return wa(4,4,t,e)}function zf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vf(t,e,n){return n=n!=null?n.concat([t]):null,wa(4,4,zf.bind(null,e,t),n)}function Nu(){}function Bf(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ju(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Hf(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ju(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qf(t,e,n){return Un&21?(St(n,e)||(n=Qh(),ne.lanes|=n,zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fe=!0),t.memoizedState=n)}function Uv(t,e){var n=K;K=n!==0&&4>n?n:4,t(!0);var r=ro.transition;ro.transition={};try{t(!1),e()}finally{K=n,ro.transition=r}}function Gf(){return ut().memoizedState}function zv(t,e,n){var r=mn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wf(t))Kf(e,n);else if(n=Rf(t,e,n,r),n!==null){var s=Ne();yt(n,t,r,s),Qf(n,e,r)}}function Vv(t,e,n){var r=mn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wf(t))Kf(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,St(o,a)){var l=e.interleaved;l===null?(s.next=s,_u(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Rf(t,e,s,r),n!==null&&(s=Ne(),yt(n,t,r,s),Qf(n,e,r))}}function Wf(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function Kf(t,e){os=Zi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ou(t,n)}}var ea={readContext:lt,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},Bv={readContext:lt,useCallback:function(t,e){return xt().memoizedState=[t,e===void 0?null:e],t},useContext:lt,useEffect:Kc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ti(4194308,4,zf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ti(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ti(4,2,t,e)},useMemo:function(t,e){var n=xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zv.bind(null,ne,t),[r.memoizedState,t]},useRef:function(t){var e=xt();return t={current:t},e.memoizedState=t},useState:Wc,useDebugValue:Nu,useDeferredValue:function(t){return xt().memoizedState=t},useTransition:function(){var t=Wc(!1),e=t[0];return t=Uv.bind(null,t[1]),xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ne,s=xt();if(ee){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),me===null)throw Error(R(349));Un&30||$f(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Kc(Af.bind(null,r,i,t),[t]),r.flags|=2048,Ps(9,If.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xt(),e=me.identifierPrefix;if(ee){var n=Ft,r=Dt;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ts++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Mv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Hv={readContext:lt,useCallback:Bf,useContext:lt,useEffect:Tu,useImperativeHandle:Vf,useInsertionEffect:Mf,useLayoutEffect:Uf,useMemo:Hf,useReducer:so,useRef:Ff,useState:function(){return so(Ns)},useDebugValue:Nu,useDeferredValue:function(t){var e=ut();return qf(e,fe.memoizedState,t)},useTransition:function(){var t=so(Ns)[0],e=ut().memoizedState;return[t,e]},useMutableSource:Pf,useSyncExternalStore:Lf,useId:Gf,unstable_isNewReconciler:!1},qv={readContext:lt,useCallback:Bf,useContext:lt,useEffect:Tu,useImperativeHandle:Vf,useInsertionEffect:Mf,useLayoutEffect:Uf,useMemo:Hf,useReducer:io,useRef:Ff,useState:function(){return io(Ns)},useDebugValue:Nu,useDeferredValue:function(t){var e=ut();return fe===null?e.memoizedState=t:qf(e,fe.memoizedState,t)},useTransition:function(){var t=io(Ns)[0],e=ut().memoizedState;return[t,e]},useMutableSource:Pf,useSyncExternalStore:Lf,useId:Gf,unstable_isNewReconciler:!1};function ft(t,e){if(t&&t.defaultProps){e=se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ll(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sa={isMounted:function(t){return(t=t._reactInternals)?Hn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ne(),s=mn(t),i=Mt(r,s);i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(yt(e,t,s,r),bi(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ne(),s=mn(t),i=Mt(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gn(t,i,s),e!==null&&(yt(e,t,s,r),bi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),r=mn(t),s=Mt(n,r);s.tag=2,e!=null&&(s.callback=e),e=gn(t,s,r),e!==null&&(yt(e,t,r,n),bi(e,t,r))}};function Qc(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ks(n,r)||!ks(s,i):!0}function Jf(t,e,n){var r=!1,s=wn,i=e.contextType;return typeof i=="object"&&i!==null?i=lt(i):(s=Ue(e)?Fn:je.current,r=e.contextTypes,i=(r=r!=null)?Cr(t,s):wn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sa.enqueueReplaceState(e,e.state,null)}function ul(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xu(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=lt(i):(i=Ue(e)?Fn:je.current,s.context=Cr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ll(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sa.enqueueReplaceState(s,s.state,null),Yi(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Rr(t,e){try{var n="",r=e;do n+=wm(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ao(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gv=typeof WeakMap=="function"?WeakMap:Map;function Yf(t,e,n){n=Mt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){na||(na=!0,Sl=r),cl(t,e)},n}function Xf(t,e,n){n=Mt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cl(t,e),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Yc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gv;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ay.bind(null,t,e,n),e.then(t,t))}function Xc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zc(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mt(-1,1),e.tag=2,gn(n,e,1))),n.lanes|=1),t)}var Wv=Gt.ReactCurrentOwner,Fe=!1;function Te(t,e,n,r){e.child=t===null?bf(e,null,n,r):jr(e,t.child,n,r)}function ed(t,e,n,r,s){n=n.render;var i=e.ref;return _r(e,s),r=bu(t,e,n,r,i,s),n=Ru(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ht(t,e,s)):(ee&&n&&pu(e),e.flags|=1,Te(t,e,r,s),e.child)}function td(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Zf(t,e,i,r,s)):(t=$i(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ks,n(a,r)&&t.ref===e.ref)return Ht(t,e,s)}return e.flags|=1,t=vn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Zf(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ks(i,r)&&t.ref===e.ref)if(Fe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fe=!0);else return e.lanes=t.lanes,Ht(t,e,s)}return dl(t,e,n,r,s)}function eg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(mr,qe),qe|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(mr,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,J(mr,qe),qe|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,J(mr,qe),qe|=r;return Te(t,e,s,n),e.child}function tg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dl(t,e,n,r,s){var i=Ue(n)?Fn:je.current;return i=Cr(e,i),_r(e,s),n=bu(t,e,n,r,i,s),r=Ru(),t!==null&&!Fe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ht(t,e,s)):(ee&&r&&pu(e),e.flags|=1,Te(t,e,n,s),e.child)}function nd(t,e,n,r,s){if(Ue(n)){var i=!0;Gi(e)}else i=!1;if(_r(e,s),e.stateNode===null)Ni(t,e),Jf(e,n,r),ul(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=lt(u):(u=Ue(n)?Fn:je.current,u=Cr(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Jc(e,a,r,u),en=!1;var f=e.memoizedState;a.state=f,Yi(e,r,a,s),l=e.memoizedState,o!==r||f!==l||Me.current||en?(typeof d=="function"&&(ll(e,n,d,r),l=e.memoizedState),(o=en||Qc(e,n,o,r,f,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Tf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ft(e.type,o),a.props=u,h=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=lt(l):(l=Ue(n)?Fn:je.current,l=Cr(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&Jc(e,a,r,l),en=!1,f=e.memoizedState,a.state=f,Yi(e,r,a,s);var p=e.memoizedState;o!==h||f!==p||Me.current||en?(typeof g=="function"&&(ll(e,n,g,r),p=e.memoizedState),(u=en||Qc(e,n,u,r,f,p,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return hl(t,e,n,r,i,s)}function hl(t,e,n,r,s,i){tg(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&zc(e,n,!1),Ht(t,e,i);r=e.stateNode,Wv.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=jr(e,t.child,null,i),e.child=jr(e,null,o,i)):Te(t,e,o,i),e.memoizedState=r.state,s&&zc(e,n,!0),e.child}function ng(t){var e=t.stateNode;e.pendingContext?Uc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uc(t,e.context,!1),ku(t,e.containerInfo)}function rd(t,e,n,r,s){return Er(),vu(s),e.flags|=256,Te(t,e,n,r),e.child}var fl={dehydrated:null,treeContext:null,retryLane:0};function gl(t){return{baseLanes:t,cachePool:null,transitions:null}}function rg(t,e,n){var r=e.pendingProps,s=te.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),J(te,s&1),t===null)return al(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ka(a,r,0,null),t=On(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gl(n),e.memoizedState=fl,t):Pu(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Kv(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=vn(o,i):(i=On(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?gl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=fl,r}return i=t.child,t=i.sibling,r=vn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pu(t,e){return e=ka({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ui(t,e,n,r){return r!==null&&vu(r),jr(e,t.child,null,n),t=Pu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Kv(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=ao(Error(R(422))),ui(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ka({mode:"visible",children:r.children},s,0,null),i=On(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&jr(e,t.child,null,a),e.child.memoizedState=gl(a),e.memoizedState=fl,i);if(!(e.mode&1))return ui(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(R(419)),r=ao(i,r,void 0),ui(t,e,a,r)}if(o=(a&t.childLanes)!==0,Fe||o){if(r=me,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bt(t,s),yt(r,t,s,-1))}return Du(),r=ao(Error(R(421))),ui(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oy.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ge=fn(s.nextSibling),We=e,ee=!0,mt=null,t!==null&&(rt[st++]=Dt,rt[st++]=Ft,rt[st++]=Mn,Dt=t.id,Ft=t.overflow,Mn=e),e=Pu(e,r.children),e.flags|=4096,e)}function sd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ol(t.return,e,n)}function oo(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Te(t,e,r.children,n),r=te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sd(t,n,e);else if(t.tag===19)sd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(J(te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),oo(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}oo(e,!0,n,null,i);break;case"together":oo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ni(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Qv(t,e,n){switch(e.tag){case 3:ng(e),Er();break;case 5:Nf(e);break;case 1:Ue(e.type)&&Gi(e);break;case 4:ku(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;J(Qi,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(J(te,te.current&1),e.flags|=128,null):n&e.child.childLanes?rg(t,e,n):(J(te,te.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);J(te,te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(te,te.current),r)break;return null;case 22:case 23:return e.lanes=0,eg(t,e,n)}return Ht(t,e,n)}var ig,pl,ag,og;ig=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pl=function(){};ag=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,In(bt.current);var i=null;switch(n){case"input":s=Do(t,s),r=Do(t,r),i=[];break;case"select":s=se({},s,{value:void 0}),r=se({},r,{value:void 0}),i=[];break;case"textarea":s=Uo(t,s),r=Uo(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hi)}Vo(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ms.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ms.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&X("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};og=function(t,e,n,r){n!==r&&(e.flags|=4)};function qr(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Jv(t,e,n){var r=e.pendingProps;switch(mu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return Ue(e.type)&&qi(),ke(e),null;case 3:return r=e.stateNode,br(),Z(Me),Z(je),Eu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mt!==null&&(kl(mt),mt=null))),pl(t,e),ke(e),null;case 5:Cu(e);var s=In(Rs.current);if(n=e.type,t!==null&&e.stateNode!=null)ag(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return ke(e),null}if(t=In(bt.current),oi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ct]=e,r[js]=i,t=(e.mode&1)!==0,n){case"dialog":X("cancel",r),X("close",r);break;case"iframe":case"object":case"embed":X("load",r);break;case"video":case"audio":for(s=0;s<es.length;s++)X(es[s],r);break;case"source":X("error",r);break;case"img":case"image":case"link":X("error",r),X("load",r);break;case"details":X("toggle",r);break;case"input":fc(r,i),X("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},X("invalid",r);break;case"textarea":pc(r,i),X("invalid",r)}Vo(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&ai(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&ai(r.textContent,o,t),s=["children",""+o]):ms.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&X("scroll",r)}switch(n){case"input":Xs(r),gc(r,i,!0);break;case"textarea":Xs(r),mc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hi)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ih(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Ct]=e,t[js]=r,ig(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bo(n,r),n){case"dialog":X("cancel",t),X("close",t),s=r;break;case"iframe":case"object":case"embed":X("load",t),s=r;break;case"video":case"audio":for(s=0;s<es.length;s++)X(es[s],t);s=r;break;case"source":X("error",t),s=r;break;case"img":case"image":case"link":X("error",t),X("load",t),s=r;break;case"details":X("toggle",t),s=r;break;case"input":fc(t,r),s=Do(t,r),X("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=se({},r,{value:void 0}),X("invalid",t);break;case"textarea":pc(t,r),s=Uo(t,r),X("invalid",t);break;default:s=r}Vo(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?Dh(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ah(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vs(t,l):typeof l=="number"&&vs(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ms.hasOwnProperty(i)?l!=null&&i==="onScroll"&&X("scroll",t):l!=null&&tu(t,i,l,a))}switch(n){case"input":Xs(t),gc(t,r,!1);break;case"textarea":Xs(t),mc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?vr(t,!!r.multiple,i,!1):r.defaultValue!=null&&vr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)og(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=In(Rs.current),In(bt.current),oi(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ct]=e,(i=r.nodeValue!==n)&&(t=We,t!==null))switch(t.tag){case 3:ai(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ai(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=e,e.stateNode=r}return ke(e),null;case 13:if(Z(te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&Ge!==null&&e.mode&1&&!(e.flags&128))Ef(),Er(),e.flags|=98560,i=!1;else if(i=oi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Ct]=e}else Er(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),i=!1}else mt!==null&&(kl(mt),mt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||te.current&1?ge===0&&(ge=3):Du())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return br(),pl(t,e),t===null&&Cs(e.stateNode.containerInfo),ke(e),null;case 10:return Su(e.type._context),ke(e),null;case 17:return Ue(e.type)&&qi(),ke(e),null;case 19:if(Z(te),i=e.memoizedState,i===null)return ke(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)qr(i,!1);else{if(ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Xi(t),a!==null){for(e.flags|=128,qr(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(te,te.current&1|2),e.child}t=t.sibling}i.tail!==null&&le()>Tr&&(e.flags|=128,r=!0,qr(i,!1),e.lanes=4194304)}else{if(!r)if(t=Xi(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ee)return ke(e),null}else 2*le()-i.renderingStartTime>Tr&&n!==1073741824&&(e.flags|=128,r=!0,qr(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,n=te.current,J(te,r?n&1|2:n&1),e):(ke(e),null);case 22:case 23:return Ou(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qe&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Yv(t,e){switch(mu(e),e.tag){case 1:return Ue(e.type)&&qi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return br(),Z(Me),Z(je),Eu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cu(e),null;case 13:if(Z(te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));Er()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(te),null;case 4:return br(),null;case 10:return Su(e.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var ci=!1,Ee=!1,Xv=typeof WeakSet=="function"?WeakSet:Set,$=null;function pr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ae(t,e,r)}else n.current=null}function ml(t,e,n){try{n()}catch(r){ae(t,e,r)}}var id=!1;function Zv(t,e){if(Zo=zi,t=hf(),gu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===s&&(o=a),f===i&&++d===r&&(l=a),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(el={focusedElem:t,selectionRange:n},zi=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var w=p.memoizedProps,_=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:ft(e.type,w),_);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(x){ae(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return p=id,id=!1,p}function ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ml(e,n,i)}s=s.next}while(s!==r)}}function _a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lg(t){var e=t.alternate;e!==null&&(t.alternate=null,lg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ct],delete e[js],delete e[rl],delete e[Av],delete e[Ov])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ug(t){return t.tag===5||t.tag===3||t.tag===4}function ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ug(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hi));else if(r!==4&&(t=t.child,t!==null))for(yl(t,e,n),t=t.sibling;t!==null;)yl(t,e,n),t=t.sibling}function wl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wl(t,e,n),t=t.sibling;t!==null;)wl(t,e,n),t=t.sibling}var ye=null,gt=!1;function Qt(t,e,n){for(n=n.child;n!==null;)cg(t,e,n),n=n.sibling}function cg(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(fa,n)}catch{}switch(n.tag){case 5:Ee||pr(n,e);case 6:var r=ye,s=gt;ye=null,Qt(t,e,n),ye=r,gt=s,ye!==null&&(gt?(t=ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ye.removeChild(n.stateNode));break;case 18:ye!==null&&(gt?(t=ye,n=n.stateNode,t.nodeType===8?eo(t.parentNode,n):t.nodeType===1&&eo(t,n),_s(t)):eo(ye,n.stateNode));break;case 4:r=ye,s=gt,ye=n.stateNode.containerInfo,gt=!0,Qt(t,e,n),ye=r,gt=s;break;case 0:case 11:case 14:case 15:if(!Ee&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ml(n,e,a),s=s.next}while(s!==r)}Qt(t,e,n);break;case 1:if(!Ee&&(pr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ae(n,e,o)}Qt(t,e,n);break;case 21:Qt(t,e,n);break;case 22:n.mode&1?(Ee=(r=Ee)||n.memoizedState!==null,Qt(t,e,n),Ee=r):Qt(t,e,n);break;default:Qt(t,e,n)}}function od(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Xv),e.forEach(function(r){var s=ly.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ct(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ye=o.stateNode,gt=!1;break e;case 3:ye=o.stateNode.containerInfo,gt=!0;break e;case 4:ye=o.stateNode.containerInfo,gt=!0;break e}o=o.return}if(ye===null)throw Error(R(160));cg(i,a,s),ye=null,gt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){ae(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dg(e,t),e=e.sibling}function dg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ct(e,t),_t(t),r&4){try{ls(3,t,t.return),_a(3,t)}catch(w){ae(t,t.return,w)}try{ls(5,t,t.return)}catch(w){ae(t,t.return,w)}}break;case 1:ct(e,t),_t(t),r&512&&n!==null&&pr(n,n.return);break;case 5:if(ct(e,t),_t(t),r&512&&n!==null&&pr(n,n.return),t.flags&32){var s=t.stateNode;try{vs(s,"")}catch(w){ae(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Lh(s,i),Bo(o,a);var u=Bo(o,i);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?Dh(s,h):d==="dangerouslySetInnerHTML"?Ah(s,h):d==="children"?vs(s,h):tu(s,d,h,u)}switch(o){case"input":Fo(s,i);break;case"textarea":$h(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?vr(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?vr(s,!!i.multiple,i.defaultValue,!0):vr(s,!!i.multiple,i.multiple?[]:"",!1))}s[js]=i}catch(w){ae(t,t.return,w)}}break;case 6:if(ct(e,t),_t(t),r&4){if(t.stateNode===null)throw Error(R(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ae(t,t.return,w)}}break;case 3:if(ct(e,t),_t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_s(e.containerInfo)}catch(w){ae(t,t.return,w)}break;case 4:ct(e,t),_t(t);break;case 13:ct(e,t),_t(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Iu=le())),r&4&&od(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ee=(u=Ee)||d,ct(e,t),Ee=u):ct(e,t),_t(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(h=$=d;$!==null;){switch(f=$,g=f.child,f.tag){case 0:case 11:case 14:case 15:ls(4,f,f.return);break;case 1:pr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(w){ae(r,n,w)}}break;case 5:pr(f,f.return);break;case 22:if(f.memoizedState!==null){ud(h);continue}}g!==null?(g.return=f,$=g):ud(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Oh("display",a))}catch(w){ae(t,t.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){ae(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ct(e,t),_t(t),r&4&&od(t);break;case 21:break;default:ct(e,t),_t(t)}}function _t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ug(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vs(s,""),r.flags&=-33);var i=ad(t);wl(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=ad(t);yl(t,o,a);break;default:throw Error(R(161))}}catch(l){ae(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ey(t,e,n){$=t,hg(t)}function hg(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var s=$,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ci;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Ee;o=ci;var u=Ee;if(ci=a,(Ee=l)&&!u)for($=s;$!==null;)a=$,l=a.child,a.tag===22&&a.memoizedState!==null?cd(s):l!==null?(l.return=a,$=l):cd(s);for(;i!==null;)$=i,hg(i),i=i.sibling;$=s,ci=o,Ee=u}ld(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$=i):ld(t)}}function ld(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ee||_a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ee)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Gc(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gc(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_s(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ee||e.flags&512&&vl(e)}catch(f){ae(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function ud(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function cd(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_a(4,e)}catch(l){ae(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ae(e,s,l)}}var i=e.return;try{vl(e)}catch(l){ae(e,i,l)}break;case 5:var a=e.return;try{vl(e)}catch(l){ae(e,a,l)}}}catch(l){ae(e,e.return,l)}if(e===t){$=null;break}var o=e.sibling;if(o!==null){o.return=e.return,$=o;break}$=e.return}}var ty=Math.ceil,ta=Gt.ReactCurrentDispatcher,Lu=Gt.ReactCurrentOwner,at=Gt.ReactCurrentBatchConfig,G=0,me=null,ce=null,we=0,qe=0,mr=xn(0),ge=0,Ls=null,zn=0,xa=0,$u=0,us=null,Oe=null,Iu=0,Tr=1/0,$t=null,na=!1,Sl=null,pn=null,di=!1,an=null,ra=0,cs=0,_l=null,Pi=-1,Li=0;function Ne(){return G&6?le():Pi!==-1?Pi:Pi=le()}function mn(t){return t.mode&1?G&2&&we!==0?we&-we:Fv.transition!==null?(Li===0&&(Li=Qh()),Li):(t=K,t!==0||(t=window.event,t=t===void 0?16:nf(t.type)),t):1}function yt(t,e,n,r){if(50<cs)throw cs=0,_l=null,Error(R(185));Fs(t,n,r),(!(G&2)||t!==me)&&(t===me&&(!(G&2)&&(xa|=n),ge===4&&nn(t,we)),ze(t,r),n===1&&G===0&&!(e.mode&1)&&(Tr=le()+500,ya&&kn()))}function ze(t,e){var n=t.callbackNode;Fm(t,e);var r=Ui(t,t===me?we:0);if(r===0)n!==null&&wc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wc(n),e===1)t.tag===0?Dv(dd.bind(null,t)):xf(dd.bind(null,t)),$v(function(){!(G&6)&&kn()}),n=null;else{switch(Jh(r)){case 1:n=au;break;case 4:n=Wh;break;case 16:n=Mi;break;case 536870912:n=Kh;break;default:n=Mi}n=Sg(n,fg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fg(t,e){if(Pi=-1,Li=0,G&6)throw Error(R(327));var n=t.callbackNode;if(xr()&&t.callbackNode!==n)return null;var r=Ui(t,t===me?we:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sa(t,r);else{e=r;var s=G;G|=2;var i=pg();(me!==t||we!==e)&&($t=null,Tr=le()+500,An(t,e));do try{sy();break}catch(o){gg(t,o)}while(!0);wu(),ta.current=i,G=s,ce!==null?e=0:(me=null,we=0,e=ge)}if(e!==0){if(e===2&&(s=Ko(t),s!==0&&(r=s,e=xl(t,s))),e===1)throw n=Ls,An(t,0),nn(t,r),ze(t,le()),n;if(e===6)nn(t,r);else{if(s=t.current.alternate,!(r&30)&&!ny(s)&&(e=sa(t,r),e===2&&(i=Ko(t),i!==0&&(r=i,e=xl(t,i))),e===1))throw n=Ls,An(t,0),nn(t,r),ze(t,le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:Tn(t,Oe,$t);break;case 3:if(nn(t,r),(r&130023424)===r&&(e=Iu+500-le(),10<e)){if(Ui(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ne(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nl(Tn.bind(null,t,Oe,$t),e);break}Tn(t,Oe,$t);break;case 4:if(nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-vt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ty(r/1960))-r,10<r){t.timeoutHandle=nl(Tn.bind(null,t,Oe,$t),r);break}Tn(t,Oe,$t);break;case 5:Tn(t,Oe,$t);break;default:throw Error(R(329))}}}return ze(t,le()),t.callbackNode===n?fg.bind(null,t):null}function xl(t,e){var n=us;return t.current.memoizedState.isDehydrated&&(An(t,e).flags|=256),t=sa(t,e),t!==2&&(e=Oe,Oe=n,e!==null&&kl(e)),t}function kl(t){Oe===null?Oe=t:Oe.push.apply(Oe,t)}function ny(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!St(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function nn(t,e){for(e&=~$u,e&=~xa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function dd(t){if(G&6)throw Error(R(327));xr();var e=Ui(t,0);if(!(e&1))return ze(t,le()),null;var n=sa(t,e);if(t.tag!==0&&n===2){var r=Ko(t);r!==0&&(e=r,n=xl(t,r))}if(n===1)throw n=Ls,An(t,0),nn(t,e),ze(t,le()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Tn(t,Oe,$t),ze(t,le()),null}function Au(t,e){var n=G;G|=1;try{return t(e)}finally{G=n,G===0&&(Tr=le()+500,ya&&kn())}}function Vn(t){an!==null&&an.tag===0&&!(G&6)&&xr();var e=G;G|=1;var n=at.transition,r=K;try{if(at.transition=null,K=1,t)return t()}finally{K=r,at.transition=n,G=e,!(G&6)&&kn()}}function Ou(){qe=mr.current,Z(mr)}function An(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lv(n)),ce!==null)for(n=ce.return;n!==null;){var r=n;switch(mu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qi();break;case 3:br(),Z(Me),Z(je),Eu();break;case 5:Cu(r);break;case 4:br();break;case 13:Z(te);break;case 19:Z(te);break;case 10:Su(r.type._context);break;case 22:case 23:Ou()}n=n.return}if(me=t,ce=t=vn(t.current,null),we=qe=e,ge=0,Ls=null,$u=xa=zn=0,Oe=us=null,$n!==null){for(e=0;e<$n.length;e++)if(n=$n[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}$n=null}return t}function gg(t,e){do{var n=ce;try{if(wu(),Ri.current=ea,Zi){for(var r=ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zi=!1}if(Un=0,pe=fe=ne=null,os=!1,Ts=0,Lu.current=null,n===null||n.return===null){ge=1,Ls=e,ce=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=we,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Xc(a);if(g!==null){g.flags&=-257,Zc(g,a,o,i,e),g.mode&1&&Yc(i,u,e),e=g,l=u;var p=e.updateQueue;if(p===null){var w=new Set;w.add(l),e.updateQueue=w}else p.add(l);break e}else{if(!(e&1)){Yc(i,u,e),Du();break e}l=Error(R(426))}}else if(ee&&o.mode&1){var _=Xc(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Zc(_,a,o,i,e),vu(Rr(l,o));break e}}i=l=Rr(l,o),ge!==4&&(ge=2),us===null?us=[i]:us.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Yf(i,l,e);qc(i,m);break e;case 1:o=l;var v=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(pn===null||!pn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=Xf(i,o,e);qc(i,x);break e}}i=i.return}while(i!==null)}vg(n)}catch(k){e=k,ce===n&&n!==null&&(ce=n=n.return);continue}break}while(!0)}function pg(){var t=ta.current;return ta.current=ea,t===null?ea:t}function Du(){(ge===0||ge===3||ge===2)&&(ge=4),me===null||!(zn&268435455)&&!(xa&268435455)||nn(me,we)}function sa(t,e){var n=G;G|=2;var r=pg();(me!==t||we!==e)&&($t=null,An(t,e));do try{ry();break}catch(s){gg(t,s)}while(!0);if(wu(),G=n,ta.current=r,ce!==null)throw Error(R(261));return me=null,we=0,ge}function ry(){for(;ce!==null;)mg(ce)}function sy(){for(;ce!==null&&!Tm();)mg(ce)}function mg(t){var e=wg(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?vg(t):ce=e,Lu.current=null}function vg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yv(n,e),n!==null){n.flags&=32767,ce=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ge=6,ce=null;return}}else if(n=Jv(n,e,qe),n!==null){ce=n;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);ge===0&&(ge=5)}function Tn(t,e,n){var r=K,s=at.transition;try{at.transition=null,K=1,iy(t,e,n,r)}finally{at.transition=s,K=r}return null}function iy(t,e,n,r){do xr();while(an!==null);if(G&6)throw Error(R(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mm(t,i),t===me&&(ce=me=null,we=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||di||(di=!0,Sg(Mi,function(){return xr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=at.transition,at.transition=null;var a=K;K=1;var o=G;G|=4,Lu.current=null,Zv(t,n),dg(n,t),Ev(el),zi=!!Zo,el=Zo=null,t.current=n,ey(n),Nm(),G=o,K=a,at.transition=i}else t.current=n;if(di&&(di=!1,an=t,ra=s),i=t.pendingLanes,i===0&&(pn=null),$m(n.stateNode),ze(t,le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(na)throw na=!1,t=Sl,Sl=null,t;return ra&1&&t.tag!==0&&xr(),i=t.pendingLanes,i&1?t===_l?cs++:(cs=0,_l=t):cs=0,kn(),null}function xr(){if(an!==null){var t=Jh(ra),e=at.transition,n=K;try{if(at.transition=null,K=16>t?16:t,an===null)var r=!1;else{if(t=an,an=null,ra=0,G&6)throw Error(R(331));var s=G;for(G|=4,$=t.current;$!==null;){var i=$,a=i.child;if($.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:ls(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var f=d.sibling,g=d.return;if(lg(d),d===u){$=null;break}if(f!==null){f.return=g,$=f;break}$=g}}}var p=i.alternate;if(p!==null){var w=p.child;if(w!==null){p.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ls(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,$=m;break e}$=i.return}}var v=t.current;for($=v;$!==null;){a=$;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,$=y;else e:for(a=v;$!==null;){if(o=$,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:_a(9,o)}}catch(k){ae(o,o.return,k)}if(o===a){$=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,$=x;break e}$=o.return}}if(G=s,kn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(fa,t)}catch{}r=!0}return r}finally{K=n,at.transition=e}}return!1}function hd(t,e,n){e=Rr(n,e),e=Yf(t,e,1),t=gn(t,e,1),e=Ne(),t!==null&&(Fs(t,1,e),ze(t,e))}function ae(t,e,n){if(t.tag===3)hd(t,t,n);else for(;e!==null;){if(e.tag===3){hd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){t=Rr(n,t),t=Xf(e,t,1),e=gn(e,t,1),t=Ne(),e!==null&&(Fs(e,1,t),ze(e,t));break}}e=e.return}}function ay(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,me===t&&(we&n)===n&&(ge===4||ge===3&&(we&130023424)===we&&500>le()-Iu?An(t,0):$u|=n),ze(t,e)}function yg(t,e){e===0&&(t.mode&1?(e=ti,ti<<=1,!(ti&130023424)&&(ti=4194304)):e=1);var n=Ne();t=Bt(t,e),t!==null&&(Fs(t,e,n),ze(t,n))}function oy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yg(t,n)}function ly(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),yg(t,n)}var wg;wg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Me.current)Fe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fe=!1,Qv(t,e,n);Fe=!!(t.flags&131072)}else Fe=!1,ee&&e.flags&1048576&&kf(e,Ki,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ni(t,e),t=e.pendingProps;var s=Cr(e,je.current);_r(e,n),s=bu(null,e,r,t,s,n);var i=Ru();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(i=!0,Gi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xu(e),s.updater=Sa,e.stateNode=s,s._reactInternals=e,ul(e,r,t,n),e=hl(null,e,r,!0,i,n)):(e.tag=0,ee&&i&&pu(e),Te(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ni(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cy(r),t=ft(r,t),s){case 0:e=dl(null,e,r,t,n);break e;case 1:e=nd(null,e,r,t,n);break e;case 11:e=ed(null,e,r,t,n);break e;case 14:e=td(null,e,r,ft(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),dl(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),nd(t,e,r,s,n);case 3:e:{if(ng(e),t===null)throw Error(R(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tf(t,e),Yi(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Rr(Error(R(423)),e),e=rd(t,e,r,n,s);break e}else if(r!==s){s=Rr(Error(R(424)),e),e=rd(t,e,r,n,s);break e}else for(Ge=fn(e.stateNode.containerInfo.firstChild),We=e,ee=!0,mt=null,n=bf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Er(),r===s){e=Ht(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return Nf(e),t===null&&al(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,tl(r,s)?a=null:i!==null&&tl(r,i)&&(e.flags|=32),tg(t,e),Te(t,e,a,n),e.child;case 6:return t===null&&al(e),null;case 13:return rg(t,e,n);case 4:return ku(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jr(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),ed(t,e,r,s,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,J(Qi,r._currentValue),r._currentValue=a,i!==null)if(St(i.value,a)){if(i.children===s.children&&!Me.current){e=Ht(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Mt(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ol(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(R(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),ol(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Te(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_r(e,n),s=lt(s),r=r(s),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,s=ft(r,e.pendingProps),s=ft(r.type,s),td(t,e,r,s,n);case 15:return Zf(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),Ni(t,e),e.tag=1,Ue(r)?(t=!0,Gi(e)):t=!1,_r(e,n),Jf(e,r,s),ul(e,r,s,n),hl(null,e,r,!0,t,n);case 19:return sg(t,e,n);case 22:return eg(t,e,n)}throw Error(R(156,e.tag))};function Sg(t,e){return Gh(t,e)}function uy(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,e,n,r){return new uy(t,e,n,r)}function Fu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cy(t){if(typeof t=="function")return Fu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ru)return 11;if(t===su)return 14}return 2}function vn(t,e){var n=t.alternate;return n===null?(n=it(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $i(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Fu(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ar:return On(n.children,s,i,e);case nu:a=8,s|=8;break;case $o:return t=it(12,n,e,s|2),t.elementType=$o,t.lanes=i,t;case Io:return t=it(13,n,e,s),t.elementType=Io,t.lanes=i,t;case Ao:return t=it(19,n,e,s),t.elementType=Ao,t.lanes=i,t;case Th:return ka(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bh:a=10;break e;case Rh:a=9;break e;case ru:a=11;break e;case su:a=14;break e;case Zt:a=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=it(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function On(t,e,n,r){return t=it(7,t,r,e),t.lanes=n,t}function ka(t,e,n,r){return t=it(22,t,r,e),t.elementType=Th,t.lanes=n,t.stateNode={isHidden:!1},t}function lo(t,e,n){return t=it(6,t,null,e),t.lanes=n,t}function uo(t,e,n){return e=it(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dy(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ba(0),this.expirationTimes=Ba(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mu(t,e,n,r,s,i,a,o,l){return t=new dy(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=it(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xu(i),t}function hy(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _g(t){if(!t)return wn;t=t._reactInternals;e:{if(Hn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Ue(n))return _f(t,n,e)}return e}function xg(t,e,n,r,s,i,a,o,l){return t=Mu(n,r,!0,t,s,i,a,o,l),t.context=_g(null),n=t.current,r=Ne(),s=mn(n),i=Mt(r,s),i.callback=e??null,gn(n,i,s),t.current.lanes=s,Fs(t,s,r),ze(t,r),t}function Ca(t,e,n,r){var s=e.current,i=Ne(),a=mn(s);return n=_g(n),e.context===null?e.context=n:e.pendingContext=n,e=Mt(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gn(s,e,a),t!==null&&(yt(t,s,a,i),bi(t,s,a)),a}function ia(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uu(t,e){fd(t,e),(t=t.alternate)&&fd(t,e)}function fy(){return null}var kg=typeof reportError=="function"?reportError:function(t){console.error(t)};function zu(t){this._internalRoot=t}Ea.prototype.render=zu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Ca(t,e,null,null)};Ea.prototype.unmount=zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vn(function(){Ca(null,t,null,null)}),e[Vt]=null}};function Ea(t){this._internalRoot=t}Ea.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<tn.length&&e!==0&&e<tn[n].priority;n++);tn.splice(n,0,t),n===0&&tf(t)}};function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ja(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gd(){}function gy(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ia(a);i.call(u)}}var a=xg(e,r,t,0,null,!1,!1,"",gd);return t._reactRootContainer=a,t[Vt]=a.current,Cs(t.nodeType===8?t.parentNode:t),Vn(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=ia(l);o.call(u)}}var l=Mu(t,0,!1,null,null,!1,!1,"",gd);return t._reactRootContainer=l,t[Vt]=l.current,Cs(t.nodeType===8?t.parentNode:t),Vn(function(){Ca(e,l,n,r)}),l}function ba(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=ia(a);o.call(l)}}Ca(e,a,t,s)}else a=gy(n,e,t,s,r);return ia(a)}Yh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zr(e.pendingLanes);n!==0&&(ou(e,n|1),ze(e,le()),!(G&6)&&(Tr=le()+500,kn()))}break;case 13:Vn(function(){var r=Bt(t,1);if(r!==null){var s=Ne();yt(r,t,1,s)}}),Uu(t,1)}};lu=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var n=Ne();yt(e,t,134217728,n)}Uu(t,134217728)}};Xh=function(t){if(t.tag===13){var e=mn(t),n=Bt(t,e);if(n!==null){var r=Ne();yt(n,t,e,r)}Uu(t,e)}};Zh=function(){return K};ef=function(t,e){var n=K;try{return K=t,e()}finally{K=n}};qo=function(t,e,n){switch(e){case"input":if(Fo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=va(r);if(!s)throw Error(R(90));Ph(r),Fo(r,s)}}}break;case"textarea":$h(t,n);break;case"select":e=n.value,e!=null&&vr(t,!!n.multiple,e,!1)}};Uh=Au;zh=Vn;var py={usingClientEntryPoint:!1,Events:[Us,cr,va,Fh,Mh,Au]},Gr={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},my={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hh(t),t===null?null:t.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||fy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{fa=hi.inject(my),jt=hi}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=py;Je.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(e))throw Error(R(200));return hy(t,e,null,n)};Je.createRoot=function(t,e){if(!Vu(t))throw Error(R(299));var n=!1,r="",s=kg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mu(t,1,!1,null,null,n,!1,r,s),t[Vt]=e.current,Cs(t.nodeType===8?t.parentNode:t),new zu(e)};Je.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Hh(e),t=t===null?null:t.stateNode,t};Je.flushSync=function(t){return Vn(t)};Je.hydrate=function(t,e,n){if(!ja(e))throw Error(R(200));return ba(null,t,e,!0,n)};Je.hydrateRoot=function(t,e,n){if(!Vu(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=kg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=xg(e,null,t,1,n??null,s,!1,i,a),t[Vt]=e.current,Cs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ea(e)};Je.render=function(t,e,n){if(!ja(e))throw Error(R(200));return ba(null,t,e,!1,n)};Je.unmountComponentAtNode=function(t){if(!ja(t))throw Error(R(40));return t._reactRootContainer?(Vn(function(){ba(null,null,t,!1,function(){t._reactRootContainer=null,t[Vt]=null})}),!0):!1};Je.unstable_batchedUpdates=Au;Je.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ja(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return ba(t,e,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function Cg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cg)}catch(t){console.error(t)}}Cg(),kh.exports=Je;var vy=kh.exports,pd=vy;Po.createRoot=pd.createRoot,Po.hydrateRoot=pd.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var md="popstate";function yy(t={}){function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return Cl("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:$s(s)}return Sy(e,n,null,t)}function re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wy(){return Math.random().toString(36).substring(2,10)}function vd(t,e){return{usr:t.state,key:t.key,idx:e}}function Cl(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Ir(e):e,state:n,key:e&&e.key||r||wy()}}function $s({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ir(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Sy(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",l=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function h(){o="POP";let _=d(),m=_==null?null:_-u;u=_,l&&l({action:o,location:w.location,delta:m})}function f(_,m){o="PUSH";let v=Cl(w.location,_,m);u=d()+1;let y=vd(v,u),x=w.createHref(v);try{a.pushState(y,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(x)}i&&l&&l({action:o,location:w.location,delta:1})}function g(_,m){o="REPLACE";let v=Cl(w.location,_,m);u=d();let y=vd(v,u),x=w.createHref(v);a.replaceState(y,"",x),i&&l&&l({action:o,location:w.location,delta:0})}function p(_){return _y(_)}let w={get action(){return o},get location(){return t(s,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(md,h),l=_,()=>{s.removeEventListener(md,h),l=null}},createHref(_){return e(s,_)},createURL:p,encodeLocation(_){let m=p(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:g,go(_){return a.go(_)}};return w}function _y(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),re(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:$s(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Eg(t,e,n="/"){return xy(t,e,n,!1)}function xy(t,e,n,r){let s=typeof e=="string"?Ir(e):e,i=qt(s.pathname||"/",n);if(i==null)return null;let a=jg(t);ky(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Iy(i);o=Ly(a[l],u,r)}return o}function jg(t,e=[],n=[],r="",s=!1){let i=(a,o,l=s,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;re(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=Ut([r,d.relativePath]),f=n.concat(d);a.children&&a.children.length>0&&(re(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),jg(a.children,e,f,h,l)),!(a.path==null&&!a.index)&&e.push({path:h,score:Ny(h,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of bg(a.path))i(a,o,!0,u)}),e}function bg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=bg(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function ky(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Py(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Cy=/^:[\w-]+$/,Ey=3,jy=2,by=1,Ry=10,Ty=-2,yd=t=>t==="*";function Ny(t,e){let n=t.split("/"),r=n.length;return n.some(yd)&&(r+=Ty),e&&(r+=jy),n.filter(s=>!yd(s)).reduce((s,i)=>s+(Cy.test(i)?Ey:i===""?by:Ry),r)}function Py(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ly(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=aa({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=aa({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Ut([i,h.pathname]),pathnameBase:Fy(Ut([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ut([i,h.pathnameBase]))}return a}function aa(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$y(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let p=o[f]||"";a=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=o[f];return h&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function $y(t,e=!1,n=!0){Rt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Iy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function qt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ay(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ir(t):t;return{pathname:n?n.startsWith("/")?n:Oy(n,e):e,search:My(r),hash:Uy(s)}}function Oy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function co(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Dy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rg(t){let e=Dy(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Tg(t,e,n,r=!1){let s;typeof t=="string"?s=Ir(t):(s={...t},re(!s.pathname||!s.pathname.includes("?"),co("?","pathname","search",s)),re(!s.pathname||!s.pathname.includes("#"),co("#","pathname","hash",s)),re(!s.search||!s.search.includes("#"),co("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=Ay(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ut=t=>t.join("/").replace(/\/\/+/g,"/"),Fy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),My=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Ng=["POST","PUT","PATCH","DELETE"];new Set(Ng);var Vy=["GET",...Ng];new Set(Vy);var Ar=S.createContext(null);Ar.displayName="DataRouter";var Ra=S.createContext(null);Ra.displayName="DataRouterState";S.createContext(!1);var Pg=S.createContext({isTransitioning:!1});Pg.displayName="ViewTransition";var By=S.createContext(new Map);By.displayName="Fetchers";var Hy=S.createContext(null);Hy.displayName="Await";var Tt=S.createContext(null);Tt.displayName="Navigation";var Vs=S.createContext(null);Vs.displayName="Location";var Nt=S.createContext({outlet:null,matches:[],isDataRoute:!1});Nt.displayName="Route";var Bu=S.createContext(null);Bu.displayName="RouteError";function qy(t,{relative:e}={}){re(Bs(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=S.useContext(Tt),{hash:s,pathname:i,search:a}=Hs(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:Ut([n,i])),r.createHref({pathname:o,search:a,hash:s})}function Bs(){return S.useContext(Vs)!=null}function Cn(){return re(Bs(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Vs).location}var Lg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $g(t){S.useContext(Tt).static||S.useLayoutEffect(t)}function Ta(){let{isDataRoute:t}=S.useContext(Nt);return t?sw():Gy()}function Gy(){re(Bs(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Ar),{basename:e,navigator:n}=S.useContext(Tt),{matches:r}=S.useContext(Nt),{pathname:s}=Cn(),i=JSON.stringify(Rg(r)),a=S.useRef(!1);return $g(()=>{a.current=!0}),S.useCallback((l,u={})=>{if(Rt(a.current,Lg),!a.current)return;if(typeof l=="number"){n.go(l);return}let d=Tg(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ut([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,i,s,t])}S.createContext(null);function Hu(){let{matches:t}=S.useContext(Nt),e=t[t.length-1];return e?e.params:{}}function Hs(t,{relative:e}={}){let{matches:n}=S.useContext(Nt),{pathname:r}=Cn(),s=JSON.stringify(Rg(n));return S.useMemo(()=>Tg(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Wy(t,e){return Ig(t,e)}function Ig(t,e,n,r,s){var v;re(Bs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Tt),{matches:a}=S.useContext(Nt),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let y=h&&h.path||"";Ag(u,!h||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=Cn(),g;if(e){let y=typeof e=="string"?Ir(e):e;re(d==="/"||((v=y.pathname)==null?void 0:v.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),g=y}else g=f;let p=g.pathname||"/",w=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");w="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let _=Eg(t,{pathname:w});Rt(h||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Rt(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=Xy(_&&_.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Ut([d,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Ut([d,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r,s);return e&&m?S.createElement(Vs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},m):m}function Ky(){let t=rw(),e=zy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,a)}var Qy=S.createElement(Ky,null),Jy=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(Nt.Provider,{value:this.props.routeContext},S.createElement(Bu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Yy({routeContext:t,match:e,children:n}){let r=S.useContext(Ar);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Nt.Provider,{value:t},n)}function Xy(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let u=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);re(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,g=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,d,h)=>{let f,g=!1,p=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,p=d.route.errorElement||Qy,o&&(l<0&&h===0?(Ag("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):l===h&&(g=!0,w=d.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,h+1)),m=()=>{let v;return f?v=p:g?v=w:d.route.Component?v=S.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,S.createElement(Yy,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(Jy,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:m(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:r}):m()},null)}function qu(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zy(t){let e=S.useContext(Ar);return re(e,qu(t)),e}function ew(t){let e=S.useContext(Ra);return re(e,qu(t)),e}function tw(t){let e=S.useContext(Nt);return re(e,qu(t)),e}function Gu(t){let e=tw(t),n=e.matches[e.matches.length-1];return re(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function nw(){return Gu("useRouteId")}function rw(){var r;let t=S.useContext(Bu),e=ew("useRouteError"),n=Gu("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function sw(){let{router:t}=Zy("useNavigate"),e=Gu("useNavigate"),n=S.useRef(!1);return $g(()=>{n.current=!0}),S.useCallback(async(s,i={})=>{Rt(n.current,Lg),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var wd={};function Ag(t,e,n){!e&&!wd[t]&&(wd[t]=!0,Rt(!1,n))}S.memo(iw);function iw({routes:t,future:e,state:n,unstable_onError:r}){return Ig(t,void 0,n,r,e)}function Be(t){re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aw({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){re(!Bs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=S.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=Ir(n));let{pathname:l="/",search:u="",hash:d="",state:h=null,key:f="default"}=n,g=S.useMemo(()=>{let p=qt(l,a);return p==null?null:{location:{pathname:p,search:u,hash:d,state:h,key:f},navigationType:r}},[a,l,u,d,h,f,r]);return Rt(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:S.createElement(Tt.Provider,{value:o},S.createElement(Vs.Provider,{children:e,value:g}))}function ow({children:t,location:e}){return Wy(El(t),e)}function El(t,e=[]){let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,El(r.props.children,i));return}re(r.type===Be,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=El(r.props.children,i)),n.push(a)}),n}var Ii="get",Ai="application/x-www-form-urlencoded";function Na(t){return t!=null&&typeof t.tagName=="string"}function lw(t){return Na(t)&&t.tagName.toLowerCase()==="button"}function uw(t){return Na(t)&&t.tagName.toLowerCase()==="form"}function cw(t){return Na(t)&&t.tagName.toLowerCase()==="input"}function dw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hw(t,e){return t.button===0&&(!e||e==="_self")&&!dw(t)}var fi=null;function fw(){if(fi===null)try{new FormData(document.createElement("form"),0),fi=!1}catch{fi=!0}return fi}var gw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ho(t){return t!=null&&!gw.has(t)?(Rt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ai}"`),null):t}function pw(t,e){let n,r,s,i,a;if(uw(t)){let o=t.getAttribute("action");r=o?qt(o,e):null,n=t.getAttribute("method")||Ii,s=ho(t.getAttribute("enctype"))||Ai,i=new FormData(t)}else if(lw(t)||cw(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?qt(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ii,s=ho(t.getAttribute("formenctype"))||ho(o.getAttribute("enctype"))||Ai,i=new FormData(o,t),!fw()){let{name:u,type:d,value:h}=t;if(d==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if(Na(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ii,r=null,s=Ai,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wu(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mw(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&qt(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function vw(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yw(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ww(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await vw(i,n);return a.links?a.links():[]}return[]}));return kw(r.flat(1).filter(yw).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Sd(t,e,n,r,s,i){let a=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):i==="data"?e.filter((l,u)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Sw(t,e,{includeHydrateFallback:n}={}){return _w(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function _w(t){return[...new Set(t)]}function xw(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function kw(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(xw(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Og(){let t=S.useContext(Ar);return Wu(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Cw(){let t=S.useContext(Ra);return Wu(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ku=S.createContext(void 0);Ku.displayName="FrameworkContext";function Dg(){let t=S.useContext(Ku);return Wu(t,"You must render this element inside a <HydratedRouter> element"),t}function Ew(t,e){let n=S.useContext(Ku),[r,s]=S.useState(!1),[i,a]=S.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=e,f=S.useRef(null);S.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let w=m=>{m.forEach(v=>{a(v.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return f.current&&_.observe(f.current),()=>{_.disconnect()}}},[t]),S.useEffect(()=>{if(r){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{s(!0)},p=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Wr(o,g),onBlur:Wr(l,p),onMouseEnter:Wr(u,g),onMouseLeave:Wr(d,p),onTouchStart:Wr(h,g)}]:[!1,f,{}]}function Wr(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jw({page:t,...e}){let{router:n}=Og(),r=S.useMemo(()=>Eg(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?S.createElement(Rw,{page:t,matches:r,...e}):null}function bw(t){let{manifest:e,routeModules:n}=Dg(),[r,s]=S.useState([]);return S.useEffect(()=>{let i=!1;return ww(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function Rw({page:t,matches:e,...n}){let r=Cn(),{manifest:s,routeModules:i}=Dg(),{basename:a}=Og(),{loaderData:o,matches:l}=Cw(),u=S.useMemo(()=>Sd(t,e,l,s,r,"data"),[t,e,l,s,r]),d=S.useMemo(()=>Sd(t,e,l,s,r,"assets"),[t,e,l,s,r]),h=S.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,w=!1;if(e.forEach(m=>{var y;let v=s.routes[m.route.id];!v||!v.hasLoader||(!u.some(x=>x.route.id===m.route.id)&&m.route.id in o&&((y=i[m.route.id])!=null&&y.shouldRevalidate)||v.hasClientLoader?w=!0:p.add(m.route.id))}),p.size===0)return[];let _=mw(t,a,"data");return w&&p.size>0&&_.searchParams.set("_routes",e.filter(m=>p.has(m.route.id)).map(m=>m.route.id).join(",")),[_.pathname+_.search]},[a,o,r,s,u,e,t,i]),f=S.useMemo(()=>Sw(d,s),[d,s]),g=bw(d);return S.createElement(S.Fragment,null,h.map(p=>S.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>S.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),g.map(({key:p,link:w})=>S.createElement("link",{key:p,nonce:n.nonce,...w})))}function Tw(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Fg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fg&&(window.__reactRouterVersion="7.8.2")}catch{}function Nw({basename:t,children:e,window:n}){let r=S.useRef();r.current==null&&(r.current=yy({window:n,v5Compat:!0}));let s=r.current,[i,a]=S.useState({action:s.action,location:s.location}),o=S.useCallback(l=>{S.startTransition(()=>a(l))},[a]);return S.useLayoutEffect(()=>s.listen(o),[s,o]),S.createElement(aw,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Mg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,He=S.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:h,...f},g){let{basename:p}=S.useContext(Tt),w=typeof u=="string"&&Mg.test(u),_,m=!1;if(typeof u=="string"&&w&&(_=u,Fg))try{let P=new URL(window.location.href),T=u.startsWith("//")?new URL(P.protocol+u):new URL(u),V=qt(T.pathname,p);T.origin===P.origin&&V!=null?u=V+T.search+T.hash:m=!0}catch{Rt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=qy(u,{relative:s}),[y,x,k]=Ew(r,f),C=Iw(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:h});function E(P){e&&e(P),P.defaultPrevented||C(P)}let j=S.createElement("a",{...f,...k,href:_||v,onClick:m||i?e:E,ref:Tw(g,x),target:l,"data-discover":!w&&n==="render"?"true":void 0});return y&&!w?S.createElement(S.Fragment,null,j,S.createElement(jw,{page:v})):j});He.displayName="Link";var Pw=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:o,children:l,...u},d){let h=Hs(a,{relative:u.relative}),f=Cn(),g=S.useContext(Ra),{navigator:p,basename:w}=S.useContext(Tt),_=g!=null&&Mw(h)&&o===!0,m=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,v=f.pathname,y=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(v=v.toLowerCase(),y=y?y.toLowerCase():null,m=m.toLowerCase()),y&&w&&(y=qt(y,w)||y);const x=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=v===m||!s&&v.startsWith(m)&&v.charAt(x)==="/",C=y!=null&&(y===m||!s&&y.startsWith(m)&&y.charAt(m.length)==="/"),E={isActive:k,isPending:C,isTransitioning:_},j=k?e:void 0,P;typeof r=="function"?P=r(E):P=[r,k?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let T=typeof i=="function"?i(E):i;return S.createElement(He,{...u,"aria-current":j,className:P,ref:d,style:T,to:a,viewTransition:o},typeof l=="function"?l(E):l)});Pw.displayName="NavLink";var Lw=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Ii,action:o,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:h,...f},g)=>{let p=Dw(),w=Fw(o,{relative:u}),_=a.toLowerCase()==="get"?"get":"post",m=typeof o=="string"&&Mg.test(o),v=y=>{if(l&&l(y),y.defaultPrevented)return;y.preventDefault();let x=y.nativeEvent.submitter,k=(x==null?void 0:x.getAttribute("formmethod"))||a;p(x||y.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return S.createElement("form",{ref:g,method:_,action:w,onSubmit:r?l:v,...f,"data-discover":!m&&t==="render"?"true":void 0})});Lw.displayName="Form";function $w(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ug(t){let e=S.useContext(Ar);return re(e,$w(t)),e}function Iw(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let o=Ta(),l=Cn(),u=Hs(t,{relative:i});return S.useCallback(d=>{if(hw(d,e)){d.preventDefault();let h=n!==void 0?n:$s(l)===$s(u);o(t,{replace:h,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[l,o,u,n,r,e,t,s,i,a])}var Aw=0,Ow=()=>`__${String(++Aw)}__`;function Dw(){let{router:t}=Ug("useSubmit"),{basename:e}=S.useContext(Tt),n=nw();return S.useCallback(async(r,s={})=>{let{action:i,method:a,encType:o,formData:l,body:u}=pw(r,e);if(s.navigate===!1){let d=s.fetcherKey||Ow();await t.fetch(d,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function Fw(t,{relative:e}={}){let{basename:n}=S.useContext(Tt),r=S.useContext(Nt);re(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Hs(t||".",{relative:e})},a=Cn();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let d=o.toString();i.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ut([n,i.pathname])),$s(i)}function Mw(t,{relative:e}={}){let n=S.useContext(Pg);re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ug("useViewTransitionState"),s=Hs(t,{relative:e});if(!n.isTransitioning)return!1;let i=qt(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=qt(n.nextLocation.pathname,r)||n.nextLocation.pathname;return aa(s.pathname,a)!=null||aa(s.pathname,i)!=null}const Uw="modulepreload",zw=function(t){return"/"+t},_d={},qs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=zw(l),l in _d)return;_d[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Uw,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Vw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Or);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Qu extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Bw extends Qu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xd extends Qu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class kd extends Qu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(jl||(jl={}));var Hw=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class qw{constructor(e,{headers:n={},customFetch:r,region:s=jl.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Vw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Hw(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let o={},{region:l}=n;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(w=>{throw new Bw(w)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new xd(h);if(!h.ok)throw new kd(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield h.json():g==="application/octet-stream"?p=yield h.blob():g==="text/event-stream"?p=h:g==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof kd||s instanceof xd?s.context:void 0}}})}}var De={},Ju={},Pa={},Gs={},La={},$a={},Gw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nr=Gw();const Ww=Nr.fetch,zg=Nr.fetch.bind(Nr),Vg=Nr.Headers,Kw=Nr.Request,Qw=Nr.Response,Or=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vg,Request:Kw,Response:Qw,default:zg,fetch:Ww},Symbol.toStringTag,{value:"Module"})),Jw=qp(Or);var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});let Yw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ia.default=Yw;var Bg=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($a,"__esModule",{value:!0});const Xw=Bg(Jw),Zw=Bg(Ia);let e0=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Xw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l,u;let d=null,h=null,f=null,g=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const _=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&m&&m.length>1&&(f=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,p="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(h=[],d=null,g=200,p="OK")}catch{i.status===404&&_===""?(g=204,p="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,p="OK"),d&&this.shouldThrowOnError)throw new Zw.default(d)}return{error:d,data:h,count:f,status:g,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};$a.default=e0;var t0=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(La,"__esModule",{value:!0});const n0=t0($a);let r0=class extends n0.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};La.default=r0;var s0=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gs,"__esModule",{value:!0});const i0=s0(La);let a0=class extends i0.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Gs.default=a0;var o0=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pa,"__esModule",{value:!0});const Kr=o0(Gs);let l0=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Kr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Kr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Kr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Kr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Pa.default=l0;var Hg=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ju,"__esModule",{value:!0});const u0=Hg(Pa),c0=Hg(Gs);let d0=class qg{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new u0.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(o="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new c0.default({method:o,url:l,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Ju.default=d0;var Dr=ot&&ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(De,"__esModule",{value:!0});De.PostgrestError=De.PostgrestBuilder=De.PostgrestTransformBuilder=De.PostgrestFilterBuilder=De.PostgrestQueryBuilder=De.PostgrestClient=void 0;const Gg=Dr(Ju);De.PostgrestClient=Gg.default;const Wg=Dr(Pa);De.PostgrestQueryBuilder=Wg.default;const Kg=Dr(Gs);De.PostgrestFilterBuilder=Kg.default;const Qg=Dr(La);De.PostgrestTransformBuilder=Qg.default;const Jg=Dr($a);De.PostgrestBuilder=Jg.default;const Yg=Dr(Ia);De.PostgrestError=Yg.default;var h0=De.default={PostgrestClient:Gg.default,PostgrestQueryBuilder:Wg.default,PostgrestFilterBuilder:Kg.default,PostgrestTransformBuilder:Qg.default,PostgrestBuilder:Jg.default,PostgrestError:Yg.default};const{PostgrestClient:f0,PostgrestQueryBuilder:FC,PostgrestFilterBuilder:MC,PostgrestTransformBuilder:UC,PostgrestBuilder:zC,PostgrestError:VC}=h0;class g0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const p0="2.15.1",m0=`realtime-js/${p0}`,v0="1.0.0",bl=1e4,y0=1e3,w0=100;var ds;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ds||(ds={}));var de;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(de||(de={}));var pt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pt||(pt={}));var Rl;(function(t){t.websocket="websocket"})(Rl||(Rl={}));var Pn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pn||(Pn={}));class S0{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Xg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Q||(Q={}));const Cd=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=_0(a,t,e,s),i),{})},_0=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?Zg(i,a):Tl(a)},Zg=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return E0(e,n)}switch(t){case Q.bool:return x0(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return k0(e);case Q.json:case Q.jsonb:return C0(e);case Q.timestamp:return j0(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return Tl(e);default:return Tl(e)}},Tl=t=>t,x0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},k0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},C0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},E0=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Zg(e,o))}return t},j0=t=>typeof t=="string"?t.replace(" ","T"):t,ep=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class fo{constructor(e,n,r={},s=bl){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ed;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ed||(Ed={}));class hs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hs.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=hs.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hs.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(i,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(_=>_.presence_ref),g=h.map(_=>_.presence_ref),p=d.filter(_=>g.indexOf(_.presence_ref)<0),w=h.filter(_=>f.indexOf(_.presence_ref)<0);p.length>0&&(o[u]=p),w.length>0&&(l[u]=w)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const h=e[o].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[o].unshift(...f)}r(o,d,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(jd||(jd={}));var fs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(fs||(fs={}));var It;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(It||(It={}));class Yu{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=de.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new fo(this,pt.join,this.params,this.timeout),this.rejoinTimer=new Xg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=de.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=de.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=de.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new hs(this),this.broadcastEndpointURL=ep(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==de.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[fs.PRESENCE]&&this.bindings[fs.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(It.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(It.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e==null||e(It.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,w=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,_=[];for(let m=0;m<w;m++){const v=p[m],{filter:{event:y,schema:x,table:k,filter:C}}=v,E=f&&f[m];if(E&&E.event===y&&E.schema===x&&E.table===k&&E.filter===C)_.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=de.errored,e==null||e(It.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(It.SUBSCRIBED);return}}).receive("error",f=>{this.state=de.errored,e==null||e(It.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(It.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===de.joined&&e===fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=de.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new fo(this,pt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=de.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new fo(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>w0){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=pt;if(r&&[o,l,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,w,_;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((_=(w=g.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===a}).map(g=>g.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,w,_,m,v,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const x=g.id,k=(p=g.filter)===null||p===void 0?void 0:p.event;return x&&((w=n.ids)===null||w===void 0?void 0:w.includes(x))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const x=(v=(m=g==null?void 0:g.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return x==="*"||x===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:w,table:_,commit_timestamp:m,type:v,errors:y}=p;f=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:m,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(p))}g.callback(f,r)})}_isClosed(){return this.state===de.closed}_isJoined(){return this.state===de.joined}_isJoining(){return this.state===de.joining}_isLeaving(){return this.state===de.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Yu.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pt.close,{},e)}_onError(e){this._on(pt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=de.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Cd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Cd(e.columns,e.old_record)),n}}const bd=()=>{},gi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b0=[1e3,2e3,5e3,1e4],R0=1e4,T0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class N0{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bl,this.transport=null,this.heartbeatIntervalMs=gi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bd,this.ref=0,this.reconnectTimer=null,this.logger=bd,this.conn=null,this.sendBuffer=[],this.serializer=new S0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>qs(async()=>{const{default:o}=await Promise.resolve().then(()=>Or);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Rl.websocket}`,this.httpEndpoint=ep(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=g0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:v0}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return Pn.Connecting;case ds.open:return Pn.Open;case ds.closing:return Pn.Closing;default:return Pn.Closed}}isConnected(){return this.connectionState()===Pn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Yu(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(y0,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},gi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(pt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([T0],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:m0};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(pt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Xg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,o,l,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:bl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:gi.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:d=>b0[d-1]||R0,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Xu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function he(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class P0 extends Xu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Nl extends Xu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var L0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const tp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Or);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},$0=()=>L0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qs(()=>Promise.resolve().then(()=>Or),void 0)).Response:Response}),Pl=t=>{if(Array.isArray(t))return t.map(n=>Pl(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Pl(r)}),e},I0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const go=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),A0=(t,e,n)=>qn(void 0,void 0,void 0,function*(){const r=yield $0();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new P0(go(s),i,a))}).catch(s=>{e(new Nl(go(s),s))}):e(new Nl(go(t),t))}),O0=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(I0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Ws(t,e,n,r,s,i){return qn(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,O0(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>A0(l,o,r))})})}function oa(t,e,n,r){return qn(this,void 0,void 0,function*(){return Ws(t,"GET",e,n,r)})}function kt(t,e,n,r,s){return qn(this,void 0,void 0,function*(){return Ws(t,"POST",e,r,s,n)})}function Ll(t,e,n,r,s){return qn(this,void 0,void 0,function*(){return Ws(t,"PUT",e,r,s,n)})}function D0(t,e,n,r){return qn(this,void 0,void 0,function*(){return Ws(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function np(t,e,n,r,s){return qn(this,void 0,void 0,function*(){return Ws(t,"DELETE",e,r,s,n)})}var Re=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const F0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M0{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=tp(s)}uploadOrUpdate(e,n,r,s){return Re(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Rd),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?Ll:kt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(he(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Re(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Rd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Ll(this.fetch,o.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(he(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Re(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield kt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Xu("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}update(e,n,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Re(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield kt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield kt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Re(this,void 0,void 0,function*(){try{const s=yield kt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}download(e,n){return Re(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield oa(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(he(o))return{data:null,error:o};throw o}})}info(e){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield oa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Pl(r),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}exists(e){return Re(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield D0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(he(r)&&r instanceof Nl){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Re(this,void 0,void 0,function*(){try{return{data:yield np(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}list(e,n,r){return Re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},F0),n),{prefix:e||""});return{data:yield kt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}})}listV2(e,n){return Re(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield kt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const U0="2.11.0",z0={"X-Client-Info":`storage-js/${U0}`};var Kn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class V0{constructor(e,n={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},z0),n),this.fetch=tp(r)}listBuckets(){return Kn(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(he(e))return{data:null,error:e};throw e}})}getBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Kn(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Kn(this,void 0,void 0,function*(){try{return{data:yield Ll(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield kt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Kn(this,void 0,void 0,function*(){try{return{data:yield np(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}})}}class B0 extends V0{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new M0(this.url,this.headers,e,this.fetch)}}const H0="2.56.0";let ts="";typeof Deno<"u"?ts="deno":typeof document<"u"?ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ts="react-native":ts="node";const q0={"X-Client-Info":`supabase-js-${ts}/${H0}`},G0={headers:q0},W0={schema:"public"},K0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Q0={};var J0=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};const Y0=t=>{let e;return t?e=t:typeof fetch>"u"?e=zg:e=fetch,(...n)=>e(...n)},X0=()=>typeof Headers>"u"?Vg:Headers,Z0=(t,e,n)=>{const r=Y0(n),s=X0();return(i,a)=>J0(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var eS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};function tS(t){return t.endsWith("/")?t:t+"/"}function nS(t,e){var n,r;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>eS(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const rp="2.71.1",nr=30*1e3,$l=3,po=$l*nr,rS="http://localhost:9999",sS="supabase.auth.token",iS={"X-Client-Info":`gotrue-js/${rp}`},Il="X-Supabase-Api-Version",sp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oS=10*60*1e3;class Zu extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class lS extends Zu{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function uS(t){return z(t)&&t.name==="AuthApiError"}class ip extends Zu{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class En extends Zu{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Xt extends En{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cS(t){return z(t)&&t.name==="AuthSessionMissingError"}class pi extends En{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mi extends En{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class vi extends En{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dS(t){return z(t)&&t.name==="AuthImplicitGrantRedirectError"}class Td extends En{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Al extends En{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mo(t){return z(t)&&t.name==="AuthRetryableFetchError"}class Nd extends En{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ol extends En{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const la="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pd=` 	
\r=`.split(""),hS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Pd.length;e+=1)t[Pd[e].charCodeAt(0)]=-2;for(let e=0;e<la.length;e+=1)t[la[e].charCodeAt(0)]=e;return t})();function Ld(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(la[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(la[r]),e.queuedBits-=6}}function ap(t,e,n){const r=hS[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $d(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{pS(a,r,n)};for(let a=0;a<t.length;a+=1)ap(t.charCodeAt(a),s,i);return e.join("")}function fS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function gS(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}fS(r,e)}}function pS(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mS(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ap(t.charCodeAt(s),n,r);return new Uint8Array(e)}function vS(t){const e=[];return gS(t,n=>e.push(n)),new Uint8Array(e)}function yS(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Ld(s,n,r)),Ld(null,n,r),e.join("")}function wS(t){return Math.round(Date.now()/1e3)+t}function SS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ht=()=>typeof window<"u"&&typeof document<"u",jn={tested:!1,writable:!1},op=()=>{if(!ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jn.tested)return jn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jn.tested=!0,jn.writable=!0}catch{jn.tested=!0,jn.writable=!1}return jn.writable};function _S(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const lp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qs(async()=>{const{default:r}=await Promise.resolve().then(()=>Or);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},xS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",rr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},bn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jt=async(t,e)=>{await t.removeItem(e)};class Aa{constructor(){this.promise=new Aa.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Aa.promiseConstructor=Promise;function vo(t){const e=t.split(".");if(e.length!==3)throw new Ol("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!aS.test(e[r]))throw new Ol("JWT not in base64url format");return{header:JSON.parse($d(e[0])),payload:JSON.parse($d(e[1])),signature:mS(e[2]),raw:{header:e[0],payload:e[1]}}}async function kS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function CS(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function ES(t){return("0"+t.toString(16)).substr(-2)}function jS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,ES).join("")}async function bS(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function RS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await bS(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qn(t,e,n=!1){const r=jS();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await rr(t,`${e}-code-verifier`,s);const i=await RS(r);return[i,r===i?"plain":"s256"]}const TS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NS(t){const e=t.headers.get(Il);if(!e||!e.match(TS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function PS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function LS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $S=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jn(t){if(!$S.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yo(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Id(t){return JSON.parse(JSON.stringify(t))}var IS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Nn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AS=[502,503,504];async function Ad(t){var e;if(!xS(t))throw new Al(Nn(t),0);if(AS.includes(t.status))throw new Al(Nn(t),t.status);let n;try{n=await t.json()}catch(i){throw new ip(Nn(i),i)}let r;const s=NS(t);if(s&&s.getTime()>=sp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Nd(Nn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Xt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Nd(Nn(n),t.status,n.weak_password.reasons);throw new lS(Nn(n),t.status||500,r)}const OS=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function H(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Il]||(i[Il]=sp["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await DS(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function DS(t,e,n,r,s,i){const a=OS(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Al(Nn(l),0)}if(o.ok||await Ad(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Ad(l)}}function Lt(t){var e;let n=null;zS(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=wS(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Od(t){const e=Lt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function rn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function FS(t){return{data:t,error:null}}function MS(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=IS(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function US(t){return t}function zS(t){return t.access_token&&t.refresh_token&&t.expires_in}const wo=["global","local","others"];var VS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class BS{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=lp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=wo[0]){if(wo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wo.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:rn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=VS(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:MS,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(z(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rn})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:US});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(p=>{const w=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(p.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Jn(e);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rn})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Jn(e);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:rn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Jn(e);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:rn})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Jn(e.userId);try{const{data:n,error:r}=await H(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(z(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Jn(e.userId),Jn(e.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}}function Dd(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function HS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Yn={debug:!!(globalThis&&op()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class up extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class qS extends up{}async function GS(t,e,n){Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Yn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new qS(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Yn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}HS();const WS={url:rS,storageKey:sS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fd(t,e,n){return await n()}const Xn={};class Is{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},WS),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new BS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=lp(s.fetch),this.lock=s.lock||Fd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ht()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=GS:this.lock=Fd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:op()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Dd(this.memoryStorage)),ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Xn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Xn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${rp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=_S(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ht()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),dS(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return z(n)?{error:n}:{error:new ip("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Lt}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Qn(this.storage,this.storageKey)),i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:p},xform:Lt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lt})}else throw new mi("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Od})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Od})}else throw new mi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,a,o,l,u,d,h,f,g;let p,w;if("message"in e)p=e.message,w=e.signature;else{const{chain:_,wallet:m,statement:v,options:y}=e;let x;if(ht())if(typeof m=="object")x=m;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=m}const k=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),v?{statement:v}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),w=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(p),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:_,error:m}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:yS(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Lt});if(m)throw m;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new pi}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:m})}catch(_){if(z(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await bn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Lt});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new pi}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Lt}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new pi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Qn(this.storage,this.storageKey));const{error:h}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new mi("You must provide either an email or phone number.")}catch(o){if(z(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Lt});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Qn(this.storage,this.storageKey)),await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:FS})}catch(i){if(z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Xt;const{error:s}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await H(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await H(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new mi("You must provide either an email or phone number and a type")}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await bn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<po:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await bn(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=yo()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rn}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:rn})})}catch(n){if(z(n))return cS(n)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Xt;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Qn(this.storage,this.storageKey));const{data:u,error:d}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:rn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=vo(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(z(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Xt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(z(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!ht())throw new vi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new vi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Td("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Td("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new vi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;l&&(f=parseInt(l));const g=f-d;g*1e3<=nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const p=f-h;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(z(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await bn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(uS(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=SS(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Qn(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,d;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return ht()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(z(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await CS(async s=>(s>0&&await kS(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&mo(i)&&Date.now()+a-r<nr})}catch(r){if(this._debug(n,"error",r),z(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ht()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await bn(this.storage,this.storageKey);if(s&&this.userStorage){let a=await bn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await rr(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:yo()}else if(s&&!s.user&&!s.user){const a=await bn(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Jt(this.storage,this.storageKey+"-user"),await rr(this.storage,this.storageKey,s)):s.user=yo()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<po;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${po}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),mo(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Aa;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Xt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),z(i)){const a={session:null,error:i};return mo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await rr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Id(s);await rr(this.storage,this.storageKey,i)}else{const s=Id(n);await rr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${nr}ms, refresh threshold is ${$l} ticks`),s<=$l&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof up)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Qn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await H(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(z(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:o}=await H(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(z(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await H(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(z(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=vo(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+oS>s)return r;const{data:i,error:a}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:p}=await this.getSession();if(p||!g.session)return{data:null,error:p};r=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=vo(r);n!=null&&n.allowExpired||PS(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const d=LS(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,vS(`${o}.${l}`)))throw new Ol("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}}Is.nextInstanceID=0;const KS=Is;class QS extends KS{constructor(e){super(e)}}var JS=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})};class YS{constructor(e,n,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=tS(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:W0,realtime:Q0,auth:Object.assign(Object.assign({},K0),{storageKey:u}),global:G0},h=nS(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=Z0(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new f0(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new B0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new qw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return JS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QS({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new N0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const XS=(t,e,n)=>new YS(t,e,n);function ZS(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ZS()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const e_={BASE_URL:"/",DEV:!1,MODE:"production",NODE_ENV:"production",PROD:!0,SSR:!1,SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZGhlZ2N6d3djZm5yYW5reWRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNTY2NDIsImV4cCI6MjA2OTYzMjY0Mn0.7BisAmVNNmsr-zdqrrJoILPnW0sQ6DfSfH0IEsjLoOI",SUPABASE_URL:"https://sqdhegczwwcfnrankyde.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"},cp=t=>e_[t],Dl=()=>cp("SUPABASE_URL"),t_=()=>cp("SUPABASE_ANON_KEY");class n_{constructor(e){this.supabase=e}async callSupabaseFunction(e,n){const{method:r="GET",body:s,headers:i={},requiresAuth:a=!0}=n||{};try{let o={};if(a){const{data:f,error:g}=await this.supabase.auth.getSession();if(g)throw g;const p=f.session;if(!(p!=null&&p.access_token))throw new Error("No valid authentication session found");o={Authorization:`Bearer ${p.access_token}`}}const l={"Content-Type":"application/json",...o,...i},u=s&&r!=="GET"?s:void 0,{data:d,error:h}=await this.supabase.functions.invoke(e,{body:u,headers:l});if(h)throw h;return d}catch(o){if(o instanceof Error){if(o.message.includes("401")||o.message.includes("Unauthorized"))throw new Error("Authentication failed. Please log in again.");if(o.message.includes("403")||o.message.includes("Forbidden"))throw new Error("Access denied. Insufficient permissions.");if(o.message.includes("404")||o.message.includes("Not Found"))throw new Error("API endpoint not found.");if(o.message.includes("500")||o.message.includes("Internal Server Error"))throw new Error("Server error. Please try again later.")}throw o}}getSupabaseClient(){return this.supabase}handleSingleQuery(e){if(e.error)throw e.error.code==="PGRST116"?new Error("Record not found"):e.error;return e.data}async performCrudOperation(e,n,r,s){let i=this.supabase.from(n);switch(e){case"insert":const a=await i.insert(s).select().single();return this.handleSingleQuery(a);case"update":const o=await i.update(s).eq("id",r).select().single();return this.handleSingleQuery(o);case"delete":const l=await i.delete().eq("id",r);this.handleSingleQuery(l);return}}async executeQuery(e){const n=await e();return this.handleSingleQuery(n)}applyGlobalFilter(e,n,r=[]){if(n&&r.length>0){const s=r.map(i=>`${i}.ilike.%${n}%`).join(",");return e.or(s)}return e}applySorting(e,n){if(n&&n.length>0){const r=n[0];if(r)return e.order(r.id,{ascending:!r.desc})}return e}applyPagination(e,n){if(n){const r=n.pageIndex*n.pageSize,s=r+n.pageSize-1;return e.range(r,s)}return e}applyUserFilter(e,n,r,s="assigned_to"){return n&&r?e.eq(s,r):e}async getCurrentUser(){const{data:e,error:n}=await this.supabase.auth.getUser();if(n)throw n;return e}async queryFromTable(e,n){const{filterByUser:r=!1,userId:s=null,userColumn:i="assigned_to",additionalFilters:a={},globalFilter:o="",globalFilterColumns:l=[],sorting:u=[],pagination:d,select:h="*"}=n;let f=this.supabase.from(e).select(h,{count:"exact"});f=this.applyUserFilter(f,r,s,i),f=this.applyGlobalFilter(f,o,l),f=this.applySorting(f,u),f=this.applyPagination(f,d),a&&Object.entries(a).forEach(([_,m])=>{m!=null&&(f=f.eq(_,m))});const{data:g,error:p,count:w}=await f;if(p)throw p;return{data:g||[],count:w||0}}async getRecordById(e,n,r){try{return await this.executeQuery(()=>this.supabase.from(e).select(r||"*").eq("id",n).single())}catch(s){throw s instanceof Error&&s.message==="Record not found"?new Error(`${e} record not found`):s}}async updateRecord(e,n,r){await this.performCrudOperation("update",e,n,r)}async createRecord(e,n){return this.performCrudOperation("insert",e,void 0,n)}async deleteRecord(e,n){await this.performCrudOperation("delete",e,n)}async queryRecordsWithFilter(e,n,r){let s=this.supabase.from(e).select((r==null?void 0:r.select)||"*");Object.entries(n).forEach(([a,o])=>{o!=null&&(typeof o=="object"&&o!==null?"lt"in o?s=s.lt(a,o.lt):"gte"in o?s=s.gte(a,o.gte):"not"in o&&"in"in o.not?s=s.not(a,"in",o.not.in):s=s.eq(a,o):s=s.eq(a,o))}),s=this.applySorting(s,r==null?void 0:r.sorting),s=this.applyPagination(s,r==null?void 0:r.pagination);const i=await s;if(i.error)throw i.error;return i.data||[]}}const r_=async()=>{try{const t=`${window.location.origin}/auth/callback`;console.log("Starting Google OAuth sign in...",t);const{error:e}=await on.auth.signInWithOAuth({provider:"google",options:{redirectTo:t}});if(e)throw e}catch(t){throw console.error("Error signing in with Google:",t),t}},s_=async()=>{try{const{error:t}=await on.auth.signOut();if(t)throw t}catch(t){throw console.error("Error signing out:",t),t}},Md=async()=>{try{const{data:{session:t}}=await on.auth.getSession();return(t==null?void 0:t.access_token)||null}catch(t){return console.error("Error getting access token:",t),null}},i_=Dl(),a_=t_(),on=XS(i_,a_);typeof window<"u"&&(window.supabase=on);const dp=S.createContext(void 0),$e=()=>{const t=S.useContext(dp);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},o_=({children:t})=>{const[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,a]=S.useState(null),[o,l]=S.useState("unassigned"),u=o==="admin",d=o==="cleaner",h=S.useMemo(()=>new n_(on),[]),f=S.useCallback(async w=>{if(!((e==null?void 0:e.id)===w&&o!=="unassigned"))try{if(s(!0),!await Md()){l("unassigned");return}const{data:m,error:v}=await on.from("roles").select("role").eq("user_id",w);if(v){console.error("Role check error:",v),l("unassigned");return}const y=(m==null?void 0:m.map(k=>k.role))||[];let x="unassigned";y.includes("admin")?x="admin":y.includes("cleaner")&&(x="cleaner"),l(x)}catch(_){console.error("Error checking user roles:",_),l("unassigned")}finally{s(!1)}},[e,o,l,s]),g=async(w,_)=>{var m;_==="SIGNED_IN"&&((m=w==null?void 0:w.user)!=null&&m.id)&&(e==null?void 0:e.id)===w.user.id||(a(w),n((w==null?void 0:w.user)??null),s(!1),w!=null&&w.user?f(w.user.id).catch(v=>{console.error("Role check failed:",v),l("unassigned")}):l("unassigned"))};S.useEffect(()=>{(async()=>{try{const{data:{session:m}}=await on.auth.getSession();await g(m)}catch(m){console.error("Error getting initial session:",m),s(!1)}})();const{data:{subscription:_}}=on.auth.onAuthStateChange(async(m,v)=>{await g(v,m)});return()=>_.unsubscribe()},[]);const p=S.useMemo(()=>({user:e,session:i,loading:r,role:o,setRole:l,isAdmin:u,isCleaner:d,signInWithGoogle:r_,signOut:s_,getAccessToken:Md,checkUserRoles:f,supabaseService:h}),[e,i,r,o,l,u,d,f,h]);return c.jsx(dp.Provider,{value:p,children:t})},l_=(t,e,n,r)=>{var i,a,o,l;const s=[n,{code:e,...r||{}}];if((a=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&a.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Dn(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(l=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&l.warn?t.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Ud={},Fl=(t,e,n,r)=>{Dn(n)&&Ud[n]||(Dn(n)&&(Ud[n]=new Date),l_(t,e,n,r))},hp=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Ml=(t,e,n)=>{t.loadNamespaces(e,hp(t,n))},zd=(t,e,n,r)=>{if(Dn(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Ml(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,hp(t,r))},u_=(t,e,n={})=>!e.languages||!e.languages.length?(Fl(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),Dn=t=>typeof t=="string",c_=t=>typeof t=="object"&&t!==null,d_=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,h_={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},f_=t=>h_[t],g_=t=>t.replace(d_,f_);let Ul={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:g_};const p_=(t={})=>{Ul={...Ul,...t}},m_=()=>Ul;let fp;const v_=t=>{fp=t},y_=()=>fp,w_={type:"3rdParty",init(t){p_(t.options.react),v_(t)}},S_=S.createContext();class __{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const x_=(t,e)=>{const n=S.useRef();return S.useEffect(()=>{n.current=t},[t,e]),n.current},gp=(t,e,n,r)=>t.getFixedT(e,n,r),k_=(t,e,n,r)=>S.useCallback(gp(t,e,n,r),[t,e,n,r]),Y=(t,e={})=>{var x,k,C,E;const{i18n:n}=e,{i18n:r,defaultNS:s}=S.useContext(S_)||{},i=n||r||y_();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new __),!i){Fl(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const j=(T,V)=>Dn(V)?V:c_(V)&&Dn(V.defaultValue)?V.defaultValue:Array.isArray(T)?T[T.length-1]:T,P=[j,{},!1];return P.t=j,P.i18n={},P.ready=!1,P}(x=i.options.react)!=null&&x.wait&&Fl(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...m_(),...i.options.react,...e},{useSuspense:o,keyPrefix:l}=a;let u=s||((k=i.options)==null?void 0:k.defaultNS);u=Dn(u)?[u]:u||["translation"],(E=(C=i.reportNamespaces).addUsedNamespaces)==null||E.call(C,u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(j=>u_(j,i,a)),h=k_(i,e.lng||null,a.nsMode==="fallback"?u:u[0],l),f=()=>h,g=()=>gp(i,e.lng||null,a.nsMode==="fallback"?u:u[0],l),[p,w]=S.useState(f);let _=u.join();e.lng&&(_=`${e.lng}${_}`);const m=x_(_),v=S.useRef(!0);S.useEffect(()=>{const{bindI18n:j,bindI18nStore:P}=a;v.current=!0,!d&&!o&&(e.lng?zd(i,e.lng,u,()=>{v.current&&w(g)}):Ml(i,u,()=>{v.current&&w(g)})),d&&m&&m!==_&&v.current&&w(g);const T=()=>{v.current&&w(g)};return j&&(i==null||i.on(j,T)),P&&(i==null||i.store.on(P,T)),()=>{v.current=!1,i&&j&&(j==null||j.split(" ").forEach(V=>i.off(V,T))),P&&i&&P.split(" ").forEach(V=>i.store.off(V,T))}},[i,_]),S.useEffect(()=>{v.current&&d&&w(f)},[i,l,d]);const y=[p,i,d];if(y.t=p,y.i18n=i,y.ready=d,d||!d&&!o)return y;throw new Promise(j=>{e.lng?zd(i,e.lng,u,()=>j()):Ml(i,u,()=>j())})},pp=S.createContext(void 0),C_=({children:t})=>{const{i18n:e}=Y(),[n,r]=S.useState("en");S.useEffect(()=>{const a=localStorage.getItem("preferred-language")||"en";r(a),e.changeLanguage(a)},[e]);const i={currentLanguage:n,changeLanguage:a=>{r(a),e.changeLanguage(a),localStorage.setItem("preferred-language",a)}};return c.jsx(pp.Provider,{value:i,children:t})},E_=()=>{const t=S.useContext(pp);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},j_=()=>{const{signInWithGoogle:t,loading:e}=$e(),{t:n}=Y(),r=async()=>{try{await t()}catch(s){console.error("Sign in error:",s)}};return c.jsx("div",{className:"auth-container",children:c.jsxs("div",{className:"auth-card",children:[c.jsx("h1",{className:"auth-title",children:n("auth.welcome")}),c.jsx("p",{className:"auth-description",children:n("auth.signInDescription")}),c.jsx("button",{onClick:r,disabled:e,className:"google-signin-btn",children:e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"loading-spinner",style:{width:"20px",height:"20px",margin:0}}),n("auth.signingIn")]}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[c.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n("auth.signInWithGoogle")]})})]})})},So=({children:t})=>{console.log("ProtectedRoute rendering...");const{user:e,loading:n}=$e(),{t:r}=Y();return console.log("ProtectedRoute state:",{user:e,loading:n}),n?(console.log("ProtectedRoute: showing loading state"),c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"loading",children:[c.jsx("div",{className:"loading-spinner"}),r("common.loading")]})})})):e?(console.log("ProtectedRoute: showing protected content"),t):(console.log("ProtectedRoute: showing login component"),c.jsx(j_,{}))},Yt=({children:t})=>{const{user:e,loading:n,isAdmin:r}=$e(),{t:s}=Y();return n?c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"loading",children:[c.jsx("div",{className:"loading-spinner"}),s("admin.checkingAccess")]})})}):e?r?t:c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"access-denied",children:[c.jsx("div",{className:"access-denied-icon",children:"🚫"}),c.jsx("h2",{className:"access-denied-title",children:s("admin.adminAccessRequired")}),c.jsx("p",{className:"access-denied-description",children:s("admin.noAdminPrivileges")})]})})}):c.jsx("div",{className:"auth-container",children:c.jsx("div",{className:"auth-card",children:c.jsxs("div",{className:"access-denied",children:[c.jsx("div",{className:"access-denied-icon",children:"🔐"}),c.jsx("h2",{className:"access-denied-title",children:s("admin.authenticationRequired")}),c.jsx("p",{className:"access-denied-description",children:s("admin.signInToAccess")})]})})})},Vd=["listing","task"],_o=["unassigned","assigned","accepted","in_progress","completed","admin_accepted","cancelled"],b_={unassigned:["assigned"],assigned:["accepted","in_progress","unassigned"],accepted:["assigned","in_progress"],in_progress:["completed","assigned"],completed:["admin_accepted"],admin_accepted:[],cancelled:["assigned"]},Bd=["listing","task"];class R_{constructor(e,n){this.supabaseService=e,this.role=n}async fetchTodos(e={}){const n=this.role==="cleaner"?"id, title, description, products, done, completed_at, completed_by, created_at, updated_at, attached_to_type, attached_to_id":"*",r={};return e.attachedToType!==void 0&&(r.attached_to_type=e.attachedToType),e.attachedToId!==void 0&&(r.attached_to_id=e.attachedToId),e.isDone!==void 0&&(r.done=e.isDone),(await this.supabaseService.queryFromTable("todos",{select:n,additionalFilters:r,globalFilter:e.titlePattern||"",globalFilterColumns:["title"]})).data}async fetchTodosWithUserInfo(e={}){const n=await this.fetchTodos(e);return n.length>0&&this.role==="admin"?this.enrichTodosWithUserInfo(n):n}async updateTodoStatus(e,n,r){if(!await this.supabaseService.getRecordById("todos",e))throw new Error(`Todo with ID ${e} not found`);const i={done:n,updated_at:new Date().toISOString(),completed_at:n?new Date().toISOString():null,completed_by:n&&r||null};await this.supabaseService.updateRecord("todos",e,i)}async createTodo(e){return this.validateTodoData(e),this.supabaseService.createRecord("todos",e)}async updateTodo(e,n){return this.validateTodoUpdate(n),await this.supabaseService.updateRecord("todos",e,n),this.supabaseService.getRecordById("todos",e)}async deleteTodo(e){await this.supabaseService.deleteRecord("todos",e)}validateTodoData(e){const n=[];if((!e.title||typeof e.title!="string"||e.title.trim().length===0)&&n.push("Title is required and cannot be empty"),e.title&&e.title.length>255&&n.push("Title cannot exceed 255 characters"),e.description!==void 0&&e.description!==null&&(typeof e.description!="string"?n.push("Description must be a string"):e.description.length>1e3&&n.push("Description cannot exceed 1000 characters")),e.attached_to_type!==void 0&&e.attached_to_type!==null&&(Vd.includes(e.attached_to_type)||n.push(`Invalid attachment type: ${e.attached_to_type}`)),e.attached_to_type&&!e.attached_to_id&&n.push("Attachment ID is required when attachment type is specified"),!e.attached_to_type&&e.attached_to_id&&n.push("Attachment type is required when attachment ID is specified"),e.products!==void 0&&e.products!==null&&(Array.isArray(e.products)?e.products.forEach((r,s)=>{(!r.product_name||typeof r.product_name!="string")&&n.push(`Product ${s+1}: product_name is required and must be a string`),(typeof r.quantity!="number"||r.quantity<=0)&&n.push(`Product ${s+1}: quantity must be a positive number`)}):n.push("Products must be an array")),n.length>0)throw new Error(`Todo validation failed: ${n.join(", ")}`)}validateTodoUpdate(e){const n=[];if(e.title!==void 0&&((typeof e.title!="string"||e.title.trim().length===0)&&n.push("Title cannot be empty"),e.title.length>255&&n.push("Title cannot exceed 255 characters")),e.description!==void 0&&e.description!==null&&(typeof e.description!="string"?n.push("Description must be a string"):e.description.length>1e3&&n.push("Description cannot exceed 1000 characters")),e.attached_to_type!==void 0&&e.attached_to_type!==null&&(Vd.includes(e.attached_to_type)||n.push(`Invalid attachment type: ${e.attached_to_type}`)),e.attached_to_type&&!e.attached_to_id&&n.push("Attachment ID is required when attachment type is specified"),!e.attached_to_type&&e.attached_to_id&&n.push("Attachment type is required when attachment ID is specified"),e.products!==void 0&&e.products!==null&&(Array.isArray(e.products)?e.products.forEach((r,s)=>{(!r.product_name||typeof r.product_name!="string")&&n.push(`Product ${s+1}: product_name is required and must be a string`),(typeof r.quantity!="number"||r.quantity<=0)&&n.push(`Product ${s+1}: quantity must be a positive number`)}):n.push("Products must be an array")),e.completed_at!==void 0&&e.completed_at!==null&&(typeof e.completed_at!="string"&&n.push("Completed at must be a string"),isNaN(Date.parse(e.completed_at))&&n.push("Completed at must be a valid ISO date string")),n.length>0)throw new Error(`Todo update validation failed: ${n.join(", ")}`)}async enrichTodosWithUserInfo(e){const n=[...new Set(e.map(i=>[i.created_by,i.completed_by]).flat().filter(Boolean))];if(n.length===0)return e;const r=await this.supabaseService.queryFromTable("user_profiles",{select:"id, email, name",additionalFilters:{id:n}}),s=new Map(r.data.map(i=>[i.id,i]));return e.map(i=>{const a=i,o=s.get(i.created_by);return o&&(o.email!==null&&(a.user_email=o.email),o.name!==null&&(a.user_name=o.name)),a})}async getTodosByAttachment(e,n){return this.fetchTodos({attachedToType:e,attachedToId:n})}async getCompletedTodos(e={}){return this.fetchTodos({...e,isDone:!0})}async getPendingTodos(e={}){return this.fetchTodos({...e,isDone:!1})}async searchTodosByTitle(e,n={}){return this.fetchTodos({...n,titlePattern:e})}}class T_{constructor(e,n){this.supabaseService=e,this.auditService=n}validateTaskUpdate(e){const n=[],r=e.status;r!==void 0&&(typeof r!="string"||!_o.includes(r))&&n.push(`Invalid status: ${String(r)}`),["started_at","finished_at","accepted_at","completed_at","assigned_at","admin_accepted_at","scheduled_datetime"].forEach(o=>{const l=e[o];if(l!=null)if(typeof l=="string"||typeof l=="number"||l instanceof Date){const u=new Date(l);isNaN(u.getTime())&&n.push(`Invalid date format for ${o}: ${String(l)}`)}else n.push(`Invalid date type for ${o}: ${typeof l}`)});const i=["assigned_to","assigned_by"],a=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(i.forEach(o=>{const l=e[o];l!=null&&(typeof l=="string"?a.test(l)||n.push(`Invalid UUID format for ${o}: ${l}`):n.push(`Invalid ID type for ${o}: ${typeof l}`))}),n.length>0)throw new Error(`Validation errors: ${n.join(", ")}`)}validateStatusTransition(e,n){var r;if(!((r=b_[e])!=null&&r.includes(n)))throw new Error(`Invalid status transition from ${e} to ${n}`)}async getTask(e){try{return await this.supabaseService.getRecordById("tasks",e)}catch(n){throw console.error("Error fetching task:",n),n}}async updateTaskField(e,n,r,s={}){const i={[n]:r};try{this.validateTaskUpdate(i)}catch(a){throw new Error(`Invalid update: ${a instanceof Error?a.message:String(a)}`)}try{return await this.supabaseService.updateRecord("tasks",e,i),{success:!0}}catch(a){throw console.error(`Error updating task ${n}:`,a),a}}async updateTaskFields(e,n){try{this.validateTaskUpdate(n)}catch(r){throw new Error(`Invalid updates: ${r instanceof Error?r.message:String(r)}`)}try{return await this.supabaseService.updateRecord("tasks",e,n),{success:!0}}catch(r){throw console.error("Error updating task fields:",r),r}}async updateTaskStatus(e,n,r={}){const s={status:n,...r};switch(n){case"accepted":s.accepted_at=new Date().toISOString();break;case"completed":s.completed_at=new Date().toISOString();break;case"admin_accepted":s.admin_accepted_at=new Date().toISOString();break;case"assigned":r.clearAccepted&&(s.accepted_at=null);break}return this.updateTaskFields(e,s)}async updateTaskTimes(e,{started_at:n,finished_at:r}){const s={};if(n!==void 0&&(s.started_at=n),r!==void 0&&(s.finished_at=r),n&&r&&new Date(r)<=new Date(n))throw new Error("Finish time must be after start time");return this.updateTaskFields(e,s)}async updateTaskAssignment(e,n,r=null){const s={assigned_to:n,assigned_at:n?new Date().toISOString():null};return r&&(s.assigned_by=r),this.updateTaskFields(e,s)}async queryTasks(e={}){const{pagination:n={pageIndex:0,pageSize:10},sorting:r=[{id:"scheduled_datetime",desc:!1}],globalFilter:s="",additionalFilters:i={}}=e;try{const a=await this.supabaseService.queryFromTable("tasks",{userId:e.userId||null,userColumn:"assigned_to",additionalFilters:i,globalFilter:s,globalFilterColumns:["title","description","task_type","status"],sorting:r,pagination:n});return{tasks:a.data,totalCount:a.count}}catch(a){throw console.error("Error querying tasks:",a),a}}async createTask(e){try{this.validateTaskUpdate(e)}catch(n){throw new Error(`Invalid task data: ${n instanceof Error?n.message:String(n)}`)}try{return await this.supabaseService.createRecord("tasks",e)}catch(n){throw console.error("Error creating task:",n),n}}async deleteTask(e){try{return await this.supabaseService.deleteRecord("tasks",e),{success:!0}}catch(n){throw console.error("Error deleting task:",n),n}}async getTasksCountByStatus(e){try{let n=this.supabaseService.getSupabaseClient().from("tasks").select("status");e&&(n=n.eq("assigned_to",e));const{data:r,error:s}=await n;if(s)throw s;const i={};return _o.forEach(a=>{i[a]=0}),r==null||r.forEach(a=>{const o=a.status;i.hasOwnProperty(o)&&_o.includes(o)&&(i[o]=(i[o]||0)+1)}),i}catch(n){throw console.error("Error getting task counts:",n),n}}async getOverdueTasks(e){try{let n=this.supabaseService.getSupabaseClient().from("tasks").select("*");n=n.lt("scheduled_datetime",new Date().toISOString()),n=n.neq("status","completed").neq("status","admin_accepted").neq("status","cancelled"),e&&(n=n.eq("assigned_to",e));const{data:r,error:s}=await n;if(s)throw s;return r||[]}catch(n){throw console.error("Error getting overdue tasks:",n),n}}async getUpcomingTasks(e){try{const n=new Date,r=new Date(n.getTime()+24*60*60*1e3);let s=this.supabaseService.getSupabaseClient().from("tasks").select("*");s=s.gte("scheduled_datetime",n.toISOString()),s=s.lt("scheduled_datetime",r.toISOString()),s=s.neq("status","completed").neq("status","admin_accepted").neq("status","cancelled"),e&&(s=s.eq("assigned_to",e));const{data:i,error:a}=await s;if(a)throw a;return i||[]}catch(n){throw console.error("Error getting upcoming tasks:",n),n}}async getTaskAuditTrail(e){try{return await this.auditService.getAuditLog("tasks",e)}catch(n){throw console.error("Error fetching task audit trail:",n),n}}}class N_{constructor(e,n){this.supabaseService=e,this.role=n}async fetchNotes(e){if(e.attachedToType&&!Bd.includes(e.attachedToType))throw new Error(`Invalid attachment type: ${e.attachedToType}`);if(e.attachedToType&&!e.attachedToId)throw new Error("attachedToId is required when attachedToType is specified");const r={select:this.role==="cleaner"?"id, content, created_at, attached_to_type, attached_to_id":"id, content, created_by, created_at, attached_to_type, attached_to_id",sorting:[{id:"created_at",desc:!1}]};e.attachedToType&&e.attachedToId&&(r.additionalFilters={attached_to_type:e.attachedToType,attached_to_id:e.attachedToId});const i=(await this.supabaseService.queryFromTable("notes",r)).data;return i.length>0&&this.role==="admin"?this.enrichNotesWithUserInfo(i):i}async createNote(e){return this.validateNoteData(e),await this.supabaseService.createRecord("notes",e)}async deleteNote(e){if(!e)throw new Error("Note ID is required for deletion");await this.supabaseService.deleteRecord("notes",e)}async getNotesByAttachment(e,n){return this.fetchNotes({attachedToType:e,attachedToId:n})}validateNoteData(e){const n=[];if((!e.content||e.content.trim().length===0)&&n.push("Note content is required"),e.content&&e.content.trim().length>1e4&&n.push("Note content cannot exceed 10,000 characters"),e.attached_to_type&&!Bd.includes(e.attached_to_type)&&n.push(`Invalid attachment type: ${e.attached_to_type}`),e.attached_to_type&&!e.attached_to_id&&n.push("attached_to_id is required when attached_to_type is specified"),e.attached_to_id&&!e.attached_to_type&&n.push("attached_to_type is required when attached_to_id is specified"),n.length>0)throw new Error(`Note validation failed: ${n.join(", ")}`)}async enrichNotesWithUserInfo(e){const n=[...new Set(e.map(a=>a.created_by).filter(Boolean))];if(n.length===0)return e;const{data:r,error:s}=await this.supabaseService.getSupabaseClient().from("user_profiles").select("id, email, name").in("id",n);if(s)throw s;const i=new Map(r.map(a=>[a.id,a]));return e.map(a=>{const o=a,l=i.get(a.created_by);return l&&(l.email!==null&&(o.user_email=l.email),l.name!==null&&(o.user_name=l.name)),o})}}class P_{constructor(e){this.supabaseService=e}async getReservations(e={}){const{filters:n={},sorting:r=[{id:"check_in",desc:!0}],pagination:s={pageIndex:0,pageSize:10}}=e;let i=this.supabaseService.getSupabaseClient().from("reservations").select("*",{count:"exact"});if(n.status&&(i=i.eq("status",n.status)),n.listingId&&(i=i.eq("listing_id",n.listingId)),n.dateRange&&(n.dateRange.checkInFrom&&(i=i.gte("check_in",n.dateRange.checkInFrom)),n.dateRange.checkInTo&&(i=i.lte("check_in",n.dateRange.checkInTo)),n.dateRange.checkOutFrom&&(i=i.gte("check_out",n.dateRange.checkOutFrom)),n.dateRange.checkOutTo&&(i=i.lte("check_out",n.dateRange.checkOutTo))),n.globalFilter&&(i=i.or(`guest_name.ilike.%${n.globalFilter}%,listing_id.ilike.%${n.globalFilter}%,status.ilike.%${n.globalFilter}%`)),r&&r.length>0){const h=r[0];h&&(i=i.order(h.id,{ascending:!h.desc}))}const a=s.pageIndex*s.pageSize,o=a+s.pageSize-1;i=i.range(a,o);const{data:l,error:u,count:d}=await i;if(u)throw u;return{data:l||[],count:d||0}}async getReservationById(e){if(!e)throw new Error("Reservation ID is required");return this.supabaseService.getRecordById("reservations",e)}async createReservation(e){return this.validateReservationData(e),await this.supabaseService.createRecord("reservations",e)}async updateReservation(e,n){if(!e)throw new Error("Reservation ID is required for updates");this.validateReservationUpdate(n),await this.supabaseService.updateRecord("reservations",e,n)}async deleteReservation(e){if(!e)throw new Error("Reservation ID is required for deletion");await this.supabaseService.deleteRecord("reservations",e)}async getReservationsByListing(e){return(await this.supabaseService.queryFromTable("reservations",{additionalFilters:{listing_id:e},sorting:[{id:"check_in",desc:!0}]})).data}async getReservationsByStatus(e){return(await this.supabaseService.queryFromTable("reservations",{additionalFilters:{status:e},sorting:[{id:"check_in",desc:!0}]})).data}async getUpcomingReservations(){const e=new Date().toISOString().split("T")[0];return this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("reservations").select("*").gte("check_in",e).order("check_in",{ascending:!0}))}validateReservationData(e){const n=[];if((!e.id||e.id.trim().length===0)&&n.push("Reservation ID is required"),(!e.guest_name||e.guest_name.trim().length===0)&&n.push("Guest name is required"),e.guest_name&&e.guest_name.trim().length>255&&n.push("Guest name cannot exceed 255 characters"),e.check_in&&e.check_out){const s=new Date(e.check_in);new Date(e.check_out)<=s&&n.push("Check-out date must be after check-in date")}e.nights!==void 0&&e.nights!==null&&e.nights<0&&n.push("Number of nights cannot be negative"),e.party_size!==void 0&&e.party_size!==null&&e.party_size<0&&n.push("Party size cannot be negative");const r=["pricing_nightly_rate","pricing_subtotal","pricing_cleaning_fee","pricing_guest_service_fee","pricing_guest_total","pricing_host_service_fee","pricing_host_payout"];for(const s of r){const i=e[s];i!=null&&i<0&&n.push(`${s} cannot be negative`)}if(n.length>0)throw new Error(`Reservation validation failed: ${n.join(", ")}`)}validateReservationUpdate(e){const n=[];if(e.guest_name!==void 0&&e.guest_name.trim().length===0&&n.push("Guest name cannot be empty"),e.guest_name&&e.guest_name.trim().length>255&&n.push("Guest name cannot exceed 255 characters"),e.check_in&&e.check_out){const s=new Date(e.check_in);new Date(e.check_out)<=s&&n.push("Check-out date must be after check-in date")}e.nights!==void 0&&e.nights!==null&&e.nights<0&&n.push("Number of nights cannot be negative"),e.party_size!==void 0&&e.party_size!==null&&e.party_size<0&&n.push("Party size cannot be negative");const r=["pricing_nightly_rate","pricing_subtotal","pricing_cleaning_fee","pricing_guest_service_fee","pricing_guest_total","pricing_host_service_fee","pricing_host_payout"];for(const s of r){const i=e[s];i!=null&&i<0&&n.push(`${s} cannot be negative`)}if(n.length>0)throw new Error(`Reservation update validation failed: ${n.join(", ")}`)}}class L_{constructor(e,n){this.supabaseService=e,this.role=n}async getCleaners(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.from("roles").select("user_id").eq("role","cleaner").order("created_at");if(r)throw r;if(!n||n.length===0)return[];const{data:s,error:i}=await e.from("user_profiles").select("id, name, email").in("id",n.map(o=>o.user_id)).overrideTypes();if(i)throw i;return(s==null?void 0:s.map(o=>({id:o.id,name:o.name||o.email||`User ${o.id.substring(0,8)}...`,email:o.email||""})))||[]}async getCurrentSession(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.auth.getSession();if(r)throw r;return n.session}async getCurrentUser(){const e=this.supabaseService.getSupabaseClient(),{data:n,error:r}=await e.auth.getUser();if(r)throw r;return n.user}async getUserProfile(e){if(!e)throw new Error("User ID is required");try{return await this.supabaseService.getRecordById("user_profiles",e)}catch(n){if(n instanceof Error&&n.message.includes("not found"))return null;throw n}}async getUsersByRole(e){if(e==="cleaner")return this.getCleaners();const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("roles").select("user_id").eq("role",e).order("created_at");if(s)throw s;if(!r||r.length===0)return[];const{data:i,error:a}=await n.from("user_profiles").select("id, name, email").in("id",r.map(l=>l.user_id)).overrideTypes();if(a)throw a;return(i==null?void 0:i.map(l=>({id:l.id,name:l.name||l.email||`User ${l.id.substring(0,8)}...`,email:l.email||""})))||[]}async getAllUsers(e={}){if(this.role!=="admin")throw new Error("Only admins can fetch all users");const{sorting:n=[{id:"created_at",desc:!0}],pagination:r={pageIndex:0,pageSize:10}}=e,s={sorting:n,pagination:r};if(e.role){const i=await this.supabaseService.queryFromTable("user_profiles",s);if(e.role!=="unassigned"){const a=await this.getUsersByRole(e.role),o=new Set(a.map(u=>u.id)),l=i.data.filter(u=>o.has(u.id));return{data:l,count:l.length}}return i}return this.supabaseService.queryFromTable("user_profiles",s)}async hasRole(e,n){if(!e)throw new Error("User ID is required");const r=this.supabaseService.getSupabaseClient();if(n==="unassigned"){const{data:a,error:o}=await r.from("roles").select("role").eq("user_id",e);if(o)throw o;return!a||a.length===0}const{data:s,error:i}=await r.from("roles").select("role").eq("user_id",e).eq("role",n).single();if(i){if(i.code==="PGRST116")return!1;throw i}return!!s}async getUserRoles(e){if(!e)throw new Error("User ID is required");const n=this.supabaseService.getSupabaseClient(),{data:r,error:s}=await n.from("roles").select("role").eq("user_id",e);if(s)throw s;return(r==null?void 0:r.map(i=>i.role))||[]}async validateUserPermission(e,n,r){if(!e)throw new Error("User ID is required for permission validation");return await this.hasRole(e,n)?!0:(console.warn(`User ${e} lacks ${n} role for operation: ${r}`),!1)}async deleteUserProfile(e){if(!e)throw new Error("User ID is required for profile deletion");await this.supabaseService.deleteRecord("user_profiles",e)}}class $_{constructor(e){this.supabaseService=e}async fetchListings(){return(await this.supabaseService.queryFromTable("listings",{select:"id, airbnb_id, airbnb_payload, created_at, updated_at",sorting:[{id:"id",desc:!1}]})).data}async fetchListing(e){return this.supabaseService.getRecordById("listings",e)}async getListingsForSelection(){return(await this.supabaseService.queryFromTable("listings",{sorting:[{id:"id",desc:!1}]})).data}async searchListings(e={}){const n={};return e.id&&(n.id=e.id),e.airbnbId&&(n.airbnb_id=e.airbnbId),(await this.supabaseService.queryFromTable("listings",{additionalFilters:n,globalFilter:e.searchPattern||"",globalFilterColumns:["id","airbnb_id"],sorting:[{id:"id",desc:!1}]})).data}}class I_{constructor(e){this.supabaseService=e}async getAuditLog(e,n){const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("table_name",e).eq("record_id",n).order("changed_at",{ascending:!1}));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getAuditLogWithFilters(e={}){const{tableName:n,recordId:r,actionType:s,changedBy:i,dateFrom:a,dateTo:o,limit:l=100}=e;let u=this.supabaseService.getSupabaseClient().from("audit_log").select("*").order("changed_at",{ascending:!1}).limit(l);n&&(u=u.eq("table_name",n)),r&&(u=u.eq("record_id",r)),s&&(u=u.eq("action_type",s)),i&&(u=u.eq("changed_by",i)),a&&(u=u.gte("changed_at",a)),o&&(u=u.lte("changed_at",o));const d=await this.supabaseService.executeQuery(()=>u);return!d||d.length===0?[]:this.enrichWithUserProfiles(d)}async getTableAuditLog(e,n){if(!n||n.length===0)return[];const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("table_name",e).in("record_id",n).order("changed_at",{ascending:!1}));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getUserAuditLog(e,n=50){const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").eq("changed_by",e).order("changed_at",{ascending:!1}).limit(n));return!r||r.length===0?[]:this.enrichWithUserProfiles(r)}async getRecentAuditActivity(e=20){const n=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("audit_log").select("*").order("changed_at",{ascending:!1}).limit(e));return!n||n.length===0?[]:this.enrichWithUserProfiles(n)}async enrichWithUserProfiles(e){if(!e||e.length===0)return e;const n=[...new Set(e.map(i=>i.changed_by).filter(i=>i!==null))];if(n.length===0)return e;const r=await this.supabaseService.executeQuery(()=>this.supabaseService.getSupabaseClient().from("user_profiles").select("id, email, name").in("id",n)),s=new Map((r==null?void 0:r.map(i=>[i.id,i]))||[]);return e.map(i=>{const a={...i};if(i.changed_by&&s.has(i.changed_by)){const o=s.get(i.changed_by);a.changed_by_name=o.name||void 0,a.changed_by_email=o.email||void 0}return a})}formatAuditEntry(e){const n=this.getActionDescription(e.action_type||"UPDATE"),r=this.getChangeDescription(e),s=new Date(e.changed_at).toLocaleString(),i=this.getUserDisplayName(e);return{action:n,description:r,timestamp:s,user:i}}getActionDescription(e){switch(e){case"INSERT":return"Created";case"UPDATE":return"Updated";case"DELETE":return"Deleted";default:return"Modified"}}getChangeDescription(e){if(e.action_type==="INSERT")return`New ${e.table_name} record created`;if(e.action_type==="DELETE")return`${e.table_name} record deleted`;if(e.changed_fields&&e.changed_fields.length>0){const n=e.changed_fields.length,r=e.changed_fields.join(", ");return`Updated ${n} field(s): ${r}`}return`${e.table_name} record updated`}getUserDisplayName(e){return e.changed_by?e.changed_by_name?e.changed_by_name:e.changed_by_email?e.changed_by_email.split("@")[0]:"Unknown User":"System"}}class A_{constructor(e){this.supabaseService=e}async getHealthCheck(){return this.supabaseService.callSupabaseFunction("health")}}const Xe=()=>{const{role:t,supabaseService:e}=$e(),n=S.useMemo(()=>new R_(e,t),[e,t]),r=S.useMemo(()=>new N_(e,t),[e,t]),s=S.useMemo(()=>new P_(e),[e]),i=S.useMemo(()=>new L_(e,t),[e,t]),a=S.useMemo(()=>new $_(e),[e]),o=S.useMemo(()=>new I_(e),[e]),l=S.useMemo(()=>new T_(e,o),[e,o]),u=S.useMemo(()=>new A_(e),[e]);return{supabaseService:e,todoService:n,taskService:l,noteService:r,reservationService:s,userService:i,listingService:a,auditService:o,healthCheckService:u}};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function ln(t,e){return typeof t=="function"?t(e):t}function Qe(t,e){return n=>{e.setState(r=>({...r,[t]:ln(n,r[t])}))}}function Oa(t){return t instanceof Function}function O_(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function D_(t,e){const n=[],r=s=>{s.forEach(i=>{n.push(i);const a=e(i);a!=null&&a.length&&r(a)})};return r(t),n}function O(t,e,n){let r=[],s;return i=>{let a;n.key&&n.debug&&(a=Date.now());const o=t(i);if(!(o.length!==r.length||o.some((d,h)=>r[h]!==d)))return s;r=o;let u;if(n.key&&n.debug&&(u=Date.now()),s=e(...o),n==null||n.onChange==null||n.onChange(s),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-a)*100)/100,h=Math.round((Date.now()-u)*100)/100,f=h/16,g=(p,w)=>{for(p=String(p);p.length<w;)p=" "+p;return p};console.info(`%c⏱ ${g(h,5)} /${g(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return s}}function D(t,e,n,r){return{debug:()=>{var s;return(s=t==null?void 0:t.debugAll)!=null?s:t[e]},key:!1,onChange:r}}function F_(t,e,n,r){const s=()=>{var a;return(a=i.getValue())!=null?a:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:s,getContext:O(()=>[t,n,e,i],(a,o,l,u)=>({table:a,column:o,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),D(t.options,"debugCells"))};return t._features.forEach(a=>{a.createCell==null||a.createCell(i,n,e,t)},{}),i}function M_(t,e,n,r){var s,i;const o={...t._getDefaultColumnDef(),...e},l=o.accessorKey;let u=(s=(i=o.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?s:typeof o.header=="string"?o.header:void 0,d;if(o.accessorFn?d=o.accessorFn:l&&(l.includes(".")?d=f=>{let g=f;for(const w of l.split(".")){var p;g=(p=g)==null?void 0:p[w]}return g}:d=f=>f[o.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:d,parent:r,depth:n,columnDef:o,columns:[],getFlatColumns:O(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(g=>g.getFlatColumns())]},D(t.options,"debugColumns")),getLeafColumns:O(()=>[t._getOrderColumnsFn()],f=>{var g;if((g=h.columns)!=null&&g.length){let p=h.columns.flatMap(w=>w.getLeafColumns());return f(p)}return[h]},D(t.options,"debugColumns"))};for(const f of t._features)f.createColumn==null||f.createColumn(h,t);return h}const Ce="debugHeaders";function Hd(t,e,n){var r;let i={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],o=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(o),a.push(l)};return o(i),a},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(i,t)}),i}const U_={createTable:t=>{t.getHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>{var i,a;const o=(i=r==null?void 0:r.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?i:[],l=(a=s==null?void 0:s.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?a:[],u=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(s!=null&&s.includes(h.id)));return yi(e,[...o,...u,...l],t)},D(t.options,Ce)),t.getCenterHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,s)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(s!=null&&s.includes(i.id))),yi(e,n,t,"center")),D(t.options,Ce)),t.getLeftHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(a=>n.find(o=>o.id===a)).filter(Boolean))!=null?s:[];return yi(e,i,t,"left")},D(t.options,Ce)),t.getRightHeaderGroups=O(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var s;const i=(s=r==null?void 0:r.map(a=>n.find(o=>o.id===a)).filter(Boolean))!=null?s:[];return yi(e,i,t,"right")},D(t.options,Ce)),t.getFooterGroups=O(()=>[t.getHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getLeftFooterGroups=O(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getCenterFooterGroups=O(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getRightFooterGroups=O(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),D(t.options,Ce)),t.getFlatHeaders=O(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getLeftFlatHeaders=O(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getCenterFlatHeaders=O(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getRightFlatHeaders=O(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),D(t.options,Ce)),t.getCenterLeafHeaders=O(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),D(t.options,Ce)),t.getLeftLeafHeaders=O(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),D(t.options,Ce)),t.getRightLeafHeaders=O(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),D(t.options,Ce)),t.getLeafHeaders=O(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var s,i,a,o,l,u;return[...(s=(i=e[0])==null?void 0:i.headers)!=null?s:[],...(a=(o=n[0])==null?void 0:o.headers)!=null?a:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(d=>d.getLeafHeaders()).flat()},D(t.options,Ce))}};function yi(t,e,n,r){var s,i;let a=0;const o=function(f,g){g===void 0&&(g=1),a=Math.max(a,g),f.filter(p=>p.getIsVisible()).forEach(p=>{var w;(w=p.columns)!=null&&w.length&&o(p.columns,g+1)},0)};o(t);let l=[];const u=(f,g)=>{const p={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},w=[];f.forEach(_=>{const m=[...w].reverse()[0],v=_.column.depth===p.depth;let y,x=!1;if(v&&_.column.parent?y=_.column.parent:(y=_.column,x=!0),m&&(m==null?void 0:m.column)===y)m.subHeaders.push(_);else{const k=Hd(n,y,{id:[r,g,y.id,_==null?void 0:_.id].filter(Boolean).join("_"),isPlaceholder:x,placeholderId:x?`${w.filter(C=>C.column===y).length}`:void 0,depth:g,index:w.length});k.subHeaders.push(_),w.push(k)}p.headers.push(_),_.headerGroup=p}),l.push(p),g>0&&u(w,g-1)},d=e.map((f,g)=>Hd(n,f,{depth:a,index:g}));u(d,a-1),l.reverse();const h=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let w=0,_=0,m=[0];p.subHeaders&&p.subHeaders.length?(m=[],h(p.subHeaders).forEach(y=>{let{colSpan:x,rowSpan:k}=y;w+=x,m.push(k)})):w=1;const v=Math.min(...m);return _=_+v,p.colSpan=w,p.rowSpan=_,{colSpan:w,rowSpan:_}});return h((s=(i=l[0])==null?void 0:i.headers)!=null?s:[]),l}const ec=(t,e,n,r,s,i,a)=>{let o={id:e,index:r,original:n,depth:s,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(o._valuesCache.hasOwnProperty(l))return o._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return o._valuesCache[l]=u.accessorFn(o.original,r),o._valuesCache[l]},getUniqueValues:l=>{if(o._uniqueValuesCache.hasOwnProperty(l))return o._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(o._uniqueValuesCache[l]=u.columnDef.getUniqueValues(o.original,r),o._uniqueValuesCache[l]):(o._uniqueValuesCache[l]=[o.getValue(l)],o._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=o.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>D_(o.subRows,l=>l.subRows),getParentRow:()=>o.parentId?t.getRow(o.parentId,!0):void 0,getParentRows:()=>{let l=[],u=o;for(;;){const d=u.getParentRow();if(!d)break;l.push(d),u=d}return l.reverse()},getAllCells:O(()=>[t.getAllLeafColumns()],l=>l.map(u=>F_(t,o,u,u.id)),D(t.options,"debugRows")),_getAllCellsByColumnId:O(()=>[o.getAllCells()],l=>l.reduce((u,d)=>(u[d.column.id]=d,u),{}),D(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(o,t)}return o},z_={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},mp=(t,e,n)=>{var r,s;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((s=t.getValue(e))==null||(s=s.toString())==null||(s=s.toLowerCase())==null)&&s.includes(i))};mp.autoRemove=t=>wt(t);const vp=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};vp.autoRemove=t=>wt(t);const yp=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};yp.autoRemove=t=>wt(t);const wp=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};wp.autoRemove=t=>wt(t);const Sp=(t,e,n)=>!n.some(r=>{var s;return!((s=t.getValue(e))!=null&&s.includes(r))});Sp.autoRemove=t=>wt(t)||!(t!=null&&t.length);const _p=(t,e,n)=>n.some(r=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(r)});_p.autoRemove=t=>wt(t)||!(t!=null&&t.length);const xp=(t,e,n)=>t.getValue(e)===n;xp.autoRemove=t=>wt(t);const kp=(t,e,n)=>t.getValue(e)==n;kp.autoRemove=t=>wt(t);const tc=(t,e,n)=>{let[r,s]=n;const i=t.getValue(e);return i>=r&&i<=s};tc.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,s=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(r)?-1/0:r,a=n===null||Number.isNaN(s)?1/0:s;if(i>a){const o=i;i=a,a=o}return[i,a]};tc.autoRemove=t=>wt(t)||wt(t[0])&&wt(t[1]);const At={includesString:mp,includesStringSensitive:vp,equalsString:yp,arrIncludes:wp,arrIncludesAll:Sp,arrIncludesSome:_p,equals:xp,weakEquals:kp,inNumberRange:tc};function wt(t){return t==null||t===""}const V_={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Qe("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?At.includesString:typeof r=="number"?At.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?At.equals:Array.isArray(r)?At.arrIncludes:At.weakEquals},t.getFilterFn=()=>{var n,r;return Oa(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:At[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,s;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const s=t.getFilterFn(),i=r==null?void 0:r.find(d=>d.id===t.id),a=ln(n,i?i.value:void 0);if(qd(s,a,t)){var o;return(o=r==null?void 0:r.filter(d=>d.id!==t.id))!=null?o:[]}const l={id:t.id,value:a};if(i){var u;return(u=r==null?void 0:r.map(d=>d.id===t.id?l:d))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=s=>{var i;return(i=ln(e,s))==null?void 0:i.filter(a=>{const o=n.find(l=>l.id===a.id);if(o){const l=o.getFilterFn();if(qd(l,a.value,o))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function qd(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const B_=(t,e,n)=>n.reduce((r,s)=>{const i=s.getValue(t);return r+(typeof i=="number"?i:0)},0),H_=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},q_=(t,e,n)=>{let r;return n.forEach(s=>{const i=s.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},G_=(t,e,n)=>{let r,s;return n.forEach(i=>{const a=i.getValue(t);a!=null&&(r===void 0?a>=a&&(r=s=a):(r>a&&(r=a),s<a&&(s=a)))}),[r,s]},W_=(t,e)=>{let n=0,r=0;if(e.forEach(s=>{let i=s.getValue(t);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},K_=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!O_(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),s=n.sort((i,a)=>i-a);return n.length%2!==0?s[r]:(s[r-1]+s[r])/2},Q_=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),J_=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Y_=(t,e)=>e.length,xo={sum:B_,min:H_,max:q_,extent:G_,mean:W_,median:K_,unique:Q_,uniqueCount:J_,count:Y_},X_={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Qe("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return xo.sum;if(Object.prototype.toString.call(r)==="[object Date]")return xo.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Oa(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:xo[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var s;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((s=n.subRows)!=null&&s.length)}}};function Z_(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(i=>!e.includes(i.id));return n==="remove"?r:[...e.map(i=>t.find(a=>a.id===i)).filter(Boolean),...r]}const ex={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Qe("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=O(n=>[gs(e,n)],n=>n.findIndex(r=>r.id===t.id),D(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=gs(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const s=gs(e,n);return((r=s[s.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=O(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>s=>{let i=[];if(!(e!=null&&e.length))i=s;else{const a=[...e],o=[...s];for(;o.length&&a.length;){const l=a.shift(),u=o.findIndex(d=>d.id===l);u>-1&&i.push(o.splice(u,1)[0])}i=[...i,...o]}return Z_(i,n,r)},D(t.options,"debugTable"))}},ko=()=>({left:[],right:[]}),tx={getInitialState:t=>({columnPinning:ko(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Qe("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(s=>s.id).filter(Boolean);e.setColumnPinning(s=>{var i,a;if(n==="right"){var o,l;return{left:((o=s==null?void 0:s.left)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=s==null?void 0:s.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var u,d;return{left:[...((u=s==null?void 0:s.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((d=s==null?void 0:s.right)!=null?d:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((i=s==null?void 0:s.left)!=null?i:[]).filter(h=>!(r!=null&&r.includes(h))),right:((a=s==null?void 0:s.right)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var s,i,a;return((s=r.columnDef.enablePinning)!=null?s:!0)&&((i=(a=e.options.enableColumnPinning)!=null?a:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(o=>o.id),{left:r,right:s}=e.getState().columnPinning,i=n.some(o=>r==null?void 0:r.includes(o)),a=n.some(o=>s==null?void 0:s.includes(o));return i?"left":a?"right":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();return s?(n=(r=e.getState().columnPinning)==null||(r=r[s])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=O(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,s)=>{const i=[...r??[],...s??[]];return n.filter(a=>!i.includes(a.column.id))},D(e.options,"debugRows")),t.getLeftVisibleCells=O(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),D(e.options,"debugRows")),t.getRightVisibleCells=O(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(a=>a.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),D(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?ko():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:ko())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var s,i;return!!((s=r.left)!=null&&s.length||(i=r.right)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=O(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),D(t.options,"debugColumns")),t.getRightLeafColumns=O(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(s=>s.id===r)).filter(Boolean),D(t.options,"debugColumns")),t.getCenterLeafColumns=O(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const s=[...n??[],...r??[]];return e.filter(i=>!s.includes(i.id))},D(t.options,"debugColumns"))}};function nx(t){return t||(typeof document<"u"?document:null)}const wi={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Co=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),rx={getDefaultColumnDef:()=>wi,getInitialState:t=>({columnSizing:{},columnSizingInfo:Co(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Qe("columnSizing",t),onColumnSizingInfoChange:Qe("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,s;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:wi.minSize,(r=i??t.columnDef.size)!=null?r:wi.size),(s=t.columnDef.maxSize)!=null?s:wi.maxSize)},t.getStart=O(n=>[n,gs(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((s,i)=>s+i.getSize(),0),D(e.options,"debugColumns")),t.getAfter=O(n=>[n,gs(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((s,i)=>s+i.getSize(),0),D(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...s}=n;return s})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=s=>{if(s.subHeaders.length)s.subHeaders.forEach(r);else{var i;n+=(i=s.column.getSize())!=null?i:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),s=r==null?void 0:r.getCanResize();return i=>{if(!r||!s||(i.persist==null||i.persist(),Eo(i)&&i.touches&&i.touches.length>1))return;const a=t.getSize(),o=t?t.getLeafHeaders().map(m=>[m.column.id,m.column.getSize()]):[[r.id,r.getSize()]],l=Eo(i)?Math.round(i.touches[0].clientX):i.clientX,u={},d=(m,v)=>{typeof v=="number"&&(e.setColumnSizingInfo(y=>{var x,k;const C=e.options.columnResizeDirection==="rtl"?-1:1,E=(v-((x=y==null?void 0:y.startOffset)!=null?x:0))*C,j=Math.max(E/((k=y==null?void 0:y.startSize)!=null?k:0),-.999999);return y.columnSizingStart.forEach(P=>{let[T,V]=P;u[T]=Math.round(Math.max(V+V*j,0)*100)/100}),{...y,deltaOffset:E,deltaPercentage:j}}),(e.options.columnResizeMode==="onChange"||m==="end")&&e.setColumnSizing(y=>({...y,...u})))},h=m=>d("move",m),f=m=>{d("end",m),e.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=nx(n),p={moveHandler:m=>h(m.clientX),upHandler:m=>{g==null||g.removeEventListener("mousemove",p.moveHandler),g==null||g.removeEventListener("mouseup",p.upHandler),f(m.clientX)}},w={moveHandler:m=>(m.cancelable&&(m.preventDefault(),m.stopPropagation()),h(m.touches[0].clientX),!1),upHandler:m=>{var v;g==null||g.removeEventListener("touchmove",w.moveHandler),g==null||g.removeEventListener("touchend",w.upHandler),m.cancelable&&(m.preventDefault(),m.stopPropagation()),f((v=m.touches[0])==null?void 0:v.clientX)}},_=sx()?{passive:!1}:!1;Eo(i)?(g==null||g.addEventListener("touchmove",w.moveHandler,_),g==null||g.addEventListener("touchend",w.upHandler,_)):(g==null||g.addEventListener("mousemove",p.moveHandler,_),g==null||g.addEventListener("mouseup",p.upHandler,_)),e.setColumnSizingInfo(m=>({...m,startOffset:l,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:o,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Co():(n=t.initialState.columnSizingInfo)!=null?n:Co())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,s)=>r+s.getSize(),0))!=null?e:0}}};let Si=null;function sx(){if(typeof Si=="boolean")return Si;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Si=t,Si}function Eo(t){return t.type==="touchstart"}const ix={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Qe("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const s=t.columns;return(n=s.length?s.some(i=>i.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=O(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),D(e.options,"debugRows")),t.getVisibleCells=O(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,s)=>[...n,...r,...s],D(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>O(()=>[r(),r().filter(s=>s.getIsVisible()).map(s=>s.id).join("_")],s=>s.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),D(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((s,i)=>({...s,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function gs(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const ax={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},ox={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Qe("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,s,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((s=e.options.enableFilters)!=null?s:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>At.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Oa(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:At[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},lx={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Qe("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var s,i;t.setExpanded(r?{}:(s=(i=t.initialState)==null?void 0:i.expanded)!=null?s:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(s=>!s.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const a=i.split(".");r=Math.max(r,a.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var s;const i=r===!0?!0:!!(r!=null&&r[t.id]);let a={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(o=>{a[o]=!0}):a=r,n=(s=n)!=null?s:!i,!i&&n)return{...a,[t.id]:!0};if(i&&!n){const{[t.id]:o,...l}=a;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,s;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((s=t.subRows)!=null&&s.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},zl=0,Vl=10,jo=()=>({pageIndex:zl,pageSize:Vl}),ux={getInitialState:t=>({...t,pagination:{...jo(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:Qe("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,s;if(!e){t._queue(()=>{e=!0});return}if((r=(s=t.options.autoResetAll)!=null?s:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const s=i=>ln(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(s)},t.resetPagination=r=>{var s;t.setPagination(r?jo():(s=t.initialState.pagination)!=null?s:jo())},t.setPageIndex=r=>{t.setPagination(s=>{let i=ln(r,s.pageIndex);const a=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,a)),{...s,pageIndex:i}})},t.resetPageIndex=r=>{var s,i;t.setPageIndex(r?zl:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?s:zl)},t.resetPageSize=r=>{var s,i;t.setPageSize(r?Vl:(s=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?s:Vl)},t.setPageSize=r=>{t.setPagination(s=>{const i=Math.max(1,ln(r,s.pageSize)),a=s.pageSize*s.pageIndex,o=Math.floor(a/i);return{...s,pageIndex:o,pageSize:i}})},t.setPageCount=r=>t.setPagination(s=>{var i;let a=ln(r,(i=t.options.pageCount)!=null?i:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...s,pageCount:a}}),t.getPageOptions=O(()=>[t.getPageCount()],r=>{let s=[];return r&&r>0&&(s=[...new Array(r)].fill(null).map((i,a)=>a)),s},D(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,s=t.getPageCount();return s===-1?!0:s===0?!1:r<s-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},bo=()=>({top:[],bottom:[]}),cx={getInitialState:t=>({rowPinning:bo(),...t}),getDefaultOptions:t=>({onRowPinningChange:Qe("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,s)=>{const i=r?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],a=s?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],o=new Set([...a,t.id,...i]);e.setRowPinning(l=>{var u,d;if(n==="bottom"){var h,f;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(w=>!(o!=null&&o.has(w))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(w=>!(o!=null&&o.has(w))),...Array.from(o)]}}if(n==="top"){var g,p;return{top:[...((g=l==null?void 0:l.top)!=null?g:[]).filter(w=>!(o!=null&&o.has(w))),...Array.from(o)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(w=>!(o!=null&&o.has(w)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(w=>!(o!=null&&o.has(w))),bottom:((d=l==null?void 0:l.bottom)!=null?d:[]).filter(w=>!(o!=null&&o.has(w)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:s}=e.options;return typeof r=="function"?r(t):(n=r??s)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:s}=e.getState().rowPinning,i=n.some(o=>r==null?void 0:r.includes(o)),a=n.some(o=>s==null?void 0:s.includes(o));return i?"top":a?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const s=t.getIsPinned();if(!s)return-1;const i=(n=s==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(a=>{let{id:o}=a;return o});return(r=i==null?void 0:i.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?bo():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:bo())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var s,i;return!!((s=r.top)!=null&&s.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var s;return((s=t.options.keepPinnedRows)==null||s?(n??[]).map(a=>{const o=t.getRow(a,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(a=>e.find(o=>o.id===a))).filter(Boolean).map(a=>({...a,position:r}))},t.getTopRows=O(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),D(t.options,"debugRows")),t.getBottomRows=O(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),D(t.options,"debugRows")),t.getCenterRows=O(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const s=new Set([...n??[],...r??[]]);return e.filter(i=>!s.has(i.id))},D(t.options,"debugRows"))}},dx={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Qe("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},s=t.getPreGroupedRowModel().flatRows;return e?s.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):s.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),s={...n};return t.getRowModel().rows.forEach(i=>{Bl(s,i.id,r,!0,t)}),s}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=O(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Ro(t,n):{rows:[],flatRows:[],rowsById:{}},D(t.options,"debugTable")),t.getFilteredSelectedRowModel=O(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Ro(t,n):{rows:[],flatRows:[],rowsById:{}},D(t.options,"debugTable")),t.getGroupedSelectedRowModel=O(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Ro(t,n):{rows:[],flatRows:[],rowsById:{}},D(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(s=>s.getCanSelect()&&!n[s.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(s=>s.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(s=>!n[s.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const s=t.getIsSelected();e.setRowSelection(i=>{var a;if(n=typeof n<"u"?n:!s,t.getCanSelect()&&s===n)return i;const o={...i};return Bl(o,t.id,n,(a=r==null?void 0:r.selectChildren)!=null?a:!0,e),o})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return nc(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return Hl(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return Hl(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var s;n&&t.toggleSelected((s=r.target)==null?void 0:s.checked)}}}},Bl=(t,e,n,r,s)=>{var i;const a=s.getRow(e,!0);n?(a.getCanMultiSelect()||Object.keys(t).forEach(o=>delete t[o]),a.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(i=a.subRows)!=null&&i.length&&a.getCanSelectSubRows()&&a.subRows.forEach(o=>Bl(t,o.id,n,r,s))};function Ro(t,e){const n=t.getState().rowSelection,r=[],s={},i=function(a,o){return a.map(l=>{var u;const d=nc(l,n);if(d&&(r.push(l),s[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:i(l.subRows)}),d)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:s}}function nc(t,e){var n;return(n=e[t.id])!=null?n:!1}function Hl(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let s=!0,i=!1;return t.subRows.forEach(a=>{if(!(i&&!s)&&(a.getCanSelect()&&(nc(a,e)?i=!0:s=!1),a.subRows&&a.subRows.length)){const o=Hl(a,e);o==="all"?i=!0:(o==="some"&&(i=!0),s=!1)}}),s?"all":i?"some":!1}const ql=/([0-9]+)/gm,hx=(t,e,n)=>Cp(Sn(t.getValue(n)).toLowerCase(),Sn(e.getValue(n)).toLowerCase()),fx=(t,e,n)=>Cp(Sn(t.getValue(n)),Sn(e.getValue(n))),gx=(t,e,n)=>rc(Sn(t.getValue(n)).toLowerCase(),Sn(e.getValue(n)).toLowerCase()),px=(t,e,n)=>rc(Sn(t.getValue(n)),Sn(e.getValue(n))),mx=(t,e,n)=>{const r=t.getValue(n),s=e.getValue(n);return r>s?1:r<s?-1:0},vx=(t,e,n)=>rc(t.getValue(n),e.getValue(n));function rc(t,e){return t===e?0:t>e?1:-1}function Sn(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Cp(t,e){const n=t.split(ql).filter(Boolean),r=e.split(ql).filter(Boolean);for(;n.length&&r.length;){const s=n.shift(),i=r.shift(),a=parseInt(s,10),o=parseInt(i,10),l=[a,o].sort();if(isNaN(l[0])){if(s>i)return 1;if(i>s)return-1;continue}if(isNaN(l[1]))return isNaN(a)?-1:1;if(a>o)return 1;if(o>a)return-1}return n.length-r.length}const Qr={alphanumeric:hx,alphanumericCaseSensitive:fx,text:gx,textCaseSensitive:px,datetime:mx,basic:vx},yx={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Qe("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const s of n){const i=s==null?void 0:s.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return Qr.datetime;if(typeof i=="string"&&(r=!0,i.split(ql).length>1))return Qr.alphanumeric}return r?Qr.text:Qr.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Oa(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Qr[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const s=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(a=>{const o=a==null?void 0:a.find(g=>g.id===t.id),l=a==null?void 0:a.findIndex(g=>g.id===t.id);let u=[],d,h=i?n:s==="desc";if(a!=null&&a.length&&t.getCanMultiSort()&&r?o?d="toggle":d="add":a!=null&&a.length&&l!==a.length-1?d="replace":o?d="toggle":d="replace",d==="toggle"&&(i||s||(d="remove")),d==="add"){var f;u=[...a,{id:t.id,desc:h}],u.splice(0,u.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=a.map(g=>g.id===t.id?{...g,desc:h}:g):d==="remove"?u=a.filter(g=>g.id!==t.id):u=[{id:t.id,desc:h}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,s;const i=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(s=e.options.enableMultiRemove)!=null)||s)?!1:a==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(s=>s.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(s=>s.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},wx=[U_,ix,ex,tx,z_,V_,ax,ox,yx,X_,lx,ux,cx,dx,rx];function Sx(t){var e,n;const r=[...wx,...(e=t._features)!=null?e:[]];let s={_features:r};const i=s._features.reduce((f,g)=>Object.assign(f,g.getDefaultOptions==null?void 0:g.getDefaultOptions(s)),{}),a=f=>s.options.mergeOptions?s.options.mergeOptions(i,f):{...i,...f};let l={...{},...(n=t.initialState)!=null?n:{}};s._features.forEach(f=>{var g;l=(g=f.getInitialState==null?void 0:f.getInitialState(l))!=null?g:l});const u=[];let d=!1;const h={_features:r,options:{...i,...t},initialState:l,_queue:f=>{u.push(f),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{s.setState(s.initialState)},setOptions:f=>{const g=ln(f,s.options);s.options=a(g)},getState:()=>s.options.state,setState:f=>{s.options.onStateChange==null||s.options.onStateChange(f)},_getRowId:(f,g,p)=>{var w;return(w=s.options.getRowId==null?void 0:s.options.getRowId(f,g,p))!=null?w:`${p?[p.id,g].join("."):g}`},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(f,g)=>{let p=(g?s.getPrePaginationRowModel():s.getRowModel()).rowsById[f];if(!p&&(p=s.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:O(()=>[s.options.defaultColumn],f=>{var g;return f=(g=f)!=null?g:{},{header:p=>{const w=p.header.column.columnDef;return w.accessorKey?w.accessorKey:w.accessorFn?w.id:null},cell:p=>{var w,_;return(w=(_=p.renderValue())==null||_.toString==null?void 0:_.toString())!=null?w:null},...s._features.reduce((p,w)=>Object.assign(p,w.getDefaultColumnDef==null?void 0:w.getDefaultColumnDef()),{}),...f}},D(t,"debugColumns")),_getColumnDefs:()=>s.options.columns,getAllColumns:O(()=>[s._getColumnDefs()],f=>{const g=function(p,w,_){return _===void 0&&(_=0),p.map(m=>{const v=M_(s,m,_,w),y=m;return v.columns=y.columns?g(y.columns,v,_+1):[],v})};return g(f)},D(t,"debugColumns")),getAllFlatColumns:O(()=>[s.getAllColumns()],f=>f.flatMap(g=>g.getFlatColumns()),D(t,"debugColumns")),_getAllFlatColumnsById:O(()=>[s.getAllFlatColumns()],f=>f.reduce((g,p)=>(g[p.id]=p,g),{}),D(t,"debugColumns")),getAllLeafColumns:O(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(f,g)=>{let p=f.flatMap(w=>w.getLeafColumns());return g(p)},D(t,"debugColumns")),getColumn:f=>s._getAllFlatColumnsById()[f]};Object.assign(s,h);for(let f=0;f<s._features.length;f++){const g=s._features[f];g==null||g.createTable==null||g.createTable(s)}return s}function _x(){return t=>O(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(s,i,a){i===void 0&&(i=0);const o=[];for(let u=0;u<s.length;u++){const d=ec(t,t._getRowId(s[u],u,a),s[u],u,i,void 0,a==null?void 0:a.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,o.push(d),t.options.getSubRows){var l;d.originalSubRows=t.options.getSubRows(s[u],u),(l=d.originalSubRows)!=null&&l.length&&(d.subRows=r(d.originalSubRows,i+1,d))}}return o};return n.rows=r(e),n},D(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function xx(t){const e=[],n=r=>{var s;e.push(r),(s=r.subRows)!=null&&s.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function kx(t,e,n){return n.options.filterFromLeafRows?Cx(t,e,n):Ex(t,e,n)}function Cx(t,e,n){var r;const s=[],i={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,o=function(l,u){u===void 0&&(u=0);const d=[];for(let f=0;f<l.length;f++){var h;let g=l[f];const p=ec(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(p.columnFilters=g.columnFilters,(h=g.subRows)!=null&&h.length&&u<a){if(p.subRows=o(g.subRows,u+1),g=p,e(g)&&!p.subRows.length){d.push(g),i[g.id]=g,s.push(g);continue}if(e(g)||p.subRows.length){d.push(g),i[g.id]=g,s.push(g);continue}}else g=p,e(g)&&(d.push(g),i[g.id]=g,s.push(g))}return d};return{rows:o(t),flatRows:s,rowsById:i}}function Ex(t,e,n){var r;const s=[],i={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,o=function(l,u){u===void 0&&(u=0);const d=[];for(let f=0;f<l.length;f++){let g=l[f];if(e(g)){var h;if((h=g.subRows)!=null&&h.length&&u<a){const w=ec(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);w.subRows=o(g.subRows,u+1),g=w}d.push(g),s.push(g),i[g.id]=g}}return d};return{rows:o(t),flatRows:s,rowsById:i}}function jx(){return t=>O(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,r)=>{if(!e.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<e.flatRows.length;f++)e.flatRows[f].columnFilters={},e.flatRows[f].columnFiltersMeta={};return e}const s=[],i=[];(n??[]).forEach(f=>{var g;const p=t.getColumn(f.id);if(!p)return;const w=p.getFilterFn();w&&s.push({id:f.id,filterFn:w,resolvedValue:(g=w.resolveFilterValue==null?void 0:w.resolveFilterValue(f.value))!=null?g:f.value})});const a=(n??[]).map(f=>f.id),o=t.getGlobalFilterFn(),l=t.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&o&&l.length&&(a.push("__global__"),l.forEach(f=>{var g;i.push({id:f.id,filterFn:o,resolvedValue:(g=o.resolveFilterValue==null?void 0:o.resolveFilterValue(r))!=null?g:r})}));let u,d;for(let f=0;f<e.flatRows.length;f++){const g=e.flatRows[f];if(g.columnFilters={},s.length)for(let p=0;p<s.length;p++){u=s[p];const w=u.id;g.columnFilters[w]=u.filterFn(g,w,u.resolvedValue,_=>{g.columnFiltersMeta[w]=_})}if(i.length){for(let p=0;p<i.length;p++){d=i[p];const w=d.id;if(d.filterFn(g,w,d.resolvedValue,_=>{g.columnFiltersMeta[w]=_})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const h=f=>{for(let g=0;g<a.length;g++)if(f.columnFilters[a[g]]===!1)return!1;return!0};return kx(e.rows,h,t)},D(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function bx(t){return e=>O(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:s,pageIndex:i}=n;let{rows:a,flatRows:o,rowsById:l}=r;const u=s*i,d=u+s;a=a.slice(u,d);let h;e.options.paginateExpandedRows?h={rows:a,flatRows:o,rowsById:l}:h=xx({rows:a,flatRows:o,rowsById:l}),h.flatRows=[];const f=g=>{h.flatRows.push(g),g.subRows.length&&g.subRows.forEach(f)};return h.rows.forEach(f),h},D(e.options,"debugTable"))}function Rx(){return t=>O(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,s=[],i=r.filter(l=>{var u;return(u=t.getColumn(l.id))==null?void 0:u.getCanSort()}),a={};i.forEach(l=>{const u=t.getColumn(l.id);u&&(a[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const o=l=>{const u=l.map(d=>({...d}));return u.sort((d,h)=>{for(let g=0;g<i.length;g+=1){var f;const p=i[g],w=a[p.id],_=w.sortUndefined,m=(f=p==null?void 0:p.desc)!=null?f:!1;let v=0;if(_){const y=d.getValue(p.id),x=h.getValue(p.id),k=y===void 0,C=x===void 0;if(k||C){if(_==="first")return k?-1:1;if(_==="last")return k?1:-1;v=k&&C?0:k?_:-_}}if(v===0&&(v=w.sortingFn(d,h,p.id)),v!==0)return m&&(v*=-1),w.invertSorting&&(v*=-1),v}return d.index-h.index}),u.forEach(d=>{var h;s.push(d),(h=d.subRows)!=null&&h.length&&(d.subRows=o(d.subRows))}),u};return{rows:o(n.rows),flatRows:s,rowsById:n.rowsById}},D(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Gd(t,e){return t?Tx(t)?S.createElement(t,e):t:null}function Tx(t){return Nx(t)||typeof t=="function"||Px(t)}function Nx(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function Px(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Lx(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=S.useState(()=>({current:Sx(e)})),[r,s]=S.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:a=>{s(a),t.onStateChange==null||t.onStateChange(a)}})),n.current}const Ks=({data:t=[],columns:e=[],loading:n=!1,error:r=null,enablePagination:s=!0,serverSide:i=!1,onServerSideChange:a,totalCount:o=0,pageSize:l=10,pageIndex:u=0,sorting:d=[],globalFilter:h="",className:f=""})=>{const{t:g}=Y(),[p,w]=S.useState(d),[_,m]=S.useState(h),[v,y]=S.useState({pageIndex:u,pageSize:l}),x=C=>{i&&a&&a(C)},k=Lx({data:t,columns:e,getCoreRowModel:_x(),getSortedRowModel:Rx(),getPaginationRowModel:bx(),getFilteredRowModel:jx(),state:{sorting:p,globalFilter:_,pagination:v},onSortingChange:C=>{const E=typeof C=="function"?C(p):C;w(E),i&&x({sorting:E,pagination:v,globalFilter:_})},onGlobalFilterChange:C=>{if(m(C),i){const E={...v,pageIndex:0};y(E),x({sorting:p,pagination:E,globalFilter:C})}},onPaginationChange:C=>{const E=typeof C=="function"?C(v):C;y(E),i&&x({sorting:p,pagination:E,globalFilter:_})},manualSorting:i,manualFiltering:i,manualPagination:i,...i&&{rowCount:o}});return n?c.jsxs("div",{className:"data-table-loading",children:[c.jsx("div",{className:"loading-spinner"}),g("dataTable.loadingData")]}):r?c.jsxs("div",{className:"error",children:[c.jsx("h3",{className:"error-title",children:g("dataTable.failedToLoad")}),c.jsx("p",{className:"error-message",children:r})]}):c.jsxs("div",{className:`data-table ${f}`,children:[c.jsxs("div",{className:"data-table-controls",children:[c.jsx("div",{className:"search-container",children:c.jsx("input",{type:"text",placeholder:g("dataTable.searchPlaceholder"),value:_??"",onChange:C=>k.setGlobalFilter(C.target.value),className:"search-input"})}),c.jsx("div",{className:"table-info",children:i?c.jsx("span",{className:"table-stats",children:g("dataTable.showingEntries",{start:Math.min(v.pageIndex*v.pageSize+1,o),end:Math.min((v.pageIndex+1)*v.pageSize,o),total:o})}):c.jsx("span",{className:"table-stats",children:g("dataTable.showingCount",{count:k.getRowModel().rows.length,total:t.length})})})]}),c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"data-table-element",children:[c.jsx("thead",{children:k.getHeaderGroups().map(C=>c.jsx("tr",{children:C.headers.map(E=>c.jsx("th",{className:"data-table-header",children:E.isPlaceholder?null:c.jsxs("div",{className:`header-content ${E.column.getCanSort()?"sortable":""}`,onClick:E.column.getToggleSortingHandler(),children:[Gd(E.column.columnDef.header,E.getContext()),E.column.getCanSort()&&c.jsx("span",{className:"sort-indicator",children:{asc:" ↑",desc:" ↓"}[E.column.getIsSorted()]??" ↕"})]})},E.id))},C.id))}),c.jsx("tbody",{children:k.getRowModel().rows.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:e.length,className:"empty-row",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:"📋"}),c.jsx("h3",{className:"empty-state-title",children:g("dataTable.noData")}),c.jsx("p",{className:"empty-state-description",children:g(_?"dataTable.noResults":"dataTable.noDataAvailable")})]})})}):k.getRowModel().rows.map(C=>c.jsx("tr",{className:"data-table-row",children:C.getVisibleCells().map(E=>c.jsx("td",{className:"data-table-cell",children:Gd(E.column.columnDef.cell,E.getContext())},E.id))},C.id))})]})}),s&&c.jsxs("div",{className:"pagination-controls",children:[c.jsx("div",{className:"pagination-info",children:c.jsx("span",{children:g("dataTable.pageInfo",{current:k.getState().pagination.pageIndex+1,total:k.getPageCount()})})}),c.jsxs("div",{className:"pagination-buttons",children:[c.jsx("button",{onClick:()=>k.setPageIndex(0),disabled:!k.getCanPreviousPage(),className:"pagination-btn",children:"⟪"}),c.jsx("button",{onClick:()=>k.previousPage(),disabled:!k.getCanPreviousPage(),className:"pagination-btn",children:"⟨"}),c.jsx("button",{onClick:()=>k.nextPage(),disabled:!k.getCanNextPage(),className:"pagination-btn",children:"⟩"}),c.jsx("button",{onClick:()=>k.setPageIndex(k.getPageCount()-1),disabled:!k.getCanNextPage(),className:"pagination-btn",children:"⟫"})]}),c.jsx("div",{className:"page-size-selector",children:c.jsx("select",{value:k.getState().pagination.pageSize,onChange:C=>{k.setPageSize(Number(C.target.value))},className:"page-size-select",children:[10,25,50,100].map(C=>c.jsx("option",{value:C,children:g("dataTable.showSize",{size:C})},C))})})]})]})};function $x(){const{reservationService:t}=Xe(),{t:e}=Y(),[n,r]=S.useState([]),[s,i]=S.useState(!0),[a,o]=S.useState(null),[l,u]=S.useState(0),[d,h]=S.useState({pageIndex:0,pageSize:10}),[f,g]=S.useState([{id:"check_in",desc:!0}]),[p,w]=S.useState("");S.useEffect(()=>{_()},[d,f,p]);const _=async()=>{try{i(!0),o(null);const k=await t.getReservations({filters:{globalFilter:p},sorting:f,pagination:d});r(k.data),u(k.count)}catch(k){o(k instanceof Error?k.message:String(k)),console.error("Error fetching reservations:",k)}finally{i(!1)}},m=k=>{k.pagination&&h(k.pagination),k.sorting!==void 0&&g(k.sorting),k.globalFilter!==void 0&&w(k.globalFilter)},v=k=>k?new Date(k).toLocaleDateString():e("columns.na"),y=k=>k?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k):e("columns.na"),x=S.useMemo(()=>[{accessorKey:"id",header:e("columns.id"),cell:({getValue:k})=>{const C=k();return c.jsxs("span",{className:"reservation-id",title:C,children:[C.substring(0,8),"..."]})},enableSorting:!1},{accessorKey:"guest_name",header:e("reservations.guest"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"listing_id",header:e("reservations.property"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"check_in",header:e("reservations.checkIn"),cell:({getValue:k})=>v(k())},{accessorKey:"check_out",header:e("reservations.checkOut"),cell:({getValue:k})=>v(k())},{accessorKey:"nights",header:e("reservations.nights"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"party_size",header:e("reservations.guests"),cell:({getValue:k})=>k()||e("columns.na")},{accessorKey:"status",header:e("columns.status"),cell:({getValue:k})=>{const C=k();return c.jsx("span",{className:`status-badge status-${C}`,children:C})}},{accessorKey:"pricing_guest_total",header:e("reservations.total"),cell:({getValue:k})=>c.jsx("span",{className:"currency",children:y(k())})},{accessorKey:"pricing_host_payout",header:e("reservations.hostPayout"),cell:({getValue:k})=>c.jsx("span",{className:"currency",children:y(k())})}],[v,y,e]);return c.jsx("div",{className:"admin-reservations",children:c.jsx(Ks,{data:n,columns:x,loading:s,error:a,serverSide:!0,onServerSideChange:m,totalCount:l,pageSize:d.pageSize,pageIndex:d.pageIndex,sorting:f,globalFilter:p,className:"reservations-data-table"})})}const Ep=(t=!1)=>{const{user:e}=$e(),{taskService:n}=Xe(),[r,s]=S.useState([]),[i,a]=S.useState(!0),[o,l]=S.useState(null),[u,d]=S.useState(0),[h,f]=S.useState({pageIndex:0,pageSize:10}),[g,p]=S.useState([{id:"scheduled_datetime",desc:!1}]),[w,_]=S.useState(""),m=S.useCallback(async()=>{if(!(t&&!(e!=null&&e.id)))try{a(!0),l(null);const C=await n.queryTasks({userId:t?e==null?void 0:e.id:null,pagination:h,sorting:g,globalFilter:w});s(C.tasks),d(C.totalCount)}catch(C){const E=C instanceof Error?C.message:String(C);l(E),console.error("Error fetching tasks:",C)}finally{a(!1)}},[n,t,h,g,w,e==null?void 0:e.id]);S.useEffect(()=>{m()},[m]);const v=S.useCallback(C=>{C.pagination&&f(C.pagination),C.sorting!==void 0&&p(C.sorting),C.globalFilter!==void 0&&_(C.globalFilter)},[]),y=S.useCallback(async(C,E)=>{try{await n.updateTaskStatus(C,E),await m()}catch(j){console.error("Error updating task status:",j);const P=j instanceof Error?j.message:String(j);throw l(P),j}},[n,m]),x=S.useCallback(async(C,E)=>{try{await n.updateTaskAssignment(C,E,e==null?void 0:e.id),await m()}catch(j){console.error("Error updating task assignment:",j);const P=j instanceof Error?j.message:String(j);throw l(P),j}},[n,m,e==null?void 0:e.id]),k=S.useCallback(async(C,E)=>{try{await n.updateTaskTimes(C,E),await m()}catch(j){console.error("Error updating task times:",j);const P=j instanceof Error?j.message:String(j);throw l(P),j}},[n,m]);return{tasks:r,loading:i,error:o,totalCount:u,pagination:h,sorting:g,globalFilter:w,handleServerSideChange:v,updateTaskStatus:y,updateTaskAssignment:x,updateTaskTimes:k,refetchTasks:m}},un=t=>t?new Date(t).toLocaleString():"N/A",Ix=t=>t?new Date(t).toLocaleDateString():"N/A",Ax=t=>t?t.charAt(0).toUpperCase()+t.slice(1):"N/A",To=(t,e=8)=>t?`${t.substring(0,e)}...`:"N/A",Ox=(t,e=100)=>t?t.length>e?`${t.substring(0,e)}...`:t:"N/A",Dx=()=>{const{userService:t}=Xe(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,a]=S.useState(null);S.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0),a(null);const l=await t.getCleaners();n(l)}catch(l){console.error("Error fetching cleaners:",l),a(l.message),n([])}finally{s(!1)}};return{cleaners:e,loading:r,error:i,refetch:o}};function jp({currentAssignedTo:t,taskId:e,onAssignmentChange:n,disabled:r=!1}){const{t:s}=Y(),{cleaners:i,loading:a}=Dx(),[o,l]=S.useState(!1),u=async h=>{const f=h.target.value||null;if(f!==t){l(!0);try{await n(e,f)}catch(g){console.error("Assignment change failed:",g),h.target.value=t||""}finally{l(!1)}}},d=()=>{if(!t)return s("assignment.unassigned");const h=i.find(f=>f.id===t);return h?h.name:`${s("assignment.unknown")} (${t.substring(0,8)}...)`};return a?c.jsx("span",{className:"loading-text",children:s("assignment.loading")}):c.jsxs("select",{value:t||"",onChange:u,disabled:r||o,className:`assignment-dropdown ${o?"updating":""}`,title:`Currently assigned to: ${d()}`,children:[c.jsx("option",{value:"",children:s("assignment.unassigned")}),i.map(h=>c.jsx("option",{value:h.id,children:h.name},h.id))]})}const bp=()=>{const{t}=Y(),e=S.useMemo(()=>({id:{accessorKey:"id",header:t("columns.id"),cell:({getValue:o})=>{const l=o();return c.jsx("span",{className:"reservation-id",title:l,children:To(l)})},enableSorting:!1},title:{accessorKey:"title",header:t("columns.title"),cell:({getValue:o})=>o()||t("columns.na")},taskTitle:{accessorKey:"title",header:t("columns.task"),cell:({getValue:o})=>o()||t("columns.na")},taskType:{accessorKey:"task_type",header:t("columns.type"),cell:({getValue:o})=>Ax(o())},status:{accessorKey:"status",header:t("columns.status"),cell:({getValue:o})=>{const l=o();return c.jsx("span",{className:`status-badge status-${l}`,children:t(`statuses.${l}`)})}},description:{accessorKey:"description",header:t("columns.description"),cell:({getValue:o})=>Ox(o())},listingId:{accessorKey:"listing_id",header:t("columns.listing"),cell:({getValue:o})=>o()||t("columns.na")},reservationId:{accessorKey:"reservation_id",header:t("columns.reservation"),cell:({getValue:o})=>{const l=o();return l?c.jsx("span",{className:"reservation-id",title:l,children:To(l)}):t("columns.na")}},scheduledDateTime:{accessorKey:"scheduled_datetime",header:t("columns.scheduled"),cell:({getValue:o})=>un(o())},assignedTo:{accessorKey:"assigned_to",header:t("columns.assignedTo"),cell:({getValue:o})=>{const l=o();return l?c.jsx("span",{className:"reservation-id",title:l,children:To(l)}):t("statuses.unassigned")}},assignedAt:{accessorKey:"assigned_at",header:t("columns.assignedAt"),cell:({getValue:o})=>un(o())},acceptedAt:{accessorKey:"accepted_at",header:t("columns.acceptedAt"),cell:({getValue:o})=>un(o())},completedAt:{accessorKey:"completed_at",header:t("columns.completedAt"),cell:({getValue:o})=>un(o())},createdAt:{accessorKey:"created_at",header:t("columns.created"),cell:({getValue:o})=>Ix(o())}}),[t]),n=S.useMemo(()=>o=>({accessorKey:"assigned_to",header:t("columns.assignedTo"),cell:({getValue:l,row:u})=>{const d=l(),h=u.original;return c.jsx(jp,{currentAssignedTo:d,taskId:h.id,onAssignmentChange:o})},enableSorting:!1}),[t]),r=S.useMemo(()=>()=>({accessorKey:"actions",header:t("tasks.actions"),cell:({row:o})=>{const l=o.original,u=()=>{window.location.href=`/tasks/${l.id}`};return c.jsx("div",{className:"task-actions",children:c.jsx("button",{className:"btn-view",onClick:u,children:t("columns.view")})})},enableSorting:!1}),[t]),s=S.useMemo(()=>(o,l)=>({accessorKey:"actions",header:t("tasks.actions"),cell:({row:u})=>{const d=u.original,h=d.status==="assigned",f=d.status==="accepted",g=d.status==="in_progress",p=d.status==="accepted",w=()=>{window.location.href=`/tasks/${d.id}`},_=async()=>{l?await l(d.id,{started_at:new Date().toISOString()}):o(d.id,"in_progress")},m=async()=>{l?await l(d.id,{finished_at:new Date().toISOString()}):o(d.id,"completed")};return c.jsxs("div",{className:"task-actions",children:[c.jsx("button",{className:"btn-view",onClick:w,children:t("columns.view")}),h&&c.jsx("button",{className:"btn-accept",onClick:()=>o(d.id,"accepted"),children:t("columns.accept")}),f&&c.jsx("button",{className:"btn-start",onClick:_,children:t("columns.start")}),g&&c.jsx("button",{className:"btn-complete",onClick:m,children:t("columns.complete")}),p&&c.jsx("button",{className:"btn-cancel",onClick:()=>o(d.id,"assigned"),children:t("columns.cancel")})]})},enableSorting:!1}),[t]),i=S.useMemo(()=>o=>{const l=e;return[l.id,l.title,l.taskType,l.status,l.listingId,l.reservationId,l.scheduledDateTime,n(o),l.assignedAt,l.acceptedAt,l.completedAt,l.createdAt,r()]},[e,n,r]),a=S.useMemo(()=>(o,l)=>{const u=e;return[u.scheduledDateTime,u.listingId,u.taskType,u.status,s(o,l)]},[e,s]);return{getAdminColumns:i,getCleanerColumns:a}};function Fx(){const{t}=Y(),{tasks:e,loading:n,error:r,totalCount:s,pagination:i,sorting:a,globalFilter:o,handleServerSideChange:l,updateTaskAssignment:u}=Ep(!1),{getAdminColumns:d}=bp(),h=S.useMemo(()=>d(u),[d,u]);return c.jsxs("div",{className:"admin-reservations",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{className:"admin-title",children:t("tasks.management")}),c.jsx("p",{className:"admin-stats",children:n?t("tasks.loading"):t("tasks.totalTasks",{count:s})})]}),c.jsx(Ks,{data:e,columns:h,loading:n,error:r,serverSide:!0,onServerSideChange:l,totalCount:s,pageSize:i.pageSize,pageIndex:i.pageIndex,sorting:a,globalFilter:o,className:"tasks-data-table"})]})}const Mx=["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina","Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)","Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas","Jabon de manos recargable","Bolsas basura baño","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador","Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa","Fibrón Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas","Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequeña","Funda Edredon Pequeña","Manta playa","Felpudo baño","Mantel","Repasadores (toalla cocina)"],Ux=(t,e=10)=>{if(!t||t.length<2)return[];const n=t.toLowerCase();return Mx.filter(r=>r.toLowerCase().includes(n)).slice(0,e)},sr={general:{name:"General",products:["Vinagre","Oxigeno activo","CIF","Multiusos Verde (Limpiacristales)","Soda Caustica/Desatascador","Papel Cocina"]},lavado_ropa:{name:"Lavado Ropa",products:["Agua oxigenada","Lejia blanqueadora","Detergente Blanqueador Oxi Active","Perfume Spray (perfumador diluido)"]},reposicion:{name:"Reposición",products:["Ambientador palitos","Bolsas de basura amarillas","Balletas finitas","Balletas gorditas","Cafe capsulas","Detergente vajilla manos","Esponjas cocina","Sal lavavajillas","Pastillas lavavajillas","Servilletas"]},reposicion_bano:{name:"Reposición Baño",products:["Jabon de manos recargable","Bolsas basura baño","Detergente ropa","Suavizante ropa","Papel Higienico","Shampoo","Acondicionador","Botella para Shampoo","Botella para Acondicionador"]},materiales_limpieza:{name:"Materiales Limpieza",products:["Cubo","Escurridor","Mopa","Fregona","Escoba","Recogedor (palita)","Palo escoba/fregona/mopa","Guantes","Pinzas de ropa"]},otros:{name:"Otros",products:["Fibrón Indeleble","Lapicero","Cinta transparente","Cinta de pintor","Pegamento","Silicona para juntas","Cenicero","Vasos","Cubiertos","Platos grandes","Platos chicos","Bowls","Esponja de alambre/acero","Esponja magica paredes","Agua","Insecticida hormigas y cucarachas"]},sabanas:{name:"Sábanas",products:["Bajera Grande","Funda Edredon Grande","Funda Almohada","Bajera Pequeña","Funda Edredon Pequeña","Manta playa","Felpudo baño","Mantel","Repasadores (toalla cocina)"]}};function Rp({onTodoCreated:t,onCancel:e,attachedToType:n=null,attachedToId:r=null,title:s="Create New TODO"}){const{t:i}=Y(),{user:a}=$e(),{listingService:o,todoService:l}=Xe(),[u,d]=S.useState({title:"",description:""}),[h,f]=S.useState(""),[g,p]=S.useState([]),[w,_]=S.useState([]),[m,v]=S.useState([]),[y,x]=S.useState(r||""),[k,C]=S.useState(!1),[E,j]=S.useState(!1),[P,T]=S.useState(null);S.useEffect(()=>{(async()=>{try{C(!0);const b=await o.getListingsForSelection();v(b)}catch(b){console.error("Error fetching listings:",b),T(i("todos.failedToLoad"))}finally{C(!1)}})()},[o]),S.useEffect(()=>{if(h.length>=2){const I=Ux(h,8);p(I)}else p([])},[h]);const V=I=>{const{name:b,value:N}=I.target;d(L=>({...L,[b]:N}))},F=I=>{x(I.target.value)},B=I=>{const b=w.find(N=>N.product_name===I);_(b?N=>N.map(L=>L.product_name===I?{...L,quantity:L.quantity+1}:L):N=>[...N,{product_name:I,quantity:1}]),f(""),p([])},ie=(I,b)=>{const N=parseInt(b);N<=0?Ze(I):_(L=>L.map(A=>A.product_name===I?{...A,quantity:N}:A))},Ze=I=>{_(b=>b.filter(N=>N.product_name!==I))},oe=async I=>{if(I.preventDefault(),!!a){j(!0),T(null);try{const b={created_by:a.id,title:u.title,description:u.description||null,products:w.length>0?w:null,attached_to_type:y?"listing":n,attached_to_id:y||r};await l.createTodo(b),t==null||t()}catch(b){console.error("Error creating todo:",b),T(b instanceof Error?b.message:i("notes.errorOccurred"))}finally{j(!1)}}};return c.jsxs("div",{className:"todo-form",children:[c.jsxs("div",{className:"todo-form-header",children:[c.jsx("h3",{children:s}),c.jsx("button",{type:"button",onClick:e,className:"btn-close",children:"×"})]}),P&&c.jsx("div",{className:"error-message",children:P}),c.jsxs("form",{onSubmit:oe,className:"todo-form-content",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"title",children:i("todos.title")}),c.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:V,required:!0,placeholder:i("todos.titlePlaceholder"),className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"listing",children:i("todos.assignToListing")}),c.jsxs("select",{id:"listing",name:"listing",value:y,onChange:F,className:"form-select",disabled:k,children:[c.jsx("option",{value:"",children:i("todos.noListingAssignment")}),m.map(I=>{var b;return c.jsxs("option",{value:I.id,children:[I.id," -"," ",((b=I.airbnb_payload)==null?void 0:b.formattedAddress)||i("forms.noAddress")]},I.id)})]}),k&&c.jsx("small",{children:i("todos.loadingListings")})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"product_search",children:i("todos.products")}),c.jsxs("div",{className:"product-search-container",children:[c.jsx("input",{type:"text",id:"product_search",value:h,onChange:I=>f(I.target.value),placeholder:i("todos.searchProductsPlaceholder"),className:"form-input"}),g.length>0&&c.jsx("div",{className:"search-results",children:g.map((I,b)=>c.jsx("button",{type:"button",onClick:()=>B(I),className:"search-result-item",children:I},b))})]}),w.length>0&&c.jsxs("div",{className:"selected-products",children:[c.jsx("h4",{children:i("todos.selectedProducts")}),w.map((I,b)=>c.jsxs("div",{className:"selected-product",children:[c.jsx("span",{className:"product-name",children:I.product_name}),c.jsxs("div",{className:"product-controls",children:[c.jsx("input",{type:"number",min:"1",value:I.quantity,onChange:N=>ie(I.product_name,N.target.value),className:"quantity-input"}),c.jsx("button",{type:"button",onClick:()=>Ze(I.product_name),className:"btn-remove",children:i("todos.remove")})]})]},b))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"description",children:i("todos.description")}),c.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:V,rows:3,placeholder:i("todos.detailsPlaceholder"),className:"form-textarea"})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:i("todos.cancel")}),c.jsx("button",{type:"submit",disabled:E,className:"btn-primary",children:E?i("todos.creating"):s})]})]})]})}function zx(){const{t}=Y(),{isAdmin:e}=$e(),{userService:n,todoService:r}=Xe(),[s,i]=S.useState([]),[a,o]=S.useState(!0),[l,u]=S.useState(null),[d,h]=S.useState(!1),[f,g]=S.useState("all"),p=async()=>{try{o(!0),u(null);let k=await r.fetchTodos()||[];f==="done"?k=k.filter(C=>C.done):f==="pending"&&(k=k.filter(C=>!C.done)),i(k)}catch(x){console.error("Error fetching todos:",x),u(x instanceof Error?x.message:String(x))}finally{o(!1)}};S.useEffect(()=>{p()},[f]);const w=()=>{h(!1),p()},_=async(x,k)=>{try{const C=await n.getCurrentUser(),E=C==null?void 0:C.id;await r.updateTodoStatus(x,k,E),p()}catch(C){console.error("Error updating todo status:",C),u(C instanceof Error?C.message:String(C))}},m=async x=>{if(confirm(t("todos.deleteConfirm")))try{await r.deleteTodo(x),p()}catch(k){console.error("Error deleting todo:",k),u(k instanceof Error?k.message:String(k))}},v=x=>x?"#10b981":"#6b7280",y=[{accessorKey:"title",header:t("columns.title"),cell:({getValue:x})=>c.jsx("span",{className:"font-medium",children:x()})},{accessorKey:"done",header:t("columns.status"),cell:({getValue:x,row:k})=>{const C=x();return c.jsxs("label",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:C,onChange:E=>_(k.original.id,E.target.checked),className:"rounded"}),c.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold text-white",style:{backgroundColor:v(C)},children:t(C?"todos.done":"todos.pending")})]})}},{accessorKey:"attached_to_type",header:t("todos.attachedTo"),cell:({getValue:x,row:k})=>{const C=x(),E=k.original.attached_to_id;return C?c.jsxs("span",{className:"text-sm",children:[C,": ",E]}):c.jsx("span",{className:"text-gray-500",children:t("todos.unattached")})}},{accessorKey:"created_at",header:t("columns.created"),cell:({getValue:x})=>c.jsx("span",{className:"text-sm",children:new Date(x()).toLocaleDateString()})},{id:"actions",header:t("columns.actions"),cell:({row:x})=>c.jsx("button",{onClick:()=>m(x.original.id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",children:t("todos.delete")})}];return e?c.jsxs("div",{className:"admin-todos",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{className:"admin-title",children:t("todos.allTodos")}),c.jsx("p",{className:"admin-stats",children:a?t("todos.loadingTodos"):t("todos.totalTodos",{count:s.length})})]}),c.jsxs("div",{className:"admin-controls",children:[c.jsxs("div",{className:"filter-controls",children:[c.jsx("label",{htmlFor:"status-filter",children:t("todos.filterByStatus")}),c.jsxs("select",{id:"status-filter",value:f,onChange:x=>g(x.target.value),className:"form-select",children:[c.jsx("option",{value:"all",children:t("todos.all")}),c.jsx("option",{value:"pending",children:t("todos.pending")}),c.jsx("option",{value:"done",children:t("todos.done")})]})]}),c.jsx("button",{onClick:()=>h(!0),className:"btn-primary",children:t("todos.createGeneral")})]}),l&&c.jsx("div",{className:"error-message",children:l}),d&&c.jsx("div",{className:"todo-form-overlay",children:c.jsx(Rp,{title:t("todos.createGeneral"),onTodoCreated:w,onCancel:()=>h(!1)})}),c.jsx(Ks,{data:s,columns:y,loading:a,error:l,enablePagination:!0,className:"todos-data-table"})]}):c.jsx("div",{className:"admin-todos",children:c.jsx("div",{className:"error-message",children:t("todos.adminAccessRequired")})})}const Tp=(t,e)=>{const n=new Date(t),r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate());return i.getTime()===s.getTime()?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):i.getTime()===s.getTime()-24*60*60*1e3?e("threads.yesterday"):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})},Vx=({thread:t,isSelected:e,lastMessage:n,onClick:r})=>{const{t:s}=Y(),i=()=>t.listing_id?s("threads.listingTitle",{id:t.listing_id}):t.reservation_id?s("threads.reservationTitle",{id:t.reservation_id}):s("threads.channelThread",{channel:t.channel}),a=()=>{const o=t.participants.length>0?t.participants.slice(0,2).join(", "):s("threads.noParticipants");return t.participants.length>2?s("threads.participantsWithMore",{participants:o,count:t.participants.length-2}):o};return c.jsxs("div",{className:`thread-item ${e?"selected":""}`,onClick:r,children:[c.jsx("div",{className:"thread-avatar",children:c.jsx("div",{className:"avatar-icon",children:t.channel==="whatsapp"?"📱":"🏠"})}),c.jsxs("div",{className:"thread-content",children:[c.jsxs("div",{className:"thread-header",children:[c.jsx("h3",{className:"thread-title",children:i()}),c.jsx("span",{className:"thread-time",children:Tp((n==null?void 0:n.created_at)||t.created_at,s)})]}),c.jsxs("div",{className:"thread-preview",children:[c.jsx("p",{className:"thread-subtitle",children:a()}),n&&c.jsx("p",{className:"last-message",children:n.message.length>50?`${n.message.substring(0,50)}...`:n.message})]})]})]})},Bx=({threads:t,selectedThreadId:e,onThreadSelect:n})=>{const{t:r}=Y();return c.jsxs("div",{className:"thread-list",children:[c.jsx("div",{className:"thread-list-header",children:c.jsx("h2",{children:r("threads.title")})}),c.jsx("div",{className:"thread-list-content",children:t.length===0?c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:r("threads.noThreadsFound")})}):t.map(s=>c.jsx(Vx,{thread:s,isSelected:s.id===e,onClick:()=>n(s)},s.id))})]})},Hx=({selectedThread:t,onBack:e})=>{const{t:n}=Y();return t?c.jsxs("div",{className:"mobile-header",children:[c.jsx("button",{className:"mobile-back-btn",onClick:e,children:"←"}),c.jsxs("div",{className:"mobile-header-info",children:[c.jsx("h3",{className:"mobile-thread-title",children:t.listing_id?n("threads.listingTitle",{id:t.listing_id}):t.reservation_id?n("threads.reservationTitle",{id:t.reservation_id}):n("threads.channelThread",{channel:t.channel})}),c.jsx("p",{className:"mobile-thread-participants",children:t.participants.length>0?t.participants.slice(0,2).join(", "):n("threads.noParticipants")})]})]}):null},qx=({messages:t,selectedThread:e})=>{const{t:n}=Y();return e?c.jsxs("div",{className:"message-area",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsxs("div",{className:"conversation-info",children:[c.jsx("h3",{children:e.listing_id?n("threads.listingTitle",{id:e.listing_id}):e.reservation_id?n("threads.reservationTitle",{id:e.reservation_id}):n("threads.channelThread",{channel:e.channel})}),c.jsxs("p",{className:"thread-id",children:["Thread ID: ",e.id]}),c.jsx("p",{className:"participants",children:e.participants.length>0?e.participants.join(", "):n("threads.noParticipants")})]}),c.jsx("div",{className:"conversation-actions",children:c.jsx("div",{className:"channel-badge",children:e.channel})})]}),c.jsx("div",{className:"messages-container",children:t.length===0?c.jsx("div",{className:"no-messages",children:c.jsx("p",{children:n("threads.noMessages")})}):c.jsx("div",{className:"messages-list",children:t.map((r,s)=>{var o,l;const i=s===0||((o=t[s-1])==null?void 0:o.from_id)!==r.from_id,a=((l=r.from_id)==null?void 0:l.toString())==="464431353";return c.jsxs("div",{className:`message-group ${a?"maddie-message":"user-message"}`,children:[i&&c.jsx("div",{className:"message-sender",children:r.from_id}),c.jsxs("div",{className:"message-bubble",children:[c.jsx("div",{className:"message-content",children:r.message}),c.jsx("div",{className:"message-timestamp",children:Tp(r.created_at,n)})]})]},r.id)})})})]}):c.jsx("div",{className:"message-area empty",children:c.jsxs("div",{className:"empty-conversation",children:[c.jsx("div",{className:"empty-icon",children:"💬"}),c.jsx("h3",{children:n("threads.selectThread")}),c.jsx("p",{children:n("threads.selectThreadDescription")})]})})},Wd=()=>{const{t}=Y(),{supabaseService:e}=$e(),n=Ta(),{threadId:r}=Hu(),[s,i]=S.useState([]),[a,o]=S.useState([]),[l,u]=S.useState(),[d,h]=S.useState(!0),[f,g]=S.useState(null),[p,w]=S.useState(null),[_,m]=S.useState(!1),[v,y]=S.useState(null),[x,k]=S.useState([]),[C,E]=S.useState(!1),[j,P]=S.useState(!1),[T,V]=S.useState(300),[F,B]=S.useState(400),[ie,Ze]=S.useState(""),[oe,I]=S.useState(""),[b,N]=S.useState(!1),[L,A]=S.useState([]),[W,Ie]=S.useState(!1),[Ae,et]=S.useState(!1);S.useEffect(()=>{tt()},[]),S.useEffect(()=>{if(r&&s.length>0){const M=s.find(ue=>ue.id===r);M&&(!l||l.id!==r)&&(u(M),window.innerWidth<=768&&N(!0))}else!r&&l&&(u(void 0),ic(),N(!1))},[r,s,l]),S.useEffect(()=>{l?Gn(l.id):o([])},[l]);const tt=async()=>{if(e.getSupabaseClient())try{h(!0);const{data:M,error:ue}=await e.getSupabaseClient().from("threads").select("*").order("created_at",{ascending:!1});if(ue)throw ue;i(M||[])}catch(M){console.error("Error loading threads:",M),g(t("threads.errorLoadingThreads"))}finally{h(!1)}},Gn=async M=>{if(e.getSupabaseClient())try{const{data:ue,error:_e}=await e.getSupabaseClient().from("messages").select("*").eq("thread_id",M).order("created_at",{ascending:!0});if(_e)throw _e;o(ue||[])}catch(ue){console.error("Error loading messages:",ue),g(t("threads.errorLoadingMessages"))}},Fp=M=>{n(`/admin/threads/${M.id}`),u(M),w(null),ic(),window.innerWidth<=768&&N(!0)},Mp=()=>{n("/admin/threads"),N(!1),u(void 0)},sc=async(M,ue)=>{if(!(!e||!l))try{m(!0),g(null),y({status:"starting",message:"Initializing..."});const _e=crypto.randomUUID();console.log("Generated session ID:",_e),console.log("Creating channel subscription...");const ve=e.getSupabaseClient().channel(`bot-status-${_e}`).on("broadcast",{event:"status-update"},nt=>{console.log("Received status update:",nt.payload);const ac=nt.payload;y(ac),k(Hp=>[...Hp,{...ac,timestamp:new Date().toISOString()}])}).subscribe();for(;ve.state!=="joined";)console.log("Waiting for channel to join..."),await new Promise(nt=>setTimeout(nt,500));console.log("Channel created:",ve),await new Promise(nt=>setTimeout(nt,500));const{data:Ve,error:Pt}=await e.getSupabaseClient().auth.getSession();if(Pt)throw Pt;const Wt=Ve.session;if(!(Wt!=null&&Wt.access_token))throw new Error("No valid authentication session found");const Kt=await fetch(`${Dl()}/functions/v1/maddie-bot-response`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Wt.access_token}`},body:JSON.stringify({listing_id:M,reservation_id:ue,session_id:_e,thread_id:l.id,arbitrary_context:ie,message_draft:oe})});if(!Kt.ok){const nt=await Kt.text();throw new Error(`HTTP ${Kt.status}: ${nt}`)}const Fr=await Kt.json(),Qs={status:"completed",message:"Response generated successfully",progress:100,timestamp:new Date().toISOString()};y(Qs),k(nt=>[...nt,Qs]),w(Fr.response),ve.unsubscribe()}catch(_e){console.error("Error drafting message:",_e),g(t("threads.errorDraftingMessage"));const ve={status:"error",message:"Failed to generate response",timestamp:new Date().toISOString()};y(ve),k(Ve=>[...Ve,ve])}finally{m(!1)}},ic=()=>{k([]),y(null),w(null)},Up=async()=>{if(!(!e||!l))try{Ie(!0),et(!0);const{data:M,error:ue}=await e.getSupabaseClient().auth.getSession();if(ue)throw ue;const _e=M.session;if(!(_e!=null&&_e.access_token))throw new Error("No valid authentication session found");const ve=await fetch(`${Dl()}/functions/v1/conversation-directions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e.access_token}`},body:JSON.stringify({thread_id:l.id})});if(!ve.ok){const Pt=await ve.text();throw new Error(`HTTP ${ve.status}: ${Pt}`)}const Ve=await ve.json();if(!Ve.success)throw new Error(Ve.error||"Failed to load conversation directions");A(Ve.directions||[])}catch(M){console.error("Error loading conversation directions:",M),g(t("threads.errorLoadingDirections"))}finally{Ie(!1)}},zp=M=>{Ze(M.context),et(!1)},Vp=M=>{E(!0),M.preventDefault()},Bp=M=>{P(!0),M.preventDefault()};return S.useEffect(()=>{const M=_e=>{if(C){const ve=document.querySelector(".threads-split-container");if(!ve)return;const Ve=ve.getBoundingClientRect(),Pt=Ve.height,Wt=_e.clientY-Ve.top,Kt=Pt-Wt,Fr=80,Qs=Pt*.9,nt=Math.max(Fr,Math.min(Qs,Kt));V(nt)}if(j){const ve=document.querySelector(".threads-view");if(!ve)return;const Ve=ve.getBoundingClientRect(),Pt=_e.clientX-Ve.left,Wt=300,Kt=Ve.width*.6,Fr=Math.max(Wt,Math.min(Kt,Pt));B(Fr)}},ue=()=>{E(!1),P(!1)};return(C||j)&&(document.addEventListener("mousemove",M),document.addEventListener("mouseup",ue)),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",ue)}},[C,j]),d?c.jsxs("div",{className:"threads-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("span",{children:t("threads.loading")})]}):f?c.jsx("div",{className:"threads-error",children:c.jsxs("div",{className:"error-message",children:[c.jsx("h3",{children:t("threads.error")}),c.jsx("p",{children:f}),c.jsx("button",{onClick:tt,className:"retry-button",children:t("threads.retry")})]})}):c.jsxs("div",{className:`threads-view ${C?"dragging-horizontal":""} ${j?"dragging-vertical":""} ${b?"mobile-conversation":""}`,children:[c.jsx("div",{className:"threads-sidebar",style:{width:`${F}px`},children:c.jsx(Bx,{threads:s,selectedThreadId:l==null?void 0:l.id,onThreadSelect:Fp})}),c.jsx("div",{className:"vertical-resize-handle",onMouseDown:Bp}),c.jsxs("div",{className:"threads-main",children:[c.jsx(Hx,{selectedThread:l,onBack:Mp}),c.jsxs("div",{className:"threads-split-container",children:[c.jsx("div",{className:"threads-chat-area",children:c.jsx(qx,{messages:a,selectedThread:l,onDraftMessage:sc})}),c.jsx("div",{className:"resize-handle",onMouseDown:Vp}),c.jsx("div",{className:"threads-drafting-area",style:{height:`${T}px`},children:c.jsx("div",{className:"drafting-panel",children:c.jsxs("div",{className:"drafting-form",children:[c.jsxs("div",{className:"context-row",children:[c.jsx("div",{className:"context-group",children:c.jsxs("div",{className:"context-input-wrapper",children:[c.jsx("textarea",{id:"context-input",className:"context-textarea",rows:1,value:ie,onChange:M=>Ze(M.target.value),placeholder:"Give Maddie AI Bot arbitrary context",disabled:_}),c.jsx("button",{onClick:Up,disabled:W||!l,className:"submit-btn",type:"button",title:"Get conversation direction suggestions",children:c.jsx("span",{className:"btn-text",children:W?"Loading...":"Suggestions"})})]})}),c.jsx("div",{className:"button-group",children:c.jsx("button",{onClick:()=>sc(l==null?void 0:l.listing_id,l==null?void 0:l.reservation_id),disabled:_||!l,className:"submit-btn",children:c.jsx("span",{className:"btn-text",children:"Generate"})})})]}),Ae&&c.jsxs("div",{className:"directions-panel",children:[c.jsxs("div",{className:"directions-header",children:[c.jsx("h4",{children:"Conversation Direction Suggestions"}),c.jsx("button",{onClick:()=>et(!1),className:"close-directions-btn",children:"✕"})]}),c.jsx("div",{className:"directions-list",children:W?c.jsxs("div",{className:"directions-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("span",{children:"Loading suggestions..."})]}):L.length>0?L.map((M,ue)=>c.jsxs("div",{className:`direction-item direction-${M.category}`,onClick:()=>zp(M),children:[c.jsxs("div",{className:"direction-header",children:[c.jsx("h5",{className:"direction-title",children:M.title}),c.jsx("span",{className:"direction-category",children:M.category})]}),c.jsx("p",{className:"direction-description",children:M.description}),c.jsx("div",{className:"direction-context",children:c.jsxs("small",{children:["Context: ",M.context]})})]},ue)):c.jsx("div",{className:"no-directions",children:c.jsx("p",{children:"No direction suggestions available"})})})]}),c.jsxs("div",{className:"threads-form-group",children:[c.jsx("textarea",{id:"draft-section-input",value:oe,onChange:M=>I(M.target.value),className:"context-textarea",rows:2,placeholder:"Draft Section - Type your draft message here...",disabled:_}),c.jsx("div",{className:"message-response-container",children:c.jsx("div",{className:"message-response-content",children:c.jsxs("div",{className:"terminal-output",children:[x.map((M,ue)=>c.jsxs("div",{className:`terminal-line ${M.status}`,children:[c.jsxs("span",{className:"terminal-timestamp",children:["[",new Date(M.timestamp).toLocaleTimeString(),"]"]}),c.jsx("span",{className:"terminal-status",children:M.status==="completed"?"✓":M.status==="error"?"✗":M.status==="progress"?"→":"·"}),c.jsx("span",{className:"terminal-message",children:M.message}),M.progress!==void 0&&c.jsxs("span",{className:"terminal-progress",children:["(",M.progress,"%)"]})]},ue)),p&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"terminal-line completed",children:[c.jsxs("span",{className:"terminal-timestamp",children:["[",new Date().toLocaleTimeString(),"]"]}),c.jsx("span",{className:"terminal-status",children:"✓"}),c.jsx("span",{className:"terminal-message",children:"Generated response:"})]}),c.jsxs("div",{className:"terminal-response",children:[c.jsx("button",{onClick:()=>navigator.clipboard.writeText(p),className:"terminal-copy-btn",title:"Copy response to clipboard",children:"📋"}),p]})]}),(v==null?void 0:v.status)!=="completed"&&(v==null?void 0:v.status)!=="error"&&_&&c.jsx("div",{className:"terminal-cursor",children:"_"}),x.length===0&&!p&&!_&&c.jsx("div",{className:"terminal-placeholder",children:c.jsx("span",{className:"terminal-message",children:"Generated response will appear here..."})})]})})})]})]})})})]})]})]})};function Gx(){const{t}=Y(),[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,a]=S.useState(null),{listingService:o}=Xe();S.useEffect(()=>{(async()=>{try{s(!0),a(null);const d=await o.fetchListings();n(d||[])}catch(d){console.error("Error fetching listings:",d),a(d.message)}finally{s(!1)}})()},[o]);const l=S.useMemo(()=>[{accessorKey:"id",header:t("columns.id"),cell:({getValue:u})=>{const d=u();return c.jsx(He,{to:`/listing/${d}`,className:"listing-id-link",children:d})}},{accessorKey:"airbnb_payload.formattedAddress",header:t("listings.address"),cell:({getValue:u})=>u()||t("columns.na")}],[t]);return c.jsxs("div",{className:"listings",children:[c.jsxs("div",{className:"listings-header",children:[c.jsx("h1",{className:"listings-title",children:t("listings.title")}),c.jsx("p",{className:"listings-stats",children:r?t("listings.loadingListings"):t("listings.totalListings",{count:e.length})})]}),c.jsx(Ks,{data:e,columns:l,loading:r,error:i,enablePagination:!0,className:"listings-data-table"})]})}function Wx(){const{user:t}=$e(),{t:e}=Y(),{tasks:n,loading:r,error:s,totalCount:i,pagination:a,sorting:o,globalFilter:l,handleServerSideChange:u,updateTaskStatus:d,updateTaskTimes:h}=Ep(!0),{getCleanerColumns:f}=bp(),g=S.useMemo(()=>f(d,h),[f,d,h]);return t?c.jsxs("div",{className:"cleaner-tasks",children:[c.jsxs("div",{className:"cleaner-header",children:[c.jsx("h1",{className:"cleaner-title",children:e("tasks.myTasks")}),c.jsx("p",{className:"cleaner-stats",children:r?e("tasks.loading"):e("tasks.totalTasks",{count:i})})]}),c.jsx(Ks,{data:n,columns:g,loading:r,error:s,serverSide:!0,onServerSideChange:u,totalCount:i,pageSize:a.pageSize,pageIndex:a.pageIndex,sorting:o,globalFilter:l,className:"cleaner-tasks-data-table"})]}):c.jsx("div",{className:"cleaner-tasks",children:c.jsx("div",{className:"error-message",children:e("tasks.loginRequired")})})}function Kx({taskId:t,taskService:e}){const{t:n}=Y(),[r,s]=S.useState([]),[i,a]=S.useState(!0),[o,l]=S.useState(null);S.useEffect(()=>{t&&e&&(async()=>{try{a(!0);const w=await e.getTaskAuditTrail(t);s(w)}catch(w){const _=w instanceof Error?w.message:String(w);l(_)}finally{a(!1)}})()},[t,e]);const u=p=>{switch(p){case"INSERT":return"➕";case"UPDATE":return"✏️";case"DELETE":return"🗑️";default:return"📝"}},d=p=>{switch(p){case"INSERT":return"audit-insert";case"UPDATE":return"audit-update";case"DELETE":return"audit-delete";default:return"audit-default"}},h=(p,w,_)=>!_||_.length===0?null:_.map(m=>{const v=p==null?void 0:p[m],y=w==null?void 0:w[m];return{field:m,oldValue:v!==void 0?v:null,newValue:y!==void 0?y:null}}).filter(m=>m.oldValue!==m.newValue),f=p=>{if(p==null)return"null";if(typeof p=="string"&&p.includes("T"))try{return un(p)}catch{return p}return String(p)},g=p=>{var w;return p.changed_by?p.changed_by_name?p.changed_by_name:p.changed_by_email?((w=p.changed_by_email)==null?void 0:w.split("@")[0])||"":n("audit.unknownUser"):n("audit.system")};return i?c.jsxs("div",{className:"audit-trail-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:n("audit.loading")})]}):o?c.jsx("div",{className:"audit-trail-error",children:c.jsx("p",{className:"error-message",children:o})}):r.length===0?c.jsx("div",{className:"audit-trail-empty",children:c.jsx("p",{children:n("audit.noHistory")})}):c.jsx("div",{className:"audit-trail-list",children:r.map((p,w)=>{var _;return c.jsxs("div",{className:`audit-entry ${d(p.action_type||"UPDATE")}`,children:[c.jsxs("div",{className:"audit-entry-header",children:[c.jsx("div",{className:"audit-entry-icon",children:u(p.action_type||"UPDATE")}),c.jsxs("div",{className:"audit-entry-info",children:[c.jsxs("div",{className:"audit-entry-action",children:[c.jsx("span",{className:"action-type",children:p.action_type}),c.jsx("span",{className:"action-time",children:un(p.changed_at)})]}),c.jsxs("div",{className:"audit-entry-user",children:[n("audit.by")," ",g(p)]})]})]}),c.jsxs("div",{className:"audit-entry-content",children:[p.action_type==="UPDATE"&&p.old_values&&p.new_values&&c.jsxs("div",{className:"audit-entry-values",children:[c.jsxs("span",{className:"values-label",children:[n("audit.valuesChanged"),":"]}),c.jsx("div",{className:"values-list",children:(_=h(p.old_values,p.new_values,p.changed_fields))==null?void 0:_.map((m,v)=>c.jsxs("div",{className:"value-item",children:[c.jsxs("span",{className:"field-name",children:[m.field,":"]}),c.jsxs("span",{className:"value-change",children:[c.jsx("span",{className:"old-value",children:f(m.oldValue)}),c.jsx("span",{className:"arrow",children:"→"}),c.jsx("span",{className:"new-value",children:f(m.newValue)})]})]},v))})]}),p.context&&Object.keys(p.context).length>0&&c.jsxs("div",{className:"audit-entry-context",children:[c.jsxs("span",{className:"context-label",children:[n("audit.context"),":"]}),c.jsx("pre",{className:"context-data",children:JSON.stringify(p.context,null,2)})]})]}),w<r.length-1&&c.jsx("div",{className:"audit-entry-connector"})]},p.id)})})}function Np({attachedToType:t=null,attachedToId:e=null,title:n="TODOs",showCreateButton:r=!0,showAttachmentInfo:s=!1}){const{isAdmin:i,isCleaner:a}=$e(),{userService:o,todoService:l}=Xe(),[u,d]=S.useState([]),[h,f]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(!1),m=async()=>{try{f(!0),p(null);const E=await l.fetchTodos({attachedToType:t,attachedToId:e,isDone:!1});d(E||[])}catch(E){console.error("Error fetching todos:",E);const j=E instanceof Error?E.message:String(E);p(j)}finally{f(!1)}};S.useEffect(()=>{m()},[t,e]);const v=()=>{_(!1),m()},y=async(E,j)=>{try{const P=await o.getCurrentUser(),T=P==null?void 0:P.id;await l.updateTodoStatus(E,j,T),m()}catch(P){console.error("Error updating todo status:",P),p(P instanceof Error?P.message:String(P))}},x=async E=>{if(i&&confirm("Are you sure you want to delete this TODO?"))try{await l.deleteTodo(E),m()}catch(j){console.error("Error deleting todo:",j),p(j instanceof Error?j.message:String(j))}},k=E=>E?"status-completed":"status-pending",C=E=>E.attached_to_type?`${E.attached_to_type}: ${E.attached_to_id}`:"Unattached";return h?c.jsx("div",{className:"todo-list",children:c.jsx("div",{className:"loading",children:"Loading TODOs..."})}):c.jsxs("div",{className:"todo-list",children:[c.jsxs("div",{className:"todos-header",children:[c.jsx("h3",{children:n}),r&&(i||a)&&!w&&c.jsx("button",{onClick:()=>_(!0),className:"btn-primary btn-sm",children:"Add TODO"})]}),g&&c.jsx("div",{className:"error-message",children:g}),w&&c.jsx("div",{className:"todo-form-overlay",children:c.jsx(Rp,{attachedToType:t,attachedToId:e,onTodoCreated:v,onCancel:()=>_(!1)})}),u.length===0?c.jsx("div",{className:"empty-state",children:c.jsx("p",{children:"No TODOs found."})}):c.jsx("div",{className:"todos-list",children:u.map(E=>c.jsxs("div",{className:`todo-item ${k(E.done)}`,children:[c.jsxs("div",{className:"todo-header",children:[c.jsxs("div",{className:"todo-title-row",children:[c.jsx("h4",{className:"todo-title",children:E.title}),c.jsx("div",{className:"todo-badges",children:c.jsx("span",{className:`status-badge ${k(E.done)}`,children:E.done?"Done":"Pending"})})]}),c.jsxs("div",{className:"todo-meta",children:[c.jsxs("span",{className:"todo-date",children:["Created: ",new Date(E.created_at).toLocaleDateString()]}),E.completed_at&&c.jsxs("span",{className:"todo-completed-date",children:["Completed:"," ",new Date(E.completed_at).toLocaleDateString()]}),s&&c.jsxs("span",{className:"todo-attachment",children:["Attached to: ",C(E)]})]})]}),E.description&&c.jsx("p",{className:"todo-description",children:E.description}),E.products&&E.products.length>0&&c.jsxs("div",{className:"todo-products",children:[c.jsx("h5",{children:"Products needed:"}),c.jsx("ul",{className:"products-list",children:E.products.map((j,P)=>c.jsxs("li",{className:"product-item",children:[c.jsx("span",{className:"product-name",children:j.product_name}),c.jsxs("span",{className:"product-quantity",children:["×",j.quantity]})]},P))})]}),c.jsxs("div",{className:"todo-actions",children:[i&&c.jsxs("label",{className:"todo-checkbox",children:[c.jsx("input",{type:"checkbox",checked:E.done,onChange:j=>y(E.id,j.target.checked)}),"Mark as done"]}),i&&c.jsx("button",{onClick:()=>x(E.id),className:"btn-danger btn-sm",children:"Delete"})]})]},E.id))})]})}function Qx({listingId:t,onTodoUpdated:e}){const{user:n}=$e(),{todoService:r}=Xe(),[s,i]=S.useState(null),[a,o]=S.useState(!1),[l,u]=S.useState(null),d=S.useCallback(async()=>{try{o(!0),u(null);const p=await r.fetchTodos({attachedToType:"listing",attachedToId:t,titlePattern:"[AUTO]",isDone:!1}),w=(p==null?void 0:p[0])||null;i(w)}catch(p){console.error("Error fetching auto-generated todo:",p),u(p instanceof Error?p.message:String(p))}finally{o(!1)}},[t,r]);S.useEffect(()=>{d()},[d]);const h=S.useCallback(async p=>{if(!s)return;const w=await r.updateTodo(s.id,{products:p});i(w)},[s,r]),f=S.useCallback(async p=>{if(!(n!=null&&n.id))return;const w=await r.createTodo({title:`[AUTO] Product Replenishment ${new Date().toLocaleDateString()}`,description:"Auto-generated todo for product replenishment",products:p,attached_to_type:"listing",attached_to_id:t});i(w),e==null||e(w)},[n==null?void 0:n.id,r,t,e]),g=S.useCallback(async p=>{if(n!=null&&n.id)try{u(null),s?await h(p):p.length>0&&await f(p)}catch(w){const _=w instanceof Error?w.message:String(w);throw console.error("Error saving auto-generated todo:",_),u(_),w}},[n==null?void 0:n.id,s,h,f]);return{existingTodo:s,loading:a,error:l,saveAutoTodo:g,refetchAutoTodo:d}}function Jx({existingTodo:t,onQuantitiesChange:e}){const[n,r]=S.useState({}),[s,i]=S.useState(new Set);S.useEffect(()=>{const d={};Object.values(sr).forEach(h=>{h.products.forEach(f=>{d[f]=0})}),r(d)},[]),S.useEffect(()=>{t!=null&&t.products&&r(d=>{const h={...d};return t.products.forEach(f=>{h[f.product_name]=f.quantity}),h})},[t]);const a=S.useCallback(d=>Object.entries(d).filter(([,h])=>h>0).map(([h,f])=>({product_name:h,quantity:f})),[]),o=S.useCallback(async(d,h)=>{const f=a(d);try{await e(f)}catch(g){console.error("Error saving quantities:",g)}finally{h&&i(g=>{const p=new Set(g);return p.delete(h),p})}},[e,a]),l=S.useCallback(d=>{const h=window.scrollY;i(f=>new Set(f).add(d)),r(f=>{const g={...f,[d]:(f[d]||0)+1};return o(g,d),g}),setTimeout(()=>window.scrollTo(0,h),0)},[o]),u=S.useCallback(d=>{const h=window.scrollY;i(f=>new Set(f).add(d)),r(f=>{const g=Math.max(0,(f[d]||0)-1),p={...f,[d]:g};return o(p,d),p}),setTimeout(()=>window.scrollTo(0,h),0)},[o]);return{quantities:n,updatingProducts:s,incrementQuantity:l,decrementQuantity:u}}function Yx({listingId:t,onTodoUpdated:e}){const{existingTodo:n,loading:r,error:s,saveAutoTodo:i}=Qx({listingId:t,onTodoUpdated:e}),{quantities:a,updatingProducts:o,incrementQuantity:l,decrementQuantity:u}=Jx({existingTodo:n,onQuantitiesChange:i}),[d,h]=S.useState(new Set(Object.keys(sr))),f=S.useMemo(()=>{const _=[];return Object.entries(sr).forEach(([m,v])=>{v.products.forEach(y=>{_.push({name:y,category:m})})}),_},[]),g=_=>{h(m=>{const v=new Set(m);return v.has(_)?v.delete(_):v.add(_),v})},p=S.useMemo(()=>f.filter(_=>d.has(_.category)),[f,d]),w=S.useMemo(()=>{const _={};return Object.keys(sr).forEach(m=>{_[m]=[]}),p.forEach(m=>{const v=m.category;_[v]||(_[v]=[]),_[v].push(m)}),_},[p]);return r?c.jsx("div",{className:"todo-creation-helper",children:c.jsx("div",{className:"loading",children:"Loading products..."})}):c.jsxs("div",{className:"todo-creation-helper",children:[s&&c.jsx("div",{className:"error-message",children:s}),c.jsx("div",{className:"category-toggles",children:c.jsx("div",{className:"category-checkboxes",children:Object.entries(sr).map(([_,m])=>c.jsxs("label",{className:"category-checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:d.has(_),onChange:()=>g(_),className:"category-checkbox"}),c.jsx("span",{className:"category-checkbox-text",children:m.name})]},_))})}),c.jsx("div",{className:"products-by-category",children:Object.entries(w).map(([_,m])=>c.jsxs("div",{className:"category-section",children:[c.jsx("h4",{className:"category-title",children:(()=>{const v=sr[_];return v?v.name:_})()}),c.jsx("div",{className:"products-grid",children:m.map(v=>c.jsxs("div",{className:`product-block ${(a[v.name]||0)>0?"has-quantity":""} ${o.has(v.name)?"updating":""}`,children:[o.has(v.name)&&c.jsx("div",{className:"product-loading-overlay",children:c.jsx("div",{className:"spinner"})}),c.jsx("div",{className:"product-name",children:v.name}),c.jsxs("div",{className:"product-controls",children:[c.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),u(v.name)},className:"quantity-btn quantity-btn-minus",disabled:(a[v.name]||0)===0||o.has(v.name),children:"-"}),c.jsx("span",{className:"quantity-display",children:a[v.name]||0}),c.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),y.stopPropagation(),l(v.name)},className:"quantity-btn quantity-btn-plus",disabled:o.has(v.name),children:"+"})]})]},v.name))})]},_))}),n&&c.jsx("div",{className:"existing-todo-info",children:c.jsx("span",{className:"info-text",children:"Auto-generated todo exists for this listing"})})]})}function Gl({attachedToType:t=null,attachedToId:e=null,title:n="Notes",showAttachmentInfo:r=!1}){const{t:s}=Y(),{user:i,isAdmin:a,isCleaner:o}=$e(),{noteService:l}=Xe(),[u,d]=S.useState([]),[h,f]=S.useState(!0),[g,p]=S.useState(null),[w,_]=S.useState(""),[m,v]=S.useState(!1),y=S.useRef(null),x=S.useRef(null),k=async()=>{try{f(!0),p(null);const F=await l.fetchNotes({attachedToType:t,attachedToId:e});d(F||[])}catch(F){console.error("Error fetching notes:",F);const B=F instanceof Error?F.message:String(F);p(B)}finally{f(!1)}},C=()=>{var F;(F=y.current)==null||F.scrollIntoView({behavior:"smooth"})};S.useEffect(()=>{k()},[t,e]);const E=async F=>{if(!(!i||!F.trim())){v(!0),p(null);try{const B={content:F.trim(),attached_to_type:t,attached_to_id:e};await l.createNote(B),_(""),k(),setTimeout(()=>C(),100)}catch(B){console.error("Error creating note:",B),p(B instanceof Error?B.message:String(B))}finally{v(!1)}}},j=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),w.trim()&&!m&&E(w))},P=F=>{F.preventDefault(),w.trim()&&!m&&E(w)},T=async F=>{if(a&&confirm(s("notes.deleteConfirm")))try{await l.deleteNote(F),k()}catch(B){console.error("Error deleting note:",B),p(B instanceof Error?B.message:String(B))}},V=F=>F.attached_to_type?`${F.attached_to_type}: ${F.attached_to_id}`:s("todos.unattached");return h?c.jsx("div",{className:"note-list",children:c.jsx("div",{className:"loading",children:s("notes.loadingNotes")})}):c.jsxs("div",{className:"chat-container",children:[n&&c.jsx("div",{className:"chat-header",children:c.jsx("h3",{children:n})}),c.jsxs("div",{className:"chat-messages",children:[h&&c.jsx("div",{className:"chat-loading",children:s("notes.loadingNotes")}),!h&&u.length===0&&c.jsx("div",{className:"chat-empty",children:c.jsx("p",{children:s("notes.noNotesYet")})}),u.map(F=>c.jsxs("div",{className:"chat-message",children:[c.jsxs("div",{className:"message-header",children:[c.jsx("span",{className:"message-author",children:F.user_name||F.user_email||s("notes.unknownUser")}),c.jsx("span",{className:"message-time",children:new Date(F.created_at).toLocaleString()}),a&&c.jsx("button",{onClick:()=>T(F.id),className:"message-delete",title:s("notes.deleteNote"),children:"×"})]}),c.jsx("div",{className:"message-content",children:F.content}),r&&c.jsxs("div",{className:"message-attachment",children:[s("notes.attachedToLabel"),V(F)]})]},F.id)),c.jsx("div",{ref:y})]}),(a||o)&&c.jsxs("div",{className:"chat-input-container",children:[g&&c.jsx("div",{className:"chat-error",children:g}),c.jsxs("form",{onSubmit:P,className:"chat-input-form",children:[c.jsx("textarea",{ref:x,value:w,onChange:F=>_(F.target.value),onKeyPress:j,placeholder:s("notes.typePlaceholder"),className:"chat-input",rows:1,disabled:m}),c.jsx("button",{type:"submit",disabled:!w.trim()||m,className:"chat-send-btn",children:s(m?"notes.sending":"notes.send")})]})]})]})}function Xx(){const{id:t}=Hu(),e=Ta(),{user:n,isAdmin:r}=$e(),{taskService:s}=Xe(),{t:i}=Y(),[a,o]=S.useState(null),[l,u]=S.useState(!0),[d,h]=S.useState(null),[f,g]=S.useState(null),[p,w]=S.useState(""),[_,m]=S.useState(!1),[v,y]=S.useState("chat"),[x,k]=S.useState(!0),[C,E]=S.useState(!0),[j,P]=S.useState(!0),T=S.useCallback(async()=>{try{if(!t)return;u(!0);const N=await s.getTask(t);o(N)}catch(N){h(N.message)}finally{u(!1)}},[s,t]);S.useEffect(()=>{n&&t&&T()},[T,n,t]);const V=()=>{e(-1)},F=N=>`status-badge status-${N}`,B=S.useCallback(async(N,L)=>{if(a)try{if(u(!0),N==="started_at"||N==="finished_at"){const A={[N]:L};await s.updateTaskTimes(a.id,A)}else await s.updateTaskField(a.id,N,L);await T(),g(null)}catch(A){h(A.message)}finally{u(!1)}},[s,a==null?void 0:a.id,T]),ie=S.useCallback(async N=>{if(a)try{u(!0),await s.updateTaskStatus(a.id,N),await T()}catch(L){h(L.message)}finally{u(!1)}},[s,a==null?void 0:a.id,T]),Ze=S.useCallback(async(N,L)=>{try{u(!0),await s.updateTaskAssignment(N,L,n==null?void 0:n.id),await T()}catch(A){throw h(A.message),A}finally{u(!1)}},[s,n==null?void 0:n.id,T]),oe=S.useCallback((N,L)=>{g(N),w(L||"")},[]),I=S.useCallback(()=>{g(null),w("")},[]),b=({field:N,value:L,type:A="text"})=>{if(!a)return null;const W=f===N,Ae=!(N==="started_at"||N==="finished_at")||a.status!=="assigned"&&a.status!=="unassigned",et=a.status!=="admin_accepted"||r;return W?c.jsxs("div",{className:"time-edit-container",children:[c.jsx("input",{type:A,value:p,onChange:tt=>w(tt.target.value),className:"time-input"}),c.jsx("button",{onClick:()=>B(N,p),className:"btn-save",disabled:l,children:i("columns.save")}),c.jsx("button",{onClick:I,className:"btn-cancel",disabled:l,children:i("columns.cancel")})]}):c.jsxs("div",{className:"time-display-container",children:[c.jsx("span",{children:L?un(L):i("tasks.notSet")}),Ae&&et&&c.jsx("button",{onClick:()=>oe(N,L?L.slice(0,16):""),className:"btn-edit",disabled:l,children:i("columns.edit")})]})};return l?c.jsx("div",{className:"task-detail",children:c.jsxs("div",{className:"task-detail-loading",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:i("tasks.loadingDetails")})]})}):d?c.jsx("div",{className:"task-detail",children:c.jsxs("div",{className:"task-detail-error",children:[c.jsx("h2",{children:i("tasks.errorLoading")}),c.jsx("p",{children:d}),c.jsx("button",{onClick:V,className:"btn-primary",children:i("tasks.goBack")})]})}):a?c.jsxs("div",{className:"task-detail",children:[c.jsxs("div",{className:"task-detail-header",children:[c.jsxs("button",{onClick:V,className:"btn-back",children:["← ",i("tasks.back")]}),c.jsx("h1",{className:"task-detail-title",children:i("tasks.details")})]}),c.jsxs("div",{className:"task-detail-content",children:[c.jsxs("div",{className:"task-detail-section",children:[c.jsx("h2",{className:"section-title",children:i("tasks.information")}),c.jsxs("div",{className:"task-info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.titleLabel")}),c.jsx("span",{children:a.title||i("columns.na")})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.statusLabel")}),c.jsx("span",{className:F(a.status),children:a.status})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.scheduledLabel")}),c.jsx("span",{children:un(a.scheduled_datetime)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.listingIdLabel")}),c.jsx("span",{children:a.listing_id||i("columns.na")})]}),r&&c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.assignedToLabel")}),c.jsx(jp,{currentAssignedTo:a.assigned_to,taskId:a.id,onAssignmentChange:Ze,disabled:l})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.startedAtLabel")}),c.jsx(b,{field:"started_at",value:a.started_at,type:"datetime-local"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:i("taskDetail.finishedAtLabel")}),c.jsx(b,{field:"finished_at",value:a.finished_at,type:"datetime-local"})]})]})]}),c.jsx("div",{className:"task-detail-section",children:c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{className:"section-title",children:i("tasks.actions")}),c.jsxs("div",{className:"section-actions",children:[a.status==="admin_accepted"&&c.jsxs("div",{className:"admin-accepted-notice",children:[c.jsx("span",{className:"status-badge status-admin_accepted",children:i("tasks.acceptedByAdmin")}),c.jsx("p",{children:i("tasks.noFurtherEdits")})]}),a.status==="assigned"&&c.jsx("button",{onClick:()=>ie("accepted"),className:"btn-start",disabled:l,children:i("tasks.acceptTask")}),a.status==="accepted"&&c.jsx("button",{onClick:()=>B("started_at",new Date().toISOString()),className:"btn-start",disabled:l,children:i("tasks.startTask")}),a.status==="in_progress"&&!a.finished_at&&c.jsx("button",{onClick:()=>B("finished_at",new Date().toISOString()),className:"btn-end",disabled:l,children:i("tasks.completeTask")}),r&&a.status==="completed"&&c.jsx("div",{className:"admin-review-actions",children:c.jsx("button",{onClick:()=>ie("admin_accepted"),className:"btn-accept",disabled:l,children:i("tasks.acceptCompletion")})})]})]})}),c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>P(!j),className:"section-toggle","aria-label":i(j?"collapse_section":"expand_section"),children:[c.jsx("span",{className:`expand-icon ${j?"expanded":""}`,children:"▼"}),c.jsx("span",{className:"section-title",children:"Product Replenishment Helper"})]})}),j&&a.listing_id&&c.jsx(Yx,{listingId:a.listing_id})]}),a.listing_id&&c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>E(!C),className:"section-toggle","aria-label":i(C?"collapse_section":"expand_section"),children:[c.jsx("span",{className:`expand-icon ${C?"expanded":""}`,children:"▼"}),c.jsx("span",{className:"section-title",children:i("listings.listingTodos")})]})}),C&&c.jsx(Np,{attachedToType:"listing",attachedToId:a.listing_id,title:""})]}),c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>k(!x),className:"section-toggle","aria-label":i(x?"collapse_section":"expand_section"),children:[c.jsx("span",{className:`expand-icon ${x?"expanded":""}`,children:"▼"}),c.jsx("span",{className:"section-title",children:i("listings.listingChat")})]})}),x&&c.jsxs("div",{className:"tabbed-container",children:[c.jsx("div",{className:"tab-header",children:c.jsxs("div",{className:"tab-nav",children:[c.jsx("button",{className:`tab-button ${v==="chat"?"active":""}`,onClick:()=>y("chat"),children:i("taskDetail.taskTab")}),c.jsx("button",{className:`tab-button ${v==="listing"?"active":""}`,onClick:()=>y("listing"),children:i("taskDetail.listingTab")})]})}),c.jsx("div",{className:"tab-content",children:v==="chat"?c.jsx(Gl,{attachedToType:"task",attachedToId:a.id,title:""}):a.listing_id&&c.jsx(Gl,{attachedToType:"listing",attachedToId:a.listing_id,title:""})})]})]}),r&&c.jsxs("div",{className:"task-detail-section",children:[c.jsx("div",{className:"section-header",children:c.jsxs("button",{onClick:()=>m(!_),className:"section-toggle","aria-label":i(_?"taskDetail.collapseAudit":"taskDetail.expandAudit"),children:[c.jsx("span",{className:`toggle-icon ${_?"expanded":"collapsed"}`,children:"▼"}),c.jsx("h2",{className:"section-title",children:i("audit.history")})]})}),_&&c.jsx("div",{className:"audit-trail-container",children:c.jsx(Kx,{taskId:a.id,taskService:s})})]})]})]}):c.jsx("div",{className:"task-detail",children:c.jsxs("div",{className:"task-detail-not-found",children:[c.jsx("h2",{children:i("tasks.notFound")}),c.jsx("p",{children:i("tasks.notFoundDescription")}),c.jsx("button",{onClick:V,className:"btn-primary",children:i("tasks.goBack")})]})})}function Zx(){const{t}=Y(),{id:e}=Hu(),{listingService:n}=Xe(),[r,s]=S.useState(null),[i,a]=S.useState(!0),[o,l]=S.useState(null);if(S.useEffect(()=>{(async()=>{if(e)try{a(!0),l(null);const h=await n.fetchListing(e);s(h)}catch(h){console.error("Error fetching listing:",h),l(h instanceof Error?h.message:String(h))}finally{a(!1)}})()},[e,n]),i)return c.jsxs("div",{className:"listing-detail-loading",children:[c.jsx("div",{className:"loading-spinner","data-testid":"loading-spinner"}),t("listings.loadingDetails")]});if(o)return c.jsxs("div",{className:"error",children:[c.jsx("h3",{className:"error-title",children:t("listings.failedToLoad")}),c.jsx("p",{className:"error-message",children:o})]});if(!r)return c.jsxs("div",{className:"error",children:[c.jsx("h3",{className:"error-title",children:t("listings.notFound")}),c.jsxs("p",{className:"error-message",children:['The listing with ID "',e,'" was not found.']})]});const u=r.airbnb_payload||{};return c.jsxs("div",{className:"listing-detail",children:[c.jsxs("div",{className:"listing-detail-header",children:[c.jsx("h1",{className:"listing-detail-title",children:t("listings.details")}),c.jsxs("div",{className:"listing-detail-subtitle",children:["ID: ",r.id]})]}),c.jsxs("div",{className:"listing-detail-content",children:[c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.basicInformation")}),c.jsxs("div",{className:"listing-detail-grid",children:[c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.listingId"),":"]}),c.jsx("span",{children:r.id})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.airbnbId"),":"]}),c.jsx("span",{children:r.airbnb_id})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.address"),":"]}),c.jsx("span",{children:u.formattedAddress||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.propertyType"),":"]}),c.jsx("span",{children:u.propertyType||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.roomType"),":"]}),c.jsx("span",{children:u.roomType||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.bedrooms"),":"]}),c.jsx("span",{children:u.bedrooms||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.bathrooms"),":"]}),c.jsx("span",{children:u.bathrooms||t("columns.na")})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.maxGuests"),":"]}),c.jsx("span",{children:u.maxGuests||t("columns.na")})]})]})]}),c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.dates")}),c.jsxs("div",{className:"listing-detail-grid",children:[c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.created"),":"]}),c.jsx("span",{children:new Date(r.created_at).toLocaleString()})]}),c.jsxs("div",{className:"listing-detail-item",children:[c.jsxs("label",{children:[t("listings.updated"),":"]}),c.jsx("span",{children:new Date(r.updated_at).toLocaleString()})]})]})]}),u.amenities&&u.amenities.length>0&&c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.amenities")}),c.jsx("div",{className:"amenities-list",children:u.amenities.map((d,h)=>c.jsx("span",{className:"amenity-tag",children:d},h))})]}),c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.listingTodos")}),c.jsx(Np,{attachedToType:"listing",attachedToId:r.id,title:""})]}),c.jsxs("div",{className:"listing-detail-section",children:[c.jsx("h2",{children:t("listings.listingChat")}),c.jsx(Gl,{attachedToType:"listing",attachedToId:r.id,title:""})]})]})]})}const ek=()=>{const{currentLanguage:t,changeLanguage:e}=E_(),n=[{code:"en",name:"English",flag:"🇺🇸"},{code:"es",name:"Español",flag:"🇪🇸"}];return c.jsx("div",{className:"language-selector",children:c.jsx("select",{value:t,onChange:r=>e(r.target.value),className:"language-select",children:n.map(r=>c.jsxs("option",{value:r.code,children:[r.flag," ",r.name]},r.code))})})},dt=()=>{const t=Cn(),{user:e,signOut:n,isAdmin:r,isCleaner:s}=$e(),{t:i}=Y(),[a,o]=S.useState(!1),l=S.useRef(null),u=async()=>{try{await n()}catch(f){console.error("Sign out error:",f)}},d=()=>{o(!a)},h=()=>{o(!1)};return S.useEffect(()=>{const f=g=>{l.current&&!l.current.contains(g.target)&&h()};return a?(document.addEventListener("mousedown",f),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("mousedown",f),document.body.style.overflow="unset"}},[a]),c.jsxs(c.Fragment,{children:[c.jsx("nav",{className:"navigation",children:c.jsx("div",{className:"nav-content",children:c.jsxs("div",{className:"mobile-nav",children:[c.jsxs("div",{className:"mobile-nav-left",children:[c.jsxs("button",{className:"hamburger-btn",onClick:d,"aria-label":"Toggle navigation menu",children:[c.jsx("span",{className:`hamburger-line ${a?"open":""}`}),c.jsx("span",{className:`hamburger-line ${a?"open":""}`}),c.jsx("span",{className:`hamburger-line ${a?"open":""}`})]}),c.jsx(He,{to:"/",className:"nav-brand",children:i("navigation.brand")})]}),c.jsx("div",{className:"mobile-nav-right",children:c.jsx("span",{className:"mobile-user-email",children:e==null?void 0:e.email})})]})})}),a&&c.jsx("div",{className:"mobile-overlay",onClick:h}),c.jsxs("div",{ref:l,className:`sidebar ${a?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsxs("div",{className:"sidebar-user-info",children:[c.jsx(He,{to:"/",className:"sidebar-brand",children:i("navigation.brand")}),c.jsx("span",{className:"sidebar-user-email",children:e==null?void 0:e.email}),c.jsxs("div",{className:"sidebar-badges",children:[r&&c.jsx("span",{className:"admin-badge",children:i("navigation.adminBadge")}),s&&c.jsx("span",{className:"cleaner-badge",children:i("navigation.cleanerBadge")})]})]}),c.jsx("button",{className:"close-btn",onClick:h,"aria-label":"Close navigation menu",children:"×"})]}),c.jsxs("div",{className:"sidebar-nav-links",children:[c.jsx(He,{to:"/",className:`sidebar-nav-link ${t.pathname==="/"?"active":""}`,onClick:h,children:i("navigation.dashboard")}),r&&c.jsx(He,{to:"/healthcheck",className:`sidebar-nav-link ${t.pathname==="/healthcheck"?"active":""}`,onClick:h,children:i("navigation.healthCheck")}),r&&c.jsx(He,{to:"/listings",className:`sidebar-nav-link ${t.pathname==="/listings"?"active":""}`,onClick:h,children:i("navigation.listings")}),r&&c.jsxs(c.Fragment,{children:[c.jsx(He,{to:"/admin",className:`sidebar-nav-link ${t.pathname==="/admin"?"active":""}`,onClick:h,children:i("navigation.reservations")}),c.jsx(He,{to:"/admin/tasks",className:`sidebar-nav-link ${t.pathname==="/admin/tasks"?"active":""}`,onClick:h,children:i("navigation.tasks")}),c.jsx(He,{to:"/admin/todos",className:`sidebar-nav-link ${t.pathname==="/admin/todos"?"active":""}`,onClick:h,children:i("navigation.todos")}),c.jsx(He,{to:"/admin/threads",className:`sidebar-nav-link ${t.pathname==="/admin/threads"?"active":""}`,onClick:h,children:i("navigation.threads")})]}),s&&c.jsx(He,{to:"/cleaner/tasks",className:`sidebar-nav-link ${t.pathname==="/cleaner/tasks"?"active":""}`,onClick:h,children:i("navigation.myTasks")})]}),c.jsxs("div",{className:"sidebar-footer",children:[c.jsx(ek,{}),c.jsx("button",{onClick:u,className:"sidebar-signout-btn",children:i("navigation.signOut")})]})]})]})},tk=()=>{const{t}=Y(),[e,n]=S.useState(!0),[r,s]=S.useState(null),i=Ta(),{userService:a}=Xe();return S.useEffect(()=>{(async()=>{try{console.log("Handling auth callbackz..."),console.log("URL:",window.location.href);const l=new URLSearchParams(window.location.hash.substring(1));l.has("access_token")||l.has("error")?(console.log("Auth parameters found in URL, processing..."),await a.getCurrentSession()?(console.log("Auth successful, redirecting to home..."),i("/",{replace:!0})):(console.log("Session not ready, waiting..."),setTimeout(()=>{i("/",{replace:!0})},1e3))):(console.log("No auth parameters, checking existing session..."),await a.getCurrentSession()?(console.log("Existing session found, redirecting to home..."),i("/",{replace:!0})):(console.log("No session found, redirecting to login..."),i("/",{replace:!0})))}catch(l){console.error("Unexpected error in auth callback:",l),s(t("auth.unexpectedError")),n(!1)}})()},[a,i,t]),e?c.jsx("div",{className:"container",children:c.jsx("div",{className:"card",children:c.jsxs("div",{className:"loading",children:[c.jsx("h2",{children:t("auth.authenticating")}),c.jsx("p",{children:t("auth.pleaseWait")})]})})}):r?c.jsx("div",{className:"container",children:c.jsx("div",{className:"card",children:c.jsxs("div",{className:"error",children:[c.jsx("h2",{children:t("auth.authenticationError")}),c.jsx("p",{children:r}),c.jsx("button",{onClick:()=>i("/",{replace:!0}),children:t("auth.returnToLogin")})]})})}):null},nk=()=>{const{t}=Y();return c.jsxs("div",{className:"content-container",children:[c.jsxs("div",{className:"page-header",children:[c.jsx("h1",{className:"page-title",children:t("dashboard.title")}),c.jsx("p",{className:"page-subtitle",children:t("dashboard.welcome")})]}),c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:"🏠"}),c.jsx("h2",{className:"empty-state-title",children:t("dashboard.comingSoon")}),c.jsx("p",{className:"empty-state-description",children:t("dashboard.comingSoonDescription")})]})]})},rk=()=>{var u,d,h;const{t}=Y(),[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,a]=S.useState(null),{user:o}=$e(),{healthCheckService:l}=Xe();return S.useEffect(()=>{o&&(async()=>{try{s(!0),a(null);const g=await l.getHealthCheck();n(g)}catch(g){const p=g instanceof Error?g.message:"An error occurred";p.includes("Authentication failed")?a(t("auth.authenticationFailed")):p.includes("No valid authentication session")?a(t("auth.noAccessToken")):a(p),console.error("Health check error:",g)}finally{s(!1)}})()},[o,l,t]),r?c.jsxs("div",{className:"loading",children:[c.jsx("div",{className:"loading-spinner"}),t("healthCheck.loading")]}):i?c.jsxs("div",{className:"error",children:[c.jsx("h2",{className:"error-title",children:t("healthCheck.failed")}),c.jsx("p",{className:"error-message",children:i}),i.includes("Authentication failed")&&c.jsx("button",{onClick:()=>window.location.reload(),className:"google-signin-btn",style:{marginTop:"var(--space-4)"},children:t("healthCheck.reloadPage")})]}):c.jsxs("div",{className:"admin-reservations",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{className:"admin-title",children:t("healthCheck.title")}),c.jsx("p",{className:"admin-stats",children:t("healthCheck.monitoring")})]}),e&&c.jsxs("div",{style:{padding:"var(--space-6)"},children:[c.jsxs("div",{style:{display:"grid",gap:"var(--space-4)",marginBottom:"var(--space-6)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.overallStatus")}),c.jsx("span",{className:`status-badge status-${e.status==="ok"?"confirmed":"cancelled"}`,children:e.status==="ok"?t("healthCheck.healthy"):t("healthCheck.error")})]}),((u=e.checks)==null?void 0:u.database)&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.database")}),c.jsxs("div",{style:{textAlign:"right"},children:[c.jsx("span",{className:`status-badge status-${e.checks.database.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.database.status==="ok"?t("healthCheck.connected"):t("healthCheck.error")}),e.checks.database.version&&c.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--graphite-500)",marginTop:"var(--space-1)"},children:[t("system.version"),e.checks.database.version]})]})]}),((d=e.checks)==null?void 0:d.supabase)&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.supabaseApi")}),c.jsx("span",{className:`status-badge status-${e.checks.supabase.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.supabase.status==="ok"?t("healthCheck.connected"):t("healthCheck.error")})]}),((h=e.checks)==null?void 0:h.environment)&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"var(--space-4)",backgroundColor:"var(--graphite-50)",borderRadius:"var(--radius-lg)",border:"1px solid var(--graphite-200)"},children:[c.jsx("strong",{style:{color:"var(--graphite-700)"},children:t("system.environment")}),c.jsx("span",{className:`status-badge status-${e.checks.environment.status==="ok"?"confirmed":"cancelled"}`,children:e.checks.environment.status==="ok"?t("healthCheck.configured"):t("healthCheck.error")})]})]}),c.jsxs("div",{style:{textAlign:"center",color:"var(--graphite-500)",fontSize:"0.875rem",fontStyle:"italic",paddingTop:"var(--space-4)",borderTop:"1px solid var(--graphite-200)"},children:[t("system.lastChecked"),new Date(e.timestamp).toLocaleString()]})]})]})},U=t=>typeof t=="string",Jr=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},Kd=t=>t==null?"":""+t,sk=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},ik=/###/g,Qd=t=>t&&t.indexOf("###")>-1?t.replace(ik,"."):t,Jd=t=>!t||U(t),ps=(t,e,n)=>{const r=U(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Jd(t))return{};const i=Qd(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return Jd(t)?{}:{obj:t,k:Qd(r[s])}},Yd=(t,e,n)=>{const{obj:r,k:s}=ps(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],a=e.slice(0,e.length-1),o=ps(t,a,Object);for(;o.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),o=ps(t,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},ak=(t,e,n,r)=>{const{obj:s,k:i}=ps(t,e,Object);s[i]=s[i]||[],s[i].push(n)},ua=(t,e)=>{const{obj:n,k:r}=ps(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},ok=(t,e,n)=>{const r=ua(t,n);return r!==void 0?r:ua(e,n)},Pp=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?U(t[r])||t[r]instanceof String||U(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Pp(t[r],e[r],n):t[r]=e[r]);return t},Zn=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var lk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const uk=t=>U(t)?t.replace(/[&<>"'\/]/g,e=>lk[e]):t;class ck{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const dk=[" ",",","?","!",";"],hk=new ck(20),fk=(t,e,n)=>{e=e||"",n=n||"";const r=dk.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const s=hk.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!s.test(t);if(!i){const a=t.indexOf(n);a>0&&!s.test(t.substring(0,a))&&(i=!0)}return i},Wl=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let a,o="";for(let l=i;l<r.length;++l)if(l!==i&&(o+=n),o+=r[l],a=s[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<r.length-1)continue;i+=l-i+1;break}s=a}return s},As=t=>t==null?void 0:t.replace("_","-"),gk={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class ca{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||gk,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(U(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new ca(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ca(this.logger,e)}}var Et=new ca;class Da{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,i])=>{for(let a=0;a<i;a++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let a=0;a<i;a++)s.apply(s,[e,...n])})}}class Xd extends Da{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){var u,d;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,n],r&&(Array.isArray(r)?o.push(...r):U(r)&&i?o.push(...r.split(i)):o.push(r)));const l=ua(this.data,o);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=o[0],n=o[1],r=o.slice(2).join(".")),l||!a||!U(r)?l:Wl((d=(u=this.data)==null?void 0:u[e])==null?void 0:d[n],r,i)}addResource(e,n,r,s,i={silent:!1}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,n];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),s=n,n=o[1]),this.addNamespaces(n),Yd(this.data,o,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const i in r)(U(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i,a={silent:!1,skipCopy:!1}){let o=[e,n];e.indexOf(".")>-1&&(o=e.split("."),s=r,r=n,n=o[1]),this.addNamespaces(n);let l=ua(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?Pp(l,r,i):l={...l,...r},Yd(this.data,o,l),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Lp={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{var a;e=((a=this.processors[i])==null?void 0:a.process(e,n,r,s))??e}),e}};const $p=Symbol("i18next/PATH_KEY");function pk(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===$p?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Kl(t,e){const{[$p]:n}=t(pk());return n.join((e==null?void 0:e.keySeparator)??".")}const Zd={},eh=t=>!U(t)&&typeof t!="boolean"&&typeof t!="number";class da extends Da{constructor(e,n={}){super(),sk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Et.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);return(s==null?void 0:s.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!fk(e,r,s);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:U(i)?[i]:i};const u=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(s)}return{key:e,namespaces:U(i)?[i]:i}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=Kl(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],s),u=l[l.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const h=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode")return f?i?{res:`${u}${d}${o}`,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:o;const g=this.resolve(e,s);let p=g==null?void 0:g.res;const w=(g==null?void 0:g.usedKey)||o,_=(g==null?void 0:g.exactUsedKey)||o,m=["[object Number]","[object Function]","[object RegExp]"],v=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,x=s.count!==void 0&&!U(s.count),k=da.hasDefaultValue(s),C=x?this.pluralResolver.getSuffix(h,s.count,s):"",E=s.ordinal&&x?this.pluralResolver.getSuffix(h,s.count,{ordinal:!1}):"",j=x&&!s.ordinal&&s.count===0,P=j&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${C}`]||s[`defaultValue${E}`]||s.defaultValue;let T=p;y&&!p&&k&&(T=P);const V=eh(T),F=Object.prototype.toString.apply(T);if(y&&T&&V&&m.indexOf(F)<0&&!(U(v)&&Array.isArray(T))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,T,{...s,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(g.res=B,g.usedParams=this.getUsedParamsDetails(s),g):B}if(a){const B=Array.isArray(T),ie=B?[]:{},Ze=B?_:w;for(const oe in T)if(Object.prototype.hasOwnProperty.call(T,oe)){const I=`${Ze}${a}${oe}`;k&&!p?ie[oe]=this.translate(I,{...s,defaultValue:eh(P)?P[oe]:void 0,joinArrays:!1,ns:l}):ie[oe]=this.translate(I,{...s,joinArrays:!1,ns:l}),ie[oe]===I&&(ie[oe]=T[oe])}p=ie}}else if(y&&U(v)&&Array.isArray(p))p=p.join(v),p&&(p=this.extendTranslation(p,e,s,r));else{let B=!1,ie=!1;!this.isValidLookup(p)&&k&&(B=!0,p=P),this.isValidLookup(p)||(ie=!0,p=o);const oe=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ie?void 0:p,I=k&&P!==p&&this.options.updateMissing;if(ie||B||I){if(this.logger.log(I?"updateKey":"missingKey",h,u,o,I?P:p),a){const A=this.resolve(o,{...s,keySeparator:!1});A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let b=[];const N=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&N&&N[0])for(let A=0;A<N.length;A++)b.push(N[A]);else this.options.saveMissingTo==="all"?b=this.languageUtils.toResolveHierarchy(s.lng||this.language):b.push(s.lng||this.language);const L=(A,W,Ie)=>{var et;const Ae=k&&Ie!==p?Ie:oe;this.options.missingKeyHandler?this.options.missingKeyHandler(A,u,W,Ae,I,s):(et=this.backendConnector)!=null&&et.saveMissing&&this.backendConnector.saveMissing(A,u,W,Ae,I,s),this.emit("missingKey",A,u,W,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?b.forEach(A=>{const W=this.pluralResolver.getSuffixes(A,s);j&&s[`defaultValue${this.options.pluralSeparator}zero`]&&W.indexOf(`${this.options.pluralSeparator}zero`)<0&&W.push(`${this.options.pluralSeparator}zero`),W.forEach(Ie=>{L([A],o+Ie,s[`defaultValue${Ie}`]||P)})}):L(b,o,P))}p=this.extendTranslation(p,e,s,g,r),ie&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${u}${d}${o}`),(ie||B)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${o}`:o,B?p:void 0,s))}return i?(g.res=p,g.usedParams=this.getUsedParamsDetails(s),g):p}extendTranslation(e,n,r,s,i){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=U(e)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const g=e.match(this.interpolator.nestingRegexp);h=g&&g.length}let f=r.replace&&!U(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),d){const g=e.match(this.interpolator.nestingRegexp),p=g&&g.length;h<p&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(i==null?void 0:i[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,o=U(a)?[a]:a;return e!=null&&(o!=null&&o.length)&&r.applyPostProcessor!==!1&&(e=Lp.handle(o,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,i,a,o;return U(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),d=u.key;s=d;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!U(n.count),g=f&&!n.ordinal&&n.count===0,p=n.context!==void 0&&(U(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(_=>{var m,v;this.isValidLookup(r)||(o=_,!Zd[`${w[0]}-${_}`]&&((m=this.utils)!=null&&m.hasLoadedNamespace)&&!((v=this.utils)!=null&&v.hasLoadedNamespace(o))&&(Zd[`${w[0]}-${_}`]=!0,this.logger.warn(`key "${s}" for languages "${w.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(y=>{var C;if(this.isValidLookup(r))return;a=y;const x=[d];if((C=this.i18nFormat)!=null&&C.addLookupKeys)this.i18nFormat.addLookupKeys(x,d,y,_,n);else{let E;f&&(E=this.pluralResolver.getSuffix(y,n.count,n));const j=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(n.ordinal&&E.indexOf(P)===0&&x.push(d+E.replace(P,this.options.pluralSeparator)),x.push(d+E),g&&x.push(d+j)),p){const T=`${d}${this.options.contextSeparator||"_"}${n.context}`;x.push(T),f&&(n.ordinal&&E.indexOf(P)===0&&x.push(T+E.replace(P,this.options.pluralSeparator)),x.push(T+E),g&&x.push(T+j))}}let k;for(;k=x.pop();)this.isValidLookup(r)||(i=k,r=this.getResource(y,_,k,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!U(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class th{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Et.create("languageUtils")}getScriptPartFromCode(e){if(e=As(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=As(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(U(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(a=>{if(a===i)return a;if(!(a.indexOf("-")<0&&i.indexOf("-")<0)&&(a.indexOf("-")>0&&i.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===i||a.indexOf(i)===0&&i.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),U(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],i=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return U(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):U(e)&&i(this.formatLanguageCode(e)),r.forEach(a=>{s.indexOf(a)<0&&i(this.formatLanguageCode(a))}),s}}const nh={zero:0,one:1,two:2,few:3,many:4,other:5},rh={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class mk{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Et.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=As(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),rh;if(!e.match(/-|_/))return rh;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,n)}return this.pluralRulesCache[i]=a,a}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>nh[s]-nh[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const sh=(t,e,n,r=".",s=!0)=>{let i=ok(t,e,n);return!i&&s&&U(n)&&(i=Wl(t,n,r),i===void 0&&(i=Wl(e,n,r))),i},No=t=>t.replace(/\$/g,"$$$$");class vk{constructor(e={}){var n;this.logger=Et.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:d,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:g,nestingSuffix:p,nestingSuffixEscaped:w,nestingOptionsSeparator:_,maxReplaces:m,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:uk,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?Zn(i):a||"{{",this.suffix=o?Zn(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=f?Zn(f):g||Zn("$t("),this.nestingSuffix=p?Zn(p):w||Zn(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=m||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){var g;let i,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const v=sh(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,r,{...s,...n,interpolationkey:p}):v}const w=p.split(this.formatSeparator),_=w.shift().trim(),m=w.join(this.formatSeparator).trim();return this.format(sh(n,l,_,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...s,...n,interpolationkey:_})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=((g=s==null?void 0:s.interpolation)==null?void 0:g.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>No(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?No(this.escape(p)):No(p)}].forEach(p=>{for(o=0;i=p.regex.exec(e);){const w=i[1].trim();if(a=u(w),a===void 0)if(typeof d=="function"){const m=d(e,i,s);a=U(m)?m:""}else if(s&&Object.prototype.hasOwnProperty.call(s,w))a="";else if(h){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),a="";else!U(a)&&!this.useRawValueToEscape&&(a=Kd(a));const _=p.safeValue(a);if(e=e.replace(i[0],_),h?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=i[0].length):p.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,i,a;const o=(l,u)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const h=l.split(new RegExp(`${d}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,a);const g=f.match(/'/g),p=f.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!p||p.length%2!==0)&&(f=f.replace(/'/g,'"'));try{a=JSON.parse(f),u&&(a={...u,...a})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,w),`${l}${d}${f}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&!U(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(l=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),i=n(o.call(this,s[1].trim(),a),a),i&&s[0]===e&&!U(i))return i;U(i)||(i=Kd(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),l.length&&(i=l.reduce((d,h)=>this.format(d,h,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const yk=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),d=o.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},ih=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=r+JSON.stringify(i);let o=e[a];return o||(o=t(As(r),s),e[a]=o),o(n)}},wk=t=>(e,n,r)=>t(As(n),r)(e);class Sk{constructor(e={}){this.logger=Et.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?ih:wk;this.formats={number:r((s,i)=>{const a=new Intl.NumberFormat(s,{...i});return o=>a.format(o)}),currency:r((s,i)=>{const a=new Intl.NumberFormat(s,{...i,style:"currency"});return o=>a.format(o)}),datetime:r((s,i)=>{const a=new Intl.DateTimeFormat(s,{...i});return o=>a.format(o)}),relativetime:r((s,i)=>{const a=new Intl.RelativeTimeFormat(s,{...i});return o=>a.format(o,i.range||"day")}),list:r((s,i)=>{const a=new Intl.ListFormat(s,{...i});return o=>a.format(o)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=ih(n)}format(e,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,l)=>{var h;const{formatName:u,formatOptions:d}=yk(l);if(this.formats[u]){let f=o;try{const g=((h=s==null?void 0:s.formatParams)==null?void 0:h[s.interpolationkey])||{},p=g.locale||g.lng||s.locale||s.lng||r;f=this.formats[u](o,p,{...d,...s,...g})}catch(g){this.logger.warn(g)}return f}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const _k=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class xk extends Da{constructor(e,n,r,s={}){var i,a;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Et.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(a=(i=this.backend)==null?void 0:i.init)==null||a.call(i,r,s.backend,s)}queueLoad(e,n,r,s){const i={},a={},o={},l={};return e.forEach(u=>{let d=!0;n.forEach(h=>{const f=`${u}|${h}`;!r.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?a[f]===void 0&&(a[f]=!0):(this.state[f]=1,d=!1,a[f]===void 0&&(a[f]=!0),i[f]===void 0&&(i[f]=!0),l[h]===void 0&&(l[h]=!0)))}),d||(o[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const s=e.split("|"),i=s[0],a=s[1];n&&this.emit("failedLoading",i,a,n),!n&&r&&this.store.addResourceBundle(i,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const o={};this.queue.forEach(l=>{ak(l.loaded,[i],a),_k(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const d=l.loaded[u];d.length&&d.forEach(h=>{o[u][h]===void 0&&(o[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,s=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:a});return}this.readingCalls++;const o=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,a)},i);return}a(u,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(d=>o(null,d)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,n,o)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();U(e)&&(e=this.languageUtils.toResolveHierarchy(e)),U(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,a),!a&&o&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,o),this.loaded(e,a,o)})}saveMissing(e,n,r,s,i,a={},o=()=>{}){var l,u,d,h,f;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((h=(d=this.services)==null?void 0:d.utils)!=null&&h.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const g={...a,isUpdate:i},p=this.backend.create.bind(this.backend);if(p.length<6)try{let w;p.length===5?w=p(e,n,r,s,g):w=p(e,n,r,s),w&&typeof w.then=="function"?w.then(_=>o(null,_)).catch(o):o(null,w)}catch(w){o(w)}else p(e,n,r,s,o,g)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const ah=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),U(t[1])&&(e.defaultValue=t[1]),U(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),oh=t=>{var e,n;return U(t.ns)&&(t.ns=[t.ns]),U(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),U(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},_i=()=>{},kk=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Os extends Da{constructor(e={},n){if(super(),this.options=oh(e),this.services={},this.logger=Et,this.modules={external:[]},kk(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(U(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=ah();this.options={...r,...this.options,...oh(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Et.init(s(this.modules.logger),this.options):Et.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=Sk;const d=new th(this.options);this.store=new Xd(this.options.resources,this.options);const h=this.services;h.logger=Et,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new mk(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=s(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new vk(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new xk(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new da(this.services,this.options),this.translator.on("*",(g,...p)=>{this.emit(g,...p)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=_i),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const o=Jr(),l=()=>{const u=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(h),n(d,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(e,n=_i){var i,a;let r=n;const s=U(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),(a=(i=this.options.preload)==null?void 0:i.forEach)==null||a.call(i,u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const s=Jr();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=_i),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Lp.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Jr();this.emit("languageChanging",e);const s=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,l)=>{l?this.isLanguageChangingTo===e&&(s(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(o,(...u)=>this.t(...u))},a=o=>{var d,h;!e&&!o&&this.services.languageDetector&&(o=[]);const l=U(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(U(o)?[o]:o);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(h=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||h.call(d,u)),this.loadResources(u,f=>{i(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),r}getFixedT(e,n,r){const s=(i,a,...o)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([i,a].concat(o)):l={...a},l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const u=this.options.keySeparator||".";let d;return l.keyPrefix&&Array.isArray(i)?d=i.map(h=>(typeof h=="function"&&(h=Kl(h,{...this.options,...a})),`${l.keyPrefix}${u}${h}`)):(typeof i=="function"&&(i=Kl(i,{...this.options,...a})),d=l.keyPrefix?`${l.keyPrefix}${u}${i}`:i),this.t(d,l)};return U(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const o=n.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!s||a(i,e)))}loadNamespaces(e,n){const r=Jr();return this.options.ns?(U(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Jr();U(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=s.concat(i),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){var s,i;if(e||(e=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new th(ah());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Os(e,n)}cloneInstance(e={},n=_i){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Os(s);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const o=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((d,h)=>(d[h]={...l[u][h]},d),l[u]),l),{});i.store=new Xd(o,s),i.services.resourceStore=i.store}return i.translator=new da(i.services,s),i.translator.on("*",(o,...l)=>{i.emit(o,...l)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const be=Os.createInstance();be.createInstance=Os.createInstance;be.createInstance;be.dir;be.init;be.loadResources;be.reloadResources;be.use;be.changeLanguage;be.getFixedT;be.t;be.exists;be.setDefaultNamespace;be.hasLoadedNamespace;be.loadNamespaces;be.loadLanguages;const{slice:Ck,forEach:Ek}=[];function jk(t){return Ek.call(Ck.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function bk(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const lh=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Rk=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let i=`${t}=${s}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!lh.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!lh.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},uh={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=Rk(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Tk={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return uh.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=e;n&&typeof document<"u"&&uh.create(n,t,r,s,i)}},Nk={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const a=s.substring(1).split("&");for(let o=0;o<a.length;o++){const l=a[o].indexOf("=");l>0&&a[o].substring(0,l)===e&&(n=a[o].substring(l+1))}}return n}},Pk={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const a=i.substring(1);if(e){const o=a.split("&");for(let l=0;l<o.length;l++){const u=o[l].indexOf("=");u>0&&o[l].substring(0,u)===e&&(r=o[l].substring(u+1))}}if(r)return r;if(!r&&n>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?(s=o[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let er=null;const ch=()=>{if(er!==null)return er;try{if(er=typeof window<"u"&&window.localStorage!==null,!er)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{er=!1}return er};var Lk={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&ch())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&ch()&&window.localStorage.setItem(n,t)}};let tr=null;const dh=()=>{if(tr!==null)return tr;try{if(tr=typeof window<"u"&&window.sessionStorage!==null,!tr)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{tr=!1}return tr};var $k={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&dh())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&dh()&&window.sessionStorage.setItem(n,t)}},Ik={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},Ak={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Ok={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},Dk={name:"subdomain",lookup(t){var s,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Ip=!1;try{document.cookie,Ip=!0}catch{}const Ap=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ip||Ap.splice(1,1);const Fk=()=>({order:Ap,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Op{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=jk(n,this.options||{},Fk()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Tk),this.addDetector(Nk),this.addDetector(Lk),this.addDetector($k),this.addDetector(Ik),this.addDetector(Ak),this.addDetector(Ok),this.addDetector(Dk),this.addDetector(Pk)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!bk(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Op.type="languageDetector";const Mk={brand:"Sonsoles Stays",dashboard:"Dashboard",healthCheck:"Health Check",listings:"Listings",reservations:"Reservations",tasks:"Tasks",todos:"TODOs",threads:"Threads",myTasks:"My Tasks",adminBadge:"Admin",cleanerBadge:"Cleaner",signOut:"Sign Out"},Uk={title:"Threads",searchPlaceholder:"Search threads...",noThreadsFound:"No threads found",yesterday:"Yesterday",listingTitle:"Listing: {{id}}",reservationTitle:"Reservation: {{id}}",channelThread:"{{channel}} Thread",noParticipants:"No participants",participantsWithMore:"{{participants}} +{{count}}",selectThread:"Select a thread to view messages",selectThreadDescription:"Choose a thread from the sidebar to see the conversation",noMessages:"No messages in this thread yet",loading:"Loading threads...",error:"Error",retry:"Retry",errorLoadingThreads:"Failed to load threads",errorLoadingMessages:"Failed to load messages",draftMessage:"Draft Message",draftingMessage:"Drafting message...",draftedMessage:"Drafted Message",closeDraft:"Close draft",errorDraftingMessage:"Failed to draft message",noDraftMessage:"No Draft Message",selectThreadToDraft:"Create AI-powered responses for your selected conversation",contextLabel:"Give Maddie AI Bot arbitrary context",messageLabel:"Message",generateResponse:"Generate Response"},zk={welcome:"Welcome to Sonsoles Stays!",signInDescription:"Please sign in to access your stay management system.",signingIn:"Signing in...",signInWithGoogle:"Sign in with Google",authenticating:"🔐 Authenticating...",pleaseWait:"Please wait while we complete your sign-in.",authenticationError:"❌ Authentication Error",returnToLogin:"Return to Login",unexpectedError:"An unexpected error occurred during authentication.",noAccessToken:"No access token available",authenticationFailed:"Authentication failed. Please sign in again."},Vk={title:"Dashboard",welcome:"Welcome to your stay management system",comingSoon:"Dashboard Coming Soon",comingSoonDescription:"Your main dashboard will be available here."},Bk={management:"Task Management",myTasks:"My Tasks",totalTasks:"Total Tasks: {{count}}",loading:"Loading...",loginRequired:"Please log in to view your tasks.",details:"Task Details",information:"Task Information",actions:"Actions",acceptTask:"Accept Task",startTask:"Start Task",completeTask:"Complete Task",acceptCompletion:"Accept Completion",acceptedByAdmin:"Accepted by Admin",noFurtherEdits:"No further edits allowed",loadingDetails:"Loading task details...",errorLoading:"Error Loading Task",goBack:"Go Back",notFound:"Task Not Found",notFoundDescription:"The requested task could not be found.",back:"Back",notSet:"Not set"},Hk={searchPlaceholder:"Search all columns...",showingEntries:"Showing {{start}} to {{end}} of {{total}} entries",showingCount:"Showing {{count}} of {{total}} entries",noData:"No Data Found",noResults:"No results match your search criteria.",noDataAvailable:"No data available.",pageInfo:"Page {{current}} of {{total}}",showSize:"Show {{size}}",loadingData:"Loading data...",failedToLoad:"Failed to Load Data"},qk={id:"ID",title:"Title",task:"Task",type:"Type",status:"Status",description:"Description",listing:"Listing",reservation:"Reservation",scheduled:"Scheduled",assignedTo:"Assigned To",assignedAt:"Assigned At",acceptedAt:"Accepted At",completedAt:"Completed At",created:"Created",na:"N/A",view:"View",accept:"Accept",start:"Start",complete:"Complete",cancel:"Cancel",edit:"Edit",save:"Save"},Gk={unassigned:"Unassigned",assigned:"Assigned",accepted:"Accepted",in_progress:"In Progress",completed:"Completed",admin_accepted:"Admin Accepted"},Wk={guest:"Guest",property:"Property",checkIn:"Check-in",checkOut:"Check-out",nights:"Nights",guests:"Guests",total:"Total",hostPayout:"Host Payout"},Kk={checkingAccess:"Checking admin access...",authenticationRequired:"Authentication Required",signInToAccess:"Please sign in to access this page.",adminAccessRequired:"Admin Access Required",noAdminPrivileges:"You do not have admin privileges to access this page."},Qk={unassigned:"Unassigned",loading:"Loading...",unknown:"Unknown"},Jk={loading:"Loading..."},Yk={history:"Audit History",entries:"entries",loading:"Loading audit history...",noHistory:"No audit history available for this task.",by:"by",noDescription:"No description available",fieldsChanged:"Fields changed",valuesChanged:"Values changed",context:"Context",system:"System",unknownUser:"Unknown User"},Xk={title:"System Health Check",monitoring:"Monitoring system status and connectivity",failed:"Health Check Failed",loading:"Loading health status...",reloadPage:"Reload Page",healthy:"Healthy",error:"Error",connected:"Connected",configured:"Configured"},Zk={allTodos:"All TODOs",totalTodos:"Total TODOs: {{count}}",loadingTodos:"Loading TODOs...",filterByStatus:"Filter by Status:",all:"All",pending:"Pending",done:"Done",createGeneral:"Create General TODO",createNew:"Create New TODO",adminAccessRequired:"Admin access required to view all TODOs.",attachedTo:"Attached To",unattached:"Unattached",delete:"Delete",deleteConfirm:"Are you sure you want to delete this TODO?",creating:"Creating...",addNote:"Add Note",adding:"Adding...",noListingAssignment:"No listing assignment",description:"Description",failedToLoad:"Failed to load listings",addTodo:"Add TODO",noTodosFound:"No TODOs found.",createdLabel:"Created: ",completedLabel:"Completed: ",attachedToLabel:"Attached to: ",productsNeeded:"Products needed:",markAsDone:"Mark as done",title:"Title *",titlePlaceholder:"e.g., Fix the AC, Buy cleaning supplies",assignToListing:"Assign to Listing (Optional)",loadingListings:"Loading listings...",products:"Products (Optional)",searchProductsPlaceholder:"Search for products to add...",selectedProducts:"Selected Products:",remove:"Remove",detailsPlaceholder:"Additional details or notes...",cancel:"Cancel"},eC={title:"Listings",details:"Listing Details",totalListings:"Total listings: {{count}}",loadingListings:"Loading listings...",loadingDetails:"Loading listing details...",address:"Address",basicInformation:"Basic Information",dates:"Dates",amenities:"Amenities",listingTodos:"Listing TODOs",listingChat:"Listing Chat",notFound:"Listing not found",notFoundWithId:'The listing with ID "{{id}}" was not found.',failedToLoad:"Failed to load listing",listingId:"Listing ID",airbnbId:"Airbnb ID",propertyType:"Property Type",roomType:"Room Type",bedrooms:"Bedrooms",bathrooms:"Bathrooms",maxGuests:"Max Guests",created:"Created",updated:"Updated"},tC={accessRequired:"Access Required"},nC={title:"Notes",unknownUser:"Unknown User",send:"Send",sending:"...",deleteNote:"Delete note",deleteConfirm:"Are you sure you want to delete this note?",loadingNotes:"Loading notes...",noNotesYet:"No notes yet. Start the conversation!",attachedToLabel:"Attached to: ",typePlaceholder:"Type a note... (Press Enter to send, Shift+Enter for new line)",noteLabel:"Note:",notePlaceholder:"Enter your note...",errorOccurred:"An error occurred"},rC={noAddress:"No address"},sC={collapseAudit:"Collapse audit history",expandAudit:"Expand audit history",titleLabel:"Title:",statusLabel:"Status:",scheduledLabel:"Scheduled Date:",listingIdLabel:"Listing ID:",assignedToLabel:"Assigned To:",startedAtLabel:"Started At:",finishedAtLabel:"Finished At:",productHelper:"Product Replenishment Helper",taskTab:"Task",listingTab:"Listing"},iC={overallStatus:"Overall Status:",authenticatedUser:"Authenticated User:",database:"Database:",version:"Version: ",supabaseApi:"Supabase API:",environment:"Environment:",lastChecked:"Last checked: ",systemLabel:"System",null:"null"},aC={english:"English",spanish:"Español"},oC={navigation:Mk,threads:Uk,auth:zk,dashboard:Vk,tasks:Bk,dataTable:Hk,columns:qk,statuses:Gk,reservations:Wk,admin:Kk,assignment:Qk,common:Jk,audit:Yk,healthCheck:Xk,todos:Zk,listings:eC,cleaner:tC,notes:nC,forms:rC,taskDetail:sC,system:iC,language:aC},lC={brand:"Sonsoles Stays",dashboard:"Panel de Control",healthCheck:"Verificación de Estado",listings:"Propiedades",reservations:"Reservas",tasks:"Tareas",todos:"Tareas Pendientes",threads:"Conversaciones",myTasks:"Mis Tareas",adminBadge:"Administrador",cleanerBadge:"Limpiador",signOut:"Cerrar Sesión"},uC={title:"Conversaciones",searchPlaceholder:"Buscar conversaciones...",noThreadsFound:"No se encontraron conversaciones",yesterday:"Ayer",listingTitle:"Propiedad: {{id}}",reservationTitle:"Reserva: {{id}}",channelThread:"Conversación {{channel}}",noParticipants:"Sin participantes",participantsWithMore:"{{participants}} +{{count}}",selectThread:"Selecciona una conversación para ver mensajes",selectThreadDescription:"Elige una conversación de la barra lateral para ver la conversación",noMessages:"Aún no hay mensajes en esta conversación",loading:"Cargando conversaciones...",error:"Error",retry:"Reintentar",errorLoadingThreads:"Error al cargar conversaciones",errorLoadingMessages:"Error al cargar mensajes",draftMessage:"Redactar Mensaje",draftingMessage:"Redactando mensaje...",draftedMessage:"Mensaje Redactado",closeDraft:"Cerrar borrador",errorDraftingMessage:"Error al redactar mensaje",noDraftMessage:"Sin Mensaje Borrador",selectThreadToDraft:"Crea respuestas potenciadas por IA para tu conversación seleccionada",contextLabel:"Dale contexto arbitrario al Bot IA Maddie",messageLabel:"Mensaje",generateResponse:"Generar Respuesta"},cC={welcome:"Bienvenido a Sonsoles Stays",signInDescription:"Por favor, inicia sesión para acceder a tu sistema de gestión de estancias.",signingIn:"Iniciando sesión...",signInWithGoogle:"Iniciar sesión con Google",authenticating:"🔐 Autenticando...",pleaseWait:"Por favor, espera mientras completamos tu inicio de sesión.",authenticationError:"❌ Error de Autenticación",returnToLogin:"Volver al Inicio de Sesión",unexpectedError:"Ocurrió un error inesperado durante la autenticación.",noAccessToken:"No hay token de acceso disponible",authenticationFailed:"La autenticación falló. Por favor, inicia sesión nuevamente."},dC={title:"Panel de Control",welcome:"Bienvenido a tu sistema de gestión de estancias",comingSoon:"Panel de Control Próximamente",comingSoonDescription:"Tu panel de control principal estará disponible aquí."},hC={management:"Gestión de Tareas",myTasks:"Mis Tareas",totalTasks:"Total de Tareas: {{count}}",loading:"Cargando...",loginRequired:"Por favor, inicia sesión para ver tus tareas.",details:"Detalles de la Tarea",information:"Información de la Tarea",actions:"Acciones",acceptTask:"Aceptar Tarea",startTask:"Iniciar Tarea",completeTask:"Completar Tarea",acceptCompletion:"Aceptar Finalización",acceptedByAdmin:"Aceptado por Administrador",noFurtherEdits:"No se permiten más ediciones",loadingDetails:"Cargando detalles de la tarea...",errorLoading:"Error al Cargar la Tarea",goBack:"Volver",notFound:"Tarea No Encontrada",notFoundDescription:"La tarea solicitada no pudo ser encontrada.",back:"Atrás",notSet:"No establecido"},fC={searchPlaceholder:"Buscar en todas las columnas...",showingEntries:"Mostrando {{start}} a {{end}} de {{total}} entradas",showingCount:"Mostrando {{count}} de {{total}} entradas",noData:"No Se Encontraron Datos",noResults:"No hay resultados que coincidan con tus criterios de búsqueda.",noDataAvailable:"No hay datos disponibles.",pageInfo:"Página {{current}} de {{total}}",showSize:"Mostrar {{size}}",loadingData:"Cargando datos...",failedToLoad:"Error al Cargar Datos"},gC={id:"ID",title:"Título",task:"Tarea",type:"Tipo",status:"Estado",description:"Descripción",listing:"Propiedad",reservation:"Reserva",scheduled:"Programado",assignedTo:"Asignado A",assignedAt:"Asignado En",acceptedAt:"Aceptado En",completedAt:"Completado En",created:"Creado",na:"N/A",view:"Ver",accept:"Aceptar",start:"Iniciar",complete:"Completar",cancel:"Cancelar",edit:"Editar",save:"Guardar"},pC={unassigned:"Sin Asignar",assigned:"Asignada",accepted:"Aceptada",in_progress:"En Progreso",completed:"Completada",admin_accepted:"Aceptada por Administrador"},mC={guest:"Huésped",property:"Propiedad",checkIn:"Llegada",checkOut:"Salida",nights:"Noches",guests:"Huéspedes",total:"Total",hostPayout:"Pago al Anfitrión"},vC={checkingAccess:"Verificando acceso de administrador...",authenticationRequired:"Autenticación Requerida",signInToAccess:"Por favor, inicia sesión para acceder a esta página.",adminAccessRequired:"Acceso de Administrador Requerido",noAdminPrivileges:"No tienes privilegios de administrador para acceder a esta página."},yC={unassigned:"Sin Asignar",loading:"Cargando...",unknown:"Desconocido"},wC={loading:"Cargando..."},SC={history:"Historial de Auditoría",entries:"entradas",loading:"Cargando historial de auditoría...",noHistory:"No hay historial de auditoría disponible para esta tarea.",by:"por",noDescription:"No hay descripción disponible",fieldsChanged:"Campos modificados",valuesChanged:"Valores modificados",context:"Contexto",system:"Sistema",unknownUser:"Usuario Desconocido"},_C={title:"Verificación de Estado del Sistema",monitoring:"Monitoreando estado del sistema y conectividad",failed:"Verificación de Estado Falló",loading:"Cargando estado de salud...",reloadPage:"Recargar Página",healthy:"Saludable",error:"Error",connected:"Conectado",configured:"Configurado"},xC={allTodos:"Todas las Tareas",totalTodos:"Total de Tareas: {{count}}",loadingTodos:"Cargando tareas...",filterByStatus:"Filtrar por Estado:",all:"Todas",pending:"Pendientes",done:"Completadas",createGeneral:"Crear Tarea General",createNew:"Crear Nueva Tarea",adminAccessRequired:"Se requiere acceso de administrador para ver todas las tareas.",attachedTo:"Adjuntado A",unattached:"Sin Adjuntar",delete:"Eliminar",deleteConfirm:"¿Estás seguro de que quieres eliminar esta tarea?",creating:"Creando...",addNote:"Agregar Nota",adding:"Agregando...",noListingAssignment:"Sin asignación de propiedad",description:"Descripción",failedToLoad:"Error al cargar propiedades",addTodo:"Agregar Tarea",noTodosFound:"No se encontraron tareas.",createdLabel:"Creado: ",completedLabel:"Completado: ",attachedToLabel:"Adjuntado a: ",productsNeeded:"Productos necesarios:",markAsDone:"Marcar como completado",title:"Título *",titlePlaceholder:"ej., Arreglar el aire acondicionado, Comprar suministros de limpieza",assignToListing:"Asignar a Propiedad (Opcional)",loadingListings:"Cargando propiedades...",products:"Productos (Opcional)",searchProductsPlaceholder:"Buscar productos para agregar...",selectedProducts:"Productos Seleccionados:",remove:"Quitar",detailsPlaceholder:"Detalles adicionales o notas...",cancel:"Cancelar"},kC={title:"Propiedades",details:"Detalles de la Propiedad",totalListings:"Total de propiedades: {{count}}",loadingListings:"Cargando propiedades...",loadingDetails:"Cargando detalles de la propiedad...",address:"Dirección",basicInformation:"Información Básica",dates:"Fechas",amenities:"Amenidades",listingTodos:"Tareas de la Propiedad",listingChat:"Chat de la Propiedad",notFound:"Propiedad no encontrada",notFoundWithId:'La propiedad con ID "{{id}}" no fue encontrada.',failedToLoad:"Error al cargar propiedad",listingId:"ID de Propiedad",airbnbId:"ID de Airbnb",propertyType:"Tipo de Propiedad",roomType:"Tipo de Habitación",bedrooms:"Habitaciones",bathrooms:"Baños",maxGuests:"Máximo de Huéspedes",created:"Creado",updated:"Actualizado"},CC={accessRequired:"Acceso Requerido"},EC={title:"Notas",unknownUser:"Usuario Desconocido",send:"Enviar",sending:"...",deleteNote:"Eliminar nota",deleteConfirm:"¿Estás seguro de que quieres eliminar esta nota?",loadingNotes:"Cargando notas...",noNotesYet:"Aún no hay notas. ¡Comienza la conversación!",attachedToLabel:"Adjuntado a: ",typePlaceholder:"Escribe una nota... (Presiona Enter para enviar, Shift+Enter para nueva línea)",noteLabel:"Nota:",notePlaceholder:"Ingresa tu nota...",errorOccurred:"Ocurrió un error"},jC={noAddress:"Sin dirección"},bC={collapseAudit:"Contraer historial de auditoría",expandAudit:"Expandir historial de auditoría",titleLabel:"Título:",statusLabel:"Estado:",scheduledLabel:"Fecha Programada:",listingIdLabel:"ID de Propiedad:",assignedToLabel:"Asignado A:",startedAtLabel:"Iniciado En:",finishedAtLabel:"Finalizado En:",productHelper:"Asistente de Reposición de Productos",taskTab:"Tarea",listingTab:"Propiedad"},RC={overallStatus:"Estado General:",authenticatedUser:"Usuario Autenticado:",database:"Base de Datos:",version:"Versión: ",supabaseApi:"API de Supabase:",environment:"Entorno:",lastChecked:"Última verificación: ",systemLabel:"Sistema",null:"nulo"},TC={english:"English",spanish:"Español"},NC={navigation:lC,threads:uC,auth:cC,dashboard:dC,tasks:hC,dataTable:fC,columns:gC,statuses:pC,reservations:mC,admin:vC,assignment:yC,common:wC,audit:SC,healthCheck:_C,todos:xC,listings:kC,cleaner:CC,notes:EC,forms:jC,taskDetail:bC,system:RC,language:TC},PC={en:{translation:oC},es:{translation:NC}};be.use(Op).use(w_).init({resources:PC,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],lookupLocalStorage:"preferred-language",caches:["localStorage"]},supportedLngs:["en","es"],lng:"en",ns:["translation"],defaultNS:"translation"});function LC(){return c.jsx("div",{className:"app",children:c.jsx(C_,{children:c.jsx(o_,{children:c.jsx(Nw,{children:c.jsxs(ow,{children:[c.jsx(Be,{path:"/auth/callback",element:c.jsx(tk,{})}),c.jsx(Be,{path:"/",element:c.jsx(So,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx(nk,{})})]})})}),c.jsx(Be,{path:"/healthcheck",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(rk,{})})})]})})}),c.jsx(Be,{path:"/admin",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx($x,{})})})]})})}),c.jsx(Be,{path:"/admin/tasks",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Fx,{})})})]})})}),c.jsx(Be,{path:"/admin/todos",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(zx,{})})})]})})}),c.jsx(Be,{path:"/admin/threads",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content threads-main-content",children:c.jsx("div",{className:"content-container threads-content-container",children:c.jsx(Wd,{})})})]})})}),c.jsx(Be,{path:"/admin/threads/:threadId",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content threads-main-content",children:c.jsx("div",{className:"content-container threads-content-container",children:c.jsx(Wd,{})})})]})})}),c.jsx(Be,{path:"/listings",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Gx,{})})})]})})}),c.jsx(Be,{path:"/cleaner/tasks",element:c.jsx(So,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Wx,{})})})]})})}),c.jsx(Be,{path:"/tasks/:id",element:c.jsx(So,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Xx,{})})})]})})}),c.jsx(Be,{path:"/listing/:id",element:c.jsx(Yt,{children:c.jsxs("div",{className:"app-content",children:[c.jsx(dt,{}),c.jsx("main",{className:"main-content",children:c.jsx("div",{className:"content-container",children:c.jsx(Zx,{})})})]})})})]})})})})})}const Dp=document.getElementById("root");if(!Dp)throw new Error("Root element not found");Po.createRoot(Dp).render(c.jsx(LC,{}));
